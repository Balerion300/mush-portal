{"version":3,"sources":["modules/Settings/colorpicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/Chargen/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","client/emulator.js","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","modules/Sendmail/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Upload/index.jsx","client/connection.js","client/userinput.js","client/utils.js","client/jsonapi.js","client/index.js","index.js"],"names":["ColorPicker","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","show","event","setState","anchor","currentTarget","hide","choose","color","value","onChange","state","offset","background","rows","i","j","colors","push","bgfix","_this2","_this$props","classes","label","_this$state","react_default","a","createElement","Button_default","aria-haspopup","aria-owns","onClick","className","Popover_default","popover","id","anchorEl","open","Boolean","onClose","map","key","classNames","swatch","React","Component","withStyles","theme","overflow","cursor","margin","border","padding","height","width","lineHeight","withTheme","Settings","handleSwitch","name","window","client","changeSetting","target","checked","defineProperty","settings","saveSettings","react","portal","forceUpdate","handleValue","handleColor","showColor","colorAnchor","closeColor","chooseColor","loadSettings","objectSpread","resetSettings","confirm","assign","defaultSettings","closeDrawer","debugEvents","decompileEditor","decompileKey","ansiFG","ansiBG","wrapWidth","invertHighlight","sidebarOpen","sidebarAnchor","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","sidebarWidth","frame","left","content","tabIndex","role","List_default","disablePadding","dense","subheader","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","primary","ListItemSecondaryAction_default","Switch_default","WrapText_default","TextField_default","type","Palette_default","colorpicker","Edit_default","Code_default","helperText","VerticalSplit_default","disabled","PictureInPicture_default","Icon_default","BorderLeft_default","BorderRight_default","FormatIndentIncrease_default","AccountCircle_default","GroupWork_default","Explore_default","right","buttons","reset","close","position","display","flexDirection","justifyContent","alignItems","flex","flexFlow","paddingLeft","marginRight","spacing","unit","BadgeIcon","count","Badge_default","badgeContent","children","Taskbar","openDrawer","closeMenu","focus","setTitle","t","title","clearScreen","clear","sendCommand","cmd","sendText","txt","sendAPI","args","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","pushTask","task","taskbar","popTask","indexOf","splice","unsmallify","front","showMenu","menuAnchor","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","preventDefault","length","showUpload","file","uploadAnchor","closeUpload","insertCommand","input","root","closeHistory","clearHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","url","previewUpload","addReactPanel","upload","setText","handleFile","files","reader","FileReader","onload","result","readAsText","handleURL","startsWith","req","XMLHttpRequest","onreadystatechange","readyState","status","responseText","alert","send","history","createRef","conn","reconnect","rev","slice","reverse","AppBar_default","Toolbar_default","disableGutters","Typography_default","variant","noWrap","Tooltip_default","headertitle","innerText","tasklabel","taskbutton","aria-label","Tab_default","taskicon","tasksep","RemoveRedEye_default","BusinessCenter_default","People_default","Forum_default","Mail_default","Search_default","icons_Menu_default","SwipeableDrawer_default","onOpen","modules_Settings","onSubmit","padded","autoComplete","autoFocus","fullWidth","InputProps","inputProps","style","textAlign","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","component","historyPopover","button","divider","Menu_default","disableEnforceFocus","MenuItem_default","Settings_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","flexGrow","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","overflowY","Terminal","focusInput","onResize","output","calcDimensions","Math","floor","parentNode","clientHeight","dims","scrollDown","lines","linesOfScroll","terminal","prompt","init","document","addEventListener","initOutput","current","initPrompt","dim","containerRef","ref","onScroll","maxWidth","scrollcount","align","flex-flow","background-color","palette","main","font-family","font-weight","font-size","breakpoints","down","overflowX","white-space","word-wrap","text-align","vertical-align","bottom","Input","initInput","text","outline","resize","Statusbar","statusbar","Login","openLogin","msg","closeLogin","submitLogin","username","getElementById","password","str","submitGuest","submitCreate","catchReturn","e","login","Dialog_default","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","IconButton_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","withMobileDialog","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","Sidebar","go","exit","_window$client","jsonapi","delayContents","clearTimeout","getContents","setTimeout","action","matchExit","ucExits","split","buildExit","uc","toUpperCase","exits","things","players","friends","customExits","useCompass","forEach","keys","_loop","fullexit","match","n","obj","player","_this$state2","sidebar","exitWidget","navWidget","_this3","_this$state3","parseExits","exitItem","contents","playerItem","ListItemAvatar_default","Avatar_default","p","join","thing","thingItem","minWidth","backgroundColor","paper","flexShrink","-webkit-transform","transform","Portal","middle","dock","scrollTo","container","_window$client$settin","modules_Sidebar","core_styles","top","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","Chargen","MailListItem","icon","mail","quickDelete","handleMark","selected","deleted","Delete_default","unread","read","urgent","PriorityHigh_default","Drafts_default","even","odd","listicon","subject","secondary","from","time","CheckCircle_default","Cancel_default","opacity","MailList","purgeMail","mailbox","sendMail","toggleDelete","openMail","maillist","header","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","Emulator","onCommand","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","substring","ii","undefined","ANSI_NORMAL","parseInt","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","start","end","next","encodeState","ansiClass","span","stack","appendChild","createTextNode","lineBuf","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","data","ilen","ch","PARSE_CR","abortParse","endLine","applyANSI","html","div","fragment","createDocumentFragment","innerHTML","child","firstChild","nextSibling","getAttribute","setAttribute","removeAttribute","classid","message","element","console","warn","tag","attrs","idx","selfClosing","UNCLOSED_TAGS","toLowerCase","search","replace","pushElement","popElement","line","threshold","temp","nodeName","fontFamily","fontSize","clientWidth","removeChild","round","abs","scrollHeight","offsetHeight","scrollTop","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","body","emulator","appendText","Card_default","card","CardHeader_default","sub","CardContent_default","wrap","CardActions_default","actions","Reply_default","Forward_default","MoreVert_default","marginLeft","justify-content","overflow-y","overflow-x","Mailbox","mailitem","folder","folderlist","_this$state4","_this$state5","to","sendmail","focusPanel","setFields","panelSize","_this$state6","Mailbox_MailList","Mailbox_MailItem","Sendmail","chips","realsub","substr","closePanel","handleChange","changeText","editor","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","endsWith","panel","options","resizeit","panels","ChipInput_default","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","FormHelperTextProps","stretch","lib_default","bodytext","mode","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","Send_default","BBListItem","board","posts","lastmod","BBList","openBoard","boardlist","BBoard_BBListItem","BBMessageListItem","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","BBoard","openBB","openBBMsg","bbmsg","bboard","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","Upload","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","delay","newtext","readOnly","stretchflex","pad","Pause_default","Redo_default","Connection","socket","isOpen","onError","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","that","isConnected","WebSocket","onopen","evt","onerror","onclose","onmessage","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","UserInput","selectionStart","selectionStop","onEnter","onEscape","onPageUp","onPageDown","keyCycleForward","keyCycleBackward","onkeydown","onkeyup","onKeyDown","onKeyUp","code","ctrl","keyCode","which","ctrlKey","shift","shiftKey","alt","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","saveCommand","moveCursor","pressKey","releaseKey","ncommand","save_current","selectionEnd","createTextRange","range","collapse","select","force","getSelection","toString","selection","createRange","activeElement","tagName","Utils","links","regex","lastIndex","exec","info","index","xch_cmd","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","href","command","val","JSONAPI","self","bbmsglist","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","Client","setBubble","hidden","tinycon","updateCounter","createTheme","events","jsPanel","serverAddress","serverPort","serverSSL","loggedIn","updateLines","eatNewline","scrollThreshold","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","render","defaultTheme","typography","useNextVariants","indigo","blueGrey","createMuiTheme","ReactDOM","src","async","getElementsByTagName","store","localStorage","String","hasOwnProperty","bind","Number","loadStyle","unloadStyle","parseCommand","scroll","nearBottom","appendMessage","_this4","scrollPageUp","scrollPageDown","_this5","arguments","onunload","onresize","fun","cfg","_this6","el","config","headerTitle","callback","MuiThemeProvider","create","getPanels","serverUrl","re_fugueedit","RegExp","insert","scrollIfNeeded","appendHTML","appendPueblo","op","gmcp","emit","_this7","astr","_this8","shortid","generate","on","removeAllListeners","_this9","filename","node","textContent","blob","Blob","saveAs","visibilityChange","_this10","msHidden","webkitHidden","setOptions","fallback","abbreviate","defaults","minimizeTo","onminimized","onclosed","unmountComponentAtNode","dragit","saveCursor","stop","resetCursor","loadScript"],"mappings":"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","file":"static/js/main.f8fffa81.chunk.js","sourcesContent":["\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n      value: props.value,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.setState({ value: color });\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor, value } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={value}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\n\nimport ColorPicker from './colorpicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentIncreaseIcon from '@material-ui/icons/FormatIndentIncrease';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    height: \"100%\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      colorAnchor: null,\n    };\n    \n    this.color = null;\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  showColor = name => event => {\n    this.color = name;\n    this.setState({ colorAnchor: event.currentTarget });\n  };\n  \n  closeColor = () => {\n    this.setState({ colorAnchor: null });\n  };\n  \n  chooseColor = color => event => {\n    this.setState({ [this.color]: \"ansi-\"+color });\n    this.closeColor();\n  };\n  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth, invertHighlight,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, colorAnchor, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarWidth } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <Popover id=\"settings.color\" anchorEl={colorAnchor} open={false} onClose={this.closeColor}>\n            </Popover>\n            \n            <List disablePadding dense subheader={<ListSubheader>Debugging</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Display Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <WrapTextIcon />\n                </ListItemIcon>\n                <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Background Color\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Foreground Color\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Swap black and white?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List disablePadding dense subheader={<ListSubheader>@decompile/tf</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <EditIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <CodeIcon />\n                </ListItemIcon>\n                <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Sidebar Display</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <VerticalSplitIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <PictureInPictureIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <Icon color=\"action\">\n                  <BorderLeftIcon />\n                </Icon>\n                <ListItemText primary=\"Left\" />\n                <Switch checked={sidebarAnchor === \"right\"}\n                  color=\"default\" disabled={!sidebarOpen}\n                  value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n                  onChange={this.handleValue('sidebarAnchor')}\n                />\n                <ListItemText primary=\"Right\" />\n                <Icon color=\"action\">\n                  <BorderRightIcon />\n                </Icon>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <FormatIndentIncreaseIcon />\n                </ListItemIcon>\n                <TextField label=\"Sidebar Width\" value={sidebarWidth} onChange={this.handleValue('sidebarWidth')} />\n              </ListItem>\n            </List>\n            \n            <List disabled={!sidebarOpen} disablePadding dense subheader={<ListSubheader>Sidebar Content</ListSubheader>}>\n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <AccountCircleIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show players?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <GroupWorkIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show things?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MailIcon from '@material-ui/icons/Mail';\nimport ForumIcon from '@material-ui/icons/Forum';\nimport TabIcon from '@material-ui/icons/Tab';\nimport PeopleIcon from '@material-ui/icons/People';\nimport RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport BusinessCenterIcon from '@material-ui/icons/BusinessCenter';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport SearchIcon from '@material-ui/icons/Search';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    margin: '0 20px',\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n//    display: \"flex\",\n//    \"flex-direction\": \"column\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  if (props.count > 0) {\n    return (\n      <Badge badgeContent={props.count} color=\"error\">\n        {props.children}\n      </Badge>\n    );\n  }\n  return props.children;\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n  \n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    taskbar.push(task);\n    this.setState({ taskbar });\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n  \n  previewUpload = () => {\n    window.client.addReactPanel(\"Upload\");\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.conn.reconnect();\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, unreadBB, unreadMail, historyAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n\n    var rev = input ? input.history.slice().reverse() : [];\n    \n    return (\n      <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n        <Toolbar disableGutters={!this.state.open}>\n          <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n            {title}\n          </Typography>\n          <div className={classes.flex}></div>\n          {taskbar.map((task,i) => (\n            <Tooltip key={i} title={task.headertitle.innerText}>\n              <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n                <TabIcon className={classes.taskicon} />\n                {task.headertitle.innerText}\n              </Button>\n            </Tooltip>\n          ))}\n          \n          <div className={classes.tasksep}></div>\n          \n          <Tooltip title=\"Look around.\">\n            <Button aria-label=\"send-look\" onClick={() => { this.sendCommand(\"look\"); this.sendAPI(\"listcontents\"); }}>\n              <RemoveRedEyeIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"What am I carrying?\">\n            <Button aria-label=\"send-inventory\" onClick={() => this.sendCommand(\"inventory\")}>\n              <BusinessCenterIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"Who's online?\">\n            <Button aria-label=\"send-who\" onClick={() => this.sendCommand(\"who\")}>\n              <PeopleIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"Bulletin Boards\">\n            <Button aria-label=\"open-bbs\" onClick={() => this.sendAPI(\"boardlist\")}>\n              <BadgeIcon count={unreadBB}>\n                <ForumIcon />\n              </BadgeIcon>\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"@mail Inbox\">\n            <Button aria-label=\"open-mail\" onClick={() => this.sendAPI(\"maillist\")}>\n              <BadgeIcon count={unreadMail}>\n                <MailIcon />\n              </BadgeIcon>\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"Need help?\">\n            <Button aria-owns={helpAnchor ? 'taskbar.help' : null} aria-label=\"help\" aria-haspopup=\"true\" onClick={this.showHelp}>\n              <SearchIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"More tasks...\">\n            <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n              <MenuIcon />\n            </Button>\n          </Tooltip>\n          \n          <SwipeableDrawer\n            variant=\"temporary\"\n            anchor=\"top\"\n            open={open}\n            onClose={this.closeDrawer}\n            onOpen={this.openDrawer}\n          >\n            <Settings closeDrawer={this.closeDrawer} />\n          </SwipeableDrawer>\n\n          <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n            <form onSubmit={this.searchHelp}>\n              <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"false\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n            </form>\n            <Button fullWidth onClick={this.searchHelp}>\n              Get Help\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n            <form onSubmit={this.saveLog}>\n              <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                onChange={this.typeLog} autoFocus\n                InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n              />\n            </form>\n            <Button fullWidth onClick={this.saveLog}>\n              Save Log\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n            <form onSubmit={this.handleURL} className={classes.padded}>\n              <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n            </form>\n            <Button onClick={this.handleURL}>\n              Upload URL\n            </Button>\n            <input\n              accept=\"text/plain\"\n              className={classes.fileinput}\n              id=\"file.upload\"\n              type=\"file\"\n              onChange={this.handleFile}\n            />\n            <label htmlFor=\"file.upload\">\n              <Button component=\"span\">\n                Choose File\n              </Button>\n            </label>\n            <Button onClick={this.previewUpload}>\n              Paste Text\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n            <List className={classes.historyPopover}>\n              {rev.map((cmd, i) => (\n                <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                  <ListItemText primary={cmd} />\n                </ListItem>\n              ))}\n            </List>\n            <Button onClick={this.clearHistory}>\n              Clear History\n            </Button>\n          </Popover>\n          \n          <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n            <MenuItem onClick={this.closeMenu}>\n              <Tooltip title=\"Close menu.\">\n                <MenuIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openDrawer}>\n              <Tooltip title=\"Change settings.\">\n                <SettingsIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n              <Tooltip title=\"Upload file/URL.\">\n                <CloudUploadIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n              <Tooltip title=\"Save display log.\">\n                <SaveIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n              <Tooltip title=\"Show command history.\">\n                <KeyboardIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.clearScreen}>\n              <Tooltip title=\"Clear screen.\">\n                <BackspaceIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.reconnect}>\n              <Tooltip title=\"Reconnect.\">\n                <WifiIcon />\n              </Tooltip>\n            </MenuItem>            \n          </Menu>\n\n          <div className={classes.tasksep}></div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.addEventListener('resize', this.onResize);\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    this.forceUpdate();\n  }\n  \n  onResize = event => {\n    window.client.output.calcDimensions();\n    window.client.sendText(\"SCREENWIDTH \" + window.client.settings.wrapWidth);\n    window.client.sendText(\"SCREENHEIGHT \" + Math.floor(window.client.output.root.parentNode.clientHeight / window.client.output.dims.height));\n    window.client.output.scrollDown();\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classes.frame} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\">\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)}  autoComplete=\"off\" autoFocus></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \".\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        <Typography\n          align=\"right\"\n          color=\"textPrimary\"\n          noWrap\n        >\n          {status}\n        </Typography>\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst styles = theme => ({\n  frame: {\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n    position: \"relative\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <Dialog\n          open={open}\n          onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n          onClose={this.closeLogin}\n          aria-labelledby=\"responsive-dialog-title\"\n          disableBackdropClick\n          disableEscapeKeyDown\n        >\n          <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n            Character Login\n            <ListItemSecondaryAction>\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <span dangerouslySetInnerHTML={{ __html: msg }} />\n            </DialogContentText>\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"username\"\n              label=\"Character Name\"\n              type=\"string\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n              <PersonAddIcon />\n              Register\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n              <PersonOutlineIcon />\n              Guest\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n              <PersonIcon />\n              Login\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withMobileDialog()(withStyles(styles, { withTheme: true })(Login));\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    minWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'space-between',\n  },\n  contents: {\n    flexShrink: 1,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  playerItem: {\n    padding: 2,\n  },\n  thingItem: {\n  },\n  customExits: {\n    flexGrow: 1,\n    position: \"relative\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  navWidget: {\n    position: \"relative\",\n    bottom: 0,\n    left: \"50%\",\n    flexShrink: 0,\n    '-webkit-transform': 'translateX(-50%)',\n    transform: 'translateX(-50%)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (match === -1) {\n          match = keys.indexOf(exit);\n        }\n      });\n\n      if (match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarWidth, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n    var exitWidget;\n    var navWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.bottom}>\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Other Exits</ListSubheader>}>\n                {customExits.map((exit, i) => (\n                  <ListItem className={classes.exitItem} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                    <ListItemText primary={exit.split(\";\")[0]} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n          </div>\n        );\n      }\n      \n      if (this.useCompass) {\n        navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {this.buildExit(\"In\")}\n            {this.buildExit(\"East\")}\n            {this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={classes.frame} style={{ width: sidebarWidth }} onClick={() => window.client.focus()}>\n        <div className={classes.contents}>\n          <span>\n            {sidebarShowPlayers && players.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Players</ListSubheader>}>\n                {players.map((player, i) => (\n                  <ListItem disableGutters className={classes.playerItem} key={i}\n                    button onClick={() => this.sendCommand(\"look \"+player)}\n                  >\n                    <ListItemAvatar>\n                      <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText primary={player} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {sidebarShowThings && things.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Contents</ListSubheader>}>\n                {things.map((thing, i) => (\n                  <ListItem className={classes.thingItem} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                    <ListItemText primary={thing} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </span>\n        </div>\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarWidth: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  }\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarWidth } = window.client.settings;\n    \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarWidth={sidebarWidth} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  frame: {\n  },\n});\n\nclass Chargen extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  componentDidMount() {\n  }\n  \n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.frame}>Character Builder?</div>\n    );\n  }\n}\n\nChargen.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Chargen);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"inline-flex\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {maillist.length} Messages ({unread} unread)\n              <Tooltip title=\"Move multiple files to trash.\">\n                <IconButton onClick={this.toggleDelete}>\n                  <DeleteSweepIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Purge deleted mail.\">\n                <IconButton onClick={this.purgeMail}>\n                  <DeleteForeverIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Send a new message.\">\n                <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                  <CreateIcon />\n                </IconButton>\n              </Tooltip>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 100.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n\n  \n}\n\nexport default Emulator;\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body);\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addReactPanel(\"Sendmail\", { panelSize: \"30em 30em\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          { maillist && (\n            <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n          )}\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body });\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    var that = this;\n    \n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect(that);\n  }\n  \n  static reconnect(that) {\n    that.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect() {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n\n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n","class Utils {\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-1-37\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Utils.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n\n\n  //////////////////////////////////////////////////////////////////\n  // detect if more user input is required for a pueblo command\n  static parseCommand(command) {\n    var cmd = command;\n    var regex = /\\?\\?/;\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n}\n\nexport default Utils;\n\n","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Chargen from '../modules/Chargen';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport Utils from './utils';\nimport JSONAPI from './jsonapi';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.settings = {\n      // default emulator fg/bg\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      wrapWidth: 100,\n      invertHighlight: false,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarWidth: \"192px\",\n      sidebarAlwaysShow: true,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      // debugging\n      debugEvents: false,\n    };\n    this.defaultSettings = Object.assign({}, this.settings);\n    this.loadSettings();\n    \n    this.colors = Colors;\n    this.theme = this.createTheme();\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // App Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // default connection settings, can override in public/local.js\n    this.serverAddress = \"node.grapenut.org\";\n    this.serverPort = 2001;\n    this.serverSSL = true;\n\n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    var style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.getElementsByTagName(\"head\")[0].appendChild(style);\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n  }\n  \n  // load settings from localstorage\n  loadSettings() {\n    const store = window.localStorage;\n    Object.keys(this.settings).forEach((key) => {\n      if (store[\"settings_\"+key]) {\n        this.changeSetting(key, store[\"settings_\"+key]);\n      }\n    });\n  }\n  \n  // save settings to localstorage\n  saveSettings() {\n    const store = window.localStorage;\n    Object.keys(this.settings).forEach((key) => {\n      store[\"settings_\"+key] = String(this.settings[key]);\n    });\n  }\n  \n  // change a setting, casting the string argument to the correct type\n  changeSetting(key, value) {\n    if (!this.settings.hasOwnProperty(key)) return;\n    \n    var type = typeof this.settings[key];\n    \n    if (typeof value === type) {\n      this.settings[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          this.settings[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          this.settings[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          this.settings[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          this.settings[key] = value;\n          break;\n      }\n    }\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    }\n  }\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(Utils.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun()\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  addReactPanel(name, cfg) {\n    var el = null;\n    var obj = null;\n    switch (name) {\n      case 'Chargen':\n        el = Chargen;\n        break;\n      case 'Mailbox':\n        el = Mailbox;\n        obj = this.react.mailbox;\n        break;\n      case 'Upload':\n        el = Upload;\n        obj = this.react.upload;\n        break;\n      case 'Sendmail':\n        el = Sendmail;\n        obj = this.react.sendmail;\n        break;\n      case 'BBoard':\n        el = BBoard;\n        obj = this.react.bboard;\n        break;\n      default:\n        break;\n    }\n    \n    if (!el) {\n      return;\n    }\n    \n    if (obj) {\n      this.focusPanel(name);\n      return;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.headerTitle) {\n      config.headerTitle = name;\n    }\n    \n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      var child = React.createElement(el, { panel: container }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content);\n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n  }\n  \n  closePanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  focusPanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.serverAddress + \":\" + this.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n\n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addReactPanel(\"Upload\");\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      } else if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect() {\n    if (this.isConnected()) {\n      return;\n    }\n    \n    if (this.reconnectCount < this.reconnectMaxCount) {\n      this.reconnectCount++;\n      this.conn && this.conn.reconnect();\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n    if (this.isConnected()) {\n      if (cmd !== '') {\n        this.sendText(cmd);\n        this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n      }\n    } else {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content)\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput, Utils };\n\n","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n"],"sourceRoot":""}