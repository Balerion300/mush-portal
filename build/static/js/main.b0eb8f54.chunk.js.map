{"version":3,"sources":["modules/Theme/index.jsx","modules/Settings/colorpicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/Chargen/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","client/emulator.js","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","modules/Sendmail/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Upload/index.jsx","client/connection.js","client/userinput.js","client/utils.js","client/jsonapi.js","client/index.js","index.js"],"names":["Theme","createMuiTheme","typography","useNextVariants","palette","primary","indigo","secondary","blueGrey","type","ColorPicker","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","show","event","setState","anchor","currentTarget","hide","choose","color","value","onChange","state","offset","background","rows","i","j","colors","push","bgfix","_this2","_this$props","classes","label","_this$state","react_default","a","createElement","Button_default","aria-haspopup","aria-owns","onClick","className","Popover_default","popover","id","anchorEl","open","Boolean","onClose","map","key","classNames","swatch","React","Component","withStyles","theme","overflow","cursor","margin","border","padding","height","width","lineHeight","withTheme","Settings","handleSwitch","name","window","client","changeSetting","target","checked","defineProperty","settings","saveSettings","react","portal","forceUpdate","handleValue","handleColor","showColor","colorAnchor","closeColor","chooseColor","loadSettings","objectSpread","resetSettings","confirm","assign","defaultSettings","closeDrawer","debugEvents","decompileEditor","decompileKey","ansiFG","ansiBG","wrapWidth","invertHighlight","sidebarOpen","sidebarAnchor","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","sidebarWidth","frame","left","content","tabIndex","role","List_default","disablePadding","dense","subheader","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","ListItemSecondaryAction_default","Switch_default","WrapText_default","TextField_default","Palette_default","colorpicker","Edit_default","Code_default","helperText","VerticalSplit_default","disabled","PictureInPicture_default","Icon_default","BorderLeft_default","BorderRight_default","FormatIndentIncrease_default","AccountCircle_default","GroupWork_default","Explore_default","right","buttons","reset","close","position","display","flexDirection","justifyContent","alignItems","flex","flexFlow","paddingLeft","marginRight","spacing","unit","BadgeIcon","count","Badge_default","badgeContent","children","Taskbar","openDrawer","closeMenu","focus","setTitle","t","title","clearScreen","clear","sendCommand","cmd","sendText","txt","sendAPI","args","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","pushTask","task","taskbar","popTask","indexOf","splice","unsmallify","front","showMenu","menuAnchor","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","preventDefault","length","showUpload","file","uploadAnchor","closeUpload","insertCommand","input","root","closeHistory","clearHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","url","previewUpload","addReactPanel","upload","setText","handleFile","files","reader","FileReader","onload","result","readAsText","handleURL","startsWith","req","XMLHttpRequest","onreadystatechange","readyState","status","responseText","alert","send","history","createRef","conn","reconnect","rev","slice","reverse","AppBar_default","Toolbar_default","disableGutters","Typography_default","variant","noWrap","Tooltip_default","headertitle","innerText","tasklabel","taskbutton","aria-label","Tab_default","taskicon","tasksep","RemoveRedEye_default","BusinessCenter_default","People_default","Forum_default","Mail_default","Search_default","icons_Menu_default","SwipeableDrawer_default","onOpen","modules_Settings","onSubmit","padded","autoComplete","autoFocus","fullWidth","InputProps","inputProps","style","textAlign","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","component","historyPopover","button","divider","Menu_default","disableEnforceFocus","MenuItem_default","Settings_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","flexGrow","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","overflowY","Terminal","focusInput","onResize","output","calcDimensions","Math","floor","parentNode","clientHeight","dims","scrollDown","lines","linesOfScroll","terminal","prompt","init","document","addEventListener","initOutput","current","initPrompt","dim","containerRef","ref","onScroll","maxWidth","scrollcount","align","flex-flow","background-color","main","font-family","font-weight","font-size","breakpoints","down","overflowX","white-space","word-wrap","text-align","vertical-align","bottom","Input","initInput","text","outline","resize","Statusbar","statusbar","Login","openLogin","msg","closeLogin","submitLogin","username","getElementById","password","str","submitGuest","submitCreate","catchReturn","e","login","Dialog_default","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","IconButton_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","withMobileDialog","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","Sidebar","go","exit","_window$client","jsonapi","delayContents","clearTimeout","getContents","setTimeout","action","matchExit","ucExits","split","buildExit","uc","toUpperCase","exits","things","players","friends","customExits","useCompass","forEach","keys","_loop","fullexit","match","n","obj","player","_this$state2","sidebar","exitWidget","navWidget","_this3","_this$state3","parseExits","exitItem","contents","playerItem","ListItemAvatar_default","Avatar_default","p","join","thing","thingItem","minWidth","backgroundColor","paper","flexShrink","-webkit-transform","transform","Portal","middle","dock","scrollTo","container","_window$client$settin","modules_Sidebar","core_styles","top","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","Chargen","MailListItem","icon","mail","quickDelete","handleMark","selected","deleted","Delete_default","unread","read","urgent","PriorityHigh_default","Drafts_default","even","odd","listicon","subject","from","time","CheckCircle_default","Cancel_default","opacity","MailList","purgeMail","mailbox","sendMail","toggleDelete","openMail","maillist","header","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","Emulator","onCommand","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","substring","ii","undefined","ANSI_NORMAL","parseInt","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","start","end","next","encodeState","ansiClass","span","stack","appendChild","createTextNode","lineBuf","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","data","ilen","ch","PARSE_CR","abortParse","endLine","applyANSI","html","div","fragment","createDocumentFragment","innerHTML","child","firstChild","nextSibling","getAttribute","setAttribute","removeAttribute","classid","message","element","console","warn","tag","attrs","idx","selfClosing","UNCLOSED_TAGS","toLowerCase","search","replace","pushElement","popElement","line","threshold","temp","nodeName","fontFamily","fontSize","clientWidth","removeChild","round","abs","scrollHeight","offsetHeight","scrollTop","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","body","emulator","appendText","Card_default","card","CardHeader_default","sub","CardContent_default","wrap","CardActions_default","actions","Reply_default","Forward_default","MoreVert_default","marginLeft","justify-content","overflow-y","overflow-x","Mailbox","mailitem","folder","folderlist","_this$state4","_this$state5","to","sendmail","focusPanel","setFields","panelSize","_this$state6","Mailbox_MailList","Mailbox_MailItem","Sendmail","chips","realsub","substr","closePanel","handleChange","changeText","editor","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","endsWith","panel","options","resizeit","panels","ChipInput_default","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","FormHelperTextProps","stretch","lib_default","bodytext","mode","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","Send_default","BBListItem","board","posts","lastmod","BBList","openBoard","boardlist","BBoard_BBListItem","BBMessageListItem","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","BBoard","openBB","openBBMsg","bbmsg","bboard","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","Upload","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","delay","newtext","readOnly","stretchflex","pad","Pause_default","Redo_default","Connection","socket","isOpen","onError","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","that","isConnected","WebSocket","onopen","evt","onerror","onclose","onmessage","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","UserInput","selectionStart","selectionStop","onEnter","onEscape","onPageUp","onPageDown","keyCycleForward","keyCycleBackward","onkeydown","onkeyup","onKeyDown","onKeyUp","code","ctrl","keyCode","which","ctrlKey","shift","shiftKey","alt","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","saveCommand","moveCursor","pressKey","releaseKey","ncommand","save_current","selectionEnd","createTextRange","range","collapse","select","force","getSelection","toString","selection","createRange","activeElement","tagName","Utils","links","regex","lastIndex","exec","info","index","xch_cmd","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","href","command","val","JSONAPI","self","bbmsglist","listcontents","EventEmitter","require","TinyCon","LOGINFAIL","Client","setBubble","hidden","tinycon","updateCounter","events","jsPanel","serverAddress","serverPort","serverSSL","loggedIn","updateLines","eatNewline","scrollThreshold","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","src","async","getElementsByTagName","store","localStorage","String","hasOwnProperty","bind","Number","loadStyle","unloadStyle","parseCommand","scroll","nearBottom","appendMessage","_this4","scrollPageUp","scrollPageDown","_this5","arguments","onunload","onresize","fun","cfg","el","config","headerTitle","callback","ReactDOM","render","MuiThemeProvider","create","getPanels","serverUrl","re_fugueedit","RegExp","insert","scrollIfNeeded","appendHTML","appendPueblo","op","gmcp","emit","_this6","astr","_this7","shortid","generate","on","removeAllListeners","_this8","filename","node","textContent","blob","Blob","saveAs","visibilityChange","_this9","msHidden","webkitHidden","setOptions","fallback","abbreviate","defaults","minimizeTo","onminimized","onclosed","unmountComponentAtNode","dragit","saveCursor","stop","resetCursor","loadScript"],"mappings":"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","file":"static/js/main.b0eb8f54.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\nimport blueGrey from '@material-ui/core/colors/blueGrey';\nimport indigo from '@material-ui/core/colors/indigo';\n\nconst Theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n//    suppressDeprecationWarnings: true,\n  },\n  palette: {\n    primary: indigo,\n    secondary: blueGrey,\n    type: 'dark',\n  },\n});\n\nexport default Theme;\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n      value: props.value,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.setState({ value: color });\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor, value } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={value}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\n\nimport ColorPicker from './colorpicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentIncreaseIcon from '@material-ui/icons/FormatIndentIncrease';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    height: \"100%\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      colorAnchor: null,\n    };\n    \n    this.color = null;\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  showColor = name => event => {\n    this.color = name;\n    this.setState({ colorAnchor: event.currentTarget });\n  };\n  \n  closeColor = () => {\n    this.setState({ colorAnchor: null });\n  };\n  \n  chooseColor = color => event => {\n    this.setState({ [this.color]: \"ansi-\"+color });\n    this.closeColor();\n  };\n  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth, invertHighlight,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, colorAnchor, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarWidth } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <Popover id=\"settings.color\" anchorEl={colorAnchor} open={false} onClose={this.closeColor}>\n            </Popover>\n            \n            <List disablePadding dense subheader={<ListSubheader>Debugging</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Display Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <WrapTextIcon />\n                </ListItemIcon>\n                <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Background Color\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Foreground Color\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Swap black and white?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List disablePadding dense subheader={<ListSubheader>@decompile/tf</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <EditIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <CodeIcon />\n                </ListItemIcon>\n                <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Sidebar Display</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <VerticalSplitIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <PictureInPictureIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <Icon color=\"action\">\n                  <BorderLeftIcon />\n                </Icon>\n                <ListItemText primary=\"Left\" />\n                <Switch checked={sidebarAnchor === \"right\"}\n                  color=\"default\" disabled={!sidebarOpen}\n                  value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n                  onChange={this.handleValue('sidebarAnchor')}\n                />\n                <ListItemText primary=\"Right\" />\n                <Icon color=\"action\">\n                  <BorderRightIcon />\n                </Icon>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <FormatIndentIncreaseIcon />\n                </ListItemIcon>\n                <TextField label=\"Sidebar Width\" value={sidebarWidth} onChange={this.handleValue('sidebarWidth')} />\n              </ListItem>\n            </List>\n            \n            <List disabled={!sidebarOpen} disablePadding dense subheader={<ListSubheader>Sidebar Content</ListSubheader>}>\n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <AccountCircleIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show players?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <GroupWorkIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show things?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MailIcon from '@material-ui/icons/Mail';\nimport ForumIcon from '@material-ui/icons/Forum';\nimport TabIcon from '@material-ui/icons/Tab';\nimport PeopleIcon from '@material-ui/icons/People';\nimport RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport BusinessCenterIcon from '@material-ui/icons/BusinessCenter';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport SearchIcon from '@material-ui/icons/Search';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    margin: '0 20px',\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n//    display: \"flex\",\n//    \"flex-direction\": \"column\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  if (props.count > 0) {\n    return (\n      <Badge badgeContent={props.count} color=\"error\">\n        {props.children}\n      </Badge>\n    );\n  }\n  return props.children;\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n  \n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    taskbar.push(task);\n    this.setState({ taskbar });\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n  \n  previewUpload = () => {\n    window.client.addReactPanel(\"Upload\");\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.conn.reconnect();\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, unreadBB, unreadMail, historyAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n\n    var rev = input ? input.history.slice().reverse() : [];\n    \n    return (\n      <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n        <Toolbar disableGutters={!this.state.open}>\n          <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n            {title}\n          </Typography>\n          <div className={classes.flex}></div>\n          {taskbar.map((task,i) => (\n            <Tooltip key={i} title={task.headertitle.innerText}>\n              <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n                <TabIcon className={classes.taskicon} />\n                {task.headertitle.innerText}\n              </Button>\n            </Tooltip>\n          ))}\n          \n          <div className={classes.tasksep}></div>\n          \n          <Tooltip title=\"Look around.\">\n            <Button aria-label=\"send-look\" onClick={() => { this.sendCommand(\"look\"); this.sendAPI(\"listcontents\"); }}>\n              <RemoveRedEyeIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"What am I carrying?\">\n            <Button aria-label=\"send-inventory\" onClick={() => this.sendCommand(\"inventory\")}>\n              <BusinessCenterIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"Who's online?\">\n            <Button aria-label=\"send-who\" onClick={() => this.sendCommand(\"who\")}>\n              <PeopleIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"Bulletin Boards\">\n            <Button aria-label=\"open-bbs\" onClick={() => this.sendAPI(\"boardlist\")}>\n              <BadgeIcon count={unreadBB}>\n                <ForumIcon />\n              </BadgeIcon>\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"@mail Inbox\">\n            <Button aria-label=\"open-mail\" onClick={() => this.sendAPI(\"maillist\")}>\n              <BadgeIcon count={unreadMail}>\n                <MailIcon />\n              </BadgeIcon>\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"Need help?\">\n            <Button aria-owns={helpAnchor ? 'taskbar.help' : null} aria-label=\"help\" aria-haspopup=\"true\" onClick={this.showHelp}>\n              <SearchIcon />\n            </Button>\n          </Tooltip>\n          \n          <Tooltip title=\"More tasks...\">\n            <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n              <MenuIcon />\n            </Button>\n          </Tooltip>\n          \n          <SwipeableDrawer\n            variant=\"temporary\"\n            anchor=\"top\"\n            open={open}\n            onClose={this.closeDrawer}\n            onOpen={this.openDrawer}\n          >\n            <Settings closeDrawer={this.closeDrawer} />\n          </SwipeableDrawer>\n\n          <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n            <form onSubmit={this.searchHelp}>\n              <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"false\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n            </form>\n            <Button fullWidth onClick={this.searchHelp}>\n              Get Help\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n            <form onSubmit={this.saveLog}>\n              <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                onChange={this.typeLog} autoFocus\n                InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n              />\n            </form>\n            <Button fullWidth onClick={this.saveLog}>\n              Save Log\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n            <form onSubmit={this.handleURL} className={classes.padded}>\n              <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n            </form>\n            <Button onClick={this.handleURL}>\n              Upload URL\n            </Button>\n            <input\n              accept=\"text/plain\"\n              className={classes.fileinput}\n              id=\"file.upload\"\n              type=\"file\"\n              onChange={this.handleFile}\n            />\n            <label htmlFor=\"file.upload\">\n              <Button component=\"span\">\n                Choose File\n              </Button>\n            </label>\n            <Button onClick={this.previewUpload}>\n              Paste Text\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n            <List className={classes.historyPopover}>\n              {rev.map((cmd, i) => (\n                <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                  <ListItemText primary={cmd} />\n                </ListItem>\n              ))}\n            </List>\n            <Button onClick={this.clearHistory}>\n              Clear History\n            </Button>\n          </Popover>\n          \n          <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n            <MenuItem onClick={this.closeMenu}>\n              <Tooltip title=\"Close menu.\">\n                <MenuIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openDrawer}>\n              <Tooltip title=\"Change settings.\">\n                <SettingsIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n              <Tooltip title=\"Upload file/URL.\">\n                <CloudUploadIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n              <Tooltip title=\"Save display log.\">\n                <SaveIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n              <Tooltip title=\"Show command history.\">\n                <KeyboardIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.clearScreen}>\n              <Tooltip title=\"Clear screen.\">\n                <BackspaceIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.reconnect}>\n              <Tooltip title=\"Reconnect.\">\n                <WifiIcon />\n              </Tooltip>\n            </MenuItem>            \n          </Menu>\n\n          <div className={classes.tasksep}></div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.addEventListener('resize', this.onResize);\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    this.forceUpdate();\n  }\n  \n  onResize = event => {\n    window.client.output.calcDimensions();\n    window.client.sendText(\"SCREENWIDTH \" + window.client.settings.wrapWidth);\n    window.client.sendText(\"SCREENHEIGHT \" + Math.floor(window.client.output.root.parentNode.clientHeight / window.client.output.dims.height));\n    window.client.output.scrollDown();\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classes.frame} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\">\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n    \"background-color\": \"black\",\n    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classes.text}  autoComplete=\"off\" autoFocus></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \".\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        <Typography\n          align=\"right\"\n          color=\"textPrimary\"\n          noWrap\n        >\n          {status}\n        </Typography>\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst styles = theme => ({\n  frame: {\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n    position: \"relative\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <Dialog\n          open={open}\n          onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n          onClose={this.closeLogin}\n          aria-labelledby=\"responsive-dialog-title\"\n          disableBackdropClick\n          disableEscapeKeyDown\n        >\n          <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n            Character Login\n            <ListItemSecondaryAction>\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <span dangerouslySetInnerHTML={{ __html: msg }} />\n            </DialogContentText>\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"username\"\n              label=\"Character Name\"\n              type=\"string\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n              <PersonAddIcon />\n              Register\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n              <PersonOutlineIcon />\n              Guest\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n              <PersonIcon />\n              Login\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withMobileDialog()(withStyles(styles, { withTheme: true })(Login));\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    minWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'space-between',\n  },\n  contents: {\n    flexShrink: 1,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  playerItem: {\n    padding: 2,\n  },\n  thingItem: {\n  },\n  customExits: {\n    flexGrow: 1,\n    position: \"relative\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  navWidget: {\n    position: \"relative\",\n    bottom: 0,\n    left: \"50%\",\n    flexShrink: 0,\n    '-webkit-transform': 'translateX(-50%)',\n    transform: 'translateX(-50%)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (match === -1) {\n          match = keys.indexOf(exit);\n        }\n      });\n\n      if (match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarWidth, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n    var exitWidget;\n    var navWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.bottom}>\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Other Exits</ListSubheader>}>\n                {customExits.map((exit, i) => (\n                  <ListItem className={classes.exitItem} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                    <ListItemText primary={exit.split(\";\")[0]} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n          </div>\n        );\n      }\n      \n      if (this.useCompass) {\n        navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {this.buildExit(\"In\")}\n            {this.buildExit(\"East\")}\n            {this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={classes.frame} style={{ width: sidebarWidth }} onClick={() => window.client.focus()}>\n        <div className={classes.contents}>\n          <span>\n            {sidebarShowPlayers && players.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Players</ListSubheader>}>\n                {players.map((player, i) => (\n                  <ListItem disableGutters className={classes.playerItem} key={i}\n                    button onClick={() => this.sendCommand(\"look \"+player)}\n                  >\n                    <ListItemAvatar>\n                      <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText primary={player} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {sidebarShowThings && things.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Contents</ListSubheader>}>\n                {things.map((thing, i) => (\n                  <ListItem className={classes.thingItem} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                    <ListItemText primary={thing} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </span>\n        </div>\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarWidth: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\nimport Theme from '../Theme';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  }\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarWidth } = window.client.settings;\n    \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarWidth={sidebarWidth} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={Theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  frame: {\n  },\n});\n\nclass Chargen extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  componentDidMount() {\n  }\n  \n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.frame}>Character Builder?</div>\n    );\n  }\n}\n\nChargen.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Chargen);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"inline-flex\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {maillist.length} Messages ({unread} unread)\n              <Tooltip title=\"Move multiple files to trash.\">\n                <IconButton onClick={this.toggleDelete}>\n                  <DeleteSweepIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Purge deleted mail.\">\n                <IconButton onClick={this.purgeMail}>\n                  <DeleteForeverIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Send a new message.\">\n                <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                  <CreateIcon />\n                </IconButton>\n              </Tooltip>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 100.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n\n  \n}\n\nexport default Emulator;\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body);\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addReactPanel(\"Sendmail\", { panelSize: \"30em 30em\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          { maillist && (\n            <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n          )}\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body });\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    var that = this;\n    \n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect(that);\n  }\n  \n  static reconnect(that) {\n    that.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect() {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n\n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n","class Utils {\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-1-37\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Utils.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n\n\n  //////////////////////////////////////////////////////////////////\n  // detect if more user input is required for a pueblo command\n  static parseCommand(command) {\n    var cmd = command;\n    var regex = /\\?\\?/;\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n}\n\nexport default Utils;\n\n","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Theme from '../modules/Theme';\nimport Chargen from '../modules/Chargen';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport Utils from './utils';\nimport JSONAPI from './jsonapi';\n\nimport './ansi.css';\nimport './scrollbar.css';\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.settings = {\n      // default emulator fg/bg\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      wrapWidth: 100,\n      invertHighlight: false,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarWidth: \"192px\",\n      sidebarAlwaysShow: true,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      // debugging\n      debugEvents: false,\n    };\n    this.defaultSettings = Object.assign({}, this.settings);\n    this.loadSettings();\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // App Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.theme = Theme;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // default connection settings, can override in public/local.js\n    this.serverAddress = \"node.grapenut.org\";\n    this.serverPort = 2001;\n    this.serverSSL = true;\n\n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    var style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.getElementsByTagName(\"head\")[0].appendChild(style);\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n  }\n  \n  // load settings from localstorage\n  loadSettings() {\n    const store = window.localStorage;\n    Object.keys(this.settings).forEach((key) => {\n      if (store[\"settings_\"+key]) {\n        this.changeSetting(key, store[\"settings_\"+key]);\n      }\n    });\n  }\n  \n  // save settings to localstorage\n  saveSettings() {\n    const store = window.localStorage;\n    Object.keys(this.settings).forEach((key) => {\n      store[\"settings_\"+key] = String(this.settings[key]);\n    });\n  }\n  \n  // change a setting, casting the string argument to the correct type\n  changeSetting(key, value) {\n    if (!this.settings.hasOwnProperty(key)) return;\n    \n    var type = typeof this.settings[key];\n    \n    if (typeof value === type) {\n      this.settings[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          this.settings[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          this.settings[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          this.settings[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          this.settings[key] = value;\n          break;\n      }\n    }\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    }\n  }\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(Utils.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun()\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  addReactPanel(name, cfg) {\n    var el = null;\n    var obj = null;\n    switch (name) {\n      case 'Chargen':\n        el = Chargen;\n        break;\n      case 'Mailbox':\n        el = Mailbox;\n        obj = this.react.mailbox;\n        break;\n      case 'Upload':\n        el = Upload;\n        obj = this.react.upload;\n        break;\n      case 'Sendmail':\n        el = Sendmail;\n        obj = this.react.sendmail;\n        break;\n      case 'BBoard':\n        el = BBoard;\n        obj = this.react.bboard;\n        break;\n      default:\n        break;\n    }\n    \n    if (!el) {\n      return;\n    }\n    \n    if (obj) {\n      this.focusPanel(name);\n      return;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.headerTitle) {\n      config.headerTitle = name;\n    }\n    \n    config.callback = function(container) {\n      container.content.style.backgroundColor = Theme.palette.background.paper;\n      var child = React.createElement(el, { panel: container }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: Theme }, child), container.content);\n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n  }\n  \n  closePanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  focusPanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.serverAddress + \":\" + this.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n\n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addReactPanel(\"Upload\");\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      } else if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect() {\n    if (this.isConnected()) {\n      return;\n    }\n    \n    if (this.reconnectCount < this.reconnectMaxCount) {\n      this.reconnectCount++;\n      this.conn && this.conn.reconnect();\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n    if (this.isConnected()) {\n      if (cmd !== '') {\n        this.sendText(cmd);\n        this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n      }\n    } else {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content)\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput, Utils };\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Portal from './modules/Portal';\nimport Client from './client';\nimport './style.css';\n\n// ========================================\n\n// create the MUSH client\nvar client = new Client();\n\n// render the react Portal app\nReactDOM.render(React.createElement(Portal, null, null), document.getElementById('root'));\n\n// load local customization file\nclient.loadScript('./local.js');\n"],"sourceRoot":""}