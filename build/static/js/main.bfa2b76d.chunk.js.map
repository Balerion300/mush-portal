{"version":3,"sources":["client/connection.js","client/userinput.js","modules/Spawn/index.jsx","client/jsonapi.js","client/index.js","modules/Sendmail/index.jsx","modules/Upload/index.jsx","modules/Settings/ColorPicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/Customizer/FormEditor.jsx","modules/Customizer/TriggerForm.jsx","modules/Customizer/TimerForm.jsx","modules/Customizer/MacroForm.jsx","modules/Customizer/KeyForm.jsx","modules/Customizer/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","index.js","client/emulator.js"],"names":["Connection","url","Object","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","socket","isOpen","onOpen","onError","onClose","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","reconnect","arguments","length","undefined","that","isConnected","sendText","window","WebSocket","onopen","evt","onerror","onclose","onmessage","readyState","close","data","send","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","e","console","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","substring","UserInput","root","selectionStart","selectionStop","onEnter","onEscape","onPageUp","onPageDown","keyCycleForward","keyCycleBackward","clearHistory","onkeydown","onkeyup","onKeyDown","onKeyUp","key","code","ctrl","keyCode","which","ctrlKey","shift","shiftKey","alt","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","cmd","value","saveCommand","preventDefault","focus","moveCursor","pressKey","releaseKey","history","ncommand","save_current","current","selectionEnd","createTextRange","range","collapse","select","force","text","getSelection","toString","document","selection","type","createRange","element","activeElement","tagName","toLowerCase","getAttribute","indexOf","match","Spawn","props","_this","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","output","React","createRef","emulator","Emulator","appendText","classes","_window$client$settin","client","settings","ansiFG","ansiBG","fontFamily","fontSize","font","mobile","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","frame","ref","classNames","style","Component","withStyles","theme","position","height","width","display","flex-flow","margin","font-family","font-weight","font-size","flex","overflow-y","overflow-x","white-space","word-wrap","padding","withTheme","JSONAPI","maillist","self","args","mailitem","boardlist","bbmsglist","bbmsg","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","Client","setBubble","hidden","tinycon","updateCounter","defaultSettings","wrapWidth","invertHighlight","decompileEditor","decompileKey","sidebarOpen","sidebarAnchor","sidebarWidth","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","debugEvents","debugActions","serverAddress","serverSSL","location","protocol","serverPort","assign","components","Mailbox","Sendmail","BBoard","Upload","Customizer","actionTemplates","triggers","name","javascript","pattern","regex","suppress","timers","delay","repeat","times","macros","keys","keycode","css","scripts","loadTriggers","loadTimers","loadMacros","loadKeys","loadCSS","loadScripts","loadSettings","colors","createTheme","matchMedia","breakpoints","up","matches","prompt","input","events","panels","jsPanel","react","portal","taskbar","terminal","statusbar","login","mailbox","sendmail","bboard","upload","customizer","spawns","conn","container","loggedIn","jsonapi","updateLines","eatNewline","delayContents","scrollThreshold","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","render","ReactDOM","Portal","getElementById","src","tag","async","getElementsByTagName","appendChild","_this2","Window","w","c","getSpawn","script","i","eval","txt","_this3","file","split","slice","updateCSS","setAttribute","head","erase","firstChild","removeChild","createTextNode","links","parentNode","defaultTheme","typography","useNextVariants","palette","primary","indigo","secondary","blueGrey","createMuiTheme","obj","localStorage","hasOwnProperty","String","bind","Number","castString","loadStyle","unloadStyle","calcDimensions","Math","floor","clientHeight","dims","loadLocalStorage","clearLocalStorage","saveLocalStorage","j","command","RegExp","search","val","replace","sendCommand","parseCommand","classid","msg","scroll","nearBottom","appendMessage","scrollDown","onChange","map","s","join","newText","re","escre","esc","clear","_this4","scrollPageUp","scrollPageDown","_this5","onCommand","onunload","onresize","scrollTop","scrollHeight","fun","id","cfg","component","_this6","spawn","findSpawn","focusPanel","comp","el","config","headerTitle","headerLogo","icon","spacing","unit","panelSize","defaults","maximizedMargin","wstr","callback","content","backgroundColor","background","paper","child","innerRef","panel","MuiThemeProvider","helpText","helpButton","classList","add","innerHTML","color","calcColors","controlbar","insertBefore","pointerup","forEach","addEventListener","currentTarget","push","create","addPanel","splice","getPanels","headertitle","innerText","status","popTask","unsmallify","front","serverUrl","setTimeout","openLogin","endsWith","clearTimeout","sendAPI","re_fugueedit","str","editor","insert","trigger","createPattern","replaceArgs","execActionScript","scrollIfNeeded","fragment","appendHTML","attrs","appendPueblo","op","gmcp","emit","_this7","matched","m","astr","_this8","shortid","generate","on","result","removeAllListeners","_this9","filename","node","textContent","blob","Blob","saveAs","alert","visibilityChange","_this10","msHidden","webkitHidden","setOptions","fallback","abbreviate","minimizeTo","onminimized","pushTask","onclosed","unmountComponentAtNode","delSpawn","dragit","start","saveCursor","resizeit","stop","resetCursor","__webpack_exports__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","sendMail","_this$state","chips","subject","body","realsub","substr","to","closePanel","handleChange","event","setState","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","changeText","onResize","resize","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","startsWith","_this$props","options","_this$state2","react__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_8___default","card","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_9___default","header","title","material_ui_chip_input__WEBPACK_IMPORTED_MODULE_18___default","label","fullWidth","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","helperText","FormHelperTextProps","subheader","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_15___default","stretch","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_10___default","react_ace__WEBPACK_IMPORTED_MODULE_19___default","bodytext","mode","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_11___default","actions","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_14___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_13___default","button","onClick","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_16___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_17___default","sub","left","right","marginLeft","overflow","justify-content","textAlign","minWidth","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","setText","lines","line","newtext","react_ace__WEBPACK_IMPORTED_MODULE_13___default","readOnly","stretchflex","pad","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_8___default","padded","variant","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7___default","_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_icons_Redo__WEBPACK_IMPORTED_MODULE_12___default","ColorPicker","classCallCheck","possibleConstructorReturn","getPrototypeOf","show","anchor","hide","choose","offset","rows","bgfix","react_default","Button_default","aria-haspopup","aria-owns","Popover_default","popover","anchorEl","open","Boolean","swatch","cursor","border","lineHeight","Settings","handleSwitch","changeSetting","checked","defineProperty","saveSettings","forceUpdate","handleValue","handleColor","objectSpread","resetSettings","confirm","closeDrawer","tabIndex","role","List_default","list","disablePadding","dense","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","ListItemSecondaryAction_default","Switch_default","Public_default","TextField_default","SettingsEthernet_default","Security_default","WrapText_default","FontDownload_default","FormatSize_default","Palette_default","Settings_ColorPicker","Edit_default","Code_default","VerticalSplit_default","disabled","PictureInPicture_default","leftright","Icon_default","BorderLeft_default","Typography_default","BorderRight_default","FormatIndentIncrease_default","AccountCircle_default","GroupWork_default","Explore_default","buttons","reset","flexDirection","justifyContent","alignItems","overflowY","flexFlow","flexGrow","flexBasis","paddingLeft","marginRight","top","bottom","BadgeIcon","count","Badge_default","badgeContent","children","Taskbar","openDrawer","closeMenu","setTitle","t","clearScreen","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","addButton","task","showMenu","menuAnchor","showMobileMenu","mobileAnchor","closeMobileMenu","toggleSidebar","toggle","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","showUpload","uploadAnchor","closeUpload","insertCommand","closeHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","openCustomizer","previewUpload","handleFile","files","reader","FileReader","onload","readAsText","handleURL","req","XMLHttpRequest","onreadystatechange","responseText","rev","reverse","renderTasks","Tooltip_default","tasklabel","taskbutton","aria-label","taskicon","headerlogo","renderButtons","ariaLabel","action","AppBar_default","Toolbar_default","disableGutters","sectionMobile","ChevronLeft_default","ChevronRight_default","noWrap","sectionDesktop","tasksep","overflowButtons","MoreVert_default","icons_Menu_default","SwipeableDrawer_default","modules_Settings","onSubmit","autoComplete","autoFocus","InputProps","inputProps","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","historyPopover","divider","Menu_default","disableEnforceFocus","MenuItem_default","ExpandLess_default","Settings_default","Build_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","Terminal","focusInput","doResize","min","clientWidth","linesOfScroll","init","initOutput","initPrompt","dim","containerRef","onScroll","maxWidth","scrollcount","align","background-color","main","down","overflowX","text-align","vertical-align","Input","initInput","size","outline","Statusbar","Login","closeLogin","submitLogin","username","password","submitGuest","submitCreate","catchReturn","Dialog_default","fullScreen","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","IconButton_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","Sidebar","go","exit","_window$client","getContents","matchExit","ucExits","buildExit","uc","toUpperCase","exits","things","players","friends","customExits","useCompass","_loop","fullexit","n","player","sidebar","exitWidget","navWidget","_this$state3","parseExits","exitItem","contents","playerItem","ListItemAvatar_default","Avatar_default","p","thing","thingItem","flexShrink","-webkit-transform","transform","middle","dock","scrollTo","modules_Sidebar","core_styles","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","FormEditor","setStatus","clearStatus","item","handleNumber","parseInt","needsToResize","listName","selected","immutable","saveCSS","_this$props2","onReset","_this$props3","template","defaultText","_this$props4","filetype","sheets","styleSheets","href","Array","apply","toConsumableArray","cssRules","rule","cssText","_this$props5","Form","ltype","rtype","form","lib_default","mobileOnly","edit","Close_default","Delete_default","CloudDownload_default","Undo_default","newState","verticalAlign","minHeight","marginTop","TriggerForm","row","TimerForm","MacroForm","KeyForm","Checkbox_default","changeTab","tab","onSelect","tabs","Tabs_default","scrollable","scrollButtons","Tab_default","mobileClose","mobileOpen","even","odd","listNum","listText","AddCircle_default","Customizer_FormEditor","BBListItem","board","posts","lastmod","listicon","read","opacity","BBList","openBoard","BBoard_BBListItem","BBMessageListItem","message","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","_window$client$settin2","Card_default","CardHeader_default","CardContent_default","CardActions_default","openBB","openBBMsg","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","MailListItem","mail","quickDelete","handleMark","deleted","unread","urgent","PriorityHigh_default","Mail_default","Drafts_default","from","time","CheckCircle_default","Cancel_default","MailList","purgeMail","toggleDelete","openMail","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","wrap","Reply_default","Forward_default","folder","folderlist","_this$state4","_this$state5","setFields","_this$state6","Mailbox_MailList","Mailbox_MailItem","__webpack_require__","r","loadScript","execUserScript","lastIndex","exec","info","index","xch_cmd","end","lineBuf","ii","ilen","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","warn","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","ANSI_NORMAL","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","next","encodeState","ansiClass","span","stack","parseLinks","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","ch","PARSE_CR","abortParse","endLine","applyANSI","html","div","createDocumentFragment","nextSibling","removeAttribute","idx","selfClosing","UNCLOSED_TAGS","pushElement","popElement","threshold","temp","nodeName","round","abs","offsetHeight"],"mappings":"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","file":"static/js/main.bfa2b76d.chunk.js","sourcesContent":["// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect(url=null) {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n    \n    this.url = url || this.url;\n    \n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  output: {\n    margin: '0.25em 0.5em',\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Spawn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.output = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    this.emulator = new Emulator(this.output.current);\n  }\n  \n  componentWillUnmount() {\n    this.emulator = null;\n  }\n  \n  appendText(text) {\n    this.emulator.appendText(text);\n  }\n  \n  append(text) {\n    this.emulator.appendText(text+\"\\n\");\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n\n    //this.emulator && this.emulator.clear();\n    //this.emulator && this.emulator.appendText();\n    \n\n    return (\n      <div className={classes.frame}>\n        <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n      </div>\n    );\n  }\n}\n\nSpawn.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Spawn);\n\n\t","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","/* eslint no-eval: 0 */\n/* eslint no-unused-vars: 0 */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\nimport Customizer from '../modules/Customizer';\nimport Spawn from '../modules/Spawn';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport JSONAPI from './jsonapi';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.defaultSettings = {\n      // display settings\n      fontFamily: \"Courier New\",\n      fontSize: 10,\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      wrapWidth: 100,\n      invertHighlight: false,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarWidth: \"192px\",\n      sidebarAlwaysShow: false,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      // debugging\n      debugEvents: false,\n      debugActions: false,\n      // default connection settings, can override in public/local.js\n      serverAddress: \"node.grapenut.org\",\n      serverSSL: window.location.protocol === \"https:\",\n      serverPort: window.location.protocol === \"https:\" ? 2001 : 2000,\n    };\n    this.settings = Object.assign({}, this.defaultSettings);\n    \n    // map react components to strings\n    this.components = {\n      \"Mailbox\": Mailbox,\n      \"Sendmail\": Sendmail,\n      \"BBoard\": BBoard,\n      \"Upload\": Upload,\n      \"Customizer\": Customizer,\n      \"Spawn\": Spawn,\n    };\n\n    // triggers, timers, macros, and keybindings\n    this.actionTemplates = {\n      triggers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n        suppress: false,\n      },\n      timers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        delay: 0,\n        repeat: false,\n        times: 0,\n      },\n      macros: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n      },\n      keys: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        keycode: null,\n        ctrl: false,\n        alt: false,\n        shift: false,\n      },\n      css: {\n        name: \"\",\n        text: \"\",\n      },\n      scripts: {\n        name: \"\",\n        text: \"// Insert JavaScript below.\\n\",\n      },\n    };\n        \n    this.triggers = [];\n    this.timers = [];\n    this.macros = [];\n    this.keys = [];\n    this.scripts = [{ name: \"onLoad.js\", text: \"\" }];\n    this.css = [{ name: \"ansi.css\", text: \"\" },\n                { name: \"inverse.css\", text: \"\" }];\n    \n    this.loadTriggers();\n    this.loadTimers();\n    this.loadMacros();\n    this.loadKeys();\n    this.loadCSS();\n    this.loadScripts();\n    \n    // must come after client.css definition\n    this.loadSettings();\n    \n    // Client colors and theme\n    this.colors = Colors;\n    this.theme = this.createTheme();\n    this.mobile = !window.matchMedia(this.theme.breakpoints.up('md').substring(7)).matches;\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // External Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n      customizer: null,\n      spawns: [],\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // rendering, themeing, and styling react components\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  execUserScript(name) {\n    // load user customization file\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    \n    var script = null;\n    for (let i=0; i < client.scripts.length; i++) {\n      if (client.scripts[i].name === name) {\n        script = client.scripts[i];\n        break;\n      }\n    }\n    if (script && script.text !== \"\") {\n      try {\n        eval(script.text);\n      } catch (e) {\n        client.debugActions && console.log(\"Error executing `\" + name + \"'.\");\n      }\n    }\n  }\n  \n  // evaluate an action javascript with a limited context\n  execActionScript(txt) {\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    \n    try {\n      eval(txt);\n    } catch (e) {\n      client.settings.debugActions && console.log(\"Error executing action:\", e);\n    }\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    const file = src.split('/').slice(-1)[0];\n\n    // see if we have a matching css override\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    var style;\n    if (css) {\n      // just update the <style> element\n      style = this.updateCSS(css);\n      if (css.text !== \"\") return;\n    }\n    \n    // css is not overridden, try to load a <link>\n    style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.head.appendChild(style);\n  }\n  \n  // update the css object's rules on its <style> element \n  updateCSS(css, erase=false) {\n    if (!css) return null;\n    \n    var style = document.getElementById(\"override_\" + css.name);\n    if (style) {\n      // remove what's already there\n      while (style.firstChild) {\n        style.removeChild(style.firstChild);\n      }\n    } else {\n      // create a new style element\n      style = document.createElement('style');\n      style.setAttribute('id', 'override_' + css.name);\n      document.head.appendChild(style);\n    }\n    \n    // update the CSS text on the <style> element\n    if (!erase) style.appendChild(document.createTextNode(css.text));\n    \n    return style;\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    // remove the <link> if it exists\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n    \n    // see if we have a css override to erase\n    const file = src.split('/').slice(-1)[0];\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    // we found a css override, delete the contents\n    if (css) {\n      this.updateCSS(css, true);\n    }\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // save and load objects from localStorage\n  \n  // load object from localstorage\n  loadLocalStorage(obj, key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      obj = Object.assign(obj, JSON.parse(window.localStorage[key]));\n    }\n  }\n  \n  // clear localStorage keys starting with prefix\n  clearLocalStorage(key) {\n    delete window.localStorage[key];\n  }\n  \n  // save object to localstorage\n  saveLocalStorage(obj, key) {\n    window.localStorage[key] = JSON.stringify(obj);\n  }\n  \n  // casting a string argument to the correct type\n  castString(obj, key, value) {\n    if (!obj.hasOwnProperty(key)) return;\n    \n    var type = typeof obj[key];\n    \n    if (typeof value === type) {\n      obj[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          obj[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          obj[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          obj[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          obj[key] = value;\n          break;\n      }\n    }\n  }\n  \n  // change a setting, performing a secondary action if necessary\n  changeSetting(key, value) {\n    this.castString(this.settings, key, value);\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    } else if (key === 'wrapWidth') {\n      // send the screen dimensions\n      this.output.calcDimensions();\n      this.sendText(\"SCREENWIDTH \" + this.settings.wrapWidth);\n      this.sendText(\"SCREENHEIGHT \" + Math.floor(this.output.root.parentNode.clientHeight / this.output.dims.height));\n    }\n  }\n  \n  // load regex/wildcard pattern triggers\n  loadTriggers() {\n    this.loadLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // load automatic timers\n  loadTimers() {\n    this.loadLocalStorage(this.timers, \"timers\");\n  }\n  \n  // load slash command macros\n  loadMacros() {\n    this.loadLocalStorage(this.macros, \"macros\");\n  }\n  \n  // load custom keybindings\n  loadKeys() {\n    this.loadLocalStorage(this.keys, \"keys\");\n  }\n  \n  // load custom css overrides\n  loadCSS() {\n    this.loadLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // override CSS, first check existing styles\n      let css = this.css[i];\n      \n      // autoload CSS changes, except inverse.css\n      if (css.name !== \"inverse.css\") {\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // load custom scrips\n  loadScripts() {\n    this.loadLocalStorage(this.scripts, \"scripts\");\n  }\n  \n  // load client settings\n  loadSettings() {\n    this.loadLocalStorage(this.settings, \"settings\");\n    \n    if (this.settings['invertHighlight']) {\n      this.loadStyle('./inverse.css');\n    } else {\n      this.unloadStyle('./inverse.css');\n    }\n  }\n  \n  // save regex/wildcard pattern triggers\n  saveTriggers() {\n    this.clearLocalStorage(\"triggers\");\n    this.saveLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // save automatic timers\n  saveTimers() {\n    this.clearLocalStorage(\"timers\");\n    this.saveLocalStorage(this.timers, \"timers\");\n  }\n  \n  // save slash command macros\n  saveMacros() {\n    this.clearLocalStorage(\"macros\");\n    this.saveLocalStorage(this.macros, \"macros\");\n  }\n  \n  // save custom keybindings\n  saveKeys() {\n    this.clearLocalStorage(\"keys\");\n    this.saveLocalStorage(this.keys, \"keys\");\n  }\n  \n  // save custom css overrides\n  saveCSS() {\n    this.clearLocalStorage(\"css\");\n    this.saveLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // update rules in css <style> element\n      let css = this.css[i];\n      \n      if (css.name === \"inverse.css\") {\n        // only load inverse.css if we need it\n        if (this.settings.invertHighlight) {\n          // unload inverse.css if it is linked\n          let links = document.getElementsByTagName(\"link\");\n          for (let j = links.length; j >= 0; j--) {\n            if (links[j] && links[j].getAttribute(\"href\") !== null) {\n              let name = links[j].getAttribute(\"href\").split(\"/\").slice(-1)[0];\n              if (name === css.name) {\n                links[j].parentNode.removeChild(links[j]);\n              }\n            }\n          }\n          \n          if (css.text === \"\") {\n            // there is no override, so relink inverse.css\n            this.loadStyle('./inverse.css');\n          } else {\n            // there is an override, use update it\n            this.updateCSS(css);\n          }\n        }\n      } else {\n        // autoload all files that aren't inverse.css\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // save custom css overrides\n  saveScripts() {\n    this.clearLocalStorage(\"scripts\");\n    this.saveLocalStorage(this.css, \"scripts\");\n  }\n  \n  // save client settings\n  saveSettings() {\n    this.clearLocalStorage(\"settings\");\n    this.saveLocalStorage(this.settings, \"settings\");\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // miscellaneous logging and command links\n\n  // detect if more user input is required for a pueblo command\n  parseCommand(command) {\n    var cmd = command;\n    var regex = new RegExp('\\\\?\\\\?');\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(this.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // manage triggers, timers, macros, and keys\n  createPattern(regex, pattern) {\n    if (regex) {\n      return new RegExp('^' + pattern + '$');\n    } else {\n      return new RegExp('^' + pattern.split(/\\*+/).map(s => s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')).join('(.*)') + '$');\n    }\n  }\n  \n  replaceArgs(args, text) {\n    let newText = text.slice();\n    for (let i = args.length-1; i > -1; i--) {\n      let re = new RegExp('(^|[^\\\\%])%'+i, 'g');\n      let escre = new RegExp('[\"\\'`]', 'g');\n      let esc = args[i].replace(escre, '\\\\$&');\n      newText = newText.replace(re, '$1'+esc);\n    }\n    return newText;\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // initialize terminal elements (input, output, prompt) and clear them\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // handle input window focus and output window scrolling\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    if (this.mobile) return;\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun();\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // spawn, focus and close window panels\n  addPanel(id, cfg, component) {\n    var spawn = this.findSpawn(id);\n    \n    if (spawn) {\n      this.focusPanel(id);\n      return spawn;\n    }\n    \n    var comp = component || id;\n    var el = this.components[comp];\n    \n    if (!el) {\n      el = Spawn;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.id) {\n      config.id = id;\n    }\n    \n    if (!config.headerTitle) {\n      config.headerTitle = id;\n    }\n    \n    if (!config.headerLogo) {\n      var icon = config.icon || \"tab\";\n      config.headerLogo = \"<i class='material-icons' style='margin-left: \"+this.theme.spacing.unit+\"px'>\"+icon+\"</i>\";\n    }\n    \n    if (!config.panelSize) {\n      const margin = this.panels.defaults.maximizedMargin;\n      let wstr = 'calc(50% - ' + 1.5*margin + 'px)';\n\n      if (this.mobile) {\n        wstr = 'calc(100% - ' + 2*margin + 'px)';\n      }\n    \n      config.panelSize = {\n        width: wstr,\n        height: 'calc(100% - ' + 2*margin + 'px)',\n      };\n    }\n    \n    let ref = React.createRef();\n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      let child = React.createElement(el, { innerRef: ref, id: id, panel: container }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content, () => {\n        // add the helpText() controlbar icon\n        let obj = ref.current;\n        if (obj && obj.helpText) {\n          let helpButton = document.createElement('div');\n          helpButton.classList.add(\"jsPanel-btn\",\"jsPanel-btn-help\");\n          helpButton.innerHTML = `<svg class=\"jsPanel-icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 512 512\"><circle fill=\"currentColor\" cx=\"255.984\" cy=\"492\" r=\"20\"/><path fill=\"currentColor\" d=\"M412.979,155.775C412.321,69.765,342.147,0,255.984,0c-86.57,0-157,70.43-157,157c0,11.046,8.954,20,20,20 s20-8.954,20-20c0-64.514,52.486-117,117-117s117,52.486,117,117c0,0.356,0.009,0.71,0.028,1.062 c-0.405,46.562-28.227,88.348-71.12,106.661c-40.038,17.094-65.908,56.675-65.908,100.839V412c0,11.046,8.954,20,20,20 c11.046,0,20-8.954,20-20v-46.438c0-28.117,16.334-53.258,41.614-64.051c57.979-24.754,95.433-81.479,95.418-144.516 C413.016,156.585,413.003,156.179,412.979,155.775z\"/></svg>`;\n          helpButton.style.color = this.panels.calcColors(this.panels.defaults.theme)[3];\n          container.controlbar.insertBefore(helpButton, container.controlbar.firstChild);\n          \n          jsPanel.pointerup.forEach((which) => {\n            helpButton.addEventListener(which, (evt) => {\n              obj.helpText(evt.currentTarget);\n            });\n          });\n        }\n        \n        window.client.react.spawns.push(obj);\n      });\n      \n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n    return ref.current;\n  }\n  \n  // create a Spawn window\n  // don't focus if it already exists\n  getSpawn(id, cfg, el) {\n    let spawn = this.findSpawn(id);\n    if (spawn) return spawn;\n    \n    return this.addPanel(id, cfg, el);\n  }\n  \n  // delete spawn window from internal list\n  delSpawn(id) {\n    const spawns = this.react.spawns;\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id === id) {\n        spawns.splice(i, 1);\n      }\n    }\n  }\n  \n  // find spawn window in internal list\n  findSpawn(id) {\n    const spawns = this.react.spawns;\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id === id) {\n        return spawns[i];\n      }\n    }\n    return null;\n  }\n  \n  // find and close a panel\n  closePanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  // bring a panel into focus\n  focusPanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.settings.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n    \n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      // implement @dec/tf\n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      }\n      \n      // handle text triggers\n      let suppress = false;\n      client.triggers.forEach((trigger, i) => {\n        let re = client.createPattern(trigger.regex, trigger.pattern);\n        let args = text.match(re);\n        \n        if (args) {\n          let txt = client.replaceArgs(args, trigger.text);\n          if (trigger.javascript) {\n            client.execActionScript(txt);\n          } else {\n            client.sendText(txt);\n          }\n        \n          if (trigger.suppress) {\n            client.eatNewline = true;\n            suppress = true;\n          }\n        }\n      });\n      \n      if (suppress) return;\n      \n      if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      \n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect(force=false) {\n    if (!force && this.isConnected()) {\n      return;\n    }\n    \n    if (force || this.reconnectCount < this.reconnectMaxCount) {\n      // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n      let serverProto = window.location.protocol === \"https:\" || this.settings.serverSSL ? \"wss://\" : \"ws://\";\n      let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient';\n      \n      this.reconnectCount++;\n      this.conn && this.conn.reconnect(serverUrl);\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n    if (!this.isConnected()) {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n      return;\n    }\n    \n    if (cmd === '') return;\n    \n    let matched = false;\n    this.macros.forEach((m) => {\n      let re = this.createPattern(m.regex, m.pattern);\n      let args = cmd.match(re);\n      \n      if (args) {\n        matched = true;\n        let text = this.replaceArgs(args, m.text);\n        if (m.javascript) {\n          this.execActionScript(text);\n        } else {\n          this.sendText(text);\n        }\n      }\n    });\n    \n    if (!matched) {\n      this.sendText(cmd);\n    }\n    \n    this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content);\n      window.client.delSpawn(this.id);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput };\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body });\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={classNames(window.client.settings.ansiFG, window.client.settings.ansiBG)}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport ColorPicker from './ColorPicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentIncreaseIcon from '@material-ui/icons/FormatIndentIncrease';\nimport PublicIcon from '@material-ui/icons/Public';\nimport SettingsEthernetIcon from '@material-ui/icons/SettingsEthernet';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport FontDownloadIcon from '@material-ui/icons/FontDownload';\nimport FormatSizeIcon from '@material-ui/icons/FormatSize';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n    overflowY: \"auto\",\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    flexFlow: \"row wrap\",\n    justifyContent: 'space-evenly',\n  },\n  list: {\n    flexGrow: 0,\n    flexBasis: 'auto',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    right: 0,\n    top: 0,\n    bottom: 0,\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  leftright: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth,\n      invertHighlight, debugActions, serverAddress, serverPort, serverSSL,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, sidebarShowPlayers, fontFamily, fontSize,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarWidth } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Debugging</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug user-defined actions?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugActions} value=\"debugActions\" onChange={this.handleSwitch('debugActions')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Connection Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <PublicIcon />\n                </ListItemIcon>\n                <TextField label=\"Server address\" value={serverAddress} onChange={this.handleValue('serverAddress')} />\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <SettingsEthernetIcon />\n                </ListItemIcon>\n                <TextField label=\"Server port\" value={serverPort} onChange={this.handleValue('serverPort')} type=\"number\" />\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <SecurityIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Encrypt connection with SSL?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={serverSSL} value=\"serverSSL\" onChange={this.handleSwitch('serverSSL')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Display Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <WrapTextIcon />\n                </ListItemIcon>\n                <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <FontDownloadIcon />\n                </ListItemIcon>\n                <TextField label=\"Font\" value={fontFamily} onChange={this.handleValue('fontFamily')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <FormatSizeIcon />\n                </ListItemIcon>\n                <TextField label=\"Size\" value={fontSize} onChange={this.handleValue('fontSize')} type=\"number\" />\n              </ListItem>\n            </List>\n              \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Color Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Background\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Foreground\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Invert foreground & background?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>@decompile/tf</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <EditIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <CodeIcon />\n                </ListItemIcon>\n                <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n              </ListItem>\n            </List>\n\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Sidebar Display</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <VerticalSplitIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <PictureInPictureIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen} className={classes.leftright}>\n                <Icon color=\"action\">\n                  <BorderLeftIcon />\n                </Icon>\n                <Typography>Left</Typography>\n                <Switch checked={sidebarAnchor === \"right\"}\n                  color=\"default\" disabled={!sidebarOpen}\n                  value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n                  onChange={this.handleValue('sidebarAnchor')}\n                />\n                <Typography>Right</Typography>\n                <Icon color=\"action\">\n                  <BorderRightIcon />\n                </Icon>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <FormatIndentIncreaseIcon />\n                </ListItemIcon>\n                <TextField label=\"Sidebar Width\" value={sidebarWidth} onChange={this.handleValue('sidebarWidth')} />\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disabled={!sidebarOpen} disablePadding dense subheader={<ListSubheader>Sidebar Content</ListSubheader>}>\n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <AccountCircleIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show players?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <GroupWorkIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show things?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    margin: '0 20px',\n    flex: 1,\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n//    display: \"flex\",\n//    \"flex-direction\": \"column\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  overflowButtons: {\n    \n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon>{props.children}</Icon>);\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      buttons: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n      mobileAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  addButton = (button) => {\n    const { buttons } = this.state;\n    buttons.push(button);\n    this.setState({ buttons });\n  };\n  \n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    taskbar.push(task);\n    this.setState({ taskbar });\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showMobileMenu = event => {\n    this.setState({ mobileAnchor: event.currentTarget });\n  };\n  \n  closeMobileMenu = () => {\n    this.setState({ mobileAnchor: null });\n    window.client.focus(true);\n  };\n\n  toggleSidebar = () => {\n    const client = window.client;\n    \n    const toggle = !client.settings.sidebarOpen;\n    client.changeSetting('sidebarOpen', toggle);\n    this.setState({ sidebarOpen: toggle });\n    client.saveSettings();\n    client.react.portal.forceUpdate();\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n\n  openCustomizer = () => {\n    window.client.addPanel(\"Customizer\", { icon: 'build' });\n  };\n  \n  previewUpload = () => {\n    window.client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, buttons, historyAnchor, mobileAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n    const { sidebarOpen, sidebarAnchor } = window.client.settings;\n\n    var rev = input ? input.history.slice().reverse() : [];\n    \n    const renderTasks = taskbar.map((task,i) => (\n      <Tooltip key={i} title={task.headertitle.innerText}>\n        <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n          <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n          {!window.client.mobile && task.headertitle.innerText}\n        </Button>\n      </Tooltip>\n    ));\n\n    const renderButtons = buttons.map((button,i) => (\n      <Tooltip key={i} title={button.title}>\n        <Button aria-label={button.ariaLabel} onClick={button.action}>\n          <BadgeIcon count={button.count}>\n            {button.icon}\n          </BadgeIcon>\n        </Button>\n      </Tooltip>\n    ));\n    \n    return (\n      <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n        <Toolbar disableGutters={!this.state.open}>\n          {sidebarAnchor === \"left\" && (\n            <div className={classes.sectionMobile}>\n              <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                <Button aria-label=\"open-left-sidebar\" onClick={this.toggleSidebar}>\n                  {sidebarOpen ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n          \n          <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n            {title}\n          </Typography>\n          \n          <div className={classes.sectionDesktop}>\n            <div className={classes.flex}></div>\n            {renderTasks}\n            <div className={classes.tasksep}></div>\n            {renderButtons}\n          </div>\n          \n          <div className={classes.overflowButtons}>\n          </div>\n          \n          <div className={classes.sectionMobile}>\n            <Tooltip title=\"Windows and commands...\">\n              <Button aria-owns={mobileAnchor ? 'taskbar.mobile' : null} aria-label=\"open-mobile\" aria-haspopup=\"true\" onClick={this.showMobileMenu}>\n                <MoreVertIcon />\n              </Button>\n            </Tooltip>\n          </div>\n          \n          <Tooltip title=\"Client utilities...\">\n            <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n              <MenuIcon />\n            </Button>\n          </Tooltip>\n          \n          {sidebarAnchor === \"right\" && (\n            <div className={classes.sectionMobile}>\n              <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                <Button aria-label=\"open-right-sidebar\" onClick={this.toggleSidebar}>\n                  {sidebarOpen ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n          \n          <SwipeableDrawer\n            variant=\"temporary\"\n            anchor=\"left\"\n            open={open}\n            onClose={this.closeDrawer}\n            onOpen={this.openDrawer}\n            \n          >\n            <Settings closeDrawer={this.closeDrawer} />\n          </SwipeableDrawer>\n\n          <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n            <form onSubmit={this.searchHelp}>\n              <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"off\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n            </form>\n            <Button fullWidth onClick={this.searchHelp}>\n              Get Help\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n            <form onSubmit={this.saveLog}>\n              <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                onChange={this.typeLog} autoFocus\n                InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n              />\n            </form>\n            <Button fullWidth onClick={this.saveLog}>\n              Save Log\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n            <form onSubmit={this.handleURL} className={classes.padded}>\n              <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n            </form>\n            <Button onClick={this.handleURL}>\n              Upload URL\n            </Button>\n            <input\n              accept=\"text/plain\"\n              className={classes.fileinput}\n              id=\"file.upload\"\n              type=\"file\"\n              onChange={this.handleFile}\n            />\n            <label htmlFor=\"file.upload\">\n              <Button component=\"span\">\n                Choose File\n              </Button>\n            </label>\n            <Button onClick={this.previewUpload}>\n              Paste Text\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n            <List className={classes.historyPopover}>\n              {rev.map((cmd, i) => (\n                <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                  <ListItemText primary={cmd} />\n                </ListItem>\n              ))}\n            </List>\n            <Button onClick={this.clearHistory}>\n              Clear History\n            </Button>\n          </Popover>\n          \n          <Menu disableEnforceFocus id=\"taskbar.mobile\" anchorEl={mobileAnchor} open={Boolean(mobileAnchor)} onClick={this.closeMobileMenu} onClose={this.closeMobileMenu}>\n            <MenuItem onClick={this.closeMobileMenu}>\n              <Tooltip title=\"Close menu.\">\n                <Button><Icon><ExpandLessIcon /></Icon></Button>\n              </Tooltip>\n            </MenuItem>\n            {renderButtons.slice(0).reverse().map((button, i) => (\n              <MenuItem key={i} onClick={this.closeMobileMenu}>\n                {button}\n              </MenuItem>\n            ))}\n            {renderTasks.slice(0).reverse().map((task, i) => (\n              <MenuItem key={i} onClick={this.closeMobileMenu}>\n                {task}\n              </MenuItem>\n            ))}\n          </Menu>\n          \n          <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n            <MenuItem onClick={this.closeMenu}>\n              <Tooltip title=\"Close menu.\">\n                <ExpandLessIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openDrawer}>\n              <Tooltip title=\"Change settings.\">\n                <SettingsIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openCustomizer}>\n              <Tooltip title=\"Client customization.\">\n                <BuildIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n              <Tooltip title=\"Upload file/URL.\">\n                <CloudUploadIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n              <Tooltip title=\"Save display log.\">\n                <SaveIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n              <Tooltip title=\"Show command history.\">\n                <KeyboardIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.clearScreen}>\n              <Tooltip title=\"Clear screen.\">\n                <BackspaceIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.reconnect}>\n              <Tooltip title=\"Reconnect.\">\n                <WifiIcon />\n              </Tooltip>\n            </MenuItem>            \n          </Menu>\n\n          <div className={classes.tasksep}></div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.body.onresize = this.onResize;\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    this.forceUpdate();\n  }\n  \n  onResize = event => {\n    clearTimeout(this.doResize);\n    setTimeout(this.doResize, 1000);\n  };\n  \n  doResize = () => {\n    const client = window.client;\n    client.output.calcDimensions();\n    client.sendText(\"SCREENWIDTH \" + Math.min(client.settings.wrapWidth, Math.floor(window.client.output.root.parentNode.clientWidth / window.client.output.dims.width)));\n    client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n    client.output.scrollDown();\n    \n    client.mobile = !window.matchMedia(this.props.theme.breakpoints.up('md').substring(7)).matches\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    const { fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classNames(classes.frame)} style={font} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\">\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    const { fontFamily, fontSize } = window.client.settings;\n    \n    const size = 1.5*fontSize;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? size/2 : size) + \"pt\",\n    };\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)} style={font}  autoComplete=\"off\" autoFocus={!window.client.mobile}></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \".\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        <Typography\n          align=\"right\"\n          color=\"textPrimary\"\n          noWrap\n        >\n          {status}\n        </Typography>\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n  },\n  right: {\n    position: \"absolute\",\n    right: 0,\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <Dialog\n        className={classes.frame}\n        open={open}\n        fullScreen={window.client.mobile}\n        onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n        onClose={this.closeLogin}\n        aria-labelledby=\"responsive-dialog-title\"\n        disableBackdropClick\n        disableEscapeKeyDown\n      >\n        <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n          Character Login\n          <span className={classes.right}>\n            <Tooltip title=\"Reconnect.\">\n              <IconButton onClick={this.reconnect}>\n                <WifiIcon />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Change settings.\">\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n          </span>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <span dangerouslySetInnerHTML={{ __html: msg }} />\n          </DialogContentText>\n          <TextField\n            className={classes.text}\n            autoComplete=\"username\"\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n            label=\"Character Name\"\n            type=\"string\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n          <TextField\n            className={classes.text}\n            autoComplete=\"current-password\"\n            margin=\"dense\"\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n            <PersonAddIcon />\n            Register\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n            <PersonOutlineIcon />\n            Guest\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n            <PersonIcon />\n            Login\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Login);\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    minWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'space-between',\n  },\n  contents: {\n    flexShrink: 1,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  playerItem: {\n    padding: 2,\n  },\n  thingItem: {\n  },\n  customExits: {\n    flexGrow: 1,\n    position: \"relative\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  navWidget: {\n    position: \"relative\",\n    bottom: 0,\n    left: \"50%\",\n    flexShrink: 0,\n    '-webkit-transform': 'translateX(-50%)',\n    transform: 'translateX(-50%)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (match === -1) {\n          match = keys.indexOf(exit);\n        }\n      });\n\n      if (match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarWidth, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n    var exitWidget;\n    var navWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.bottom}>\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Other Exits</ListSubheader>}>\n                {customExits.map((exit, i) => (\n                  <ListItem className={classes.exitItem} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                    <ListItemText primary={exit.split(\";\")[0]} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n          </div>\n        );\n      }\n      \n      if (this.useCompass) {\n        navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {this.buildExit(\"In\")}\n            {this.buildExit(\"East\")}\n            {this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={classes.frame} style={{ width: sidebarWidth }} onClick={() => window.client.focus()}>\n        <div className={classes.contents}>\n          <span>\n            {sidebarShowPlayers && players.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Players</ListSubheader>}>\n                {players.map((player, i) => (\n                  <ListItem disableGutters className={classes.playerItem} key={i}\n                    button onClick={() => this.sendCommand(\"look \"+player)}\n                  >\n                    <ListItemAvatar>\n                      <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText primary={player} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {sidebarShowThings && things.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Contents</ListSubheader>}>\n                {things.map((thing, i) => (\n                  <ListItem className={classes.thingItem} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                    <ListItemText primary={thing} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </span>\n        </div>\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarWidth: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarWidth } = window.client.settings;\n      \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarWidth={sidebarWidth} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/mode/javascript';\nimport 'brace/mode/css';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  form: {\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\", \n  },\n  top: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n  },\n  bottom: {\n    position: \"relative\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  middle: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      flex: 1,\n      alignItems: \"center\",\n    },\n  },\n  align: {\n    width: \"100%\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n  },\n  flex: {\n    flex: 1,\n    minWidth: \"10em\",\n  },\n  editor: {\n    flex: 1,\n    minWidth: \"10em\",\n    minHeight: \"4em\",\n    marginTop: theme.spacing.unit,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  mobileOnly: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass FormEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const { list, listName, selected } = props;\n\n    const template = window.client.actionTemplates[listName];\n    \n    this.state = {\n      list: list,\n      item: Object.assign({}, list && selected > -1 ? list[selected] : template),\n      selected: selected,\n      status: \"\",\n      error: false,\n      javascript: true,\n      needsToResize: false,\n    };\n    \n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    this.props.panel.options.resizeit.resize = null;\n    clearTimeout(this.clearStatus);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { list, listName, selected } = props;\n    \n    const template = window.client.actionTemplates[listName];\n    \n    var newState = {};\n    \n    if (list !== state.list) {\n      newState.list = list;\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : template);\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (selected !== state.selected) {\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : template);\n      return newState;\n    }\n    \n    return null;\n  }\n  \n  defaultText() {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const name = item.name;\n    const filetype = name.endsWith('.css') ? 'css' : 'js';\n    \n    if (!immutable) return \"\";\n    \n    if (list && selected > -1 && list[selected].text !== \"\") {\n      return list[selected].text.slice();\n    } else if (filetype === 'css') {\n      const sheets = document.styleSheets;\n      \n      for (let i = 0; i < sheets.length; i++) {\n        if (sheets[i].href) {\n          let href = sheets[i].href.split('/').slice(-1)[0];\n          if (href === name) {\n            return Array(...sheets[i].cssRules).map((rule) => rule.cssText).join('\\n');\n          }\n        }\n      }\n    }\n    \n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          item.name = name;\n          item.text = req.responseText;\n          this.setState({ item, list, selected });\n        } else {\n          alert(\"Unable to download file! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", \"./\" + name);\n    req.send();\n\n    return window.client.actionTemplates[listName].text.slice();\n  }\n\n  setStatus = (error, status) => {\n    this.setState({ error: error, status: status });\n    clearTimeout(this.clearStatus);\n    setTimeout(this.clearStatus, 3000);\n  };\n\n  clearStatus = () => {\n    this.setState({ error: false, status: \"\" });\n  };\n  \n  handleChange = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.value;\n    this.setState({ item });\n  };\n  \n  handleNumber = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = parseInt(e.target.value);\n    this.setState({ item });\n  };\n  \n  handleSwitch = (key) => (e) => {\n    const { item } = this.state;\n    if (item.hasOwnProperty(key)) {\n      item[key] = e.target.checked;\n      this.setState({ item });\n    } else {\n      this.setState({ [key]: e.target.checked });\n    }\n  };\n  \n  changeText = (text) => {\n    const { item } = this.state;\n    item.text = text;\n    this.setState({ item });\n  };\n\n  onResize = () => {\n    this.setState({ needsToResize: false });\n    this.editor.current.editor.resize();\n  };\n  \n  onSubmit = (e) => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n\n    e.preventDefault();\n\n    if (item.name === \"\") {\n      this.setStatus(true, \"Name must not be blank.\" );\n      return;\n    }\n    \n    var match = list.map((item) => item.name).indexOf(item.name);\n    if (match > -1 && match !== selected) {\n      this.setStatus(true, \"Name already saved, choose another.\");\n      return;\n    }\n    \n    if (immutable && selected === -1) {\n      this.setStatus(true, \"You may only edit existing items.\");\n      return;\n    }\n    \n    this.setStatus(false, \"Saved.\" );\n    \n    if (selected > -1) {\n      list[selected] = item;\n      client.react.customizer.setState({ selected: selected });\n    } else {\n      list.push(item);\n      client.react.customizer.setState({ selected: list.length-1 });\n    }\n    \n    if (css) {\n      client.saveCSS();\n    } else {\n      client.saveLocalStorage(list, listName);\n    }\n  };\n  \n  onDelete = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n    \n    if (window.confirm(\"Do you really want to delete that?\") && list && selected > -1) {\n      if (immutable) {\n        let name = list[selected].name;\n        list[selected] = Object.assign({}, client.actionTemplates[listName]);\n        list[selected].name = name;\n        this.setState({ item: Object.assign({}, list[selected]) });\n      } else {\n        list.splice(selected, 1);\n        client.react.customizer.setState({ selected: -1 });\n      }\n      \n      this.setStatus(false, \"Deleted.\" );\n\n      if (css) {\n        client.saveCSS();\n      } else {\n        client.saveLocalStorage(list, listName);\n      }\n    }\n  };\n  \n  onReset = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    var template = Object.assign({}, window.client.actionTemplates[listName]);\n    \n    if (list && selected > -1) {\n      if (immutable) {\n        template.name = list[selected].name;\n        if (item.text === \"\") {\n          template.text = this.defaultText();\n        } else {\n          template.text = list[selected].text;\n        }\n      } else {\n        template = list[selected];\n      }\n    }\n    \n    this.setState({\n      item: Object.assign({}, template),\n    });\n    \n    this.setStatus(false, \"Reset.\");\n  };\n  \n  componentDidUpdate() {\n    if (this.state.needsToResize) {\n      this.onResize();\n    }\n  }\n\n  render() {\n    const { classes, selected, Form, immutable } = this.props;\n    const { item, error, status } = this.state;\n    \n    var ltype = \"MushCode\";\n    var rtype = \"JavaScript\";\n    if (!Form) {\n      ltype = \"Text\";\n      if (item.name.endsWith('.css')) {\n        rtype = \"CSS\";\n      }\n    }\n    \n    var mode = this.state.javascript;\n    if (item.hasOwnProperty('javascript')) {\n      mode = item.javascript;\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <form onSubmit={this.onSubmit} className={classes.form}>\n        \n          <div className={classes.top}>\n            <TextField label=\"Name\" className={classes.flex} value={item.name} onChange={this.handleChange('name')} disabled={immutable} />\n            <span className={classes.switchText}>\n              <Typography>{ltype}</Typography>\n              <Switch checked={mode}\n                color=\"default\"\n                onChange={this.handleSwitch('javascript')}\n              />\n              <Typography>{rtype}</Typography>\n            </span>\n          </div>\n          \n          {Form && (<Form className={classes.top} item={item} handleNumber={this.handleNumber} handleChange={this.handleChange} handleSwitch={this.handleSwitch} />)}\n          \n          <AceEditor\n            className={classes.editor}\n            ref={this.editor}\n            mode={mode ? rtype.toLowerCase() : ltype.toLowerCase()}\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={item.text}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n          \n          <div className={classes.bottom}>\n            <Button className={classes.mobileOnly} classes={{ label: classes.block }} onClick={() => window.client.react.customizer.setState({ edit: false, selected: -1 })}>\n              <CloseIcon /> Close\n            </Button>\n            <Button onClick={this.onDelete} classes={{ label: classes.block }} disabled={selected === -1}>\n              <DeleteIcon /> Delete\n            </Button>\n            <span className={classes.middle}>\n              <Typography className={classes.align} color={error ? \"error\" : \"default\"}>\n                {status}\n              </Typography>\n            </span>\n            <Button onClick={this.onSubmit} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              <SaveIcon /> Save\n            </Button>\n            <Button onClick={this.onReset} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              {immutable && item.text === \"\" ? (<CloudDownloadIcon />) : (<UndoIcon />)}\n              {immutable && item.text === \"\" ? \"Source\" : \"Reset\"}\n            </Button>\n          </div>\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nFormEditor.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n  list: PropTypes.array.isRequired,\n  listName: PropTypes.string.isRequired,\n  selected: PropTypes.number.isRequired,\n  Form: PropTypes.func,\n  immutable: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(FormEditor);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TriggerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} />\n            <Typography>RegExp</Typography>\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Suppress terminal output?</Typography>\n            <Switch checked={item.suppress} onChange={handleSwitch('suppress')} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nTriggerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TriggerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TimerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleNumber, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField type=\"number\" label=\"Delay seconds\" className={classes.flex} value={String(item.delay)} onChange={handleNumber('delay')} />\n        <span className={classes.switchText}>\n          <Typography>Repeat this timer?</Typography>\n          <Switch checked={item.repeat} onChange={handleSwitch('repeat')} />\n        </span>\n        <TextField type=\"number\" disabled={!item.repeat} label=\"Number of times\" className={classes.flex} value={String(item.times)} onChange={handleNumber('times')} />\n      </div>\n    );\n  }\n}\n\nTimerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TimerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MacroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" className={classes.flex} value={item.pattern} onChange={handleChange('pattern')} />\n        <span className={classes.switchText}>\n          <Typography>Wildcard</Typography>\n          <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} />\n          <Typography>RegExp</Typography>\n        </span>\n      </div>\n    );\n  }\n}\n\nMacroForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MacroForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass KeyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <span className={classes.flex}>\n          <TextField label=\"Key code\" value={item.keycode ? item.keycode : \"\"} onChange={handleChange('keycode')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Ctrl</Typography>\n          <Checkbox checked={item.ctrl} onChange={handleSwitch('ctrl')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Alt</Typography>\n          <Checkbox checked={item.alt} onChange={handleSwitch('alt')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Shift</Typography>\n          <Checkbox checked={item.shift} onChange={handleSwitch('shift')} />\n        </span>\n      </div>\n    );\n  }\n}\n\nKeyForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(KeyForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\n\nimport FormEditor from './FormEditor';\nimport TriggerForm from './TriggerForm';\nimport TimerForm from './TimerForm';\nimport MacroForm from './MacroForm';\nimport KeyForm from './KeyForm';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  container: {\n    padding: 3*theme.spacing.unit,\n    flex: 1,\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    marginRight: 3*theme.spacing.unit,\n  },\n  right: {\n    position: \"relative\",\n    flex: 1,\n    height: \"100%\",\n    overflow: \"hidden\",\n  },\n  listText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  overflow: {\n    flex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      height: \"100%\",\n      display: 'flex',\n      flexFlow: \"column nowrap\",\n      justifyContent: \"space-between\",\n    },\n  },\n  mobileOpen: {\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Customizer extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const client = window.client;\n    \n    this.tabs = [\n      {\n        list: client.triggers,\n        listName: \"Triggers\",\n        Form: TriggerForm,\n        immutable: false,\n      },\n      {\n        list: client.macros,\n        listName: \"Macros\",\n        Form: MacroForm,\n        immutable: false,\n      },\n      {\n        list: client.css,\n        listName: \"CSS\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.scripts,\n        listName: \"Scripts\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.timers,\n        listName: \"Timers\",\n        Form: TimerForm,\n        immutable: false,\n      },\n      {\n        list: client.keys,\n        listName: \"Keys\",\n        Form: KeyForm,\n        immutable: false,\n      },\n    ];\n    \n    this.state = {\n      tab: 0,\n      edit: false,\n      selected: -1,\n      helpText: null,\n    };\n  }\n\n  changeTab = (event, tab) => {\n    this.setState({ tab, selected: -1, edit: false });\n  };\n  \n  onSelect = (key) => (event) => {\n    this.setState({ selected: key });\n  }; \n  \n  componentDidMount() {\n    window.client.react.customizer = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.customizer = null;\n  }\n  \n  helpText(anchor) {\n    this.setState({ helpText: anchor });\n  }\n  \n  render() {\n    const { classes, panel } = this.props;\n    const { selected, edit, helpText } = this.state;\n    const tab = this.tabs[this.state.tab];\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar position=\"static\">\n          <Tabs value={this.state.tab} scrollable scrollButtons=\"on\" onChange={this.changeTab}>\n            {this.tabs.map((t,i) => (<Tab key={i} label={t.listName} />))}\n          </Tabs>\n        </AppBar>\n        <Typography className={classes.container} component=\"div\">\n          <div className={classes.left}>\n            <span className={edit || selected > -1 ? classes.mobileClose : classes.mobileOpen}>\n              <div className={classes.overflow}>\n                <List disablePadding dense subheader={<ListSubheader>{tab.listName}</ListSubheader>}>\n                  {tab.list.map((item, i) => (\n                    <ListItem key={i} dense button divider selected={selected === i} onClick={this.onSelect(i)} className={i % 2 === 0 ? classes.even : classes.odd}>\n                      <ListItemIcon className={classes.listNum}><span>{i+1}</span></ListItemIcon>\n                      <ListItemText className={classes.listText} primary={item.name} />\n                    </ListItem>\n                  ))}\n                  {tab.list.length < 1 && (\n                    <ListItem key={-1} dense className={classes.even}>\n                      <ListItemText className={classes.listText} secondary={\"No \"+tab.listName.toLowerCase()} />\n                    </ListItem>\n                  )}\n                </List>\n              </div>\n              {!tab.immutable && (\n                <Button classes={{ label: classes.block }} onClick={() => this.setState({ edit: true, selected: -1 })}>\n                  <AddCircleIcon />\n                  New {tab.listName.slice(0,-1)}\n                </Button>\n              )}\n            </span>\n          </div>\n          <div className={classes.right}>\n            <span className={edit || selected > -1 ? classes.mobileOpen : classes.mobileClose}>\n              <FormEditor list={tab.list} listName={tab.listName.toLowerCase()} selected={selected} panel={panel} Form={tab.Form} immutable={tab.immutable} />\n            </span>\n          </div>\n        </Typography>\n        <Popover anchorEl={helpText} open={Boolean(helpText)} onClose={() => this.setState({ helpText: null })}>\n          <Typography>\n            This is where help text goes.\n          </Typography>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nCustomizer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Customizer);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = \"font-family: '\" + fontFamily + \"', monospace; font-size: \" + (window.client.mobile ? fontSize/2 : fontSize) + \"pt;\";\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              <div>{maillist.length} Messages ({unread} unread)</div>\n              <span>\n                <Tooltip title=\"Move multiple files to trash.\">\n                  <IconButton onClick={this.toggleDelete}>\n                    <DeleteSweepIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Purge deleted mail.\">\n                  <IconButton onClick={this.purgeMail}>\n                    <DeleteForeverIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Send a new message.\">\n                  <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                    <CreateIcon />\n                  </IconButton>\n                </Tooltip>\n              </span>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  mobileOnly: {\n    display: 'block',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body+'\\n');\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body+'\\n');\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.mobileOnly} onClick={() => window.client.react.mailbox.setState({ mailitem: null })}>\n            <Icon>\n              <CloseIcon />\n            </Icon>\n            Close\n          </Button>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  mobileOpen: {\n    display: 'flex',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addPanel(\"Sendmail\", { icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <span className={mailitem ? classes.mobileClose : classes.mobileOpen}>\n            { maillist && (\n              <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n            )}\n          </span>\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n\nclient.execUserScript('onLoad.js');\n\n\n\n\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-37-1\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Emulator.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n  \n  onLine(that, lineBuf) {\n    Emulator.parseLinks(that, lineBuf);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    if (!data) return;\n    \n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    //var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    var txt = \"0123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 10.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n\n  \n}\n\nexport default Emulator;\n\n"],"sourceRoot":""}