{"version":3,"sources":["client/connection.js","modules/Spawn/index.jsx","client/jsonapi.js","client/index.js","modules/Taskbar/index.jsx","modules/Sendmail/index.jsx","modules/Upload/index.jsx","client/templates.js","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Customizer/FormEditor.jsx","modules/Customizer/TriggerForm.jsx","modules/Customizer/MacroForm.jsx","modules/Customizer/ButtonForm.jsx","modules/Customizer/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","modules/Settings/ColorPicker.jsx","modules/Settings/index.jsx","index.js","client/emulator.js","client/userinput.js"],"names":["Connection","url","Object","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","socket","isOpen","onOpen","onError","onClose","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","reconnect","arguments","length","undefined","that","isConnected","sendText","window","WebSocket","onopen","evt","onerror","onclose","onmessage","readyState","close","data","send","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","e","console","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","substring","MAX_HISTORY_SIZE","HISTORY_KEY","Spawn","props","_this","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","changePrefix","event","Prefix","target","value","prefix","state","setState","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","LoadHistory","output","loadHistory","id","scrollDown","SaveHistory","saveHistory","Math","min","client","settings","historySpawnSize","AutoHide","autoHide","hasHidden","panel","minimize","Focus","react","taskbar","popTask","normalize","onChange","lines","linesOfScroll","status","count","forceUpdate","refoutput","React","createRef","refinput","input","_this2","Emulator","current","UserInput","onEnter","cmd","sendCommand","onEscape","clear","onPageUp","scrollPageUp","onPageDown","scrollPageDown","sendMacro","fun","scroll","nearBottom","scrollThreshold","text","_this3","scrollIfNeeded","appendText","_this4","classes","_window$client$settin","ansiFG","ansiBG","fontFamily","fontSize","font","inputFont","mobile","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","className","frame","top","ref","classNames","style","bottom","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_10___default","label","root","autoComplete","Component","withStyles","theme","position","height","width","display","flex-flow","flex","margin","font-family","font-weight","font-size","overflow-y","overflow-x","white-space","word-wrap","padding","background-color","palette","background","paper","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__","border","outline","vertical-align","resize","breakpoints","down","withTheme","JSONAPI","maillist","self","args","mailitem","boardlist","bbmsglist","bbmsg","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","UnicodeMap","–","—","‘","’","‛","“","”","‟","′","″","‵","‶","Client","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","setBubble","hidden","tinycon","updateCounter","colors","createTheme","matchMedia","up","matches","defaultSettings","invertHighlight","wrapWidth","decompileEditor","decompileKey","sidebarOpen","sidebarAnchor","sidebarDense","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","sidebarLargeCompass","debugEvents","debugActions","allowServerChange","serverAddress","serverSSL","location","protocol","serverPort","historySize","recallButtons","recallAnchor","recallSize","mobileHideTaskbar","mobileHideStatusbar","components","Mailbox","Sendmail","BBoard","Upload","Customizer","templates","Templates","buttons","triggers","timers","macros","keys","scripts","name","css","loadButtons","loadTriggers","loadTimers","loadMacros","loadKeys","loadCSS","loadScripts","loadSettings","prompt","events","panels","jsPanel","portal","terminal","statusbar","login","mailbox","sendmail","bboard","upload","customizer","spawns","conn","container","loggedIn","jsonapi","updateLines","eatNewline","delayContents","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","render","ReactDOM","Portal","document","getElementById","src","tag","async","getElementsByTagName","appendChild","Window","w","c","getSpawn","SendAPI","sendAPI","SendCommand","SendText","Output","script","i","eval","filterUnicode","txt","file","split","slice","updateCSS","setAttribute","head","erase","firstChild","removeChild","createTextNode","links","getAttribute","indexOf","parentNode","defaultTheme","typography","useNextVariants","primary","indigo","secondary","blueGrey","type","createMuiTheme","assign","obj","key","localStorage","hasOwnProperty","String","bind","Number","castString","loadStyle","unloadStyle","calcDimensions","floor","clientHeight","dims","loadLocalStorage","history","clearLocalStorage","saveLocalStorage","j","command","regex","RegExp","search","val","replace","parseCommand","classid","msg","appendMessage","pattern","map","s","join","newText","tmp","re","escre","esc","loadRecallHistory","_this5","onCommand","onunload","onresize","scrollTop","scrollHeight","force","focus","cfg","component","_this6","spawn","findSpawn","focusPanel","comp","el","config","toLowerCase","headerTitle","headerLogo","icon","gameicon","startsWith","spacing","unit","panelSize","defaults","maximizedMargin","wstr","callback","content","backgroundColor","child","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","innerRef","MuiThemeProvider","helpText","helpButton","classList","add","innerHTML","color","calcColors","controlbar","insertBefore","pointerup","forEach","which","addEventListener","currentTarget","push","create","addPanel","lower","splice","getPanels","headertitle","innerText","unsmallify","front","serverUrl","setTimeout","openLogin","endsWith","clearTimeout","match","re_fugueedit","str","editor","insert","suppress","trigger","disabled","createPattern","replaceArgs","javascript","execActionScript","fragment","appendHTML","attrs","appendPueblo","op","gmcp","emit","code","_this7","saveRecallHistory","cmds","_this8","matched","m","astr","_this9","shortid","generate","on","result","removeAllListeners","_this10","filename","node","textContent","blob","Blob","saveAs","alert","visibilityChange","_this11","msHidden","webkitHidden","setOptions","fallback","abbreviate","minimizeTo","onminimized","pushTask","onclosed","unmountComponentAtNode","delSpawn","dragit","start","saveCursor","resizeit","stop","resetCursor","drawerHeight","styles","flexFlow","title","tasksep","marginRight","taskbutton","taskicon","tasklabel","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","hide","drawerPaper","mailButton","BBButton","fileinput","padded","historyPopover","maxHeight","overflowY","sectionDesktop","sectionMobile","mobileButtons","scrollButtons","alignSelf","emptyText","textAlign","buttonBar","justifyContent","sidebarButton","minWidth","BadgeIcon","_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_16___default","badgeContent","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25___default","children","BadgeWrapper","TabButton","visible","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_28___default","onClick","direction","_material_ui_icons_KeyboardArrowLeft__WEBPACK_IMPORTED_MODULE_40___default","_material_ui_icons_KeyboardArrowRight__WEBPACK_IMPORTED_MODULE_41___default","Taskbar","openDrawer","closeMenu","open","closeDrawer","setTitle","t","clearScreen","confirm","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","task","showMenu","menuAnchor","toggleSidebar","toggle","changeSetting","saveSettings","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","preventDefault","showUpload","uploadAnchor","closeUpload","insertCommand","closeHistory","clearHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","openCustomizer","previewUpload","setText","handleFile","files","reader","FileReader","onload","readAsText","handleURL","req","XMLHttpRequest","onreadystatechange","responseText","pushButton","button","showCount","_this$state","rev","Boolean","reverse","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_12___default","disableGutters","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default","aria-label","_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_38___default","_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_39___default","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_13___default","variant","noWrap","headerlogo","tooltip","aria-owns","aria-haspopup","_material_ui_icons_Menu__WEBPACK_IMPORTED_MODULE_29___default","_material_ui_core_SwipeableDrawer__WEBPACK_IMPORTED_MODULE_10___default","anchor","_Settings__WEBPACK_IMPORTED_MODULE_42__","_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default","anchorEl","onSubmit","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default","autoFocus","fullWidth","InputProps","inputProps","endAdornment","_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_21___default","accept","htmlFor","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_22___default","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_23___default","dense","divider","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_24___default","_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_17___default","disableEnforceFocus","_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default","_material_ui_icons_ExpandLess__WEBPACK_IMPORTED_MODULE_37___default","_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_33___default","_material_ui_icons_Build__WEBPACK_IMPORTED_MODULE_32___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_34___default","_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_31___default","_material_ui_icons_Keyboard__WEBPACK_IMPORTED_MODULE_35___default","_material_ui_icons_Backspace__WEBPACK_IMPORTED_MODULE_30___default","_material_ui_icons_Wifi__WEBPACK_IMPORTED_MODULE_36___default","_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_26___default","indicatorColor","scrollable","ScrollButtonComponent","flexContainer","_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_27___default","wrapper","sendMail","chips","subject","body","realsub","substr","to","closePanel","handleChange","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__","changeText","onResize","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","_this$props","options","_this$state2","react__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_9___default","card","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_10___default","header","material_ui_chip_input__WEBPACK_IMPORTED_MODULE_19___default","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","helperText","FormHelperTextProps","subheader","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_16___default","stretch","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_11___default","bodytext","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_12___default","actions","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_13___default","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_17___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_18___default","sub","left","right","marginLeft","overflow","justify-content","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","delay","line","newtext","react_ace__WEBPACK_IMPORTED_MODULE_14___default","mode","readOnly","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","stretchflex","pad","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_8___default","_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_Redo__WEBPACK_IMPORTED_MODULE_13___default","empty","repeat","times","keycode","ctrl","alt","shift","saved","Terminal","classCallCheck","possibleConstructorReturn","getPrototypeOf","focusInput","doResize","clientWidth","init","initOutput","initPrompt","dim","containerRef","react_default","onScroll","maxWidth","scrollcount","Typography_default","align","lineheight","defineProperty","main","overflowX","text-align","lineHeight","Input","recallBack","cycleBackward","recallForward","cycleForward","initInput","IconButton_default","smallIcons","ArrowDropUp_default","ArrowDropDown_default","alignContent","Statusbar","Login","closeLogin","setMessage","submitLogin","username","password","submitGuest","submitCreate","catchReturn","Dialog_default","fullScreen","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","Tooltip_default","Wifi_default","Settings_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","TextField_default","onKeyPress","DialogActions_default","Fab_default","block","PersonAdd_default","PersonOutline_default","Person_default","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","EXTRA","Sidebar","go","exit","_window$client","getContents","action","matchExit","ucExits","buildExit","uc","toUpperCase","buildLook","RemoveRedEye_default","exits","things","players","friends","customExits","useCompass","_this$props2","_loop","fullexit","skip","n","player","sidebar","exitWidget","_this$props3","_this$state3","numicons","max","parseExits","middle","List_default","list","disablePadding","ListSubheader_default","listHeader","ListItem_default","exitItem","odd","even","ListItemText_default","navWidget","contents","playerItem","thing","thingItem","alignItems","dock","scrollTo","modules_Sidebar","core_styles","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","BBListItem","board","posts","lastmod","listicon","read","opacity","BBList","openBoard","BBoard_BBListItem","paddingLeft","BBMessageListItem","message","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","emulator","_window$client$settin2","Card_default","CardHeader_default","CardContent_default","CardActions_default","openBB","openBBMsg","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","FormEditor","setStatus","clearStatus","item","handleNumber","parseInt","handleSwitch","checked","save","listName","Form","saveCSS","needsToResize","selected","immutable","onReset","_this$props4","template","defaultText","_this$props5","_this$props6","ltype","rtype","form","inputBase","switchText","Switch_default","switchBase","lib_default","minHeight","Button_default","mobileOnly","edit","Close_default","desktopOnly","Delete_default","Save_default","CloudDownload_default","Undo_default","newState","flow","verticalAlign","TriggerForm","row","saveTriggers","MacroForm","saveMacros","ButtonForm","Icon_default","saveButtons","KeyboardArrowLeft_default","KeyboardArrowRight_default","changeTab","tab","onSelect","showTemplates","hideTemplates","chooseTemplate","saveList","tabs","toggleSort","sortList","moveItemUp","moveItemDown","sortable","smallName","AppBar_default","Tabs_default","Tab_default","mobileClose","mobileOpen","subHeader","Sort_default","Reorder_default","ListItemIcon_default","listNum","listText","ListItemSecondaryAction_default","arrowButton","KeyboardArrowDown_default","FileCopy_default","AddCircle_default","Customizer_FormEditor","Menu_default","tmpl","MenuItem_default","Popover_default","MailListItem","mail","quickDelete","handleMark","deleted","unread","urgent","PriorityHigh_default","Mail_default","Drafts_default","from","time","CheckCircle_default","Cancel_default","MailList","purgeMail","toggleDelete","openMail","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","wrap","Reply_default","Forward_default","MoreVert_default","folder","folderlist","_this$state4","_this$state5","setFields","_this$state6","Mailbox_MailList","Mailbox_MailItem","ColorPicker","show","choose","offset","rows","bgfix","popover","swatch","cursor","Settings","handleValue","handleColor","handleExpand","expanded","expandAll","objectSpread","resetSettings","isMobile","debugging","BugReport_default","connection","Public_default","SettingsEthernet_default","Security_default","History_default","Repeat_default","leftright","BorderLeft_default","BorderRight_default","WrapText_default","FontDownload_default","FormatSize_default","Palette_default","Settings_ColorPicker","Edit_default","Code_default","sidebarDisplay","VerticalSplit_default","PictureInPicture_default","FormatIndentDecrease_default","sidebarContent","AccountCircle_default","GroupWork_default","Explore_default","MobileScreenShare_default","tabIndex","role","ExpansionPanel_default","ExpansionPanelSummary_default","noPadding","expandIcon","UnfoldMore_default","summaryText","ExpandMore_default","ExpansionPanelDetails_default","reset","flexDirection","flexGrow","flexBasis","__webpack_require__","r","__webpack_exports__","loadScript","execUserScript","html","size","store","nodes","childNodes","found","range","createRange","setStartBefore","setEndAfter","cloneContents","div","lastIndex","exec","info","index","xch_cmd","end","lineBuf","ii","ilen","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","href","warn","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","ANSI_NORMAL","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","next","encodeState","ansiClass","span","stack","parseLinks","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","ch","PARSE_CR","abortParse","endLine","applyANSI","createDocumentFragment","nextSibling","removeAttribute","element","idx","selfClosing","UNCLOSED_TAGS","pushElement","popElement","threshold","temp","nodeName","round","abs","offsetHeight","selectionStart","selectionStop","keyCycleForward","keyCycleBackward","onkeydown","onkeyup","onKeyDown","onKeyUp","keyCode","ctrlKey","shiftKey","altKey","prevent","isKeyCycleBackward","isKeyCycleForward","saveCommand","moveCursor","pressKey","releaseKey","save_current","selectionEnd","createTextRange","collapse","select","getSelection","toString","selection","activeElement","tagName"],"mappings":"4GACMA,aAQJ,SAAAA,EAAYC,GAAMC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,GAChBI,KAAKH,IAAMA,EACXG,KAAKC,OAAS,KACdD,KAAKE,QAAS,EAEdF,KAAKG,OAAS,KACdH,KAAKI,QAAU,KACfJ,KAAKK,QAAU,KAEfL,KAAKM,SAAW,KAChBN,KAAKO,OAAS,KACdP,KAAKQ,SAAW,KAChBR,KAAKS,OAAS,KACdT,KAAKU,SAAW,KAChBV,KAAKW,SAAW,KAEhBX,KAAKY,SAAU,EAEfZ,KAAKa,0EAxBqB,MAAO,yCACP,MAAO,yCACP,MAAO,2CACL,MAAO,2CACP,MAAO,yDA0CjB,IAAVhB,EAAUiB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KACRG,EAAOjB,KAGPA,KAAKkB,eACPlB,KAAKmB,SAAS,QAGhBnB,KAAKH,IAAMA,GAAOG,KAAKH,IAEvBG,KAAKC,OAAS,IAAImB,OAAOC,UAAUrB,KAAKH,KACxCG,KAAKE,QAAS,EAEdF,KAAKC,OAAOqB,OAAS,SAAUC,GAC7B3B,EAAW0B,OAAOL,EAAMM,IAG1BvB,KAAKC,OAAOuB,QAAU,SAAUD,GAC9B3B,EAAW4B,QAAQP,EAAMM,IAG3BvB,KAAKC,OAAOwB,QAAU,SAAUF,GAC9B3B,EAAW6B,QAAQR,EAAMM,IAG3BvB,KAAKC,OAAOyB,UAAY,SAAUH,GAChC3B,EAAW8B,UAAUT,EAAMM,0CAK7B,OAAQvB,KAAKC,QAAUD,KAAKE,QAAsC,IAA3BF,KAAKC,OAAO0B,2CAInD3B,KAAKC,QAAUD,KAAKC,OAAO2B,yCAGpBC,GACP7B,KAAKkB,eAAiBlB,KAAKC,OAAO6B,KAAKlC,EAAWmC,aAAeF,EAAO,2CAG/DA,GACT7B,KAAKkB,eAAiBlB,KAAKC,OAAO6B,KAAKlC,EAAWoC,aAAeZ,OAAOa,KAAKC,UAAUL,sCAG/EM,EAASN,GAIjB,OAHA7B,KAAKM,UAAYN,KAAKM,SAAS6B,EAASN,GACxC7B,KAAKY,SAAU,EAEPuB,GACR,KAAKvC,EAAWmC,aACd/B,KAAKO,QAAUP,KAAKO,OAAOsB,GAC3B,MAEF,KAAKjC,EAAWoC,aACd,IACEhC,KAAKQ,UAAYR,KAAKQ,SAASY,OAAOa,KAAKG,MAAMP,IAEnD,MAAOQ,GACLC,QAAQC,IAAI,cAAeF,EAAGR,GAEhC,MAEF,KAAKjC,EAAW4C,aACdxC,KAAKS,QAAUT,KAAKS,OAAOoB,GAC3B,MAEF,KAAKjC,EAAW6C,eACdzC,KAAKU,UAAYV,KAAKU,SAASmB,GAC/B,MAEF,KAAKjC,EAAW8C,eACd1C,KAAKW,UAAYX,KAAKW,SAASkB,GAC/B,MAEF,QAEE,OADAT,OAAOkB,SAAWlB,OAAOkB,QAAQC,IAAI,oBAAqBJ,EAASN,IAC5D,EAGT,OAAO,mCApGKZ,EAAMM,GAClBN,EAAKf,QAAS,EACde,EAAKd,QAAUc,EAAKd,OAAOoB,mCAGdN,EAAMM,GACnBN,EAAKf,QAAS,EACde,EAAKb,SAAWa,EAAKb,QAAQmB,mCAGhBN,EAAMM,GACnBN,EAAKf,QAAS,EACde,EAAKZ,SAAWY,EAAKZ,QAAQkB,qCAGdN,EAAMM,GACrBN,EAAK0B,WAAa1B,EAAK0B,UAAUpB,EAAIM,KAAK,GAAIN,EAAIM,KAAKe,UAAU,aA0FtDhD,2KC3HTiD,EAAmB,IACnBC,EAAc,kBAwDdC,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAnD,OAAAC,EAAA,EAAAD,CAAAE,KAAA+C,IACjBE,EAAAnD,OAAAoD,EAAA,EAAApD,CAAAE,KAAAF,OAAAqD,EAAA,EAAArD,CAAAiD,GAAAK,KAAApD,KAAMgD,KA6CRK,aAAe,SAAAC,GACbL,EAAKM,OAAOD,EAAME,OAAOC,QA/CRR,EAkDnBM,OAAS,SAAAG,GAKP,OAJIT,EAAKU,MAAMD,SAAWA,GACxBT,EAAKW,SAAS,CAAEF,WAGX5D,OAAA+D,EAAA,EAAA/D,QAAA+D,EAAA,EAAA/D,CAAAmD,KAvDUA,EA0DnBa,YAAc,WACZb,EAAKc,OAAOC,YAAYlB,EAAcG,EAAKD,MAAMiB,IACjDhB,EAAKc,OAAOG,cA5DKjB,EA+DnBkB,YAAc,SAAAC,GAkBZ,MAjB4B,qBAAjBA,IACTA,GAAc,GAGZnB,EAAKU,MAAMS,cAAgBA,IACzBA,IACFnB,EAAKa,cACLb,EAAKc,OAAOG,cAGdjB,EAAKW,SAAS,CAAEQ,iBAGdnB,EAAKU,MAAMS,aACbnB,EAAKc,OAAOK,YAAYtB,EAAcG,EAAKD,MAAMiB,GAAII,KAAKC,IAAIzB,EAAkBzB,OAAOmD,OAAOC,SAASC,mBAGlG3E,OAAA+D,EAAA,EAAA/D,QAAA+D,EAAA,EAAA/D,CAAAmD,KAjFUA,EAoFnByB,SAAW,SAAAC,GAcT,MAbyB,qBAAdA,IACTA,GAAW,GAGT1B,EAAKU,MAAMgB,WAAaA,GAC1B1B,EAAKW,SAAS,CAAEe,aAGd1B,EAAKU,MAAMgB,WAAa1B,EAAK2B,YAC/B3B,EAAKD,MAAM6B,MAAMC,WACjB7B,EAAK2B,WAAY,GAGZ9E,OAAA+D,EAAA,EAAA/D,QAAA+D,EAAA,EAAA/D,CAAAmD,KAlGUA,EAqGnB8B,MAAQ,WAKN,OAHA3D,OAAOmD,OAAOS,MAAMC,QAAQC,QAAQjC,EAAKD,MAAM6B,OAC/C5B,EAAKD,MAAM6B,MAAMM,YAEVrF,OAAA+D,EAAA,EAAA/D,QAAA+D,EAAA,EAAA/D,CAAAmD,KA1GUA,EA4HnBmC,SAAW,WACLnC,EAAKU,MAAMS,aACbnB,EAAKc,OAAOK,YAAYtB,EAAcG,EAAKD,MAAMiB,GAAII,KAAKC,IAAIzB,EAAkBzB,OAAOmD,OAAOC,SAASC,mBAGzGxB,EAAKW,SAAS,CAAEyB,MAAOpC,EAAKc,OAAOuB,kBAEH,cAA5BrC,EAAKD,MAAM6B,MAAMU,SACnBtC,EAAKD,MAAM6B,MAAMW,QACjBpE,OAAOmD,OAAOS,MAAMC,QAAQQ,gBAnI9BxC,EAAKU,MAAQ,CACXD,OAAQV,EAAMU,OAASV,EAAMU,OAAS,GACtCU,cAAapB,EAAMoB,aAAcpB,EAAMoB,YACvCO,WAAU3B,EAAM2B,UAAW3B,EAAM2B,UAGnC1B,EAAKyC,UAAYC,IAAMC,YACvB3C,EAAK4C,SAAWF,IAAMC,YAEtB3C,EAAKc,OAAS,KACdd,EAAK6C,MAAQ,KAEb7C,EAAK2B,WAAY,EAdA3B,mFAiBC,IAAA8C,EAAA/F,KAClBA,KAAK+D,OAAS,IAAIiC,IAAShG,KAAK0F,UAAUO,SAE1CjG,KAAK8F,MAAQ,IAAII,IAAUlG,KAAK6F,SAASI,SACzCjG,KAAK8F,MAAMK,QAAU,SAACC,GAAUL,EAAKM,YAAYD,IACjDpG,KAAK8F,MAAMQ,SAAW,WAAQP,EAAKD,MAAMS,SACzCvG,KAAK8F,MAAMU,SAAW,WAAQT,EAAKhC,OAAO0C,gBAC1CzG,KAAK8F,MAAMY,WAAa,WAAQX,EAAKhC,OAAO4C,kBAExC3G,KAAK2D,MAAMS,cACbpE,KAAK8D,cACL9D,KAAK+D,OAAOG,cAGVlE,KAAK2D,MAAMgB,UACb3E,KAAK0E,0DAKP1E,KAAK+D,OAAS,KACd/D,KAAK8F,MAAQ,yCAGHM,GAAK,IACP1C,EAAW1D,KAAK2D,MAAhBD,OACRtC,OAAOmD,OAAOqC,UAAUlD,EAAS0C,0CAmEpBS,GACb,IAAIC,GAAS,EAET9G,KAAK+D,OAAOgD,WAAW3F,OAAOmD,OAAOyC,mBACvCF,GAAS,GAGXD,IAEAC,GAAU9G,KAAK+D,OAAOG,aAEtBlE,KAAKoF,8CAgBI6B,GAAM,IAAAC,EAAAlH,KACfA,KAAKmH,eAAe,kBAAMD,EAAKnD,OAAOqD,WAAWH,oCAG5CA,GAAM,IAAAI,EAAArH,KACXA,KAAKmH,eAAe,kBAAME,EAAKtD,OAAOqD,WAAWH,EAAK,yCAG/C,IACCK,EAAYtH,KAAKgD,MAAjBsE,QACA5D,EAAW1D,KAAK2D,MAAhBD,OAFD6D,EAG0CnG,OAAOmD,OAAOC,SAAvDgD,EAHDD,EAGCC,OAAQC,EAHTF,EAGSE,OAAQC,EAHjBH,EAGiBG,WAAYC,EAH7BJ,EAG6BI,SAE9BC,EAAO,CACXF,WAAY,IAAMA,EAAa,eAC/BC,SAAUA,EAAW,MAGjBE,EAAY,CAChBH,WAAY,IAAMA,EAAa,eAC/BC,UAAWvG,OAAOmD,OAAOuD,OAAS,GAAKH,GAAY,MAGrD,OACEI,EAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBJ,EAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQc,KACtBL,EAAAC,EAAAC,cAAA,OAAKI,IAAKrI,KAAK0F,UAAWwC,UAAWI,IAAWhB,EAAQvD,OAAQyD,EAAQC,GAASc,MAAOX,KAE1FG,EAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQkB,QACtBT,EAAAC,EAAAC,cAACQ,EAAAT,EAAD,CAAWU,MAAM,SAASpB,QAAS,CAAEqB,KAAMrB,EAAQ5D,QAAUD,MAAOC,EAAQ0B,SAAUpF,KAAKqD,eAC3F0E,EAAAC,EAAAC,cAAA,YAAUI,IAAKrI,KAAK6F,SAAUqC,UAAWI,IAAWhB,EAAQxB,MAAO0B,EAAQC,GAASc,MAAOV,EAAYe,aAAa,iBAxK1GjD,IAAMkD,WAuLXC,yBA7OA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVC,OAAQ,OACRC,MAAO,OACPC,QAAS,OACTC,YAAa,iBAEfhB,IAAK,CACHiB,KAAM,EACNF,QAAS,QAEXpF,OAAQ,CACNuF,OAAQ,eACRC,cAAe,2BACfC,cAAe,SACfC,YAAa,OACbP,MAAO,OACPG,KAAM,EACNK,aAAc,OACdC,aAAc,SACdC,cAAe,WACfC,YAAa,aACbC,QAAS,gBAEXtB,OAAQ,CACNuB,mBAAoBhB,EAAMiB,QAAQC,WAAWC,MAC7Cf,QAAS,QAEXrD,MAAMhG,OAAAqK,EAAA,EAAArK,CAAA,CACJuJ,KAAM,EACNC,OAAQ,YACRc,OAAQ,OACRC,QAAS,OACTC,iBAAkB,SAClBR,QAAS,SACTS,OAAQ,OACRtB,OAAQ,MACRM,cAAe,2BACfC,cAAe,SACfC,YAAa,QACZV,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BxB,OAAQ,UAGZvF,OAAQ,CACNwF,MAAO,SA+LuB,CAAEwB,WAAW,GAAhC5B,CAAwC/F,qCCvOxC4H,IArBC,CACdC,SAAU,SAASC,EAAMC,GACvBD,EAAK1J,SAAS,kfAEhB4J,SAAU,SAASF,EAAMC,GACvBD,EAAK1J,SAAS,sDAAsD2J,EAAK,yCAAyCA,EAAK,sHAAsHA,EAAK,yCAAyCA,EAAK,6CAA6CA,EAAK,oDAAoDA,EAAK,UAE7YE,UAAW,SAASH,EAAMC,GACxBD,EAAK1J,SAAS,YAEhB8J,UAAW,SAASJ,EAAMC,GACxBD,EAAK1J,SAAS,WAAW2J,IAE3BI,MAAO,SAASL,EAAMC,GACpBD,EAAK1J,SAAS,WAAW2J,IAE3BK,aAAc,SAASN,EAAMC,GAC3BD,EAAK1J,SAAS,y0FCmBZiK,aAAeC,oBAAQ,KACvBC,QAAUD,oBAAQ,KAClBE,OAASF,oBAAQ,KAEjBG,UAAY,CAChB,sCACA,qCACA,mEACA,mDACA,kCACA,wDACA,uCAGIC,WAAa,CACjBC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAGNC,kBAEJ,SAAAA,SAAc,IAAArJ,EAAAjD,KAAAF,OAAAyM,+JAAA,EAAAzM,CAAAE,KAAAsM,QAAAtM,KAgpCdwM,UAAY,WACNvJ,EAAKwJ,OACPxJ,EAAKyJ,QAAQF,UAAUvJ,EAAK0J,eAE5B1J,EAAKyJ,QAAQF,UAAU,IAlpCzBxM,KAAK4M,OAASrB,OACdvL,KAAK+I,MAAQ/I,KAAK6M,cAClB7M,KAAK8H,QAAU1G,OAAO0L,WAAW9M,KAAK+I,MAAMyB,YAAYuC,GAAG,MAAMnK,UAAU,IAAIoK,QAG/EhN,KAAKiN,gBAAkB,CAErBvF,WAAY,cACZC,SAAU,GAEVH,OAAQ,UACRC,OAAQ,UACRyF,iBAAiB,EAEjBC,UAAW,IAEXC,iBAAiB,EACjBC,aAAc,eAEdC,aAAa,EACbC,cAAe,QACfC,aAAcxN,KAAK8H,OACnB2F,mBAAmB,EACnBC,oBAAoB,EACpBC,mBAAmB,EACnBC,kBAAkB,EAClBC,oBAAoB,EACpBC,qBAAqB,EAErBC,aAAa,EACbC,cAAc,EAEdC,mBAAmB,EACnBC,cAAe,oBACfC,UAAwC,WAA7B/M,OAAOgN,SAASC,SAC3BC,WAAyC,WAA7BlN,OAAOgN,SAASC,SAAwB,KAAO,IAE3DE,YAAa,IACb9J,iBAAkB,IAElB+J,eAAe,EACfC,aAAc,QACdC,WAAY,IAEZC,mBAAmB,EACnBC,qBAAqB,GAEvB5O,KAAKwE,SAAW,KAGhBxE,KAAK6O,WAAa,CAChBC,QAAWA,gDACXC,SAAYA,iDACZC,OAAUA,gDACVC,OAAUA,gDACVC,WAAcA,oDACdnM,MAASA,gDAGX/C,KAAKmP,UAAY,IAAIC,2CAErBpP,KAAKqP,QAAU,GACfrP,KAAKsP,SAAW,GAChBtP,KAAKuP,OAAS,GACdvP,KAAKwP,OAAS,GACdxP,KAAKyP,KAAO,GACZzP,KAAK0P,QAAU,CAAC,CAAEC,KAAM,YAAa1I,KAAM,KAC3CjH,KAAK4P,IAAM,CAAC,CAAED,KAAM,WAAY1I,KAAM,IAC1B,CAAE0I,KAAM,cAAe1I,KAAM,KAEzCjH,KAAK6P,cACL7P,KAAK8P,eACL9P,KAAK+P,aACL/P,KAAKgQ,aACLhQ,KAAKiQ,WACLjQ,KAAKkQ,UACLlQ,KAAKmQ,cAGLnQ,KAAKoQ,eAGLpQ,KAAK+D,OAAS,KACd/D,KAAKqQ,OAAS,KACdrQ,KAAK8F,MAAQ,KAGb9F,KAAKsQ,OAAS,IAAIlF,aAClBpL,KAAKuQ,OAASC,yCACdxQ,KAAK0M,QAAUpB,QAGftL,KAAKgF,MAAQ,CACXyL,OAAQ,KACRxL,QAAS,KACTyL,SAAU,KACV5K,MAAO,KACP6K,UAAW,KACXC,MAAO,KACPC,QAAS,KACTC,SAAU,KACVC,OAAQ,KACRC,OAAQ,KACRC,WAAY,KACZC,OAAQ,IAIVlR,KAAKmR,KAAO,KACZnR,KAAKoR,UAAY,KAGjBpR,KAAKqR,UAAW,EAChBrR,KAAKsR,SAAU,EACftR,KAAKyM,QAAS,EACdzM,KAAK2M,cAAgB,EACrB3M,KAAKuR,YAAc,EACnBvR,KAAKwR,YAAa,EAGlBxR,KAAKyR,cAAgB,IAGrBzR,KAAKgH,gBAAkB,EAGvBhH,KAAK0R,eAAiB,IACtB1R,KAAK2R,eAAiB,EACtB3R,KAAK4R,kBAAoB,GAGzBxQ,OAAOmD,OAASvE,KAChBA,KAAK6R,aACL7R,KAAK8R,oBAGL9R,KAAK+R,6NAQLC,iDAASD,OAAOpM,6CAAMsC,cAAcgK,+CAAQ,CAAElJ,MAAO/I,KAAK+I,OAAS,MAAOmJ,SAASC,eAAe,4CAIzFC,GACT,IAAIC,EAAMH,SAASjK,cAAc,UACjCoK,EAAIC,OAAQ,EACZD,EAAID,IAAMA,EACVF,SAASK,qBAAqB,QAAQ,GAAGC,YAAYH,yDAGxC1C,MAUb,IAVmB,IAAA5J,OAAA/F,KAEbuE,OAASvE,KACTyS,OAAS,SAACC,EAAEC,EAAEtQ,GAAL,OAAW0D,OAAK6M,SAASF,EAAEC,EAAEtQ,IACtCwQ,QAAU,SAACzM,GAAD,OAASL,OAAK+M,QAAQ1M,IAChC2M,YAAc,SAAC3M,GAAD,OAASL,OAAKM,YAAYD,IACxC4M,SAAW,SAAC5M,GAAD,OAASL,OAAK5E,SAASiF,IAClC6M,OAAS,SAAChM,GAAD,OAAUlB,OAAKhC,OAAOqD,WAAWH,IAE5CiM,OAAS,KACJC,EAAE,EAAGA,EAAI5O,OAAOmL,QAAQ3O,OAAQoS,IACvC,GAAI5O,OAAOmL,QAAQyD,GAAGxD,OAASA,KAAM,CACnCuD,OAAS3O,OAAOmL,QAAQyD,GACxB,MAIJ,GAAID,QAA0B,KAAhBA,OAAOjM,KACnB,IACEmM,KAAKpT,KAAKqT,cAAcH,OAAOjM,OAC/B,MAAO5E,GACPkC,OAAOyJ,cAAgB1L,QAAQC,IAAI,oBAAsBoN,KAAO,iEAMrD2D,IAAKhQ,OAAO,IAAA4D,OAAAlH,KACrBuE,OAASvE,KACTyS,OAAS,SAACC,EAAEC,EAAEtQ,GAAL,OAAW6E,OAAK0L,SAASF,EAAEC,EAAEtQ,IACtCwQ,QAAU,SAACzM,GAAD,OAASc,OAAK4L,QAAQ1M,IAChC2M,YAAc,SAAC3M,GAAD,OAASc,OAAKb,YAAYD,IACxC4M,SAAW,SAAC5M,GAAD,OAASc,OAAK/F,SAASiF,IAClC6M,OAAS,SAAChM,GAAD,OAAUC,OAAKnD,OAAOqD,WAAWH,IAEhD,IACEmM,KAAKpT,KAAKqT,cAAcC,MACxB,MAAOjR,GACPkC,OAAOC,SAASwJ,cAAgB1L,QAAQC,IAAI,0BAA2BF,sCAKjE+P,GAKR,IAJA,IAWI7J,EAXEgL,EAAOnB,EAAIoB,MAAM,KAAKC,OAAO,GAAG,GAGlC7D,EAAM,KACDuD,EAAE,EAAGA,EAAInT,KAAK4P,IAAI7O,OAAQoS,IACjC,GAAInT,KAAK4P,IAAIuD,GAAGxD,OAAS4D,EAAM,CAC7B3D,EAAM5P,KAAK4P,IAAIuD,GACf,MAKAvD,IAEFrH,EAAQvI,KAAK0T,UAAU9D,GACN,KAAbA,EAAI3I,SAIVsB,EAAQ2J,SAASjK,cAAc,SACzB0L,aAAa,MAAO,cAC1BpL,EAAMoL,aAAa,OAAQ,YAC3BpL,EAAMoL,aAAa,OAAQvB,GAC3BF,SAAS0B,KAAKpB,YAAYjK,sCAIlBqH,GAAkB,IAAbiE,EAAa/S,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC1B,IAAK8O,EAAK,OAAO,KAEjB,IAAIrH,EAAQ2J,SAASC,eAAe,YAAcvC,EAAID,MACtD,GAAIpH,EAEF,KAAOA,EAAMuL,YACXvL,EAAMwL,YAAYxL,EAAMuL,iBAI1BvL,EAAQ2J,SAASjK,cAAc,UACzB0L,aAAa,KAAM,YAAc/D,EAAID,MAC3CuC,SAAS0B,KAAKpB,YAAYjK,GAM5B,OAFKsL,GAAOtL,EAAMiK,YAAYN,SAAS8B,eAAepE,EAAI3I,OAEnDsB,sCAIG6J,GAGV,IADA,IAAI6B,EAAQ/B,SAASK,qBAAqB,QACjCY,EAAIc,EAAMlT,OAAQoS,GAAK,EAAGA,IAC7Bc,EAAMd,IAAwC,OAAlCc,EAAMd,GAAGe,aAAa,UAAoE,IAAhDD,EAAMd,GAAGe,aAAa,QAAQC,QAAQ/B,IAC9F6B,EAAMd,GAAGiB,WAAWL,YAAYE,EAAMd,IAO1C,IAFA,IAAMI,EAAOnB,EAAIoB,MAAM,KAAKC,OAAO,GAAG,GAClC7D,EAAM,KACDuD,EAAE,EAAGA,EAAInT,KAAK4P,IAAI7O,OAAQoS,IACjC,GAAInT,KAAK4P,IAAIuD,GAAGxD,OAAS4D,EAAM,CAC7B3D,EAAM5P,KAAK4P,IAAIuD,GACf,MAKAvD,GACF5P,KAAK0T,UAAU9D,GAAK,uCAKZ7G,GACV,IAAMsL,EAAe,CACnBC,WAAY,CACVC,iBAAiB,GAEnBvK,QAAS,CACPwK,QAASxU,KAAK4M,OAAO6H,OACrBC,UAAW1U,KAAK4M,OAAO+H,SACvBC,KAAM,SAIV,OAAOC,6EAAe/U,OAAOgV,OAAOT,EAActL,6CAOnCgM,EAAKC,GAChB5T,OAAO6T,aAAaC,eAAeF,KACrCD,EAAMjV,OAAOgV,OAAOC,EAAK9S,KAAKG,MAAMhB,OAAO6T,aAAaD,gDAK1CA,UACT5T,OAAO6T,aAAaD,4CAIZD,EAAKC,GACpB5T,OAAO6T,aAAaD,GAAO/S,KAAKC,UAAU6S,6CAI1BC,GAChB,OAAI5T,OAAO6T,aAAaC,eAAeF,GAC9B5T,OAAO6T,aAAaD,GAEtB,6CAISA,EAAK/N,GACrB7F,OAAO6T,aAAaD,GAAO/N,qCAIlB8N,EAAKC,EAAKvR,GACnB,GAAKsR,EAAIG,eAAeF,GAAxB,CAEA,IAAIJ,SAAcG,EAAIC,GAEtB,UAAWvR,IAAUmR,EACnBG,EAAIC,GAAOvR,OAEX,OAAQmR,GACN,IAAK,SACHG,EAAIC,GAAOG,OAAOC,KAAK,KAAM3R,EAAlB0R,GACX,MACF,IAAK,SACHJ,EAAIC,GAAOK,OAAOD,KAAK,KAAM3R,EAAlB4R,GACX,MACF,IAAK,UACHN,EAAIC,GAAkB,SAAVvR,EACZ,MACF,QACEsR,EAAIC,GAAOvR,0CAOLuR,EAAKvR,GACjBzD,KAAKsV,WAAWtV,KAAKwE,SAAUwQ,EAAKvR,GAExB,oBAARuR,EACEhV,KAAKwE,SAASwQ,GAChBhV,KAAKuV,UAAU,iBAEfvV,KAAKwV,YAAY,iBAEF,cAARR,IAEThV,KAAK+D,OAAO0R,iBACZzV,KAAKmB,SAAS,eAAiBnB,KAAKwE,SAAS2I,WAC7CnN,KAAKmB,SAAS,gBAAkBkD,KAAKqR,MAAM1V,KAAK+D,OAAO4E,KAAKyL,WAAWuB,aAAe3V,KAAK+D,OAAO6R,KAAK3M,gDAMzGjJ,KAAK6V,iBAAiB7V,KAAKqP,QAAS,kDAKpCrP,KAAK6V,iBAAiB7V,KAAKsP,SAAU,iDAKrCtP,KAAK6V,iBAAiB7V,KAAKuP,OAAQ,+CAKnCvP,KAAK6V,iBAAiB7V,KAAKwP,OAAQ,6CAKnCxP,KAAK6V,iBAAiB7V,KAAKyP,KAAM,0CAKjCzP,KAAK6V,iBAAiB7V,KAAK4P,IAAK,OAEhC,IAAK,IAAIuD,EAAE,EAAGA,EAAInT,KAAK4P,IAAI7O,OAAQoS,IAAK,CAEtC,IAAIvD,EAAM5P,KAAK4P,IAAIuD,GAGF,gBAAbvD,EAAID,MACN3P,KAAK0T,UAAU9D,0CAOnB5P,KAAK6V,iBAAiB7V,KAAK0P,QAAS,kDAKpC1P,KAAKwE,SAAW1E,OAAOgV,OAAO,GAAI9U,KAAKiN,iBACvCjN,KAAK6V,iBAAiB7V,KAAKwE,SAAU,YAEjCxE,KAAKwE,SAAL,gBACFxE,KAAKuV,UAAU,iBAEfvV,KAAKwV,YAAY,6DAMnBxV,KAAK6V,iBAAiB7V,KAAK8F,MAAMgQ,QAAS,8DAIxB,IACVpH,EAAe1O,KAAKwE,SAApBkK,WACR1O,KAAK+V,kBAAkB,kBACvB/V,KAAKgW,iBAAiBhW,KAAK8F,MAAMgQ,QAAQrC,OAAO/E,GAAa,wDAK7D1O,KAAK+V,kBAAkB,WACvB/V,KAAKgW,iBAAiBhW,KAAKqP,QAAS,WACpCrP,KAAKgF,MAAMC,SAAWjF,KAAKgF,MAAMC,QAAQQ,qDAKzCzF,KAAK+V,kBAAkB,YACvB/V,KAAKgW,iBAAiBhW,KAAKsP,SAAU,iDAKrCtP,KAAK+V,kBAAkB,UACvB/V,KAAKgW,iBAAiBhW,KAAKuP,OAAQ,+CAKnCvP,KAAK+V,kBAAkB,UACvB/V,KAAKgW,iBAAiBhW,KAAKwP,OAAQ,6CAKnCxP,KAAK+V,kBAAkB,QACvB/V,KAAKgW,iBAAiBhW,KAAKyP,KAAM,0CAKjCzP,KAAK+V,kBAAkB,OACvB/V,KAAKgW,iBAAiBhW,KAAK4P,IAAK,OAEhC,IAAK,IAAIuD,EAAE,EAAGA,EAAInT,KAAK4P,IAAI7O,OAAQoS,IAAK,CAEtC,IAAIvD,EAAM5P,KAAK4P,IAAIuD,GAEnB,GAAiB,gBAAbvD,EAAID,MAEN,GAAI3P,KAAKwE,SAAS0I,gBAAiB,CAGjC,IADA,IAAI+G,EAAQ/B,SAASK,qBAAqB,QACjC0D,EAAIhC,EAAMlT,OAAQkV,GAAK,EAAGA,IAAK,CACtC,GAAIhC,EAAMgC,IAAwC,OAAlChC,EAAMgC,GAAG/B,aAAa,QACzBD,EAAMgC,GAAG/B,aAAa,QAAQV,MAAM,KAAKC,OAAO,GAAG,KACjD7D,EAAID,MACfsE,EAAMgC,GAAG7B,WAAWL,YAAYE,EAAMgC,IAK3B,KAAbrG,EAAI3I,KAENjH,KAAKuV,UAAU,iBAGfvV,KAAK0T,UAAU9D,SAKnB5P,KAAK0T,UAAU9D,0CAOnB5P,KAAK+V,kBAAkB,WACvB/V,KAAKgW,iBAAiBhW,KAAK4P,IAAK,kDAKhC5P,KAAK+V,kBAAkB,YACvB/V,KAAKgW,iBAAiBhW,KAAKwE,SAAU,iDAQ1B0R,GACX,IAAI9P,EAAM8P,EACNC,EAAQ,IAAIC,OAAO,UAGvB,IAA2B,IAAvBhQ,EAAIiQ,OAAOF,GAAe,CAC5B,IAAIG,EAAMjG,OAAO6F,GAIf9P,EAFU,OAARkQ,EAEI,GAGAlQ,EAAImQ,QAAQJ,EAAOG,GAI7B,OAAOlQ,oCAICA,GACRpG,KAAKqG,aAAerG,KAAKqG,YAAYrG,KAAKwW,aAAapQ,0CAI3CqQ,EAASC,GACrB,IAAI5P,GAAS,EACT9G,KAAK+D,SACH/D,KAAK+D,OAAOgD,WAAW/G,KAAKgH,mBAC9BF,GAAS,GAGX9G,KAAK+D,OAAO4S,cAAcF,EAASC,GAEnC5P,GAAU9G,KAAK+D,OAAOG,aAEtBlE,KAAKgF,MAAM0L,UAAY1Q,KAAKgF,MAAM0L,SAAStL,kDAOjC+Q,EAAOS,GACnB,OAAIT,EACK,IAAIC,OAAO,IAAMQ,EAAU,KAE3B,IAAIR,OAAO,IAAMQ,EAAQpD,MAAM,OAAOqD,IAAI,SAAAC,GAAC,OAAIA,EAAEP,QAAQ,sBAAuB,UAASQ,KAAK,QAAU,yCAIvGjM,EAAM7D,GAEhB,IADA,IAAI+P,EAAU/P,EAAKwM,QACVN,EAAIrI,EAAK/J,OAAO,EAAGoS,GAAK,EAAGA,IAAK,CACvC,IAAI8D,EAAMnM,EAAKqI,IAAM,GAErB,IACE,IAAI+D,EAAK,IAAId,OAAO,cAAcjD,EAAG,KACjCgE,EAAQ,IAAIf,OAAO,SAAU,KAC7BgB,EAAMH,EAAIV,QAAQY,EAAO,QAC7BH,EAAUA,EAAQT,QAAQW,EAAI,KAAKE,GACnC,MAAO/U,GACPrC,KAAKwE,SAASwJ,cAAgB1L,QAAQC,IAAI,wCAAyCF,IAGvF,OAAO2U,kCASPhX,KAAK+D,QAAU/D,KAAK+D,OAAOwC,QAC3BvG,KAAKqQ,QAAUrQ,KAAKqQ,OAAO9J,QAC3BvG,KAAK8F,OAAS9F,KAAK8F,MAAMS,0CAIjBT,GAAO,IAAAuB,EAAArH,KAED,OAAV8F,IACF9F,KAAK8F,MAAQ,IAAII,2CAAUJ,GAC3B9F,KAAKqX,oBAGLrX,KAAK8F,MAAMK,QAAU,SAACC,GAAUiB,EAAKhB,YAAYD,GAAMiB,EAAKgJ,QAAUhJ,EAAKgJ,OAAO9J,SAGlFvG,KAAK8F,MAAMQ,SAAW,WAAQe,EAAKvB,MAAMS,SAGzCvG,KAAK8F,MAAMU,SAAW,WAAQa,EAAKtD,QAAUsD,EAAKtD,OAAO0C,gBAGzDzG,KAAK8F,MAAMY,WAAa,WAAQW,EAAKtD,QAAUsD,EAAKtD,OAAO4C,sDAKpD5C,GAAwB,IAAAuT,EAAAtX,KAAhBoR,EAAgBtQ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAEZ,OAAXiD,IACF/D,KAAK+D,OAAS,IAAIiC,0CAASjC,GAC3B/D,KAAK+D,OAAOqN,UAAYA,EACxBpR,KAAK+D,OAAOwT,UAAY,SAACnR,GAAUkR,EAAKC,UAAUnR,IAElDrC,EAAOyT,SAAW,WAAQF,EAAKnW,SAAS,QAASmW,EAAK1V,SACtDmC,EAAO0T,SAAW,WAAQH,EAAKvT,QAAUuT,EAAKvT,OAAOG,kDAK9CmM,GAEM,OAAXA,IACFrQ,KAAKqQ,OAAS,IAAIrK,0CAASqK,uCASpB1H,GACJA,IAILA,EAAK+O,UAAY1X,KAAK2I,KAAKgP,4CAyBvBC,GACA5X,KAAK8H,QACT9H,KAAK8F,OAAS9F,KAAK8F,MAAM+R,MAAMD,0CAIlB/Q,GACb,IAAIC,GAAS,EAET9G,KAAK+D,SACH/D,KAAK+D,OAAOgD,WAAW/G,KAAKgH,mBAC9BF,GAAS,GAGXD,IAEAC,GAAU9G,KAAK+D,OAAOG,aAEtBlE,KAAKgF,MAAM0L,UAAY1Q,KAAKgF,MAAM0L,SAAStL,6CAOtCnB,EAAI6T,EAAKC,GAAW,IAAAC,EAAAhY,KACvBiY,EAAQjY,KAAKkY,UAAUjU,GAE3B,GAAIgU,EAEF,OADAjY,KAAKmY,WAAWlU,GACTgU,EAGT,IAAIG,EAAOL,GAAa9T,EACpBoU,EAAKrY,KAAK6O,WAAWuJ,GAEpBC,IACHA,EAAKtV,gDAGP,IAAIuV,EAASR,GAAO,GAUpB,GARKQ,EAAOrU,KACVqU,EAAOrU,GAAKA,EAAGsU,eAGZD,EAAOE,cACVF,EAAOE,YAAcvU,IAGlBqU,EAAOG,WAAY,CACtB,IAAIC,EAAOJ,EAAOI,MAAQ,MACtBC,EAAWD,EAAKE,WAAW,SAG7BN,EAAOG,WADLE,EACkB,aAAeD,EAAO,yBAAyB1Y,KAAK+I,MAAM8P,QAAQC,KAAK,OAAOJ,EAAK,OAEnF,iDAAiD1Y,KAAK+I,MAAM8P,QAAQC,KAAK,OAAOJ,EAAK,OAI7G,IAAKJ,EAAOS,UAAW,CACrB,IAAMzP,EAAStJ,KAAKuQ,OAAOyI,SAASC,gBAChCC,EAAO,cAAgB,IAAI5P,EAAS,MAEpCtJ,KAAK8H,SACPoR,EAAO,eAAiB,EAAE5P,EAAS,OAGrCgP,EAAOS,UAAY,CACjB7P,MAAOgQ,EACPjQ,OAAQ,eAAiB,EAAEK,EAAS,OAIxC,IAAIjB,EAAM1C,6CAAMC,YA6BhB,OA5BA0S,EAAOa,SAAW,SAAC/H,GACjBA,EAAUgI,QAAQ7Q,MAAM8Q,gBAAkBrB,EAAKjP,MAAMiB,QAAQC,WAAWC,MACxE,IAAIoP,EAAQ3T,6CAAMsC,cAAcoQ,EAApBvY,OAAAyZ,6JAAA,EAAAzZ,CAAA,CAA0B0Z,SAAUnR,EAAKpE,GAAIA,EAAGsU,cAAe1T,MAAOuM,GAAckH,EAAOtV,OAAS,MAChHgP,iDAASD,OAAOpM,6CAAMsC,cAAcwR,uEAAkB,CAAE1Q,MAAOiP,EAAKjP,OAASuQ,GAAQlI,EAAUgI,QAAS,WAEtG,IAAIrE,EAAM1M,EAAIpC,QACd,GAAI8O,GAAOA,EAAI2E,SAAU,CACvB,IAAIC,EAAazH,SAASjK,cAAc,OACxC0R,EAAWC,UAAUC,IAAI,cAAc,oBACvCF,EAAWG,UAAX,qrBACAH,EAAWpR,MAAMwR,MAAQ/B,EAAKzH,OAAOyJ,WAAWhC,EAAKzH,OAAOyI,SAASjQ,OAAO,GAC5EqI,EAAU6I,WAAWC,aAAaP,EAAYvI,EAAU6I,WAAWnG,YAEnEtD,yCAAQ2J,UAAUC,QAAQ,SAACC,GACzBV,EAAWW,iBAAiBD,EAAO,SAAC9Y,GAClCwT,EAAI2E,SAASnY,EAAIgZ,mBAKvBnZ,OAAOmD,OAAOS,MAAMkM,OAAOsJ,KAAKzF,MAKpCuD,EAAOlH,UAAYpR,KAAKoR,UAExBpR,KAAKuQ,OAAOkK,OAAOnC,GACZjQ,EAAIpC,yCAKJhC,EAAI6T,EAAKO,GAChB,IAAIJ,EAAQjY,KAAKkY,UAAUjU,GAC3B,OAAIgU,GAEGjY,KAAK0a,SAASzW,EAAI6T,EAAKO,oCAIvBpU,GAGP,IAFA,IAAMiN,EAASlR,KAAKgF,MAAMkM,OACpByJ,EAAQ1W,EAAGsU,cACRpF,EAAE,EAAGA,EAAIjC,EAAOnQ,OAAQoS,IAC3BjC,EAAOiC,IAAMjC,EAAOiC,GAAGnQ,MAAMiB,KAAO0W,GACtCzJ,EAAO0J,OAAOzH,EAAG,qCAMblP,GAGR,IAFA,IAAMiN,EAASlR,KAAKgF,MAAMkM,OACpByJ,EAAQ1W,EAAGsU,cACRpF,EAAE,EAAGA,EAAIjC,EAAOnQ,OAAQoS,IAC/B,GAAIjC,EAAOiC,IAAMjC,EAAOiC,GAAGnQ,MAAMiB,GAAGsU,gBAAkBoC,EACpD,OAAOzJ,EAAOiC,GAGlB,OAAO,wCAIElP,GACT,IAAIsM,EAASvQ,KAAKuQ,OAAOsK,UAAU,WACjC,OAAQ7a,KAAKiE,KAAOA,GAAMjE,KAAK8a,YAAYC,YAAc9W,IAGvDsM,EAAOxP,OAAS,IACO,cAArBwP,EAAO,GAAGhL,QACZvF,KAAKgF,MAAMC,QAAQC,QAAQqL,EAAO,IAEpCA,EAAO,GAAG3O,4CAKHqC,GACT,IAAIsM,EAASvQ,KAAKuQ,OAAOsK,UAAU,WACjC,OAAQ7a,KAAKiE,KAAOA,GAAMjE,KAAK8a,YAAYC,YAAc9W,IAGvDsM,EAAOxP,OAAS,IACO,cAArBwP,EAAO,GAAGhL,OACZvF,KAAKgF,MAAMC,QAAQC,QAAQqL,EAAO,KAElCA,EAAO,GAAGyK,aACVzK,EAAO,GAAG0K,4CASd,IAAI1W,EAASvE,KAKTkb,GAHclb,KAAKwE,SAAS2J,UAAY,SAAW,SAGzBnO,KAAKwE,SAAS0J,cAAgB,IAAMlO,KAAKwE,SAAS8J,WAAa,YAE7FtO,KAAK4B,QACL5B,KAAKmR,KAAO,IAAIvR,4CAAWsb,GAG3Blb,KAAKmR,KAAKhR,OAAS,SAAUoB,GAC3BgD,EAAOoS,cAAc,aAAc,iBACnCpS,EAAOoN,eAAiB,GAG1B3R,KAAKmR,KAAK/Q,QAAU,SAAUmB,GAC5BgD,EAAOoS,cAAc,aAAc,wBACnCrU,QAAQC,IAAIhB,IAGdvB,KAAKmR,KAAK9Q,QAAU,SAAUkB,GAC5BgD,EAAOoS,cAAc,aAAc,yBACnCwE,WAAW,WAAQ5W,EAAO1D,cAAgB0D,EAAO4J,UAAY,EAAM,GAAO5J,EAAOmN,iBAInF1R,KAAKmR,KAAK7Q,SAAW,SAAS6B,EAASN,GAChC0C,EAAO4M,KAAKvQ,UAEf2D,EAAOS,MAAM4L,OAASrM,EAAOS,MAAM4L,MAAMwK,YAGzC7W,EAAOpD,SAAS,eAAiBoD,EAAOC,SAAS2I,WACjD5I,EAAOpD,SAAS,gBAAkBkD,KAAKqR,MAAMnR,EAAOR,OAAO4E,KAAKyL,WAAWuB,aAAepR,EAAOR,OAAO6R,KAAK3M,UAG3G1E,EAAOkI,QAAU5K,EAAKwZ,SAAS,QACjC9W,EAAOoI,gBAKP2O,aAAa/W,EAAOiI,WACpB2O,WAAW5W,EAAOiI,UAAW,OAKjCxM,KAAKmR,KAAK5Q,OAAS,SAAU0G,GAC3B,IAAK1C,EAAO8M,SAAU,CAEpB,IAAK,IAAI8B,EAAI,EAAGA,EAAI3H,UAAUzK,OAAQoS,IACpC,GAAIlM,EAAKsU,MAAM/P,UAAU2H,IAAK,CAC5B5O,EAAOS,MAAM4L,OAASrM,EAAOS,MAAM4L,MAAMwK,UAAUnU,GACnD,MAKAA,EAAKsU,MAAM,qCACbhX,EAAO8M,UAAW,EAClB8J,WAAW,WACJ5W,EAAO+M,SACV/M,EAAOuO,QAAQ,iBAEhBvO,EAAOkN,gBAKd,IAAI+J,EAAe,IAAIpF,OAAO,IAAI7R,EAAOC,SAAS6I,cAClD,GAAIpG,EAAKsU,MAAMC,GAAe,CAC5B,IAAIC,EAAMxU,EAAKsP,QAAQiF,EAAc,IAUrC,OATAjX,EAAOiN,YAAa,OAGhBjN,EAAOC,SAAS4I,iBAClB7I,EAAOmW,SAAS,SAAU,CAAEhC,KAAM,iBAClCnU,EAAOS,MAAMgM,OAAO0K,OAAOzV,QAAQyV,OAAOC,OAAOF,EAAI,OAErDlX,EAAOuB,MAAM6C,KAAKlF,MAAQgY,GAM9B,IAAIG,GAAW,EACfrX,EAAO+K,SAAS8K,QAAQ,SAACyB,EAAS1I,GAChC,IAAI0I,EAAQC,SAAZ,CAEA,IAAI5E,EAAK3S,EAAOwX,cAAcF,EAAQ1F,MAAO0F,EAAQjF,SACjD9L,EAAO7D,EAAKsU,MAAMrE,GAEtB,GAAIpM,EAAM,CACR,IAAIwI,EAAM/O,EAAOyX,YAAYlR,EAAM+Q,EAAQ5U,MACvC4U,EAAQI,WACV1X,EAAO2X,iBAAiB5I,GAExB/O,EAAOpD,SAASmS,GAGduI,EAAQD,WACVrX,EAAOiN,YAAa,EACpBoK,GAAW,OAKbA,KAEArX,EAAOiN,YAAwB,OAATvK,GAA0B,SAATA,GAK3C1C,EAAOiN,YAAa,EAEpBjN,EAAO4C,eAAe,kBAAM5C,EAAOR,OAAOqD,WAAWH,MANnD1C,EAAOiN,YAAa,IAUxBxR,KAAKmR,KAAK1Q,OAAS,SAAU0b,GACvB5X,EAAOR,QACTQ,EAAO4C,eAAe,kBAAM5C,EAAOR,OAAOqY,WAAWD,MAKzDnc,KAAKmR,KAAKzQ,SAAW,SAAU2R,EAAKgK,GAC9B9X,EAAOR,QACTQ,EAAO4C,eAAe,kBAAM5C,EAAOR,OAAOuY,aAAajK,EAAKgK,MAKhErc,KAAKmR,KAAKxQ,SAAW,SAAUsG,GACP,OAAlB1C,EAAO8L,SACT9L,EAAO8L,OAAO9J,QACdhC,EAAO8L,OAAOjJ,WAAWH,EAAO,UAMpCjH,KAAKmR,KAAK3Q,SAAW,SAAUuU,GAC7B,IAAIwH,EAAK,GACLxH,EAAIG,eAAe,QACrBqH,EAAKxH,EAAIyH,KACAzH,EAAIG,eAAe,QAC5BqH,EAAKxH,EAAIwH,IAGPA,GAAa,KAAPA,GACRhY,EAAOC,SAASuJ,aAAezL,QAAQC,IAAI,QAAQga,EAAG,IAAKxH,GAC3DxQ,EAAO+L,OAAOmM,KAAKF,EAAIxH,IAEvBxQ,EAAOC,SAASuJ,aAAezL,QAAQC,IAAI,kBAAmBwS,wCAK7C,IAAb6C,EAAa9W,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACrB,GAAK8W,IAAS5X,KAAKkB,cAInB,GAAI0W,GAAS5X,KAAK2R,eAAiB3R,KAAK4R,kBAAmB,CAEzD,IACIsJ,GAD2C,WAA7B9Z,OAAOgN,SAASC,UAAyBrO,KAAKwE,SAAS2J,UAAY,SAAW,SAClEnO,KAAKwE,SAAS0J,cAAgB,IAAMlO,KAAKwE,SAAS8J,WAAa,YAE7FtO,KAAK2R,iBACL3R,KAAKmR,MAAQnR,KAAKmR,KAAKtQ,UAAUqa,QAEjClb,KAAK2W,cAAc,aAAc,oEAKnC,OAAQ3W,KAAKmR,MAAQnR,KAAKmR,KAAKjQ,8CAI/BlB,KAAKmR,MAAQnR,KAAKmR,KAAKvP,8CAGXqF,GACZ,IAAKA,EAAM,MAAO,GAClB,IACE,IAAIiQ,EAAK,IAAId,OAAO,6EAA6E,KACjG,OAAOnP,EAAKsP,QAAQW,EAAI,SAAAwF,GAAI,OAAIjR,WAAWiR,KAC3C,MAAOra,GACPrC,KAAKwE,SAASwJ,cAAgB1L,QAAQC,IAAI,4BAA6BF,GAEzE,OAAO4E,mCAGApF,GACP7B,KAAKmR,MAAQnR,KAAKmR,KAAKhQ,SAASnB,KAAKqT,cAAcxR,wCAMzCuE,GAAK,IAAAuW,EAAA3c,KAEf,IAAKA,KAAKkB,cAIR,OAFAlB,KAAKmR,MAAQnR,KAAKmR,KAAKtQ,iBACvBb,KAAKmH,eAAe,kBAAMwV,EAAKhG,cAAc,aAAc,kCAIjD,KAARvQ,IAEJpG,KAAK4G,UAAUR,GACfpG,KAAKmH,eAAe,kBAAMwV,EAAKhG,cAAc,YAAavQ,KAC1DpG,KAAK4c,uDAGGC,GAAM,IAAAC,EAAA9c,KACV+c,GAAU,EACd/c,KAAKwP,OAAO4K,QAAQ,SAAC4C,GACnB,IAAIA,EAAElB,SAAN,CAEA,IAAI5E,EAAK4F,EAAKf,cAAciB,EAAE7G,MAAO6G,EAAEpG,SAEvCiG,EAAKrJ,MAAM,MAAM4G,QAAQ,SAAChU,GACxB,IAAI0E,EAAO1E,EAAImV,MAAMrE,GAErB,GAAIpM,EAAM,CACRiS,GAAU,EACV,IAAI9V,EAAO6V,EAAKd,YAAYlR,EAAMkS,EAAE/V,MAChC+V,EAAEf,WACJa,EAAKZ,iBAAiBjV,GAEtB6V,EAAKlW,UAAUK,SAMlB8V,GACH/c,KAAKmB,SAAS0b,mCAOVzW,EAAK0E,GACX,GAAI9K,KAAKsR,QAAS,CAChB,IAAImK,EAAMtG,OAAO/O,GAEjB,GAAI0E,EAAM,CACR,IAAImS,EAAO9H,OAAOrK,GACdmS,EAAKlc,OAAS,IAChB0a,GAAO,IAAIwB,GAIfjd,KAAKmB,SAAS,WAAWsa,QAErB9Q,yCAAQuK,eAAe9O,IACzBuE,yCAAQvE,GAAKpG,KAAM8K,sCAKd4R,EAAMvD,GAAU,IAAA+D,EAAAld,KACrBiE,EAAK,QAAQkZ,gDAAQC,WACrBhX,EAAM,kBAAkBnC,EAAG,mCAAmCyY,EAAK,OAEvE1c,KAAKsQ,OAAO+M,GAAGpZ,EAAI,SAAC8Q,GAClBoE,EAASpE,EAAIuI,QACbJ,EAAK5M,OAAOiN,mBAAmB,CAACtZ,MAGlCjE,KAAKmB,SAASiF,oCAGPsW,EAAMvD,GAAU,IAAAqE,EAAAxd,KACnBiE,EAAK,QAAQkZ,gDAAQC,WACrBhX,EAAM,kBAAkBnC,EAAG,IAAIyY,EAAK,KAExC1c,KAAKsQ,OAAO+M,GAAGpZ,EAAI,SAAC8Q,GAClBoE,EAASpE,GACTyI,EAAKlN,OAAOiN,mBAAmB,CAACtZ,MAGlCjE,KAAKmB,SAASiF,mCAORqX,GACN,GAAKzd,KAAK+D,OAAV,CACA,IAAI2Z,EAAO1d,KAAK+D,OAAO4E,KACnB1B,EAAQyW,EAAK3C,WAAa2C,EAAKC,YACnC,GAAI1W,EAAKlG,OAAS,EAAG,CACnB,IAAI6c,EAAO,IAAIC,KAAK,CAAC5W,GAAO,CAAC2N,KAAM,4BACnCkJ,kDAAOF,EAAMH,QAEbM,MAAM,6FAgBU,IAEdtR,EAAQuR,EAFMC,EAAAje,KAGa,qBAApBkS,SAASzF,QAClBA,EAAS,SACTuR,EAAmB,oBACmB,qBAAtB9L,SAASgM,UACzBzR,EAAS,WACTuR,EAAmB,sBACuB,qBAA1B9L,SAASiM,eACzB1R,EAAS,eACTuR,EAAmB,0BAIoB,qBAA9B9L,SAASoI,uBAA+CtZ,IAAXyL,EACtDnK,QAAQC,IAAI,2DAGZ2P,SAASoI,iBAAiB0D,EAAkB,WAC1CC,EAAKtR,cAAgB,EACrBsR,EAAK1M,YAAc,EACfW,SAASzF,GACXwR,EAAKxR,QAAS,EAEdwR,EAAKxR,QAAS,EAEhBwR,EAAKzR,cACJ,GAILxM,KAAK0M,QAAQ0R,WAAW,CACtBC,UAAU,EACVC,YAAY,yCAMdte,KAAKuQ,OAAOyI,SAASuF,YAAa,EAClCve,KAAKuQ,OAAOyI,SAASwF,YAAc,SAASpN,GAC1ChQ,OAAOmD,OAAOS,MAAMC,QAAQwZ,SAASze,MACrCoB,OAAOmD,OAAOsT,SAGhB7X,KAAKuQ,OAAOyI,SAAS0F,SAAW,SAAStN,GACvCY,iDAAS2M,uBAAuBvN,EAAUgI,SAC1ChY,OAAOmD,OAAOqa,SAAS5e,KAAKiE,IAC5B7C,OAAOmD,OAAOsT,SAGhB7X,KAAKuQ,OAAOyI,SAAS6F,OAAOC,MAAQ,WAClC1d,OAAOmD,OAAOuB,MAAMiZ,cAGtB/e,KAAKuQ,OAAOyI,SAASgG,SAASF,MAAQ,WACpC1d,OAAOmD,OAAOuB,MAAMiZ,cAGtB/e,KAAKuQ,OAAOyI,SAAS6F,OAAOI,KAAO,WACjC7d,OAAOmD,OAAOsT,QACdzW,OAAOmD,OAAOuB,MAAMoZ,eAGtBlf,KAAKuQ,OAAOyI,SAASgG,SAASC,KAAO,WACnC7d,OAAOmD,OAAOsT,QACdzW,OAAOmD,OAAOuB,MAAMoZ,6BAOX5S,qmSCvvCT6S,aAAe,IAEfC,OAAS,SAAArW,GAAK,MAAK,CACvBZ,MAAO,CACLgB,QAAS,OACTkW,SAAU,iBAEZ1W,KAAM,CACJO,MAAO,QAEToW,MAAO,CACLhW,OAAQ,KAAOP,EAAM8P,QAAQC,KAAO,KACpCzP,KAAM,GAERkW,QAAS,CACPC,YAAazW,EAAM8P,QAAQC,MAE7B2G,WAAY,CACVnW,OAAQP,EAAM8P,QAAQC,MAExB4G,SAAU,CACRF,YAAazW,EAAM8P,QAAQC,MAE7B6G,UAAW,CACTxW,QAAS,OACTkW,SAAY,cAEdO,UAAW,GAEXC,SAAU,CACR1W,QAAS,OACT2W,iBAAkB,UAEpBzW,KAAM,CACJA,KAAM,GAER0W,YAAa,CACX7W,MAAO,QAET8W,aAAc,CACZ1W,OAAQP,EAAM8P,QAAQC,MAExBmH,KAAM,CACJ9W,QAAS,QAEX+W,YAAa,CACXlX,SAAU,WACVC,OAAQkW,cAEVgB,WAAY,CACV7W,OAAQP,EAAM8P,QAAQC,MAExBsH,SAAU,CACR9W,OAAQP,EAAM8P,QAAQC,MAExBuH,UAAW,CACTlX,QAAS,QAEXmX,OAAQ,CACNpX,MAAO,aAAa,EAAEH,EAAM8P,QAAQC,KAAK,IACzChP,SAAUf,EAAM8P,QAAQC,KACxBxP,OAAQP,EAAM8P,QAAQC,MAExByH,eAAgB,CACdC,UAAW,OACXC,UAAW,QAEbC,eAAe5gB,OAAAqK,+JAAA,EAAArK,CAAA,CACbqJ,QAAS,QACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B5D,QAAS,SAGbwX,cAAc7gB,OAAAqK,+JAAA,EAAArK,CAAA,CACZqJ,QAAS,QACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B5D,QAAS,SAGbyX,cAAe,CACbzX,QAAS,OACTkW,SAAU,WACVnW,MAAO,QAET2X,cAAe,CACbxX,KAAM,WACNS,QAAS,EACTgX,UAAW,UAEbC,UAAW,CACTC,UAAW,UAEbC,UAAW,CACTC,eAAgB,gBAElBC,cAAe,CACbC,SAAU,GACVtX,QAASf,EAAM8P,QAAQC,QAK3B,SAASuI,UAAUre,GACjB,IAAIwC,EAAQxC,EAAMwC,MAAQxC,EAAMwC,MAAQ,EAExC,OAAIA,GAAmB,KAAVA,EAETuC,2CAAAC,EAAAC,cAACqZ,8DAAAtZ,EAAD,CAAOuZ,aAAc/b,EAAOuU,MAAM,SAChChS,2CAAAC,EAAAC,cAACuZ,6DAAAxZ,EAAD,CAAME,UAAWlF,EAAMye,UAAWze,EAAMye,WAItC1Z,2CAAAC,EAAAC,cAACuZ,6DAAAxZ,EAAD,CAAME,UAAWlF,EAAMye,UAAWze,EAAMye,UAIlD,SAASC,aAAa1e,GACpB,IAAIwC,EAAQxC,EAAMwC,MAAQxC,EAAMwC,QAAU,EAE1C,OAAIA,EAAQ,EAERuC,2CAAAC,EAAAC,cAACqZ,8DAAAtZ,EAAD,CAAOuZ,aAAc/b,EAAOuU,MAAM,SAC/B/W,EAAMye,UAINze,EAAMye,SAIf,SAASE,UAAU3e,GACjB,OAAIA,EAAM4e,QAEN7Z,2CAAAC,EAAAC,cAAC4Z,mEAAA7Z,EAAD,CAAY8Z,QAAS9e,EAAM8e,QAAS5Z,UAAWlF,EAAMkF,WAC9B,SAApBlF,EAAM+e,UACLha,2CAAAC,EAAAC,cAAC+Z,2EAAAha,EAAD,MAEAD,2CAAAC,EAAAC,cAACga,4EAAAja,EAAD,OAMJD,2CAAAC,EAAAC,cAAA,OAAKC,UAAWlF,EAAMkF,gBAStBga,mCACJ,SAAAA,QAAYlf,OAAO,IAAAC,MAAA,OAAAnD,OAAAC,+JAAA,EAAAD,CAAAE,KAAAkiB,SACjBjf,MAAAnD,OAAAoD,0KAAA,EAAApD,CAAAE,KAAAF,OAAAqD,+JAAA,EAAArD,CAAAoiB,SAAA9e,KAAApD,KAAMgD,QADWC,MAyBnBkf,WAAa,WACXlf,MAAKmf,YACLnf,MAAKW,SAAS,CAACye,MAAM,KA3BJpf,MA8BnBqf,YAAc,WACZrf,MAAKW,SAAS,CAACye,MAAM,IACrBjhB,OAAOmD,OAAOS,MAAMyL,OAAOhL,cAC3BrE,OAAOmD,OAAOsT,OAAM,IAjCH5U,MAoCnBsf,SAAW,SAAAC,GACTvf,MAAKW,SAAS,CAAC0b,MAAOkD,KArCLvf,MAwCnBwf,YAAc,WACRrhB,OAAOshB,QAAQ,qCACjBthB,OAAOmD,OAAOgC,SA1CCtD,MA8CnBoD,YAAc,SAACD,GACbhF,OAAOmD,OAAO8B,YAAYD,IA/CTnD,MAkDnB9B,SAAW,SAACmS,GACVlS,OAAOmD,OAAOpD,SAASmS,IAnDNrQ,MAsDnB6P,QAAU,SAAC1M,EAAK0E,GACd1J,OAAOmD,OAAOuO,QAAQ1M,EAAK0E,IAvDV7H,MA0DnB0f,cAAgB,SAAAC,GACd3f,MAAKW,SAAS,CAACif,WAAYD,KA3DV3f,MA8DnB6f,YAAc,SAAAF,GACZ3f,MAAKW,SAAS,CAACmf,SAAUH,KA/DR3f,MAuEnBwb,SAAW,SAACuE,GAAS,IACX/d,EAAYhC,MAAKU,MAAjBsB,QACJ6B,GAAS,EAET7B,EAAQlE,OAAS,GACfK,OAAOmD,OAAOR,OAAOgD,WAAW3F,OAAOmD,OAAOyC,mBAChDF,GAAS,GAIbkc,EAAKxd,MAAQ,EACbP,EAAQuV,KAAKwI,GACb/f,MAAKW,SAAS,CAAEqB,YAEZ6B,IACFwU,aAAarY,MAAKkE,gBAClBgU,WAAWlY,MAAKkE,eAAgB,OAvFjBlE,MA2FnBiC,QAAU,SAAC8d,GAAS,IACV/d,EAAYhC,MAAKU,MAAjBsB,QACFkO,EAAIlO,EAAQkP,QAAQ6O,GAC1B/d,EAAQ2V,OAAOzH,EAAG,GAClB6P,EAAKhI,aACLgI,EAAK/H,QACLhY,MAAKW,SAAS,CAAEqB,aAjGChC,MAoGnBggB,SAAW,SAAA3f,GACTL,MAAKW,SAAS,CAAEsf,WAAY5f,EAAMiX,iBArGjBtX,MAwGnBmf,UAAY,WACVnf,MAAKW,SAAS,CAAEsf,WAAY,OAC5B9hB,OAAOmD,OAAOsT,OAAM,IA1GH5U,MA6GnBkgB,cAAgB,WACd,IAAM5e,EAASnD,OAAOmD,OAEhB6e,GAAU7e,EAAOC,SAAS8I,YAChC/I,EAAO8e,cAAc,cAAeD,GACpCngB,MAAKW,SAAS,CAAE0J,YAAa8V,IAC7B7e,EAAO+e,eACP/e,EAAOS,MAAMyL,OAAOhL,eApHHxC,MAuHnBsgB,SAAW,SAAAjgB,GACTL,MAAKugB,KAAO,KACZvgB,MAAKW,SAAS,CAAE6f,WAAYngB,EAAQA,EAAMiX,cAAgB,QAzHzCtX,MA4HnBygB,UAAY,WACVzgB,MAAKW,SAAS,CAAE6f,WAAY,OAC5BriB,OAAOmD,OAAOsT,OAAM,IA9HH5U,MAiInB0gB,SAAW,SAAArgB,GACTL,MAAKugB,KAAOlgB,EAAME,OAAOC,OAlIRR,MAqInB2gB,WAAa,SAAAtgB,GACXA,EAAMugB,iBACF5gB,MAAKugB,MAAQvgB,MAAKugB,KAAKziB,OAAS,EAClCK,OAAOmD,OAAO8B,YAAY,QAAQpD,MAAKugB,MAEvCpiB,OAAOmD,OAAO8B,YAAY,QAG5BpD,MAAKygB,aA7IYzgB,MAgJnB6gB,WAAa,SAAAxgB,GACXL,MAAKsQ,KAAO,KACZtQ,MAAKmf,YACLnf,MAAKW,SAAS,CAAEmgB,aAAczgB,EAAMiX,iBAnJnBtX,MAsJnB+gB,YAAc,WACZ/gB,MAAKW,SAAS,CAAEmgB,aAAc,OAC9B3iB,OAAOmD,OAAOsT,OAAM,IAxJH5U,MA2JnBghB,cAAgB,SAAA7d,GAAG,OAAI,SAAA9C,GACrBlC,OAAOmD,OAAOuB,MAAM6C,KAAKlF,MAAQ2C,EACjCnD,MAAKihB,iBA7JYjhB,MAgKnBkhB,aAAe,WACT/iB,OAAOshB,QAAQ,+CACjBthB,OAAOmD,OAAOuB,MAAMqe,eACpBlhB,MAAKihB,iBAnKUjhB,MAuKnBmhB,YAAc,SAAA9gB,GACZL,MAAKmf,YACLnf,MAAKW,SAAS,CAAEygB,cAAe/gB,EAAMiX,iBAzKpBtX,MA4KnBihB,aAAe,WACbjhB,MAAKW,SAAS,CAAEygB,cAAe,OAC/BjjB,OAAOmD,OAAOsT,OAAM,IA9KH5U,MAiLnBqhB,QAAU,SAAAhhB,GACRL,MAAKshB,QAAU,KACfthB,MAAKmf,YACLnf,MAAKW,SAAS,CAAE4gB,UAAWlhB,EAAMiX,iBApLhBtX,MAuLnBwhB,SAAW,WACTxhB,MAAKW,SAAS,CAAE4gB,UAAW,OAC3BpjB,OAAOmD,OAAOsT,OAAM,IAzLH5U,MA4LnByhB,QAAU,SAAAphB,GACRL,MAAKshB,QAAUjhB,EAAME,OAAOC,OA7LXR,MAgMnB0hB,QAAU,SAAArhB,GACRA,EAAMugB,iBAED5gB,MAAKshB,SAAathB,MAAKshB,QAAQxjB,OAAS,IAE7CK,OAAOmD,OAAOogB,QAAQ1hB,MAAKshB,QAAQ,QAEnCthB,MAAKwhB,aAvMYxhB,MA0MnB2hB,QAAU,SAAAthB,GACRL,MAAKpD,IAAMyD,EAAME,OAAOC,OA3MPR,MA8MnB4hB,eAAiB,WACfzjB,OAAOmD,OAAOmW,SAAS,aAAc,CAAEhC,KAAM,WA/M5BzV,MAkNnB6hB,cAAgB,WACd1jB,OAAOmD,OAAOmW,SAAS,SAAU,CAAEhC,KAAM,iBAErCzV,MAAKsQ,MAAQtQ,MAAKsQ,KAAKxS,OAAS,GAClCK,OAAOmD,OAAOS,MAAMgM,OAAO+T,QAAQ9hB,MAAKsQ,MAG1CtQ,MAAK+gB,eAzNY/gB,MA4NnB+hB,WAAa,SAAA1hB,GACXA,EAAMugB,iBACN,IAAMoB,EAAQ3hB,EAAME,OAAOyhB,MAE3B,GAAIA,EAAMlkB,OAAS,EAAG,CACpB,IAAImkB,EAAS,IAAIC,WACjBD,EAAOE,OAAS,WACdniB,MAAKsQ,KAAO2R,EAAO5H,OACnBra,MAAK6hB,iBAEPI,EAAOG,WAAWJ,EAAM,MAtOThiB,MA0OnBqiB,UAAY,SAAAhiB,GAGV,GAFAA,EAAMugB,iBAED5gB,MAAKpD,KAAQoD,MAAKpD,IAAI+Y,WAAW,QAAtC,CAEA,IAAI2M,EAAM,IAAInkB,OAAOokB,eACrBD,EAAIE,mBAAqB,WACA,IAAnBF,EAAI5jB,aAEa,MAAf4jB,EAAIhgB,QACNtC,MAAKsQ,KAAOgS,EAAIG,aAChBziB,MAAK6hB,iBAEL/G,MAAM,+DAIZwH,EAAIlD,KAAK,MAAOpf,MAAKpD,KACrB0lB,EAAIzjB,SA5PamB,MAqQnB0iB,WAAa,SAAAC,GAAM,OAAI,SAAAtiB,GACjBsiB,GAAUA,EAAO3e,MAAwB,KAAhB2e,EAAO3e,OAC9B2e,EAAO3J,WACT7a,OAAOmD,OAAO2X,iBAAiB0J,EAAO3e,KAAM3D,GAE5ClC,OAAOmD,OAAOpD,SAASykB,EAAO3e,SA1QjBhE,MA+QnB4iB,UAAY,SAAAD,QACV,GAAIA,QAAUA,OAAOpgB,OAA0B,KAAjBogB,OAAOpgB,MACnC,IACE,IAAI8Q,IAAMlD,KAAKwS,OAAOpgB,OACtB,GAAI8Q,IACF,OAAOA,IAET,MAAOjU,GACPjB,OAAOmD,OAAOC,SAASwJ,cAAgB1L,QAAQC,IAAI,6CAA8CF,GAIrG,OAAO,GAzRPY,MAAKU,MAAQ,CACX0e,MAAM,EACN/C,MAAOtc,MAAMsc,MACbra,QAAS,GACT8d,SAAU,EACVF,WAAY,EACZK,WAAY,KACZa,aAAc,KACdN,WAAY,KACZe,UAAW,KACXH,cAAe,MAGjBphB,MAAKugB,KAAO,GACZvgB,MAAKpD,IAAM,GACXoD,MAAKsQ,KAAO,GACZtQ,MAAKshB,QAAU,GACfthB,MAAK6S,QAAU,KACf7S,MAAKkF,MAAQxC,6CAAMC,YAEnBxE,OAAOmD,OAAOS,MAAMC,QAApBnF,OAAA+D,sKAAA,EAAA/D,QAAA+D,sKAAA,EAAA/D,CAAAmD,QAtBiBA,gaAoEjB7B,OAAOmD,OAAOR,OAAOG,iDA4LjB9C,OAAOshB,QAAQ,8BACjBthB,OAAOmD,OAAO1D,WAAU,+FAiC1BO,OAAOmD,OAAOS,MAAMC,QAAU,sCAGvB,IAAAc,EAAA/F,KACD8F,EAAQ1E,OAAOmD,OAAOuB,MACpBwB,EAAYtH,KAAKgD,MAAjBsE,QAFDwe,EAIqD9lB,KAAK2D,MADzD2b,EAHDwG,EAGCxG,MAAOra,EAHR6gB,EAGQ7gB,QAASod,EAHjByD,EAGiBzD,KAAMgC,EAHvByB,EAGuBzB,cACtBnB,EAJD4C,EAIC5C,WAAYa,EAJb+B,EAIa/B,aAAcN,EAJ3BqC,EAI2BrC,WAAYe,EAJvCsB,EAIuCtB,UAJvCjd,EAKmDnG,OAAOmD,OAAOC,SAAhE8I,EALD/F,EAKC+F,YAAaC,EALdhG,EAKcgG,cAAeoB,EAL7BpH,EAK6BoH,kBAE9BU,EAAUjO,OAAOmD,OAAO8K,QAE1B0W,EAAMjgB,GAASkgB,QAAQ3B,GAAiBve,EAAMgQ,QAAQrC,QAAQwS,UAAY,GAE9E,OACEle,2CAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBJ,2CAAAC,EAAAC,cAACie,+DAAAle,EAAD,CAAQE,UAAWZ,EAAQqB,KAAMK,SAAS,SAAS8Y,QAAS,kBAAM1gB,OAAOmD,OAAOsT,UAC9E9P,2CAAAC,EAAAC,cAACke,gEAAAne,EAAD,CAASoe,gBAAiBpmB,KAAK2D,MAAM0e,MACnCta,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAOhS,EAAc,gBAAkB,kBAC9CvF,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQE,UAAWZ,EAAQ6Z,cAAeoF,aAAW,eAAezE,QAAS9hB,KAAKmjB,eAC7D,SAAlB5V,EACCD,EAAcvF,2CAAAC,EAAAC,cAACue,qEAAAxe,EAAD,MAAsBD,2CAAAC,EAAAC,cAACwe,sEAAAze,EAAD,MAEpCsF,EAAcvF,2CAAAC,EAAAC,cAACwe,sEAAAze,EAAD,MAAuBD,2CAAAC,EAAAC,cAACue,qEAAAxe,EAAD,QAK3CD,2CAAAC,EAAAC,cAACye,mEAAA1e,EAAD,CAAY2e,QAAQ,KAAK5M,MAAM,UAAU6M,QAAM,EAAC1e,UAAWZ,EAAQgY,OAChEA,GAGHvX,2CAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQoZ,gBACtB3Y,2CAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ+B,OACvBpE,EAAQ4R,IAAI,SAACmM,EAAK7P,GAAN,OACXpL,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASgN,IAAK7B,EAAGmM,MAAO0D,EAAKlI,YAAYC,WACvChT,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQgN,IAAKgO,EAAK/e,GAAIqD,QAAS,CAAEoB,MAAOpB,EAAQqY,WAAazX,UAAWZ,EAAQmY,WAAY8G,aAAW,YAAYzE,QAAS,kBAAM/b,EAAKb,QAAQ8d,KAC7Ijb,2CAAAC,EAAAC,cAACyZ,aAAD,CAAclc,MAAO,kBAAMwd,EAAKxd,QAC9BuC,2CAAAC,EAAAC,cAACuZ,6DAAAxZ,EAAD,CAAME,UAAWI,kDAAWhB,EAAQoY,SAAUsD,EAAK6D,WAAW9L,YAAaiI,EAAK6D,WAAW9L,YACzF3Z,OAAOmD,OAAOuD,QAAUkb,EAAKlI,YAAYC,eAKnDhT,2CAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQiY,UACvBlQ,EAAQwH,IAAI,SAAC+O,EAAOzS,GAAR,OAAeyS,EAAO9J,UACjC/T,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASgN,IAAK7B,EAAGmM,MAAOsG,EAAOkB,SAC7B/e,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQue,aAAYX,EAAOjW,KAAMmS,QAAS/b,EAAK4f,WAAWC,IACxD7d,2CAAAC,EAAAC,cAACoZ,UAAD,CAAW7b,MAAOO,EAAK8f,UAAUD,IAC9BA,EAAOlN,WAOlB3Q,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,uBACbvX,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQ+e,YAAW7D,EAAa,eAAiB,KAAMqD,aAAW,YAAYS,gBAAc,OAAOlF,QAAS9hB,KAAKijB,UAC/Glb,2CAAAC,EAAAC,cAACgf,8DAAAjf,EAAD,QAIJD,2CAAAC,EAAAC,cAACif,wEAAAlf,EAAD,CACE2e,QAAQ,YACRQ,OAAO,OACP9E,KAAMA,EACNhiB,QAASL,KAAKsiB,YACdniB,OAAQH,KAAKmiB,YAGbpa,2CAAAC,EAAAC,cAACmf,wCAAA,EAAD,CAAU9E,YAAatiB,KAAKsiB,eAG9Bva,2CAAAC,EAAAC,cAACof,gEAAArf,EAAD,CAAS/D,GAAG,eAAeqjB,SAAU7D,EAAYpB,KAAM2D,QAAQvC,GAAapjB,QAASL,KAAK0jB,WACxF3b,2CAAAC,EAAAC,cAAA,QAAMsf,SAAUvnB,KAAK4jB,YACnB7b,2CAAAC,EAAAC,cAACuf,kEAAAxf,EAAD,CAAWU,MAAM,aAAaR,UAAWZ,EAAQgZ,OAAQ1X,aAAa,MAAM6e,WAAS,EAACd,QAAQ,WAAWvhB,SAAUpF,KAAK2jB,YAE1H5b,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQ0f,WAAS,EAAC5F,QAAS9hB,KAAK4jB,YAAhC,aAKF7b,2CAAAC,EAAAC,cAACof,gEAAArf,EAAD,CAAS/D,GAAG,cAAcqjB,SAAU9C,EAAWnC,KAAM2D,QAAQxB,GAAYnkB,QAASL,KAAKykB,UACrF1c,2CAAAC,EAAAC,cAAA,QAAMsf,SAAUvnB,KAAK2kB,SACnB5c,2CAAAC,EAAAC,cAACuf,kEAAAxf,EAAD,CAAWU,MAAM,YAAYie,QAAQ,WAAWze,UAAWZ,EAAQgZ,OACjElb,SAAUpF,KAAK0kB,QAAS+C,WAAS,EACjCE,WAAY,CAAEC,WAAY,CAAErf,MAAO,CAAEyY,UAAW,UAAY6G,aAAc9f,2CAAAC,EAAAC,cAAC6f,uEAAA9f,EAAD,CAAgBgB,SAAS,OAAzB,YAG9EjB,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQ0f,WAAS,EAAC5F,QAAS9hB,KAAK2kB,SAAhC,aAKF5c,2CAAAC,EAAAC,cAACof,gEAAArf,EAAD,CAAS/D,GAAG,iBAAiBqjB,SAAUvD,EAAc1B,KAAM2D,QAAQjC,GAAe1jB,QAASL,KAAKgkB,aAC9Fjc,2CAAAC,EAAAC,cAAA,QAAMsf,SAAUvnB,KAAKslB,UAAWpd,UAAWZ,EAAQgZ,QACjDvY,2CAAAC,EAAAC,cAACuf,kEAAAxf,EAAD,CAAW4M,KAAK,MAAM8S,WAAS,EAAChf,MAAM,aAAaie,QAAQ,WAAWvhB,SAAUpF,KAAK4kB,QAAS6C,WAAS,KAEzG1f,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQ8Z,QAAS9hB,KAAKslB,WAAtB,cAGAvd,2CAAAC,EAAAC,cAAA,SACE8f,OAAO,aACP7f,UAAWZ,EAAQ+Y,UACnBpc,GAAG,cACH2Q,KAAK,OACLxP,SAAUpF,KAAKglB,aAEjBjd,2CAAAC,EAAAC,cAAA,SAAO+f,QAAQ,eACbjgB,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQ+P,UAAU,QAAlB,gBAIFhQ,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQ8Z,QAAS9hB,KAAK8kB,eAAtB,eAKF/c,2CAAAC,EAAAC,cAACof,gEAAArf,EAAD,CAAS/D,GAAG,kBAAkBqjB,SAAUjD,EAAehC,KAAM2D,QAAQ3B,GAAgBhkB,QAASL,KAAKkkB,cACjGnc,2CAAAC,EAAAC,cAACggB,6DAAAjgB,EAAD,CAAME,UAAWZ,EAAQiZ,gBACtBwF,EAAIlP,IAAI,SAACzQ,EAAK+M,GAAN,OACPpL,2CAAAC,EAAAC,cAACigB,iEAAAlgB,EAAD,CAAUgN,IAAK7B,EAAGyS,QAAM,EAACuC,OAAK,EAACC,SAAO,EAACtG,QAAS/b,EAAKke,cAAc7d,IACjE2B,2CAAAC,EAAAC,cAACogB,qEAAArgB,EAAD,CAAcwM,QAASpO,QAI7B2B,2CAAAC,EAAAC,cAACqe,+DAAAte,EAAD,CAAQ8Z,QAAS9hB,KAAKmkB,cAAtB,kBAKFpc,2CAAAC,EAAAC,cAACqgB,6DAAAtgB,EAAD,CAAMugB,qBAAmB,EAACtkB,GAAG,eAAeqjB,SAAUpE,EAAYb,KAAM2D,QAAQ9C,GAAapB,QAAS9hB,KAAKoiB,UAAW/hB,QAASL,KAAKoiB,WAClIra,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU8Z,QAAS9hB,KAAKoiB,WACtBra,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,eACbvX,2CAAAC,EAAAC,cAACwgB,oEAAAzgB,EAAD,QAGJD,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU8Z,QAAS9hB,KAAKmiB,YACtBpa,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,oBACbvX,2CAAAC,EAAAC,cAACygB,kEAAA1gB,EAAD,QAGJD,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU8Z,QAAS9hB,KAAK6kB,gBACtB9c,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,yBACbvX,2CAAAC,EAAAC,cAAC0gB,+DAAA3gB,EAAD,QAGJD,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU+e,YAAWhD,EAAe,iBAAmB,KAAMwC,aAAW,cAAcS,gBAAc,OAAOlF,QAAS9hB,KAAK8jB,YACvH/b,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,oBACbvX,2CAAAC,EAAAC,cAAC2gB,qEAAA5gB,EAAD,QAGJD,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU+e,YAAWvC,EAAY,cAAgB,KAAM+B,aAAW,WAAWS,gBAAc,OAAOlF,QAAS9hB,KAAKskB,SAC9Gvc,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,qBACbvX,2CAAAC,EAAAC,cAAC4gB,8DAAA7gB,EAAD,QAGJD,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU+e,YAAW1C,EAAgB,kBAAoB,KAAMkC,aAAW,eAAeS,gBAAc,OAAOlF,QAAS9hB,KAAKokB,aAC1Hrc,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,yBACbvX,2CAAAC,EAAAC,cAAC6gB,kEAAA9gB,EAAD,QAGJD,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU8Z,QAAS9hB,KAAKyiB,aACtB1a,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,iBACbvX,2CAAAC,EAAAC,cAAC8gB,mEAAA/gB,EAAD,QAGJD,2CAAAC,EAAAC,cAACugB,iEAAAxgB,EAAD,CAAU8Z,QAAS9hB,KAAKa,WACtBkH,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASsX,MAAM,cACbvX,2CAAAC,EAAAC,cAAC+gB,8DAAAhhB,EAAD,SAKND,2CAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQiY,cAIzB5Q,GAAqBU,EAAQtO,OAAS,IACvCgH,2CAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQqZ,eACtB5Y,2CAAAC,EAAAC,cAACie,+DAAAle,EAAD,CAAQgB,SAAS,YACfjB,2CAAAC,EAAAC,cAACghB,6DAAAjhB,EAAD,CAAMvE,OAAO,EAAOylB,eAAe,UAAUC,YAAU,EAACtI,cAAc,KAAKuI,sBAAuBzH,UAAWra,QAAS,CAAEuZ,cAAevZ,EAAQuZ,cAAewI,cAAe/hB,EAAQ2Z,YAClL5R,EAAQtO,OAAS,GAAKsO,EAAQwH,IAAI,SAAC+O,EAAOzS,GAAR,OAAeyS,EAAO9J,UACvD/T,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASgN,IAAK7B,EAAGmM,MAAOsG,EAAOkB,SAC7B/e,2CAAAC,EAAAC,cAACqhB,4DAAAthB,EAAD,CAAKgN,IAAK7B,EAAG7L,QAAS,CAAEiiB,QAASjiB,EAAQqY,WACvC4G,aAAYX,EAAOjW,KACnB+I,KAAO3Q,2CAAAC,EAAAC,cAACoZ,UAAD,CAAW7b,MAAOO,EAAK8f,UAAUD,IAAUA,EAAOlN,MACzDoJ,QAAS/b,EAAK4f,WAAWC,aASpCjX,GAAqB1J,EAAQlE,OAAS,IACvCgH,2CAAAC,EAAAC,cAAA,OAAKC,UAAWZ,EAAQqZ,eACtB5Y,2CAAAC,EAAAC,cAACie,+DAAAle,EAAD,CAAQgB,SAAS,YACfjB,2CAAAC,EAAAC,cAACghB,6DAAAjhB,EAAD,CAAMvE,OAAO,EAAOylB,eAAe,UAAUC,YAAU,EAACtI,cAAc,KAAKuI,sBAAuBzH,UAAWra,QAAS,CAAEuZ,cAAevZ,EAAQuZ,gBAC5I5b,EAAQlE,OAAS,GAAKkE,EAAQ4R,IAAI,SAACmM,EAAK7P,GAAN,OACjCpL,2CAAAC,EAAAC,cAACoe,gEAAAre,EAAD,CAASgN,IAAK7B,EAAGmM,MAAO0D,EAAKlI,YAAYC,WACvChT,2CAAAC,EAAAC,cAACqhB,4DAAAthB,EAAD,CAAKgN,IAAK7B,EAAG7L,QAAS,CAAEiiB,QAASjiB,EAAQqY,WACvC4G,aAAW,YACX7d,MACEX,2CAAAC,EAAAC,cAAA,YACEF,2CAAAC,EAAAC,cAACyZ,aAAD,CAAclc,MAAO,kBAAMwd,EAAKxd,QAC9BuC,2CAAAC,EAAAC,cAACuZ,6DAAAxZ,EAAD,CAAME,UAAWI,kDAAWhB,EAAQoY,SAAUsD,EAAK6D,WAAW9L,YAAaiI,EAAK6D,WAAW9L,YAE5FiI,EAAKlI,YAAYC,WAGtB+G,QAAS,kBAAM/b,EAAKb,QAAQ8d,0BAvf5Brd,6CAAMkD,WAygBbC,+FAAWsW,OAAQ,CAAE1U,WAAW,GAAhC5B,CAAwCoZ,kUC5nBjDnT,cACJ,SAAAA,EAAY/L,GAAO,IAAAC,EAAA,OAAAnD,OAAAC,EAAA,EAAAD,CAAAE,KAAA+O,IACjB9L,EAAAnD,OAAAoD,EAAA,EAAApD,CAAAE,KAAAF,OAAAqD,EAAA,EAAArD,CAAAiP,GAAA3L,KAAApD,KAAMgD,KA4BRwmB,SAAW,WAAM,IAAA1D,EACkB7iB,EAAKU,MAA9B8lB,EADO3D,EACP2D,MAAOC,EADA5D,EACA4D,QAASC,EADT7D,EACS6D,KACpBC,EAAUF,EAEd,GAAID,EAAM1oB,OAAS,EACjBgd,MAAM,4BAIR,GAAK4L,GAAiB,KAATA,EAAb,CAKKD,GAAuB,KAAZA,IAEZE,EADED,EAAK5oB,OAAS,GACN4oB,EAAKE,OAAO,EAAE,IAAI,MAElBF,GAId,IAAIG,EAAK,IAAIL,EAAM1S,KAAK,OAAO,IAC/B3V,OAAOmD,OAAO8B,YAAY,SAASyjB,EAAG,IAAIF,EAAQ,IAAID,EAAKnW,MAAM,MAAMuD,KAAK,OAC5E9T,EAAK8mB,kBAdHhM,MAAM,mBAvCS9a,EAwDnB8mB,WAAa,WACX3oB,OAAOmD,OAAOwlB,WAAW,aAzDR9mB,EA4EnB+mB,aAAe,SAAAra,GAAI,OAAI,SAAArM,GACrBL,EAAKW,SAAL9D,OAAAmqB,EAAA,EAAAnqB,CAAA,GACG6P,EAAOrM,EAAME,OAAOC,UA9ENR,EAkFnBinB,WAAa,SAAAP,GACX1mB,EAAKW,SAAS,CAAE+lB,KAAM1mB,EAAKyY,OAAOzV,QAAQxC,SAnFzBR,EAsFnBknB,SAAW,aAtFQlnB,EA0FnBmnB,SAAW,SAAAC,GACTpnB,EAAKW,SAAS,CAAEymB,WA3FCpnB,EA+FnBqnB,QAAU,WACRrnB,EAAKmnB,SAAS,OAhGGnnB,EAmGnBsnB,QAAU,SAAAC,GAAQ,IACRf,EAAUxmB,EAAKU,MAAf8lB,MACJhO,EAAM+O,EAAKjU,QAAQ,YAAa,IAAIA,QAAQ,WAAY,IAC5DnV,OAAOmD,OAAOkmB,WAAW,uBAAuBhP,EAAI,iBAAkB,SAAC6B,GACtD,KAAXA,IAC6B,IAA3BmM,EAAMtV,QAAQmJ,KAChBmM,EAAMjP,KAAK8C,GACXra,EAAKW,SAAS,CAAE6lB,WAElBxmB,EAAKmnB,SAAS,OAEdnnB,EAAKmnB,SAAS,sBA9GDnnB,EAoHnBynB,QAAU,SAACF,EAAMrX,GAAM,IACbsW,EAAUxmB,EAAKU,MAAf8lB,MACRA,EAAM7O,OAAOzH,EAAG,GAChBlQ,EAAKW,SAAS,CAAE6lB,UAChBxmB,EAAKmnB,SAAS,OAxHGnnB,EA2HnB0nB,UAAY,SAACH,GACX,QAAKA,EAAK5R,WAAW,OAAS4R,EAAKnP,SAAS,MACvCmP,EAAK5R,WAAW,OAAS4R,EAAKnP,SAAS,MAASmP,EAAKnP,SAAS,QA3HnEpY,EAAKU,MAAQ,CACX+lB,QAAS1mB,EAAM0mB,QAAU1mB,EAAM0mB,QAAU,GACzCC,KAAM3mB,EAAM2mB,KAAO3mB,EAAM2mB,KAAO,GAChCU,MAAO,KACPZ,MAAO,IAGTxmB,EAAKyY,OAAS/V,IAAMC,YATH3C,yEAYT6mB,GACR9pB,KAAKuqB,QAAQT,sCAGJJ,GACT1pB,KAAK4D,SAAS,CAAE8lB,4CAGVC,GACN3pB,KAAK4D,SAAS,CAAE+lB,2CAGRG,EAAIJ,EAASC,GACrBG,GAAM9pB,KAAKuqB,QAAQT,GACnB9pB,KAAK4D,SAAS,CAAE8lB,UAASC,qDAmCzBvoB,OAAOmD,OAAOS,MAAM8L,SAAW9Q,KADb,IAAA4qB,EAGI5qB,KAAKgD,MAAnB6B,EAHU+lB,EAGV/lB,MAAOilB,EAHGc,EAGHd,GACfjlB,EAAMgmB,QAAQ7L,SAASzU,OAASvK,KAAKmqB,SACrC/oB,OAAOmD,OAAOgM,OAAOyO,SAASna,EAAOA,EAAMgmB,QAAQ7L,UAEnD8K,GAAM9pB,KAAKuqB,QAAQT,kDAID9pB,KAAKgD,MAAf6B,MACFgmB,QAAQ7L,SAASzU,OAAS,KAChCnJ,OAAOmD,OAAOS,MAAM8L,SAAW,sCA6DxB,IACCxJ,EAAYtH,KAAKgD,MAAjBsE,QADDwjB,EAEiC9qB,KAAK2D,MAArC8lB,EAFDqB,EAECrB,MAAOC,EAFRoB,EAEQpB,QAASC,EAFjBmB,EAEiBnB,KAAMU,EAFvBS,EAEuBT,MAFvB9iB,EAG0CnG,OAAOmD,OAAOC,SAAvDgD,EAHDD,EAGCC,OAAQC,EAHTF,EAGSE,OAAQC,EAHjBH,EAGiBG,WAAYC,EAH7BJ,EAG6BI,SAE9BC,EAAO,CACXF,WAAY,IAAMA,EAAa,eAC/BC,UAAWvG,OAAOmD,OAAOuD,OAAS,GAAKH,GAAY,MAGrD,OACEojB,EAAA/iB,EAAAC,cAAC+iB,EAAAhjB,EAAD,CAAME,UAAWZ,EAAQ2jB,MACvBF,EAAA/iB,EAAAC,cAACijB,EAAAljB,EAAD,CAAYE,UAAWZ,EAAQ6jB,OAC7B7L,MACEyL,EAAA/iB,EAAAC,cAACmjB,EAAApjB,EAAD,CAAWU,MAAM,aAAagf,WAAS,EAACjkB,MAAOgmB,EAAO4B,aAAa,MAAMC,cAAetrB,KAAKsqB,QAC3FiB,gBAAiB,CAAC,GAAG,GAAG,KAAMC,YAAaxrB,KAAK2qB,UAAWc,MAAOzrB,KAAKuqB,QAASjjB,QAAS,CAAExB,MAAOwB,EAAQokB,WAC1GC,SAAU3rB,KAAK0qB,QAASkB,WAAYvB,EAAOwB,oBAAqB,CAAExB,OAAO,EAAMniB,UAAWZ,EAAQskB,cAGtGE,UACEf,EAAA/iB,EAAAC,cAAC8jB,EAAA/jB,EAAD,CAAWU,MAAM,UAAUjF,MAAOimB,EAAStkB,SAAUpF,KAAKgqB,aAAa,WAAY9hB,UAAWZ,EAAQ0kB,YAG1GjB,EAAA/iB,EAAAC,cAACgkB,EAAAjkB,EAAD,CAAaE,UAAWZ,EAAQqiB,MAC9BoB,EAAA/iB,EAAAC,cAAA,YAAUC,UAAWI,IAAWhB,EAAQ4kB,SAAUtkB,EAAMJ,EAAQC,GAC9DY,IAAKrI,KAAK0b,OACVxS,MAAM,OACNzF,MAAOkmB,EACPvkB,SAAUpF,KAAKkqB,cAiBnBa,EAAA/iB,EAAAC,cAACkkB,EAAAnkB,EAAD,CAAaE,UAAWZ,EAAQ8kB,SAC9BrB,EAAA/iB,EAAAC,cAACoe,EAAAre,EAAD,CAASsX,MAAM,eACbyL,EAAA/iB,EAAAC,cAACqe,EAAAte,EAAD,CAAQ0f,WAAS,EAACxf,UAAWZ,EAAQse,OAAQ9D,QAAS9hB,KAAKwpB,UACzDuB,EAAA/iB,EAAAC,cAACokB,EAAArkB,EAAD,KACE+iB,EAAA/iB,EAAAC,cAACqkB,EAAAtkB,EAAD,SAIN+iB,EAAA/iB,EAAAC,cAACoe,EAAAre,EAAD,CAASsX,MAAM,kBACbyL,EAAA/iB,EAAAC,cAACqe,EAAAte,EAAD,CAAQ0f,WAAS,EAACxf,UAAWZ,EAAQse,OAAQ9D,QAAS9hB,KAAK+pB,YACzDgB,EAAA/iB,EAAAC,cAACokB,EAAArkB,EAAD,KACE+iB,EAAA/iB,EAAAC,cAACskB,EAAAvkB,EAAD,kBA/LOrC,IAAMkD,WAkNdC,yBA1QA,SAAAC,GAAK,MAAK,CACvBkiB,KAAM,CACJjiB,SAAU,WACVE,MAAO,OACPD,OAAQ,OACRE,QAAS,OACTC,YAAa,iBAEf+hB,OAAQ,CACNhiB,QAAS,OACTC,YAAa,cAEfojB,IAAK,CACHrjB,QAAS,QAEXsjB,KAAM,CACJpjB,KAAM,GAERqjB,MAAO,CACLC,WAAY,OAEdX,QAAS,CACP9iB,MAAO,QAETygB,KAAM,CACJ3gB,SAAU,WACVK,KAAM,EACNF,QAAS,OACTyjB,SAAU,SACVxjB,YAAa,iBAEf8iB,SAASpsB,OAAAmqB,EAAA,EAAAnqB,CAAA,CACPuJ,KAAM,GACLN,EAAMyB,YAAYC,KAAK,MAAQ,CAC9B9C,SAAU,SAGdykB,QAAS,CACPS,kBAAmB,gBAErBjH,OAAQ,CACNzc,QAAS,SAEXyiB,WAAY,CACV5K,UAAW,QACX9X,MAAO,QAETwiB,UAAW,CACTtK,SAAU,UA0NoB,CAAE1W,WAAW,GAAhC5B,CAAwCiG,wOC9OjDE,6BACJ,SAAAA,EAAYjM,GAAO,IAAAC,EAAA,OAAAnD,OAAAC,EAAA,EAAAD,CAAAE,KAAAiP,IACjBhM,EAAAnD,OAAAoD,EAAA,EAAApD,CAAAE,KAAAF,OAAAqD,EAAA,EAAArD,CAAAmP,GAAA7L,KAAApD,KAAMgD,KAsER8pB,YAAc,WACZ7pB,EAAKW,SAAS,CAAEmpB,WAAW,IAC3B9pB,EAAK+pB,cAzEY/pB,EA4EnBgqB,YAAc,WACZhqB,EAAKW,SAAS,CAAEmpB,WAAW,KA7EV9pB,EAgFnBiqB,UAAY,WACVjqB,EAAKW,SAAS,CAAEqD,KAAMhE,EAAKgE,QAjFVhE,EAoFnBkqB,YAAc,SAAA7pB,GAEZ,IADsBL,EAAKU,MAAnBopB,UACR,CAEA,IAAIK,EAAQ9pB,EAAME,OAAOC,MACzBR,EAAKW,SAAS,CAAEwpB,YAzFCnqB,EA4FnBinB,WAAa,SAAAjjB,GACWhE,EAAKU,MAAnBopB,WAGR9pB,EAAK8hB,QAAQ9d,IAhGIhE,EAmGnBknB,SAAW,WACTlnB,EAAKyY,OAAOzV,QAAQyV,OAAOnR,UAlG3BtH,EAAKU,MAAQ,CACXopB,WAAW,EACX9lB,KAAM,GACNmmB,MAAO,KAETnqB,EAAKgE,KAAO,GACZhE,EAAKyY,OAAS/V,IAAMC,YARH3C,mFAYjB7B,OAAOmD,OAAOS,MAAMgM,OAAShR,KADX,IAGV6E,EAAU7E,KAAKgD,MAAf6B,MACRA,EAAMgmB,QAAQ7L,SAASzU,OAASvK,KAAKmqB,SACrC/oB,OAAOmD,OAAOgM,OAAOyO,SAASna,EAAOA,EAAMgmB,QAAQ7L,yDAInD5d,OAAOmD,OAAOS,MAAMgM,OAAS,qCAGvB/J,GACNjH,KAAKiH,KAAOA,EACZjH,KAAK4D,SAAS,CAAEqD,8CAGL,IAAAlB,EAAA/F,KACHiH,EAASjH,KAAK2D,MAAdsD,KACFmmB,EAAUptB,KAAK2D,MAAfypB,MAEFA,EAAQ,IACVA,EAAQ,IACCA,EAAQ,MACjBA,EAAQ,KAGVjS,WAAW,WAET,GADsBpV,EAAKpC,MAAnBopB,UACR,CAEA,IAAI1nB,EAAQ4B,EAAKuM,MAAM,MACvB,GAAInO,EAAMtE,OAAS,EAAG,CAEpB,IAAIssB,EAAOhoB,EAAM,GACbgoB,EAAKtsB,OAAS,GAChBK,OAAOmD,OAAO8B,YAAYgnB,GAI5BhoB,EAAMuV,OAAO,EAAE,GACf,IAAI0S,EAAUjoB,EAAM0R,KAAK,MACzBhR,EAAKnC,SAAS,CAAEqD,KAAMqmB,IAElBjoB,EAAMtE,OAAS,EAEjBgF,EAAKinB,cAELjnB,EAAKnC,SAAS,CAAEmpB,WAAW,IAC3B3rB,OAAOmD,OAAOwlB,WAAW,gBAI3BhkB,EAAKnC,SAAS,CAAEmpB,WAAW,IAC3B3rB,OAAOmD,OAAOwlB,WAAW,YAG1BqD,oCAmCI,IACC9lB,EAAYtH,KAAKgD,MAAjBsE,QADDwe,EAE4B9lB,KAAK2D,MAAhCsD,EAFD6e,EAEC7e,KAAM8lB,EAFPjH,EAEOiH,UAAWK,EAFlBtH,EAEkBsH,MAEzB,OACErC,EAAA/iB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtB4iB,EAAA/iB,EAAAC,cAACslB,EAAAvlB,EAAD,CACEE,UAAWZ,EAAQoU,OACnBrT,IAAKrI,KAAK0b,OACV8R,KAAK,WACLtkB,MAAM,OACNH,MAAM,wBACNtF,MAAOwD,EACP7B,SAAUpF,KAAKkqB,WACfuD,SAAUV,EACVW,aAAa,EACbC,qBAAqB,EACrBC,YAAa,CAAEC,gBAAiBC,OAElC/C,EAAA/iB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ+B,MACtB0hB,EAAA/iB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQymB,aACtBhD,EAAA/iB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ0mB,MACxBjD,EAAA/iB,EAAAC,cAACgmB,EAAAjmB,EAAD,CAAWE,UAAWZ,EAAQgZ,OAAQ5X,MAAM,wBAAwBjF,MAAO2pB,EAAOxY,KAAK,SAAS+R,QAAQ,WAAWvhB,SAAUpF,KAAKmtB,YAAazF,WAAS,KAEvJqF,EAcDhC,EAAA/iB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQymB,aACtBhD,EAAA/iB,EAAAC,cAACimB,EAAAlmB,EAAD,CAASsX,MAAM,oBACbyL,EAAA/iB,EAAAC,cAACkmB,EAAAnmB,EAAD,CAAQE,UAAWZ,EAAQ0kB,QAASlK,QAAS9hB,KAAKitB,aAChDlC,EAAA/iB,EAAAC,cAACmmB,EAAApmB,EAAD,SAhBN+iB,EAAA/iB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQymB,aACtBhD,EAAA/iB,EAAAC,cAACimB,EAAAlmB,EAAD,CAASsX,MAAM,oBACbyL,EAAA/iB,EAAAC,cAACkmB,EAAAnmB,EAAD,CAAQE,UAAWZ,EAAQ0kB,QAASlK,QAAS9hB,KAAK8sB,aAChD/B,EAAA/iB,EAAAC,cAAComB,EAAArmB,EAAD,QAGJ+iB,EAAA/iB,EAAAC,cAACimB,EAAAlmB,EAAD,CAASsX,MAAM,kCACbyL,EAAA/iB,EAAAC,cAACkmB,EAAAnmB,EAAD,CAAQE,UAAWZ,EAAQ0kB,QAASlK,QAAS9hB,KAAKktB,WAChDnC,EAAA/iB,EAAAC,cAACqmB,EAAAtmB,EAAD,kBAzIGrC,IAAMkD,YAkKZC,yBAtMA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVG,QAAS,OACTF,OAAQ,OACRC,MAAO,OACPE,YAAa,iBAEfsS,OAAO5b,OAAAmqB,EAAA,EAAAnqB,CAAA,CACLuJ,KAAM,GACLN,EAAMyB,YAAYC,KAAK,MAAQ,CAC9B9C,SAAU,SAGd0B,KAAM,CACJF,QAAS,QAEX6iB,QAAS,CACP3iB,KAAM,GAER0kB,YAAa,CACX5kB,QAAS,OACTE,KAAM,GAER2kB,IAAK,CACH1kB,OAAQ,OAEVgX,OAAQ,CACNhX,OAAQP,EAAM8P,QAAQC,QA0KQ,CAAEpO,WAAW,GAAhC5B,CAAwCmG,gDCCxCG,IAxNb,SAAAA,IAAetP,OAAAC,EAAA,EAAAD,CAAAE,KAAAoP,GAEbpP,KAAKuuB,MAAQ,CACXlf,QAAS,CACPM,KAAM,GACN1I,KAAM,GACNgV,YAAY,EACZvD,KAAM,UACNlT,MAAO,IACPshB,QAAS,IAGXxX,SAAU,CACRK,KAAM,GACN1I,KAAM,GACNgV,YAAY,EACZrF,QAAS,GACTT,OAAO,EACPyF,UAAU,GAEZrM,OAAQ,CACNI,KAAM,GACN1I,KAAM,GACNgV,YAAY,EACZmR,MAAO,EACPoB,QAAQ,EACRC,MAAO,GAETjf,OAAQ,CACNG,KAAM,GACN1I,KAAM,GACNgV,YAAY,EACZrF,QAAS,GACTT,OAAO,GAET1G,KAAM,CACJE,KAAM,GACN1I,KAAM,GACNgV,YAAY,EACZyS,QAAS,KACTC,MAAM,EACNC,KAAK,EACLC,OAAO,GAETjf,IAAK,CACHD,KAAM,GACN1I,KAAM,IAERyI,QAAS,CACPC,KAAM,GACN1I,KAAM,kCAIVjH,KAAK8uB,MAAQ,CACXzf,QAAS,CACP,CACEM,KAAM,OACN1I,KAAM,OACNgV,YAAY,EACZvD,KAAM,iBACNlT,MAAO,GACPshB,QAAS,gBAEX,CACEnX,KAAM,YACN1I,KAAM,YACNgV,YAAY,EACZvD,KAAM,kBACNlT,MAAO,GACPshB,QAAS,uBAEX,CACEnX,KAAM,MACN1I,KAAM,MACNgV,YAAY,EACZvD,KAAM,SACNlT,MAAO,GACPshB,QAAS,iBAEX,CACEnX,KAAM,UACN1I,KAAM,uBACNgV,YAAY,EACZvD,KAAM,OACNlT,MAAO,wCACPshB,QAAS,eAEX,CACEnX,KAAM,SACN1I,KAAM,wBACNgV,YAAY,EACZvD,KAAM,QACNlT,MAAO,sCACPshB,QAAS,mBAEX,CACEnX,KAAM,OACN1I,KAAM,wCACNgV,YAAY,EACZvD,KAAM,SACNlT,MAAO,GACPshB,QAAS,sBAabxX,SAAU,CAWR,CACEK,KAAM,aACN1I,KAAM,qEACNgV,YAAY,EACZrF,QAAS,QACTT,OAAO,EACPyF,UAAU,GAEZ,CACEjM,KAAM,cACN1I,KAAM,iDACNgV,YAAY,EACZrF,QAAS,QACTT,OAAO,EACPyF,UAAU,IAGdrM,OAAQ,GAYRC,OAAQ,CAUN,CACEG,KAAM,aACN1I,KAAM,qDACNgV,YAAY,EACZrF,QAAS,kBACTT,OAAO,GAET,CACExG,KAAM,gBACN1I,KAAM,yBACNgV,YAAY,EACZrF,QAAS,YACTT,OAAO,IAGX1G,KAAM,GAaNG,IAAK,GAQLF,QAAS,2JClMT7M,EAAmB,IACnBC,EAAc,iBA+DdisB,cACJ,SAAAA,EAAY/rB,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA+uB,IACjB9rB,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAivB,GAAA3rB,KAAApD,KAAMgD,KAYRmsB,WAAa,WACX/tB,OAAOmD,OAAOsT,SAdG5U,EA+BnBknB,SAAW,SAAA7mB,GACTgY,aAAarY,EAAKmsB,UAClBjU,WAAWlY,EAAKmsB,SAAU,MAjCTnsB,EAoCnBmsB,SAAW,WACT,IAAM7qB,EAASnD,OAAOmD,OACtBA,EAAOR,OAAO0R,iBACdlR,EAAOpD,SAAS,eAAiBkD,KAAKC,IAAIC,EAAOC,SAAS2I,UAAW9I,KAAKqR,MAAMtU,OAAOmD,OAAOR,OAAO4E,KAAKyL,WAAWib,YAAcjuB,OAAOmD,OAAOR,OAAO6R,KAAK1M,SAC7J3E,EAAOpD,SAAS,gBAAkBkD,KAAKqR,MAAMnR,EAAOR,OAAO4E,KAAKyL,WAAWuB,aAAepR,EAAOR,OAAO6R,KAAK3M,SAC7G1E,EAAOR,OAAOG,aAEdK,EAAOuD,QAAU1G,OAAO0L,WAAW7J,EAAKD,MAAM+F,MAAMyB,YAAYuC,GAAG,MAAMnK,UAAU,IAAIoK,QAEvF/J,EAAKmC,YA7CYnC,EAgDnBmC,SAAW,WACLhE,OAAOmD,OAAOC,SAAS+J,YAAc,GACvCnN,OAAOmD,OAAOR,OAAOK,YAAYtB,EAAauB,KAAKC,IAAIzB,EAAkBzB,OAAOmD,OAAOC,SAAS+J,cAGlGtL,EAAKW,SAAS,CAAEyB,MAAOpC,EAAKqC,mBAnD5BrC,EAAKU,MAAQ,CACX0B,MAAO,GAGTpC,EAAKyN,SAAW/K,IAAMC,YACtB3C,EAAKc,OAAS4B,IAAMC,YACpB3C,EAAKoN,OAAS1K,IAAMC,YAEpB3C,EAAKqsB,MAAO,EAVKrsB,mFAkBjBiP,SAASyX,KAAKlS,SAAWzX,KAAKmqB,SAC9B/oB,OAAOmD,OAAOS,MAAM0L,SAAW1Q,KAC/BoB,OAAOmD,OAAOgrB,WAAWvvB,KAAK+D,OAAOkC,QAASjG,KAAK0Q,SAASzK,SAC5D7E,OAAOmD,OAAOirB,WAAWxvB,KAAKqQ,OAAOpK,SACrCjG,KAAKsvB,MAAO,EAERluB,OAAOmD,OAAOC,SAAS+J,YAAc,GACvCnN,OAAOmD,OAAOR,OAAOC,YAAYlB,GAGnC9C,KAAKmqB,mDA6BL,OAAO/oB,OAAOmD,OAAOR,OAAOuB,iDAGrB,IAUHmqB,EAVG7E,EACkD5qB,KAAKgD,MAAtDsE,EADDsjB,EACCtjB,QAAS4B,EADV0hB,EACU1hB,MAAO1B,EADjBojB,EACiBpjB,OAAQC,EADzBmjB,EACyBnjB,OAAQioB,EADjC9E,EACiC8E,aAChCrqB,EAAUrF,KAAK2D,MAAf0B,MAFDkC,EAG0BnG,OAAOmD,OAAOC,SAAvCkD,EAHDH,EAGCG,WAAYC,EAHbJ,EAGaI,SAEdC,EAAO,CACXF,WAAY,IAAMA,EAAa,eAC/BC,UAAWvG,OAAOmD,OAAOuD,OAASH,EAAS,EAAIA,GAAY,MAU7D,OALE8nB,EADEzvB,KAAKsvB,KACDpmB,EAAQ9H,OAAOmD,OAAOR,OAAO6R,KAAK1M,MAAQ,KAE1C,OAINymB,EAAA3nB,EAAAC,cAAA,OAAKhE,GAAG,qBAAqBiE,UAAWI,IAAWhB,EAAQa,OAAQI,MAAOX,EAAMka,QAAS9hB,KAAKmvB,WAAY9mB,IAAKqnB,GAC7GC,EAAA3nB,EAAAC,cAAA,OAAKI,IAAKrI,KAAK0Q,SAAUxI,UAAWI,IAAWhB,EAAQoJ,SAAUlJ,EAAQC,GAASmoB,SAAU5vB,KAAKoF,UAC/FuqB,EAAA3nB,EAAAC,cAAA,OAAKI,IAAKrI,KAAK+D,OAAQmE,UAAWI,IAAWhB,EAAQvD,OAAQyD,EAAQC,GAASc,MAAO,CAAEsnB,SAAUJ,MAEnGE,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQrC,SACtB0qB,EAAA3nB,EAAAC,cAAA,OAAKI,IAAKrI,KAAKqQ,OAAQnI,UAAWI,IAAWhB,EAAQ+I,OAAQ7I,EAAQC,KACrEkoB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQwoB,aACtBH,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAY+R,MAAM,QAAQiW,MAAM,QAAQrJ,QAAQ,UAAUze,UAAWZ,EAAQ2oB,YAC1E5qB,EAAQ,GAAK,UAAUA,EAAM,4BAvFrBM,IAAMkD,WAwGdC,uBArKA,SAAAC,GAAK,MAAK,CACvBZ,MAAMrI,OAAAowB,EAAA,EAAApwB,CAAA,CACJkJ,SAAU,WACVG,QAAS,OACTC,YAAa,gBACbE,OAAQ,EACRQ,QAAS,EACTM,OAAQ,OACRL,mBAAoBhB,EAAMiB,QAAQwK,QAAQ2b,KAC1C9mB,KAAM,EACNJ,OAAQ,OACRM,cAAe,2BACfC,cAAe,SACfC,YAAa,QACZV,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BhB,YAAa,QAGjBiH,SAAU,CACRrH,KAAM,EACNL,SAAU,WACVyX,UAAW,SACX2P,UAAW,SACXtmB,QAAS,gBAEX/F,OAAQ,CACN6F,cAAe,WACfC,YAAa,aACbb,SAAU,WACVM,OAAQ,EACRc,OAAQ,EACRN,QAAS,GAEX7E,QAAS,CACP6E,QAAS,IACTd,SAAU,WACV4jB,SAAU,UAEZvc,OAAQ,CACNuc,SAAU,SACVhjB,cAAe,WACfymB,aAAc,OACd/lB,iBAAkB,SAClBrB,OAAQ,MACRa,QAAS,UAEXgmB,YAAa,CACX9mB,SAAU,WACVC,OAAQ,OACRT,OAAQ,EACRkkB,MAAO,GAETuD,WAAY,CACVK,WAAY,KAgHkB,CAAE5lB,WAAW,GAAhC5B,CAAwCimB,wDCzHjDwB,cACJ,SAAAA,EAAYvtB,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAuwB,IACjBttB,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAywB,GAAAntB,KAAApD,KAAMgD,KAURwtB,WAAa,WACXpvB,OAAOmD,OAAOuB,MAAM2qB,gBACpBrvB,OAAOmD,OAAOuB,MAAM+R,OAAM,IAbT5U,EAgBnBytB,cAAgB,WACdtvB,OAAOmD,OAAOuB,MAAM6qB,eACpBvvB,OAAOmD,OAAOuB,MAAM+R,OAAM,IAhB1B5U,EAAKU,MAAQ,GACbV,EAAK6C,MAAQH,IAAMC,YAHF3C,mFAOjB7B,OAAOmD,OAAOS,MAAMc,MAAQ9F,KAC5BoB,OAAOmD,OAAOqsB,UAAU5wB,KAAK8F,MAAMG,0CAa5B,IAAA2kB,EAC6B5qB,KAAKgD,MAAjCsE,EADDsjB,EACCtjB,QAASE,EADVojB,EACUpjB,OAAQC,EADlBmjB,EACkBnjB,OADlBF,EAEuDnG,OAAOmD,OAAOC,SAApEkD,EAFDH,EAECG,WAAYC,EAFbJ,EAEaI,SAAU6G,EAFvBjH,EAEuBiH,cAAeC,EAFtClH,EAEsCkH,aAEvC7G,EAAO,CACXF,WAAY,IAAMA,EAAa,eAC/BC,UAAWvG,OAAOmD,OAAOuD,OAAS,GAAKH,GAAY,MAG/C0H,EACJsgB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQ+H,SACvBsgB,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAYV,QAAS,CAAEqB,KAAMrB,EAAQwpB,YAAchP,QAAS9hB,KAAKwwB,YAC/Db,EAAA3nB,EAAAC,cAAC8oB,EAAA/oB,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAYV,QAAS,CAAEqB,KAAMrB,EAAQwpB,YAAchP,QAAS9hB,KAAK0wB,eAC/Df,EAAA3nB,EAAAC,cAAC+oB,EAAAhpB,EAAD,QAKN,OACE2nB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACrBqG,GAAkC,SAAjBC,GAA2BY,EAC7CsgB,EAAA3nB,EAAAC,cAAA,YAAUI,IAAKrI,KAAK8F,MAAOoC,UAAWI,IAAWhB,EAAQL,KAAMO,EAAQC,GAASc,MAAOX,EAAOgB,aAAa,MAAM6e,WAAYrmB,OAAOmD,OAAOuD,SAC1I0G,GAAkC,UAAjBC,GAA4BY,UA9ClC1J,IAAMkD,WA2DXC,uBArGA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACL4B,mBAAoBhB,EAAMiB,QAAQwK,QAAQ2b,KAC1ChnB,QAAS,QAEXlC,KAAKnH,OAAAowB,EAAA,EAAApwB,CAAA,CACHuJ,KAAM,EAGNC,OAAQ,YACRc,OAAQ,OACRC,QAAS,OACTC,iBAAkB,SAClBR,QAAS,SACTS,OAAQ,OACRtB,OAAQ,QACRM,cAAe,2BACfC,cAAe,SACfC,YAAa,QACZV,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B9D,OAAQ,QAGZoG,QAAQvP,OAAAowB,EAAA,EAAApwB,CAAA,CAENqJ,QAAS,OACTkW,SAAU,WACV6B,eAAgB,SAChB+P,aAAc,UACbloB,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BsS,SAAU,gBAGdyR,WAAY,CACVhnB,QAAS,KAmEqB,CAAEY,WAAW,GAAhC5B,CAAwCynB,GC1FjDW,cACJ,SAAAA,EAAYluB,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAkxB,IACjBjuB,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAoxB,GAAA9tB,KAAApD,KAAMgD,KACDW,MAAQ,CACX4B,OAAQ,IAHOtC,yEAOTsC,GACRvF,KAAK4D,SAAS,CAAE2B,uDAIhBnE,OAAOmD,OAAOS,MAAM2L,UAAY3Q,oDAIhCoB,OAAOmD,OAAOS,MAAM2L,UAAY,sCAGzB,IACCrJ,EAAYtH,KAAKgD,MAAjBsE,QACA/B,EAAWvF,KAAK2D,MAAhB4B,OACAqJ,EAAwBxN,OAAOmD,OAAOC,SAAtCoK,oBAER,OACE+gB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,MAAO2Z,QAAS,kBAAM1gB,OAAOmD,OAAOsT,WACxDjJ,GACA+gB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CACEgoB,MAAM,QACNjW,MAAM,cACN6M,QAAM,GAELrhB,WAjCWI,IAAMkD,WA8CfC,uBA9DA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACL8B,WAAYlB,EAAMiB,QAAQwK,QAAQ2b,KAClC7mB,OAAQ,EACRc,OAAQ,OACRC,QAAS,OACTgmB,aAAc,QACd/lB,iBAAkB,SAClBR,QAAS,YAsDqB,CAAEY,WAAW,GAAhC5B,CAAwCooB,4OC1BjDC,eACJ,SAAAA,EAAYnuB,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAmxB,IACjBluB,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAqxB,GAAA/tB,KAAApD,KAAMgD,KAORoY,UAAY,SAAC1E,GACXzT,EAAKW,SAAS,CAAEye,MAAM,IACtBpf,EAAKW,SAAS,CAAE8S,IAAKA,IACrBzT,EAAKksB,WAAW,aAXClsB,EAcnBmuB,WAAa,WACXnuB,EAAKW,SAAS,CAAEye,MAAM,IACtBjhB,OAAOmD,OAAOsT,SAhBG5U,EAmBnBouB,WAAa,SAAC3a,GACZzT,EAAKW,SAAS,CAAE8S,IAAKA,KApBJzT,EAuBnBquB,YAAc,WACZ,IAAIC,EAAWrf,SAASC,eAAe,YAAY1O,MAC/C+tB,EAAWtf,SAASC,eAAe,YAAY1O,MACnDyO,SAASC,eAAe,YAAY1O,MAAQ,GAE5C,IAAIgY,EAAM,YAAc8V,EAAW,KAAOC,EAC1CpwB,OAAOmD,OAAOpD,SAASsa,GAEvBxY,EAAKmuB,cA/BYnuB,EAkCnBwuB,YAAc,WACZrwB,OAAOmD,OAAOpD,SAAS,iBACvB8B,EAAKmuB,cApCYnuB,EAuCnByuB,aAAe,WACb,IAAIH,EAAWrf,SAASC,eAAe,YAAY1O,MAC/C+tB,EAAWtf,SAASC,eAAe,YAAY1O,MACnDyO,SAASC,eAAe,YAAY1O,MAAQ,GAE5C,IAAIgY,EAAM,WAAa8V,EAAW,KAAOC,EACzCpwB,OAAOmD,OAAOpD,SAASsa,GAEvBxY,EAAKmuB,cA/CYnuB,EAkDnB0uB,YAAc,SAACtvB,GACC,UAAVA,EAAE2S,MAEJ/R,EAAKquB,cACLjvB,EAAEwhB,mBApDJ5gB,EAAKU,MAAQ,CACX0e,MAAM,EACN3L,IAAK,MAJUzT,0EA0DRgB,GACT,IAAI6B,EAAQoM,SAASC,eAAelO,GACpC6B,GAASA,EAAM+R,4CAIXzW,OAAOshB,QAAQ,8BACjBthB,OAAOmD,OAAO1D,WAAU,+CAK1BO,OAAOmD,OAAOS,MAAM4L,MAAQ5Q,sCAGrB,IACCsH,EAAYtH,KAAKgD,MAAjBsE,QADDwe,EAEe9lB,KAAK2D,MAAnB0e,EAFDyD,EAECzD,KAAM3L,EAFPoP,EAEOpP,IAEd,OACEiZ,EAAA3nB,EAAAC,cAAC2pB,EAAA5pB,EAAD,CACEE,UAAWZ,EAAQa,MACnBka,KAAMA,EACNwP,WAAYzwB,OAAOmD,OAAOuD,OAC1BgqB,gBAAiB,kBAAM1wB,OAAOmD,OAAOS,MAAMC,QAAQkd,cACnD9hB,QAASL,KAAKoxB,WACdW,kBAAgB,0BAChBC,sBAAoB,EACpBC,sBAAoB,GAEpBtC,EAAA3nB,EAAAC,cAACiqB,EAAAlqB,EAAD,CAAaE,UAAWZ,EAAQgY,MAAOrb,GAAG,2BAA1C,kBAEE0rB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQolB,OACvBiD,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,cACbqQ,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8Z,QAAS9hB,KAAKa,WACxB8uB,EAAA3nB,EAAAC,cAACmqB,GAAApqB,EAAD,QAGJ2nB,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,oBACbqQ,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8Z,QAAS,kBAAM1gB,OAAOmD,OAAOS,MAAMC,QAAQkd,eACrDwN,EAAA3nB,EAAAC,cAACoqB,GAAArqB,EAAD,UAKR2nB,EAAA3nB,EAAAC,cAACqqB,EAAAtqB,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACsqB,EAAAvqB,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAA,QAAMuqB,wBAAyB,CAAEC,OAAQ/b,MAE3CiZ,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CACEE,UAAWZ,EAAQL,KACnB2B,aAAa,WACbU,OAAO,QACPrF,GAAG,WACH0L,KAAK,WACLjH,MAAM,iBACNkM,KAAK,SACL8S,WAAS,EACTiL,WAAY3yB,KAAK2xB,cAEnBhC,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CACEE,UAAWZ,EAAQL,KACnB2B,aAAa,mBACbU,OAAO,QACPrF,GAAG,WACH0L,KAAK,WACLjH,MAAM,WACNkM,KAAK,WACL8S,WAAS,EACTiL,WAAY3yB,KAAK2xB,eAGrBhC,EAAA3nB,EAAAC,cAAC2qB,EAAA5qB,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC4qB,EAAA7qB,EAAD,CAAKE,UAAWZ,EAAQmlB,KAAMnlB,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShR,QAAS9hB,KAAK0xB,aAAc3X,MAAM,UAAU4M,QAAQ,YACnHgJ,EAAA3nB,EAAAC,cAAC8qB,EAAA/qB,EAAD,MADF,YAIA2nB,EAAA3nB,EAAAC,cAAC4qB,EAAA7qB,EAAD,CAAKV,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShR,QAAS9hB,KAAKyxB,YAAa1X,MAAM,UAAU4M,QAAQ,YACzFgJ,EAAA3nB,EAAAC,cAAC+qB,EAAAhrB,EAAD,MADF,SAIA2nB,EAAA3nB,EAAAC,cAAC4qB,EAAA7qB,EAAD,CAAKV,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShR,QAAS9hB,KAAKsxB,YAAavX,MAAM,UAAU4M,QAAQ,WAAWJ,aAAW,SAC/GoJ,EAAA3nB,EAAAC,cAACgrB,EAAAjrB,EAAD,MADF,kBA5IUrC,IAAMkD,WA2JXC,wBArLA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVZ,IAAK,EACLI,OAAQ,EACRkkB,MAAO,EACPD,KAAM,GAERC,MAAO,CACL1jB,SAAU,WACV0jB,MAAO,GAETD,KAAM,CACJjN,YAAa,QAEfvY,KAAM,CACJwC,YAAa,QAEf6V,MAAO,GAEPwT,MAAO,CACL3pB,QAAS,OACT2W,iBAAkB,YA+JY,CAAEpV,WAAW,GAAhC5B,CAAwCqoB,qSC/KjD+B,GAAU,CACdC,MAAQxD,EAAA3nB,EAAAC,cAACmrB,GAAAprB,EAAD,MACRqrB,MAAQ1D,EAAA3nB,EAAAC,cAACqrB,GAAAtrB,EAAD,MACRurB,KAAO5D,EAAA3nB,EAAAC,cAACurB,GAAAxrB,EAAD,MACPyrB,KAAO9D,EAAA3nB,EAAAC,cAACyrB,GAAA1rB,EAAD,MACP2rB,UAAYhE,EAAA3nB,EAAAC,cAAC2rB,GAAA5rB,EAAD,KAAS2nB,EAAA3nB,EAAAC,cAAA,WAAS4rB,OAAO,qBACrCC,UAAYnE,EAAA3nB,EAAAC,cAAC2rB,GAAA5rB,EAAD,KAAS2nB,EAAA3nB,EAAAC,cAAA,WAAS4rB,OAAO,sBACrCE,UAAYpE,EAAA3nB,EAAAC,cAAC2rB,GAAA5rB,EAAD,KAAS2nB,EAAA3nB,EAAAC,cAAA,WAAS4rB,OAAO,sBACrCG,UAAYrE,EAAA3nB,EAAAC,cAAC2rB,GAAA5rB,EAAD,KAAS2nB,EAAA3nB,EAAAC,cAAA,WAAS4rB,OAAO,uBACrCI,GAAKtE,EAAA3nB,EAAAC,cAACisB,GAAAlsB,EAAD,MACLmsB,KAAOxE,EAAA3nB,EAAAC,cAACmsB,GAAApsB,EAAD,MACPqsB,GAAK1E,EAAA3nB,EAAAC,cAACqsB,GAAAtsB,EAAD,MACLusB,IAAM5E,EAAA3nB,EAAAC,cAACusB,GAAAxsB,EAAD,OAGFysB,GAAQ,CACZtB,OAAO,EACPE,OAAO,EACPE,MAAM,EACNE,MAAM,EACNE,WAAW,EACXG,WAAW,EACXC,WAAW,EACXC,WAAW,EACXC,IAAI,EACJE,MAAM,EACNE,IAAI,EACJE,KAAK,GAqEDG,eACJ,SAAAA,EAAY1xB,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA00B,IACjBzxB,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAA40B,GAAAtxB,KAAApD,KAAMgD,KAyDR2xB,GAAK,SAAAC,GAAI,OAAI,SAAAtxB,GAAS,IAAAuxB,EACezzB,OAAOmD,OAAlC+M,EADYujB,EACZvjB,QAASG,EADGojB,EACHpjB,cAEbmjB,GAAQA,EAAK7zB,OAAS,IACxBkC,EAAKoD,YAAY,MAAMuuB,GAClBtjB,IAEHgK,aAAarY,EAAK6xB,aAClB3Z,WAAWlY,EAAK6xB,YAAarjB,OAlEhBxO,EAuEnB8xB,OAAS,SAAAzxB,GACPlC,OAAOmD,OAAO8B,YAAY,QAC1BjF,OAAOmD,OAAOuO,QAAQ,iBAzEL7P,EA4EnB+xB,UAAY,SAAAJ,GACV,IAAK,IAAIzhB,EAAI,EAAGA,EAAIlQ,EAAKgyB,QAAQl0B,OAAQoS,IAAK,CAE5C,IAA2C,IAD5BlQ,EAAKgyB,QAAQ9hB,GACfK,MAAM,KAAKW,QAAQygB,GAC9B,OAAOzhB,EAIX,OAAQ,GApFSlQ,EAuFnBiyB,UAAY,SAAAN,GAAQ,IACVttB,EAAYrE,EAAKD,MAAjBsE,QACAkG,EAAiBpM,OAAOmD,OAAOC,SAA/BgJ,aACJ2nB,EAAKP,EAAKQ,cACVtZ,GAAmC,IAAxB7Y,EAAK+xB,UAAUG,GAC9B,OACExF,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAAS8T,SAAUA,EAAUwD,MAAOsV,GAClCjF,EAAA3nB,EAAAC,cAAA,YACE0nB,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAYV,QAAUlG,OAAOmD,OAAOuD,QAAU0F,EAAgB,CAAE7E,KAAMrB,EAAQwpB,YAAe,KAAMhP,QAAS7e,EAAK0xB,GAAGC,GAAO9Y,SAAUA,GAClIoX,GAAQiC,OAhGAlyB,EAuGnBoyB,UAAY,WAAM,IAAAzK,EACkB3nB,EAAKD,MAA/BsE,EADQsjB,EACRtjB,QAASkG,EADDod,EACCpd,aAEjB,OACEmiB,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,oBACbqQ,EAAA3nB,EAAAC,cAAA,YACE0nB,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAYV,QAASkG,EAAe,CAAE7E,KAAMrB,EAAQwpB,YAAe,KAAMhP,QAAS7e,EAAK8xB,QACrFpF,EAAA3nB,EAAAC,cAACqtB,GAAAttB,EAAD,UA9GS/E,EA+JnBoD,YAAc,SAAAD,GACZhF,OAAOmD,OAAO8B,YAAYD,IA9J1BnD,EAAKU,MAAQ,CACX4xB,MAAO,GACPC,OAAQ,GACRC,QAAS,GACTC,QAAS,IAGXzyB,EAAKgyB,QAAU,GACfhyB,EAAK0yB,YAAc,GACnB1yB,EAAK2yB,YAAa,EAXD3yB,0EAcRsyB,GAAO,IAAAxvB,EAAA/F,KAAA61B,EACoC71B,KAAKgD,MAAjD6K,EADQgoB,EACRhoB,mBAAoBC,EADZ+nB,EACY/nB,oBAU5B,GARA9N,KAAKi1B,QAAU,GACfj1B,KAAK21B,YAAc,GACnB31B,KAAK41B,YAAa,EAElBL,EAAMnb,QAAQ,SAACwa,EAAMzhB,GACnBpN,EAAKkvB,QAAQza,KAAKoa,EAAKQ,iBAGpBvnB,EAML,IADA,IAAI4B,EAAO3P,OAAO2P,KAAKyjB,IAhBP4C,EAAA,SAiBP3iB,GACP,IAAI4iB,EAAWhwB,EAAKkvB,QAAQ9hB,GACxBoI,GAAS,EACTya,GAAO,EAEXD,EAASviB,MAAM,KAAK4G,QAAQ,SAACwa,EAAMqB,GAC5BD,IAAmB,IAAXza,IACXA,EAAQ9L,EAAK0E,QAAQygB,IAChB9mB,IAAkC,IAAXyN,GAAgBkZ,GAAMG,KAChDoB,GAAO,MAKTA,IAAmB,IAAXza,EACVxV,EAAK4vB,YAAYnb,KAAK+a,EAAMpiB,IAE5BpN,EAAK6vB,YAAa,GAjBbziB,EAAI,EAAGA,EAAIoiB,EAAMx0B,OAAQoS,IAAK2iB,EAA9B3iB,QALPnT,KAAK21B,YAAcJ,EAAM9hB,MAAM,yCA6BjCrS,OAAOmD,OAAOuO,QAAQ,oDA8DZyiB,GACVv1B,KAAK4D,SAAS,CAAE2xB,+CAGLC,GACXx1B,KAAK4D,SAAS,CAAE4xB,iDAGJC,GACZz1B,KAAK4D,SAAS,CAAE6xB,8CAGR1gB,GAAK,IAAA+Q,EACe9lB,KAAK2D,MAAzB8xB,EADK3P,EACL2P,QAASD,EADJ1P,EACI0P,OACbzgB,EAAImhB,QACNT,EAAQjb,KAAKzF,EAAIpF,MACjB3P,KAAK4D,SAAS,CAAE6xB,cAEhBD,EAAOhb,KAAKzF,EAAIpF,MAChB3P,KAAK4D,SAAS,CAAE4xB,8CAIVzgB,GAAK,IAET5B,EAFS2X,EACe9qB,KAAK2D,MAAzB8xB,EADK3K,EACL2K,QAASD,EADJ1K,EACI0K,OAGbzgB,EAAImhB,QAEK,KADX/iB,EAAIsiB,EAAQthB,QAAQY,EAAIpF,SAEtB8lB,EAAQ7a,OAAOzH,EAAG,GAClBnT,KAAK4D,SAAS,CAAE6xB,cAIP,KADXtiB,EAAIqiB,EAAOrhB,QAAQY,EAAIpF,SAErB6lB,EAAO5a,OAAOzH,EAAG,GACjBnT,KAAK4D,SAAS,CAAE4xB,wDAUpBp0B,OAAOmD,OAAOS,MAAMmxB,QAAUn2B,KAC9BoB,OAAOmD,OAAOuO,QAAQ,+DAItB1R,OAAOmD,OAAOS,MAAMmxB,QAAU,sCAGvB,IAMHjtB,EASAktB,EAfGlvB,EAAAlH,KAAAq2B,EAEuDr2B,KAAKgD,MAD3DsE,EADD+uB,EACC/uB,QAASkG,EADV6oB,EACU7oB,aAAcE,EADxB2oB,EACwB3oB,mBAAoBI,EAD5CuoB,EAC4CvoB,oBACjDH,EAFK0oB,EAEL1oB,kBAAmBC,EAFdyoB,EAEczoB,iBAAkBC,EAFhCwoB,EAEgCxoB,mBAFhCyoB,EAG4Bt2B,KAAK2D,MAAhC4xB,EAHDe,EAGCf,MAAOC,EAHRc,EAGQd,OAAQC,EAHhBa,EAGgBb,QACjBE,EAAc31B,KAAK21B,YAGrBY,EAAW1oB,EAAsBC,EAAsB,EAAI,EAAK,EAUpE,GARE5E,EADE9H,OAAOmD,OAAOuD,QAAU0F,GACjB,GAAKxN,KAAKgD,MAAM+F,MAAM8P,QAAQC,MAAQyd,EAEvC,GAAKA,EAEfrtB,EAAQ7E,KAAKC,IAAI,IAAKD,KAAKmyB,IAAI,GAAIttB,IAAU,KAIzC0E,EAAkB,CACpB5N,KAAKy2B,WAAWlB,GAEZI,EAAY50B,OAAS,IACvBq1B,EACEzG,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQquB,aACtBhG,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQovB,QACtB/G,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQkB,QACtBmnB,EAAA3nB,EAAAC,cAAC0uB,GAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMzO,OAAK,EAAC0O,gBAAc,EAAC/K,UAAW6D,EAAA3nB,EAAAC,cAAC6uB,GAAA9uB,EAAD,CAAeE,UAAWZ,EAAQyvB,WAAYhf,UAAU,OAAxD,UAC5D4d,EAAY9e,IAAI,SAAC+d,EAAMzhB,GAAP,OACfwc,EAAA3nB,EAAAC,cAAC+uB,GAAAhvB,EAAD,CAAUE,UAAWI,IAAWhB,EAAQ2vB,SAAU9jB,EAAE,EAAI7L,EAAQ4vB,IAAM5vB,EAAQ6vB,MAAOniB,IAAK7B,EAAGyS,QAAM,EAAC9D,QAAS5a,EAAKytB,GAAGC,EAAKphB,MAAM,KAAK,KACnImc,EAAA3nB,EAAAC,cAACmvB,GAAApvB,EAAD,CAAcwM,QAASogB,EAAKphB,MAAM,KAAK,aAUvD,IAAI6jB,EACA1H,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ+vB,WACtB1H,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAY2e,QAAQ,YAAY5M,MAAM,iBAAtC,cACC/Z,KAAKk1B,UAAU,aACfl1B,KAAKk1B,UAAU,SACfl1B,KAAKk1B,UAAU,aACfpnB,GAAuB9N,KAAKk1B,UAAU,MACvCvF,EAAA3nB,EAAAC,cAAA,WACCjI,KAAKk1B,UAAU,QACfpnB,EAAsB9N,KAAKk1B,UAAU,MAAQl1B,KAAKq1B,YAClDr1B,KAAKk1B,UAAU,QACfpnB,GAAuB9N,KAAKk1B,UAAU,OACvCvF,EAAA3nB,EAAAC,cAAA,WACCjI,KAAKk1B,UAAU,aACfl1B,KAAKk1B,UAAU,SACfl1B,KAAKk1B,UAAU,aACfpnB,GAAuB9N,KAAKk1B,UAAU,SAK/C,OACEvF,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,MAAOI,MAAO,CAAEW,MAAOA,GAAS4Y,QAAS,kBAAM1gB,OAAOmD,OAAOsT,WAChFnK,GAAsB+nB,EAAQ10B,OAAS,GAAO4M,GAAqB6nB,EAAOz0B,OAAS,IACpF4uB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQgwB,UACtB3H,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQslB,UACtBlf,GAAsB+nB,EAAQ10B,OAAS,GACtC4uB,EAAA3nB,EAAAC,cAAC0uB,GAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMzO,OAAK,EAAC0O,gBAAc,EAAC/K,UAAW6D,EAAA3nB,EAAAC,cAAC6uB,GAAA9uB,EAAD,CAAeE,UAAWZ,EAAQyvB,WAAYhf,UAAU,OAAxD,YAC5D0d,EAAQ5e,IAAI,SAACqf,EAAQ/iB,GAAT,OACXwc,EAAA3nB,EAAAC,cAAC+uB,GAAAhvB,EAAD,CAAUE,UAAWI,IAAWhB,EAAQiwB,WAAYpkB,EAAE,EAAI7L,EAAQ4vB,IAAM5vB,EAAQ6vB,MAAOniB,IAAK7B,EAC1FyS,QAAM,EAAC9D,QAAS,kBAAM5a,EAAKb,YAAY,QAAQ6vB,KAS/CvG,EAAA3nB,EAAAC,cAACmvB,GAAApvB,EAAD,CAAcwM,QAAS0hB,QAK9BvoB,GAAqB6nB,EAAOz0B,OAAS,GACpC4uB,EAAA3nB,EAAAC,cAAC0uB,GAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMzO,OAAK,EAAC0O,gBAAc,EAAC/K,UAAW6D,EAAA3nB,EAAAC,cAAC6uB,GAAA9uB,EAAD,CAAeE,UAAWZ,EAAQyvB,WAAYhf,UAAU,OAAxD,aAC5Dyd,EAAO3e,IAAI,SAAC2gB,EAAOrkB,GAAR,OACVwc,EAAA3nB,EAAAC,cAAC+uB,GAAAhvB,EAAD,CAAUE,UAAWI,IAAWhB,EAAQmwB,UAAWtkB,EAAE,EAAI7L,EAAQ4vB,IAAM5vB,EAAQ6vB,MAAOniB,IAAK7B,EAAGyS,QAAM,EAAC9D,QAAS,kBAAM5a,EAAKb,YAAY,QAAQmxB,KAC3I7H,EAAA3nB,EAAAC,cAACmvB,GAAApvB,EAAD,CAAcwM,QAASgjB,UAQpC5pB,GAAoBwoB,EACpBxoB,GAAoBC,GAAsBwpB,UA5Q7B1xB,IAAMkD,WA6RbC,wBA9VA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVC,OAAQ,OACR4mB,SAAU,QACVxW,gBAAiBtQ,EAAMiB,QAAQC,WAAWC,MAC1Cf,QAAS,OACTC,YAAa,gBACb4X,UAAW,SACXE,eAAgB,YAElBoW,SAAU,CACRjuB,KAAM,EACNH,MAAO,OACP4X,UAAW,aACXsP,UAAW,SACX3P,UAAW,QAEbmM,SAAU,GAEVgK,KAAM,CACJ1tB,MAAO,QAET6tB,WAAY,CACVzG,WAAY,KAEdiH,WAAY,CACVztB,QAAS,OAASf,EAAM8P,QAAQC,KAAO,MAEzC2e,UAAW,CACT3tB,QAAS,OAASf,EAAM8P,QAAQC,KAAO,MAEzCme,SAAU,CACRntB,QAAS,OAASf,EAAM8P,QAAQC,KAAO,MAEzC6c,YAAa,CACXtsB,KAAM,EACNH,MAAO,OACPC,QAAS,OACTkW,SAAU,gBACV6B,eAAgB,WAChB+P,aAAc,WACdyG,WAAY,YAEdhB,OAAQ,CACNxtB,MAAO,OACPuX,UAAW,OACX2P,UAAW,UAEb5nB,OAAQ,CACNU,MAAO,QAETmuB,UAAW,GAEXvG,WAAY,CACVhnB,QAAS,GAAIf,EAAM8P,QAAQC,MAE7Boe,IAAK,CACH7d,gBAAiB,sBAEnB8d,KAAM,CACJ9d,gBAAiB,yBAiSa,CAAE3O,WAAW,GAAhC5B,CAAwC4rB,ICrWjDziB,eACJ,SAAAA,EAAYjP,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAiS,IACjBhP,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAmS,GAAA7O,KAAApD,KAAMgD,KACDW,MAAQ,CACXoF,MAAO/F,EAAM+F,OAGf9F,EAAKyzB,OAAS/wB,IAAMC,YACpB3C,EAAKyN,SAAW/K,IAAMC,YACtB3C,EAAK00B,KAAOhyB,IAAMC,YARD3C,mFAWC,IACVwK,EAAsBrM,OAAOmD,OAAOC,SAApCiJ,kBAERrM,OAAOmD,OAAOS,MAAMyL,OAASzQ,KAC7BoB,OAAOw2B,SAAS,EAAE,GAClBx2B,OAAOmD,OAAO6M,UAAYpR,KAAK02B,OAAOzwB,QAGpC7E,OAAOmD,OAAO6M,UADZ3D,EACwBzN,KAAK0Q,SAASzK,QAEdjG,KAAK02B,OAAOzwB,uDAKxC7E,OAAOmD,OAAOS,MAAMyL,OAAS,yCAGnB1H,GACV/I,KAAK4D,SAAS,CAAEmF,2CAGT,IACCzB,EAAYtH,KAAKgD,MAAjBsE,QACAyB,EAAU/I,KAAK2D,MAAfoF,MAFDxB,EAMmBnG,OAAOmD,OAAOC,SAHhC8I,EAHD/F,EAGC+F,YAAaC,EAHdhG,EAGcgG,cAAe/F,EAH7BD,EAG6BC,OAAQC,EAHrCF,EAGqCE,OAAQ0F,EAH7C5F,EAG6C4F,UAClDM,EAJKlG,EAILkG,kBAAmBG,EAJdrG,EAIcqG,iBAAkBF,EAJhCnG,EAIgCmG,mBACrCC,EALKpG,EAKLoG,kBAAmBE,EALdtG,EAKcsG,mBAAoBL,EALlCjG,EAKkCiG,aACvCM,EANKvG,EAMLuG,oBAEE2e,EAAOnf,GAAiC,SAAlBC,EACtBmf,EAAQpf,GAAiC,UAAlBC,EAGzBnM,OAAOmD,OAAO6M,UADZ3D,EACwBzN,KAAK0Q,SAASzK,QAEdjG,KAAK02B,OAAOzwB,QAGxC,IAAIkwB,EAAWxG,EAAA3nB,EAAAC,cAAC4vB,GAAD,CAAShqB,mBAAoBA,EAAoBC,oBAAqBA,EAAqBN,aAAcA,EAAcI,iBAAkBA,EAAkBF,mBAAoBA,EAAoBC,kBAAmBA,IAErO,OACEgiB,EAAA3nB,EAAAC,cAAC6vB,EAAA,iBAAD,CAAkB/uB,MAAOA,GACvB4mB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQc,KACtBunB,EAAA3nB,EAAAC,cAACia,EAAA,EAAD,CAAS5C,MAAM,iBAEjBqQ,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQovB,OAAQruB,IAAKrI,KAAK02B,QACvCjK,GAAQ0J,EACTxG,EAAA3nB,EAAAC,cAAC8vB,EAAD,CAAU7uB,MAAOiE,EAAW3F,OAAQA,EAAQC,OAAQA,EAAQioB,aAAc1vB,KAAK0Q,WAC9Egc,GAASyJ,GAEZxG,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQkB,QACtBmnB,EAAA3nB,EAAAC,cAAC+vB,EAAD,CAAOxwB,OAAQA,EAAQC,OAAQA,IAC/BkoB,EAAA3nB,EAAAC,cAACgwB,EAAD,OAEFtI,EAAA3nB,EAAAC,cAACiwB,GAAD,eApEWvyB,IAAMkD,WAgFZC,yBAvHA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLe,MAAO,OACPD,OAAQ,OACRgB,WAAY,QACZjB,SAAU,WACVZ,IAAK,EACLqkB,KAAM,EACNtjB,QAAS,OACTC,YAAa,iBAEfhB,IAAK,CACHA,IAAK,EACLqkB,KAAM,EACNvjB,MAAO,QAETwtB,OAAQ,CACN1tB,SAAU,WACVG,QAAS,OACTC,YAAa,aACbC,KAAM,EACNojB,KAAM,EACNvjB,MAAO,QAETG,KAAM,CACJA,KAAM,GAERb,OAAQ,CACNA,OAAQ,EACRikB,KAAM,EACNvjB,MAAO,QAETyuB,KAAM,CACJ3uB,SAAU,WACVC,OAAQ,OACRoQ,gBAAiBtQ,EAAMiB,QAAQC,WAAWC,SAoFZ,CAAEQ,WAAW,GAAhC5B,CAAwCmJ,4KC9FjDkmB,cACJ,SAAAA,EAAYn1B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAm4B,IACjBl1B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAq4B,GAAA/0B,KAAApD,KAAMgD,KACDW,MAAQ,GAFIV,wEAKV,IAAA2nB,EAC4B5qB,KAAKgD,MAAhCsE,EADDsjB,EACCtjB,QAAS8wB,EADVxN,EACUwN,MAAOj4B,EADjByqB,EACiBzqB,OAExB,OACEwvB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CACEgN,IAAKojB,EAAMn0B,GACX2hB,QAAM,EACNuC,OAAK,EACLC,SAAO,EACPtG,QAAS3hB,GAETwvB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CACEwM,QAAS4jB,EAAMzoB,KACf+E,UACEib,EAAA3nB,EAAAC,cAAA,YACE0nB,EAAA3nB,EAAAC,cAAA,YACGmwB,EAAMC,MADT,UAEO1I,EAAA3nB,EAAAC,cAAA,WACP0nB,EAAA3nB,EAAAC,cAAA,YACGmwB,EAAME,qBA1BA3yB,IAAMkD,WA4ChBC,uBA3DA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,GAEPowB,SAAU,CACRjvB,OAAQ,GAEVkvB,KAAM,CACJC,QAAS,MAoDqB,CAAE/tB,WAAW,GAAhC5B,CAAwCqvB,GChCjDO,cACJ,SAAAA,EAAY11B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA04B,IACjBz1B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAA44B,GAAAt1B,KAAApD,KAAMgD,KACDW,MAAQ,GAFIV,wEAKV,IAAA2nB,EACmC5qB,KAAKgD,MAAvCsE,EADDsjB,EACCtjB,QAASqxB,EADV/N,EACU+N,UAAW3tB,EADrB4f,EACqB5f,UAE5B,OACE2kB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ6jB,QACtBwE,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAY2e,QAAQ,YAAYze,UAAWZ,EAAQgY,OACjDqQ,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQ8J,WACtBpG,EAAUjK,OADb,mBAEE4uB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQ+B,UAI/BsmB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQslB,UACtB+C,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CACEmgB,OAAK,EACL0O,gBAAc,GAEb7rB,EAAU6L,IAAI,SAACuhB,EAAMjlB,GAAP,OACbwc,EAAA3nB,EAAAC,cAAC2wB,EAAD,CAAY5jB,IAAK7B,EAAGilB,MAAOA,EAAOj4B,OAAQ,kBAAMw4B,EAAUxlB,kBAzBnDxN,IAAMkD,WAyCZC,uBApEA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLqY,UAAW,OACXrX,QAAS,OACTC,YAAa,iBAEf+hB,OAAQ,GAER7L,MAAO,GAEPsN,SAAU,CACRnM,UAAW,OACXpX,KAAM,GAER+H,UAAW,CACTjI,QAAS,OACT0vB,YAAa,OAEfxvB,KAAM,CACJA,KAAM,KAiDwB,CAAEqB,WAAW,GAAhC5B,CAAwC4vB,GCrDjDI,cACJ,SAAAA,EAAY91B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA84B,IACjB71B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAg5B,GAAA11B,KAAApD,KAAMgD,KACDW,MAAQ,GAFIV,wEAKV,IAAA2nB,EAC8B5qB,KAAKgD,MAAlCsE,EADDsjB,EACCtjB,QAASyxB,EADVnO,EACUmO,QAAS54B,EADnByqB,EACmBzqB,OAE1B,OACEwvB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CACEgN,IAAK+jB,EAAQ90B,GACb2hB,QAAM,EACNuC,OAAK,EACLC,SAAO,EACPtG,QAAS3hB,GAETwvB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CACEwM,QAASukB,EAAQrP,QACjBhV,UACEib,EAAA3nB,EAAAC,cAAA,YACE0nB,EAAA3nB,EAAAC,cAAA,YACG8wB,EAAQC,QACJrJ,EAAA3nB,EAAAC,cAAA,WACP0nB,EAAA3nB,EAAAC,cAAA,YACG8wB,EAAQE,kBA1BKtzB,IAAMkD,WA4CvBC,uBA3DA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,GAEPowB,SAAU,CACRjvB,OAAQ,GAEVkvB,KAAM,CACJC,QAAS,MAoDqB,CAAE/tB,WAAW,GAAhC5B,CAAwCgwB,GChCjDI,cACJ,SAAAA,EAAYl2B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAk5B,IACjBj2B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAo5B,GAAA91B,KAAApD,KAAMgD,KACDW,MAAQ,GAFIV,wEAKV,IAAA2nB,EACiC5qB,KAAKgD,MAArCsE,EADDsjB,EACCtjB,QAAS6xB,EADVvO,EACUuO,YAAaf,EADvBxN,EACuBwN,MAE9B,OACEzI,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ6jB,QACtBwE,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAY2e,QAAQ,YAAYze,UAAWZ,EAAQgY,OACjDqQ,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQ8J,WACtBgnB,EAAMgB,SAASr4B,OADlB,SAEE4uB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQ+B,UAI/BsmB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQslB,UACtB+C,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CACEmgB,OAAK,EACL0O,gBAAc,GAEbuB,EAAMgB,SAASviB,IAAI,SAACH,EAAIvD,GAAL,OAClBwc,EAAA3nB,EAAAC,cAACoxB,EAAD,CAAmBrkB,IAAK7B,EAAG4lB,QAASriB,EAAKvW,OAAQ,kBAAMg5B,EAAYhmB,kBAzBrDxN,IAAMkD,WAyCnBC,uBApEA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLqY,UAAW,OACXrX,QAAS,OACTC,YAAa,iBAEf+hB,OAAQ,GAER7L,MAAO,GAEPsN,SAAU,CACRnM,UAAW,OACXpX,KAAM,GAER+H,UAAW,CACTjI,QAAS,OACT0vB,YAAa,OAEfxvB,KAAM,CACJA,KAAM,KAiDwB,CAAEqB,WAAW,GAAhC5B,CAAwCowB,+FCbjDI,cACJ,SAAAA,EAAYt2B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAs5B,IACjBr2B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAw5B,GAAAl2B,KAAApD,KAAMgD,KACDW,MAAQ,GACbV,EAAK0mB,KAAOhkB,IAAMC,YAClB3C,EAAKs2B,SAAW,KAJCt2B,mFAOC,IACV81B,EAAY/4B,KAAKgD,MAAjB+1B,QACR/4B,KAAKu5B,SAAW,IAAIvzB,IAAShG,KAAK2pB,KAAK1jB,SACvCjG,KAAKu5B,SAASnyB,WAAW2xB,EAAQpP,uCAG1B,IAAAiB,EACsB5qB,KAAKgD,MAA1BsE,EADDsjB,EACCtjB,QAASyxB,EADVnO,EACUmO,QADVxxB,EAEoBnG,OAAOmD,OAAOC,SAAjCgD,EAFDD,EAECC,OAAQC,EAFTF,EAESE,OAFT+xB,EAG0Bp4B,OAAOmD,OAAOC,SAAvCkD,EAHD8xB,EAGC9xB,WAAYC,EAHb6xB,EAGa7xB,SAEdC,EAAO,iBAAmBF,EAAa,6BAA+BtG,OAAOmD,OAAOuD,OAASH,EAAS,EAAIA,GAAY,MAK5H,OAHA3H,KAAKu5B,UAAYv5B,KAAKu5B,SAAShzB,QAC/BvG,KAAKu5B,UAAYv5B,KAAKu5B,SAASnyB,WAAW2xB,EAAQpP,MAGhDgG,EAAA3nB,EAAAC,cAACwxB,EAAAzxB,EAAD,CAAME,UAAWZ,EAAQ2jB,MACvB0E,EAAA3nB,EAAAC,cAACyxB,EAAA1xB,EAAD,CAAYE,UAAWZ,EAAQ6jB,OAC7B7L,MAAOyZ,EAAQrP,QACfoC,UACE6D,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQklB,KACvBmD,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQmlB,MACtBsM,EAAQC,QAEXrJ,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQolB,OACtBqM,EAAQE,SAKjBtJ,EAAA3nB,EAAAC,cAAC0xB,EAAA3xB,EAAD,CAAaE,UAAWZ,EAAQqiB,MAC9BgG,EAAA3nB,EAAAC,cAAA,OAAKI,IAAKrI,KAAK2pB,KAAMzhB,UAAWI,IAAWhB,EAAQvD,OAAQyD,EAAQC,GAASc,MAAOX,KAErF+nB,EAAA3nB,EAAAC,cAAC2xB,EAAA5xB,EAAD,CAAaE,UAAWZ,EAAQ8kB,kBA1ChBzmB,IAAMkD,WAuDfC,uBAtGA,SAAAC,GAAK,MAAK,CACvBkiB,KAAM,CACJhiB,OAAQ,OACRE,QAAS,OACTC,YAAa,iBAEf+hB,OAAQ,CACNhiB,QAAS,OACTC,YAAa,cAEfojB,IAAK,CACHrjB,QAAS,QAEXsjB,KAAM,CACJpjB,KAAM,GAERqjB,MAAO,CACLC,WAAY,OAEdhD,KAAM,CACJtgB,KAAM,EACNK,aAAc,OACdC,aAAc,UAEhByiB,QAAS,CACPS,kBAAmB,gBAErBjH,OAAQ,CACNzc,QAAS,SAEXpF,OAAQ,CACNwF,cAAe,2BACfC,cAAe,SACfC,YAAa,OACbP,MAAO,OACPD,OAAQ,OACRS,aAAc,SACdC,aAAc,SACdC,cAAe,WACfC,YAAa,gBA+DiB,CAAEa,WAAW,GAAhC5B,CAAwCwwB,GCzFjDtqB,cACJ,SAAAA,EAAYhM,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAgP,IACjB/L,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAkP,GAAA5L,KAAApD,KAAMgD,KAQR62B,OAAS,SAAC7kB,GAAQ,IAEVojB,EADgBn1B,EAAKU,MAAnBqH,UACgBgK,GAExB5T,OAAOmD,OAAOuO,QAAQ,YAAaslB,EAAMn0B,KAbxBhB,EAgBnB62B,UAAY,SAAC9kB,GAAQ,IACXojB,EAAUn1B,EAAKU,MAAfy0B,MACF1hB,EAAM0hB,EAAMgB,SAASpkB,GAE3B5T,OAAOmD,OAAOuO,QAAQ,QAASslB,EAAMn0B,GAAG,IAAIyS,EAAIzS,KAlBhDhB,EAAKU,MAAQ,CACXuH,MAAO,KACPktB,MAAO,KACPptB,UAAWhI,EAAMgI,UAAYhI,EAAMgI,UAAY,IALhC/H,mFAwBjB7B,OAAOmD,OAAOS,MAAM+L,OAAS/Q,oDAI7BoB,OAAOmD,OAAOS,MAAM+L,OAAS,6CAGf/F,GACdhL,KAAK4D,SAAS,CAAEoH,YAAWotB,MAAO,KAAMltB,MAAO,2CAGrCktB,GACVp4B,KAAK4D,SAAS,CAAEw0B,QAAOltB,MAAO,2CAGpBA,GACQlL,KAAK2D,MAAfy0B,MACFgB,SAAShf,QAAQ,SAAC2f,EAAG5mB,GACrBjI,EAAMjH,KAAO81B,EAAG91B,KAClBiH,EAAM8J,IAAM7B,KAGhBnT,KAAK4D,SAAS,CAAEsH,2CAGT,IACC5D,EAAYtH,KAAKgD,MAAjBsE,QADDwe,EAE6B9lB,KAAK2D,MAAjCqH,EAFD8a,EAEC9a,UAAWotB,EAFZtS,EAEYsS,MAAOltB,EAFnB4a,EAEmB5a,MAE1B,OACEykB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACpBiwB,EACAzI,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ0yB,MACtBrK,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQmlB,MACtBkD,EAAA3nB,EAAAC,cAACgyB,EAAD,CAAe7B,MAAOA,EAAOe,YAAan5B,KAAK85B,aAEjDnK,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQolB,OACpBxhB,GACAykB,EAAA3nB,EAAAC,cAACiyB,EAAD,CAAWnB,QAAS7tB,MAK1BykB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ0yB,MACtBrK,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQmlB,MACtBkD,EAAA3nB,EAAAC,cAACkyB,EAAD,CAAQnvB,UAAWA,EAAW2tB,UAAW34B,KAAK65B,UAEhDlK,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQolB,iBAxEf/mB,IAAMkD,WAyFZC,yBAtHA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVC,OAAQ,OACRC,MAAO,OACPC,QAAS,OACTC,YAAa,cAEfqjB,KAAM,CACJzjB,SAAU,WACVwX,UAAW,OACXnX,KAAM,GAERqjB,MAAO,CACLrjB,KAAM,EACNmX,UAAW,OACXxX,SAAU,YAEZgxB,KAAM,CACJ3wB,KAAM,EACNL,SAAU,WACVG,QAAS,UAiGqB,CAAEuB,WAAW,GAAhC5B,CAAwCkG,mqBCGjDorB,4CACJ,SAAAA,EAAYp3B,GAAO,IAAAC,EAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAo6B,IACjBn3B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAs6B,GAAAh3B,KAAApD,KAAMgD,KA4FRq3B,UAAY,SAAChQ,EAAO9kB,GAClBtC,EAAKW,SAAS,CAAEymB,MAAOA,EAAO9kB,OAAQA,IACtC+V,aAAarY,EAAKq3B,aAClBnf,WAAWlY,EAAKq3B,YAAa,MAhGZr3B,EAmGnBq3B,YAAc,WACZr3B,EAAKW,SAAS,CAAEymB,OAAO,EAAO9kB,OAAQ,MApGrBtC,EAuGnB+mB,aAAe,SAAChV,GAAD,OAAS,SAAC3S,GAAM,IACrBk4B,EAASt3B,EAAKU,MAAd42B,KACRA,EAAKvlB,GAAO3S,EAAEmB,OAAOC,MACrBR,EAAKW,SAAS,CAAE22B,WA1GCt3B,EA6GnBu3B,aAAe,SAACxlB,GAAD,OAAS,SAAC3S,GAAM,IACrBk4B,EAASt3B,EAAKU,MAAd42B,KACRA,EAAKvlB,GAAOylB,SAASp4B,EAAEmB,OAAOC,OAC9BR,EAAKW,SAAS,CAAE22B,WAhHCt3B,EAmHnBy3B,aAAe,SAAC1lB,GAAD,OAAS,SAAC3S,GAAM,IACrBk4B,EAASt3B,EAAKU,MAAd42B,KACJA,EAAKrlB,eAAeF,IACtBulB,EAAKvlB,GAAO3S,EAAEmB,OAAOm3B,QACrB13B,EAAKW,SAAS,CAAE22B,UAEhBt3B,EAAKW,SAAL9D,OAAAowB,EAAA,EAAApwB,CAAA,GAAiBkV,EAAM3S,EAAEmB,OAAOm3B,YAzHjB13B,EA6HnBinB,WAAa,SAACjjB,GAAS,IACbszB,EAASt3B,EAAKU,MAAd42B,KACRA,EAAKtzB,KAAOA,EACZhE,EAAKW,SAAS,CAAE22B,UAhICt3B,EAmInB23B,KAAO,WAAM,IAAAhQ,EACsB3nB,EAAKD,MAA9B4zB,EADGhM,EACHgM,KAAMiE,EADHjQ,EACGiQ,SAAUC,EADblQ,EACakQ,KAClBlrB,EAAmB,QAAbirB,EAERC,GAAQA,EAAKF,KACfE,EAAKF,OACIhrB,EACTxO,OAAOmD,OAAOw2B,UAEd35B,OAAOmD,OAAOyR,iBAAiB4gB,EAAMiE,GAGvCz5B,OAAOmD,OAAOS,MAAMC,QAAQQ,eA/IXxC,EAkJnBknB,SAAW,WACTlnB,EAAKW,SAAS,CAAEo3B,eAAe,IAC/B/3B,EAAKyY,OAAOzV,QAAQyV,OAAOnR,UApJVtH,EAuJnBskB,SAAW,SAACllB,GAAM,IAAAwzB,EACsB5yB,EAAKD,MAAnC4zB,EADQf,EACRe,KAAMqE,EADEpF,EACFoF,SAAUC,EADRrF,EACQqF,UAChBX,EAASt3B,EAAKU,MAAd42B,KACFh2B,EAASnD,OAAOmD,OAItB,GAFAlC,EAAEwhB,iBAEgB,KAAd0W,EAAK5qB,KAAT,CAKA,IAAI4L,EAAQqb,EAAK/f,IAAI,SAAC0jB,GAAD,OAAUA,EAAK5qB,OAAMwE,QAAQomB,EAAK5qB,MACnD4L,GAAS,GAAKA,IAAU0f,EAC1Bh4B,EAAKo3B,WAAU,EAAM,uCAInBa,IAA2B,IAAdD,EACfh4B,EAAKo3B,WAAU,EAAM,sCAIvBp3B,EAAKo3B,WAAU,EAAO,UAElBY,GAAY,GACdrE,EAAKqE,GAAYV,EACjBh2B,EAAOS,MAAMiM,WAAWrN,SAAS,CAAEq3B,SAAUA,MAE7CrE,EAAKpc,KAAK+f,GACVh2B,EAAOS,MAAMiM,WAAWrN,SAAS,CAAEq3B,SAAUrE,EAAK71B,OAAO,KAG3DkC,EAAK23B,aAzBH33B,EAAKo3B,WAAU,EAAM,4BA/JNp3B,EA4LnB0oB,SAAW,WAAM,IAAA0K,EACiCpzB,EAAKD,MAA7C4zB,EADOP,EACPO,KAAMiE,EADCxE,EACDwE,SAAUI,EADT5E,EACS4E,SAAUC,EADnB7E,EACmB6E,UAC5B32B,EAASnD,OAAOmD,OAEtB,GAAInD,OAAOshB,QAAQ,uCAAyCkU,GAAQqE,GAAY,EAAG,CACjF,GAAIC,EAAW,CACb,IAAIvrB,EAAOinB,EAAKqE,GAAUtrB,KAC1BinB,EAAKqE,GAAYn7B,OAAOgV,OAAO,GAAIvQ,EAAO4K,UAAUof,MAAMsM,IAC1DjE,EAAKqE,GAAUtrB,KAAOA,EACtB1M,EAAKW,SAAS,CAAE22B,KAAMz6B,OAAOgV,OAAO,GAAI8hB,EAAKqE,WAE7CrE,EAAKhc,OAAOqgB,EAAU,GACtB12B,EAAOS,MAAMiM,WAAWrN,SAAS,CAAEq3B,UAAW,IAGhDh4B,EAAKo3B,WAAU,EAAO,YAEtBp3B,EAAK23B,SA7MU33B,EAiNnBk4B,QAAU,WAAM,IAAAC,EAC4Cn4B,EAAKD,MAAvD4zB,EADMwE,EACNxE,KAAMiE,EADAO,EACAP,SAAUI,EADVG,EACUH,SAAUC,EADpBE,EACoBF,UAAWG,EAD/BD,EAC+BC,SACrCd,EAASt3B,EAAKU,MAAd42B,KACJhM,EAAQzuB,OAAOgV,OAAO,GAAI1T,OAAOmD,OAAO4K,UAAUof,MAAMsM,IAExDjE,GAAQqE,GAAY,IAClBC,GACF3M,EAAM5e,KAAOinB,EAAKqE,GAAUtrB,KACV,KAAd4qB,EAAKtzB,KACPsnB,EAAMtnB,KAAOhE,EAAKq4B,cAElB/M,EAAMtnB,KAAO2vB,EAAKqE,GAAUh0B,MAG9BsnB,EAAQqI,EAAKqE,IAIjBh4B,EAAKW,SAAS,CACZ22B,KAAMz6B,OAAOgV,OAAO,GAAIumB,GAAY9M,KAGtCtrB,EAAKo3B,WAAU,EAAO,WAvOL,IAGTzD,EAAuC5zB,EAAvC4zB,KAAMiE,EAAiC73B,EAAjC63B,SAAUI,EAAuBj4B,EAAvBi4B,SAAUI,EAAar4B,EAAbq4B,SAE5B9M,EAAQntB,OAAOmD,OAAO4K,UAAUof,MAAMsM,GAL3B,OAOjB53B,EAAKU,MAAQ,CACXizB,KAAMA,EACN2D,KAAMz6B,OAAOgV,OAAO,GAAI8hB,GAAQqE,GAAY,EAAIrE,EAAKqE,GAAaI,GAAY9M,GAC9E0M,SAAUA,EACV11B,OAAQ,GACR8kB,OAAO,EACPpO,YAAY,EACZ+e,eAAe,GAGjB/3B,EAAKyY,OAAS/V,IAAMC,YAjBH3C,mFAoBC,IACV4B,EAAU7E,KAAKgD,MAAf6B,MACRA,EAAMgmB,QAAQ7L,SAASzU,OAASvK,KAAKmqB,SACrC/oB,OAAOmD,OAAOgM,OAAOyO,SAASna,EAAOA,EAAMgmB,QAAQ7L,yDAInDhf,KAAKgD,MAAM6B,MAAMgmB,QAAQ7L,SAASzU,OAAS,KAC3C+Q,aAAatb,KAAKs6B,mDAmCN,IAAAv0B,EAAA/F,KAAAu7B,EACoCv7B,KAAKgD,MAA7C4zB,EADI2E,EACJ3E,KAAMiE,EADFU,EACEV,SAAUI,EADZM,EACYN,SAAUC,EADtBK,EACsBL,UAC1BX,EAASv6B,KAAK2D,MAAd42B,KACF5qB,EAAO4qB,EAAK5qB,KAElB,IAAKurB,EAAW,MAAO,GAEvB,GAAItE,GAAQqE,GAAY,GAA6B,KAAxBrE,EAAKqE,GAAUh0B,KAC1C,OAAO2vB,EAAKqE,GAAUh0B,KAAKwM,QAG7B,IAAI8R,EAAM,IAAInkB,OAAOokB,eAgBrB,OAfAD,EAAIE,mBAAqB,WACA,IAAnBF,EAAI5jB,aAEa,MAAf4jB,EAAIhgB,QACNg1B,EAAK5qB,KAAOA,EACZ4qB,EAAKtzB,KAAOse,EAAIG,aAChB3f,EAAKnC,SAAS,CAAE22B,OAAM3D,OAAMqE,cAE5Bld,MAAM,gEAIZwH,EAAIlD,KAAK,MAAO,KAAO1S,GACvB4V,EAAIzjB,OAEGV,OAAOmD,OAAO4K,UAAUof,MAAMsM,GAAU5zB,KAAKwM,qDAiJhDzT,KAAK2D,MAAMq3B,eACbh7B,KAAKmqB,4CAIA,IAAAqR,EACwCx7B,KAAKgD,MAA5CsE,EADDk0B,EACCl0B,QAAS2zB,EADVO,EACUP,SAAUH,EADpBU,EACoBV,KAAMI,EAD1BM,EAC0BN,UAD1BpV,EAEyB9lB,KAAK2D,MAA7B42B,EAFDzU,EAECyU,KAAMlQ,EAFPvE,EAEOuE,MAAO9kB,EAFdugB,EAEcvgB,OAEjBk2B,EAAQ,WACRC,EAAQ,aACPZ,IACHW,EAAQ,OACJlB,EAAK5qB,KAAK0L,SAAS,UACrBqgB,EAAQ,QAIZ,IAAIlO,EAAOxtB,KAAK2D,MAAMsY,WAKtB,OAJIse,EAAKrlB,eAAe,gBACtBsY,EAAO+M,EAAKte,YAIZ0T,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAA,QAAMsf,SAAUvnB,KAAKunB,SAAUrf,UAAWZ,EAAQq0B,MAChDhM,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ8J,WACtBue,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQc,KACtBunB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQqI,MACtBggB,EAAA3nB,EAAAC,cAACyqB,GAAA1qB,EAAD,CAAWU,MAAM,OAAOR,UAAWZ,EAAQ+B,KAAM5F,MAAO82B,EAAK5qB,KAAMvK,SAAUpF,KAAKgqB,aAAa,QAASlO,SAAUof,EAAWvT,WAAY,CAAErgB,QAAS,CAAExB,MAAOwB,EAAQs0B,cACrKjM,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQu0B,YACvBlM,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,KAAayzB,GACb9L,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASnN,EACflmB,QAAS,CAAEy0B,WAAYz0B,EAAQy0B,YAC/BhiB,MAAM,UACN3U,SAAUpF,KAAK06B,aAAa,gBAE9B/K,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,KAAa0zB,KAGhBZ,GAASnL,EAAA3nB,EAAAC,cAAC6yB,EAAD,CAAMP,KAAMA,EAAMC,aAAcx6B,KAAKw6B,aAAcxQ,aAAchqB,KAAKgqB,aAAc0Q,aAAc16B,KAAK06B,gBAGnH/K,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQoU,QACtBiU,EAAA3nB,EAAAC,cAAC+zB,GAAAh0B,EAAD,CACEkB,MAAM,OACND,OAAO,OACPgzB,UAAU,MACV7a,SAAS,OACTlZ,UAAWZ,EAAQoU,OACnBrT,IAAKrI,KAAK0b,OACV8R,KAAMA,EAAOkO,EAAMnjB,cAAgBkjB,EAAMljB,cACzCxP,MAAM,wBACNtF,MAAO82B,EAAKtzB,KACZ7B,SAAUpF,KAAKkqB,WACfwD,aAAa,EACbC,qBAAqB,EACrBC,YAAa,CAAEC,gBAAiBC,SAKtC6B,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQkB,QACtBmnB,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQE,UAAWZ,EAAQ60B,WAAY70B,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShR,QAAS,kBAAM1gB,OAAOmD,OAAOS,MAAMiM,WAAWrN,SAAS,CAAEw4B,MAAM,EAAOnB,UAAW,MACzJtL,EAAA3nB,EAAAC,cAACo0B,GAAAr0B,EAAD,MAAa2nB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQg1B,aAAzB,UAEf3M,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQ8Z,QAAS9hB,KAAK2rB,SAAUrkB,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShX,UAAwB,IAAdmf,GAC3EtL,EAAA3nB,EAAAC,cAACs0B,GAAAv0B,EAAD,MAAc2nB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQg1B,aAAzB,WAEhB3M,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQovB,QACvB/G,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQ0oB,MAAOjW,MAAOsQ,EAAQ,QAAU,WAC5D9kB,IAGLoqB,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQ8Z,QAAS9hB,KAAKunB,SAAUjgB,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShX,SAAUof,IAA2B,IAAdD,GACxFtL,EAAA3nB,EAAAC,cAACu0B,GAAAx0B,EAAD,MAAY2nB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQg1B,aAAzB,SAEd3M,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQ8Z,QAAS9hB,KAAKm7B,QAAS7zB,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShX,SAAUof,IAA2B,IAAdD,GACtFC,GAA2B,KAAdX,EAAKtzB,KAAe0oB,EAAA3nB,EAAAC,cAACw0B,GAAAz0B,EAAD,MAA0B2nB,EAAA3nB,EAAAC,cAACy0B,GAAA10B,EAAD,MAC5D2nB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQg1B,aACtBpB,GAA2B,KAAdX,EAAKtzB,KAAc,SAAW,gEA5R1BjE,EAAOW,GAAO,IACpCizB,EAAuC5zB,EAAvC4zB,KAAMiE,EAAiC73B,EAAjC63B,SAAUI,EAAuBj4B,EAAvBi4B,SAAUI,EAAar4B,EAAbq4B,SAE5B9M,EAAQntB,OAAOmD,OAAO4K,UAAUof,MAAMsM,GAExC8B,EAAW,GAEf,OAAI/F,IAASjzB,EAAMizB,MACjB+F,EAAS/F,KAAOA,EAChB+F,EAAS1B,SAAWA,EACpB0B,EAASpC,KAAOz6B,OAAOgV,OAAO,GAAI8hB,GAAQqE,GAAY,EAAIrE,EAAKqE,GAAaI,GAAY9M,GACxFoO,EAAS3B,eAAgB,EAClB2B,GAGL1B,IAAat3B,EAAMs3B,UACrB0B,EAAS1B,SAAWA,EACpB0B,EAASpC,KAAOz6B,OAAOgV,OAAO,GAAI8hB,GAAQqE,GAAY,EAAIrE,EAAKqE,GAAaI,GAAY9M,GACxFoO,EAAS3B,eAAgB,EAClB2B,GAGLtB,IAAa13B,EAAM03B,UACrBsB,EAAStB,SAAWA,EACpBsB,EAASpC,KAAOz6B,OAAOgV,OAAO,GAAI8hB,GAAQqE,GAAY,EAAIrE,EAAKqE,GAAaI,GAAY9M,GACxFoO,EAAS3B,eAAgB,EAClB2B,GAGF,YA7Dch3B,IAAMkD,YAmVhBC,wBA9bA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVC,OAAQ,OACRC,MAAO,OACP0jB,SAAU,UAEZ+O,KAAM,CACJ3yB,SAAU,WACVG,QAAS,OACTF,OAAQ,OACRC,MAAO,OACPmW,SAAU,iBAEZjO,UAAW,CACT/H,KAAM,EACNF,QAAS,OACTkW,SAAU,iBAEZ1P,KAAM,CACJzG,MAAO,OACPC,QAAS,OACTkW,SAAU,YAEZud,KAAM,CACJxM,UAAW,SACX3P,UAAW,QAEbrY,IAAItI,OAAAowB,EAAA,EAAApwB,CAAA,CACFqJ,QAAS,OACTkW,SAAU,WACVnW,MAAO,OACPknB,UAAW,SACX3P,UAAW,QACV1X,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BpB,KAAM,IAGVqS,OAAO5b,OAAAowB,EAAA,EAAApwB,CAAA,CACLuJ,KAAM,EACNC,OAAQP,EAAM8P,QAAQC,KAAK,QAC1B/P,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BnB,OAAQ,EACR3B,SAAU,SAGda,OAAQ,CACNW,QAAS,OACTkW,SAAU,aACVnW,MAAO,QAETwtB,OAAO52B,OAAAowB,EAAA,EAAApwB,CAAA,CACLqJ,QAAS,QACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B5D,QAAS,OACTkW,SAAU,aACVhW,KAAM,EACNquB,WAAY,WAGhB1H,MAAO,CACL9mB,MAAO,OACP8X,UAAW,SACX6b,cAAe,UAEjBxzB,KAAM,CACJA,KAAM,EACN+X,SAAU,QAEZ0R,MAAO,CACL3pB,QAAS,OACT2W,iBAAkB,UAEpBqc,WAAWr8B,OAAAowB,EAAA,EAAApwB,CAAA,CACTqJ,QAAS,QACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B5D,QAAS,SAGbmzB,YAAYx8B,OAAAowB,EAAA,EAAApwB,CAAA,CACVqJ,QAAS,QACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B5D,QAAS,SAGb0yB,WAAY,CACV1yB,QAAS,OACT+X,eAAgB,gBAChBwW,WAAY,UAEdqE,WAAWj8B,OAAAowB,EAAA,EAAApwB,CAAA,GACRiJ,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BxB,OAAQ,SAGZ2yB,UAAU97B,OAAAowB,EAAA,EAAApwB,CAAA,CACRgK,QAAS,IAAKf,EAAM8P,QAAQC,MAC3B/P,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BjD,QAASf,EAAM8P,QAAQC,SA4VK,CAAEpO,WAAW,GAAhC5B,CAAwCsxB,IC3ajD0C,eACJ,SAAAA,EAAY95B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA88B,IACjB75B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAg9B,GAAA15B,KAAApD,KAAMgD,KAEDW,MAAQ,GAHIV,qKAiBV,IAAA2nB,EAC+C5qB,KAAKgD,MAAnDsE,EADDsjB,EACCtjB,QAASizB,EADV3P,EACU2P,KAAMvQ,EADhBY,EACgBZ,aAAc0Q,EAD9B9P,EAC8B8P,aAErC,OACE/K,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAACyqB,GAAA1qB,EAAD,CAAWU,MAAM,mBAAmBgf,WAAS,EAACjkB,MAAO82B,EAAK3jB,QAASxR,SAAU4kB,EAAa,WAAYpC,WAAY,CAAEtgB,QAAS,CAAExB,MAAOwB,EAAQs0B,cAC9IjM,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQy1B,KACtBpN,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQu0B,YACvBlM,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,iBACA2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASJ,EAAKpkB,MAAO4D,MAAM,UAAU3U,SAAUs1B,EAAa,SAAUpzB,QAAS,CAAEy0B,WAAYz0B,EAAQy0B,cAC7GpM,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,gBAEF2nB,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQu0B,YACvBlM,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,kCACA2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASJ,EAAK3e,SAAUxW,SAAUs1B,EAAa,YAAapzB,QAAS,CAAEy0B,WAAYz0B,EAAQy0B,kDAvB3G36B,OAAOmD,OAAOy4B,sBATQr3B,IAAMkD,WAiDjBC,wBAlFA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVE,MAAO,QAET6zB,IAAK,CACH7zB,MAAO,OACPC,QAAS,OACTkW,SAAU,WACV6B,eAAgB,iBAElB2a,WAAY,CACV1yB,QAAS,OACT+X,eAAgB,gBAChBwW,WAAY,UAEdqE,WAAWj8B,OAAAowB,EAAA,EAAApwB,CAAA,GACRiJ,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BxB,OAAQ,SAGZ2yB,UAAU97B,OAAAowB,EAAA,EAAApwB,CAAA,CACRgK,QAAS,IAAKf,EAAM8P,QAAQC,MAC3B/P,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BjD,QAASf,EAAM8P,QAAQC,SA0DK,CAAEpO,WAAW,GAAhC5B,CAAwCg0B,ICjDjDG,eACJ,SAAAA,EAAYj6B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAi9B,IACjBh6B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAm9B,GAAA75B,KAAApD,KAAMgD,KAEDW,MAAQ,GAHIV,qKAiBV,IAAA2nB,EAC+C5qB,KAAKgD,MAAnDsE,EADDsjB,EACCtjB,QAASizB,EADV3P,EACU2P,KAAMvQ,EADhBY,EACgBZ,aAAc0Q,EAD9B9P,EAC8B8P,aAErC,OACE/K,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAACyqB,GAAA1qB,EAAD,CAAWU,MAAM,mBAAmBgf,WAAS,EAACjkB,MAAO82B,EAAK3jB,QAASxR,SAAU4kB,EAAa,WAAYpC,WAAY,CAAEtgB,QAAS,CAAExB,MAAOwB,EAAQs0B,cAC9IjM,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQy1B,KACtBpN,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQu0B,YACvBlM,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,iBACA2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASJ,EAAKpkB,MAAO4D,MAAM,UAAU3U,SAAUs1B,EAAa,SAAUpzB,QAAS,CAAEy0B,WAAYz0B,EAAQy0B,cAC7GpM,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,mDAnBR5G,OAAOmD,OAAO24B,oBATMv3B,IAAMkD,WA6CfC,wBA9EA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVE,MAAO,QAET6zB,IAAK,CACH7zB,MAAO,OACPC,QAAS,OACTkW,SAAU,WACV6B,eAAgB,iBAElB2a,WAAY,CACV1yB,QAAS,OACT+X,eAAgB,gBAChBwW,WAAY,UAEdqE,WAAWj8B,OAAAowB,EAAA,EAAApwB,CAAA,GACRiJ,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BxB,OAAQ,SAGZ2yB,UAAU97B,OAAAowB,EAAA,EAAApwB,CAAA,CACRgK,QAAS,IAAKf,EAAM8P,QAAQC,MAC3B/P,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BjD,QAASf,EAAM8P,QAAQC,SAsDK,CAAEpO,WAAW,GAAhC5B,CAAwCm0B,wBC5CjDE,eACJ,SAAAA,EAAYn6B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAm9B,IACjBl6B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAq9B,GAAA/5B,KAAApD,KAAMgD,KAEDW,MAAQ,GAHIV,qKAiBV,IAAA2nB,EACiC5qB,KAAKgD,MAArCsE,EADDsjB,EACCtjB,QAASizB,EADV3P,EACU2P,KAAMvQ,EADhBY,EACgBZ,aAEjBtR,EAAO6hB,EAAK7hB,KAAKE,WAAW,SAElC,OACE+W,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,mBACbqQ,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACm1B,GAAAp1B,EAAD,CAAME,UAAWwQ,EAAO6hB,EAAK7hB,KAAO,OAAQA,GAAQ6hB,EAAK7hB,QAG7DiX,EAAA3nB,EAAAC,cAACyqB,GAAA1qB,EAAD,CAAWU,MAAM,OAAOjF,MAAO82B,EAAK7hB,KAAMtT,SAAU4kB,EAAa,QAASpC,WAAY,CAAEtgB,QAAS,CAAExB,MAAOwB,EAAQs0B,cAClHjM,EAAA3nB,EAAAC,cAACyqB,GAAA1qB,EAAD,CAAWU,MAAM,mBAAmBgf,WAAS,EAACjkB,MAAO82B,EAAK/0B,MAAOJ,SAAU4kB,EAAa,SAAUpC,WAAY,CAAEtgB,QAAS,CAAExB,MAAOwB,EAAQs0B,cAC1IjM,EAAA3nB,EAAAC,cAACyqB,GAAA1qB,EAAD,CAAWU,MAAM,UAAUgf,WAAS,EAACjkB,MAAO82B,EAAKzT,QAAS1hB,SAAU4kB,EAAa,WAAYpC,WAAY,CAAEtgB,QAAS,CAAExB,MAAOwB,EAAQs0B,gDAvBzIx6B,OAAOmD,OAAO84B,qBATO13B,IAAMkD,WA+ChBC,wBAhFA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVE,MAAO,QAET6zB,IAAK,CACH7zB,MAAO,OACPC,QAAS,OACTkW,SAAU,WACV6B,eAAgB,iBAElB2a,WAAY,CACV1yB,QAAS,OACT+X,eAAgB,gBAChBwW,WAAY,UAEdqE,WAAWj8B,OAAAowB,EAAA,EAAApwB,CAAA,GACRiJ,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BxB,OAAQ,SAGZ2yB,UAAU97B,OAAAowB,EAAA,EAAApwB,CAAA,CACRgK,QAAS,IAAKf,EAAM8P,QAAQC,MAC3B/P,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BjD,QAASf,EAAM8P,QAAQC,SAwDK,CAAEpO,WAAW,GAAhC5B,CAAwCq0B,ICwCvD,SAASxb,GAAU3e,GACjB,OAAIA,EAAM4e,QAEN+N,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8Z,QAAS9e,EAAM8e,QAAS5Z,UAAWlF,EAAMkF,WAC9B,SAApBlF,EAAM+e,UACL4N,EAAA3nB,EAAAC,cAACq1B,EAAAt1B,EAAD,MAEA2nB,EAAA3nB,EAAAC,cAACs1B,EAAAv1B,EAAD,OAMJ2nB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWlF,EAAMkF,gBAStBgH,eACJ,SAAAA,EAAYlM,GAAO,IAAAC,EAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAkP,IACjBjM,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAoP,GAAA9L,KAAApD,KAAMgD,KAyERw6B,UAAY,SAACl6B,EAAOm6B,GAClBx6B,EAAKW,SAAS,CAAE65B,MAAKxC,UAAW,EAAGmB,MAAM,EAAOf,SAAU,QA3EzCp4B,EA8EnBy6B,SAAW,SAAC1oB,GAAD,OAAS,SAAC1R,GACnBL,EAAKW,SAAS,CAAEq3B,SAAUjmB,EAAKqmB,SAAU,SA/ExBp4B,EAkFnB06B,cAAgB,SAAAr6B,GACdL,EAAKW,SAAS,CAAEsf,WAAY5f,EAAMiX,iBAnFjBtX,EAsFnB26B,cAAgB,WACd36B,EAAKW,SAAS,CAAEsf,WAAY,QAvFXjgB,EA0FnB46B,eAAiB,SAAAxC,GAAQ,OAAI,WAC3Bp4B,EAAKW,SAAS,CAAEy3B,WAAUe,MAAM,EAAMnB,UAAW,MA3FhCh4B,EA8FnBy3B,aAAe,SAACH,GAAD,OAAU,SAACl4B,GACxBk4B,EAAKze,UAAYzZ,EAAEmB,OAAOm3B,QAC1B13B,EAAK66B,aAhGY76B,EAmGnB66B,SAAW,WACT,IAAML,EAAMx6B,EAAK86B,KAAK96B,EAAKU,MAAM85B,KAC3B7tB,EAAuB,QAAjB6tB,EAAI5C,SAEZ4C,EAAI3C,MAAQ2C,EAAI3C,KAAKF,KACvB6C,EAAI3C,KAAKF,OACAhrB,EACTxO,OAAOmD,OAAOw2B,UAEd35B,OAAOmD,OAAOyR,iBAAiBynB,EAAI7G,KAAM6G,EAAI5C,UAG/C53B,EAAKwC,eA/GYxC,EAkHnB+6B,WAAa,SAAC37B,GACZY,EAAKW,SAAS,CAAEq6B,UAAWh7B,EAAKU,MAAMs6B,YAnHrBh7B,EAsHnBi7B,WAAa,SAACtH,EAAMzjB,GAClB,GAAU,IAANA,EAAJ,CAEA,IAAI8D,EAAM2f,EAAKzjB,EAAE,GACjByjB,EAAKzjB,EAAE,GAAKyjB,EAAKzjB,GACjByjB,EAAKzjB,GAAK8D,EAEN9D,IAAMlQ,EAAKU,MAAMs3B,UACnBh4B,EAAKW,SAAS,CAAEq3B,SAAU9nB,EAAE,IAG9BlQ,EAAK66B,aAjIY76B,EAoInBk7B,aAAe,SAACvH,EAAMzjB,GACpB,GAAIA,IAAMyjB,EAAK71B,OAAO,EAAtB,CAEA,IAAIkW,EAAM2f,EAAKzjB,EAAE,GACjByjB,EAAKzjB,EAAE,GAAKyjB,EAAKzjB,GACjByjB,EAAKzjB,GAAK8D,EAEN9D,IAAMlQ,EAAKU,MAAMs3B,SACnBh4B,EAAKW,SAAS,CAAEq3B,SAAU9nB,EAAE,IACnBA,EAAE,IAAMlQ,EAAKU,MAAMs3B,UAC5Bh4B,EAAKW,SAAS,CAAEq3B,SAAU9nB,IAG5BlQ,EAAK66B,aA9IL,IAAMv5B,EAASnD,OAAOmD,OAHL,OAKjBtB,EAAK86B,KAAO,CACV,CACEnH,KAAMryB,EAAO8K,QACbwrB,SAAU,UACVC,KAAMqC,GACNjC,WAAW,EACXkD,UAAU,GAEZ,CACExH,KAAMryB,EAAO+K,SACburB,SAAU,WACVC,KAAMgC,GACN5B,WAAW,EACXkD,UAAU,GAEZ,CACExH,KAAMryB,EAAOiL,OACbqrB,SAAU,SACVC,KAAMmC,GACN/B,WAAW,EACXkD,UAAU,GAEZ,CACExH,KAAMryB,EAAOqL,IACbirB,SAAU,MACVC,KAAM,KACNI,WAAW,EACXkD,UAAU,GAEZ,CACExH,KAAMryB,EAAOmL,QACbmrB,SAAU,UACVC,KAAM,KACNI,WAAW,EACXkD,UAAU,IAoBdn7B,EAAKU,MAAQ,CACX85B,IAAK,EACLrB,MAAM,EACNnB,UAAW,EACX/X,WAAY,KACZmY,SAAU,KACV3hB,SAAU,KACVukB,UAAU,GAlEKh7B,mFAqJjB7B,OAAOmD,OAAOS,MAAMiM,WAAajR,oDAIjCoB,OAAOmD,OAAOS,MAAMiM,WAAa,sCAG1BkW,GACPnnB,KAAK4D,SAAS,CAAE8V,SAAUyN,qCAGnB,IAAAphB,EAAA/F,KAAA4qB,EACoB5qB,KAAKgD,MAAxBsE,EADDsjB,EACCtjB,QAASzC,EADV+lB,EACU/lB,MADVihB,EAE8D9lB,KAAK2D,MAAlEs3B,EAFDnV,EAECmV,SAAUmB,EAFXtW,EAEWsW,KAAM1iB,EAFjBoM,EAEiBpM,SAAUwJ,EAF3B4C,EAE2B5C,WAAYmY,EAFvCvV,EAEuCuV,SAAU4C,EAFjDnY,EAEiDmY,SAElDR,EAAMz9B,KAAK+9B,KAAK/9B,KAAK2D,MAAM85B,KAC3BY,EAAYZ,EAAI5C,SAAStiB,cACzBpJ,EAAY/N,OAAOmD,OAAO4K,UAAU2f,MAAMuP,GAEhD,OACE1O,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAACq2B,EAAAt2B,EAAD,CAAQgB,SAAS,UACf2mB,EAAA3nB,EAAAC,cAACs2B,EAAAv2B,EAAD,CAAMvE,MAAOzD,KAAK2D,MAAM85B,IAAKtU,YAAU,EAACtI,cAAc,KAAKzb,SAAUpF,KAAKw9B,UAAWpU,sBAAuBzH,GAAWra,QAAS,CAAEuZ,cAAevZ,EAAQuZ,gBACtJ7gB,KAAK+9B,KAAKlnB,IAAI,SAAC2L,EAAErP,GAAH,OAAUwc,EAAA3nB,EAAAC,cAACu2B,EAAAx2B,EAAD,CAAKgN,IAAK7B,EAAGzK,MAAO8Z,EAAEqY,eAGnDlL,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQ8J,UAAW2G,UAAU,OAClD4X,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQmlB,MACtBkD,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWk0B,GAAQnB,GAAY,EAAI3zB,EAAQm3B,YAAcn3B,EAAQo3B,YACrE/O,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQslB,UACtB+C,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAM6uB,gBAAc,EAAC1O,OAAK,EAAC2D,UACzB6D,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,CAAeoe,gBAAc,EAACle,UAAWZ,EAAQq3B,WAC9ClB,EAAI5C,SACLlL,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,iBACbqQ,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8T,UAAW2hB,EAAIW,SAAUtc,QAAS9hB,KAAKg+B,YAChDC,EAAYtO,EAAA3nB,EAAAC,cAAC22B,GAAA52B,EAAD,MAAiB2nB,EAAA3nB,EAAAC,cAAC42B,GAAA72B,EAAD,UAKnCy1B,EAAI7G,KAAK/f,IAAI,SAAC0jB,EAAMpnB,GAAP,OACZwc,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUgN,IAAK7B,EAAGgV,OAAK,EAACvC,QAAM,EAACwC,SAAO,EAAC6S,SAAUA,IAAa9nB,EAAG2O,QAAS/b,EAAK23B,SAASvqB,GAAIjL,UAAWiL,EAAI,IAAM,EAAI7L,EAAQ6vB,KAAO7vB,EAAQ4vB,KAC1IvH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,CAAcE,UAAWZ,EAAQy3B,SAC7BpP,EAAA3nB,EAAAC,cAAA,YAAOkL,EAAE,IAEbwc,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQ03B,SAAUxqB,QAAS+lB,EAAK5qB,QACvD8tB,EAAIvC,WACJvL,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACGi2B,EACCtO,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAYV,QAAS,CAAEqB,KAAMrB,EAAQ43B,aAAepjB,SAAU3I,IAAMsqB,EAAI7G,KAAK71B,OAAO,EAAG+gB,QAAS,kBAAM/b,EAAKo4B,aAAaV,EAAI7G,KAAMzjB,KAChIwc,EAAA3nB,EAAAC,cAACk3B,GAAAn3B,EAAD,OAGF2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,SAAUJ,EAAKze,SACrBxU,QAAS,CAAEy0B,WAAYz0B,EAAQy0B,YAC/B32B,SAAUW,EAAK20B,aAAaH,SAOvCkD,EAAI7G,KAAK71B,OAAS,GACjB4uB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUgN,KAAM,EAAGmT,OAAK,EAACjgB,UAAWZ,EAAQ6vB,MAC1CxH,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQ03B,SAAUtqB,UAAW,MAAM2pB,OAMnElvB,GAAaA,EAAUpO,OAAS,GAC/B4uB,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQ+e,YAAW7D,EAAa,gBAAkB,KAAMqD,aAAW,iBAAiBS,gBAAc,OAAO1f,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShR,QAAS9hB,KAAK29B,eACxJhO,EAAA3nB,EAAAC,cAACm3B,EAAAp3B,EAAD,MADF,cAMAy1B,EAAIvC,WACJvL,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQV,QAAS,CAAEoB,MAAOpB,EAAQwrB,OAAShR,QAAS,kBAAM/b,EAAKnC,SAAS,CAAEw4B,MAAM,EAAMnB,UAAW,EAAGI,SAAU,SAC5G1L,EAAA3nB,EAAAC,cAACo3B,EAAAr3B,EAAD,MADF,OAEOy1B,EAAI5C,SAASpnB,MAAM,GAAG,MAKnCkc,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQolB,OACtBiD,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWk0B,GAAQnB,GAAY,EAAI3zB,EAAQo3B,WAAap3B,EAAQm3B,aACnE9O,EAAA3nB,EAAAC,cAACq3B,GAAD,CAAY1I,KAAM6G,EAAI7G,KAAMiE,SAAUwD,EAAWhD,SAAUA,EAAUJ,SAAUA,EAAUp2B,MAAOA,EAAOi2B,KAAM2C,EAAI3C,KAAMI,UAAWuC,EAAIvC,eAK5IvL,EAAA3nB,EAAAC,cAACs3B,EAAAv3B,EAAD,CAAMugB,qBAAmB,EAACtkB,GAAG,gBAAgBqjB,SAAUpE,EAAYb,KAAM2D,QAAQ9C,GAAapB,QAAS9hB,KAAK49B,cAAev9B,QAASL,KAAK49B,eACtIzuB,GAAaA,EAAU0H,IAAI,SAAC2oB,EAAMrsB,GAAP,OAC1Bwc,EAAA3nB,EAAAC,cAACw3B,EAAAz3B,EAAD,CAAUgN,IAAK7B,EAAG2O,QAAS/b,EAAK83B,eAAe2B,IAC5CA,EAAK7vB,SAMZggB,EAAA3nB,EAAAC,cAACy3B,EAAA13B,EAAD,CAASsf,SAAU5N,EAAU2I,KAAM2D,QAAQtM,GAAWrZ,QAAS,kBAAM0F,EAAKnC,SAAS,CAAE8V,SAAU,SAC7FiW,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,+CA5PerC,IAAMkD,WA2QhBC,yBA5XA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVC,OAAQ,OACRC,MAAO,OACPC,QAAS,OACTC,YAAa,iBAEfgI,UAAUtR,OAAAowB,EAAA,EAAApwB,CAAA,CACRgK,QAASf,EAAM8P,QAAQC,KACvBzP,KAAM,EACNF,QAAS,OACTC,YAAa,YACZL,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BjD,QAAS,EAAEf,EAAM8P,QAAQC,OAG7B2T,KAAK3sB,OAAAowB,EAAA,EAAApwB,CAAA,CACH0f,YAAa,GACZzW,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5ByS,YAAa,EAAEzW,EAAM8P,QAAQC,OAGjC4T,MAAO,CACL1jB,SAAU,WACVK,KAAM,EACNJ,OAAQ,OACR2jB,SAAU,UAEZoS,SAAU,CACRnG,YAAa,EACbrZ,YAAa,EAAEzW,EAAM8P,QAAQC,MAE/Boe,IAAK,CACH7d,gBAAiB,sBAEnB8d,KAAM,CACJ9d,gBAAiB,uBAEnBhQ,KAAM,CACJA,KAAM,GAERypB,MAAO,CACL3pB,QAAS,OACT2W,iBAAkB,UAEpB8M,SAAU,CACRvjB,KAAM,EACN+mB,UAAW,SACX3P,UAAW,QAEbge,YAAY3+B,OAAAowB,EAAA,EAAApwB,CAAA,CACVqJ,QAAS,QACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B9D,OAAQ,OACRE,QAAS,OACTkW,SAAU,gBACV6B,eAAgB,kBAGpBwd,WAAY,CACVz1B,OAAQ,OACRE,QAAS,OACTkW,SAAU,gBACV6B,eAAgB,iBAElBL,cAAc/gB,OAAAowB,EAAA,EAAApwB,CAAA,GACXiJ,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BpB,KAAM,WACNS,QAAS,EACTgX,UAAW,WAGf6d,UAAW,CACTz1B,MAAO,OACPG,KAAM,EACNF,QAAS,OACT+X,eAAgB,iBAElBge,YAAa,CACX71B,KAAM,WACNS,QAAS,EACTgX,UAAW,YAEbib,WAAWj8B,OAAAowB,EAAA,EAAApwB,CAAA,GACRiJ,EAAMyB,YAAYC,KAAK,MAAQ,CAC9BxB,OAAQ,WAsSoB,CAAEyB,WAAW,GAAhC5B,CAAwCoG,wZC7XjDywB,cACJ,SAAAA,EAAY38B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA2/B,IACjB18B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAA6/B,GAAAv8B,KAAApD,KAAMgD,KACDW,MAAQ,GAFIV,wEAKV,IAGHyV,EAHGkS,EACkE5qB,KAAKgD,MAAtEsE,EADDsjB,EACCtjB,QAASs4B,EADVhV,EACUgV,KAAMz/B,EADhByqB,EACgBzqB,OAAQ0/B,EADxBjV,EACwBiV,YAAaC,EADrClV,EACqCkV,WAAY7E,EADjDrQ,EACiDqQ,SAAUh3B,EAD3D2mB,EAC2D3mB,GAIhEyU,EADEknB,EAAKG,QACCpQ,EAAA3nB,EAAAC,cAACs0B,EAAAv0B,EAAD,CAAYE,UAAW03B,EAAKI,OAAS,KAAO14B,EAAQkxB,OACnDoH,EAAKI,OACVJ,EAAKK,OACCtQ,EAAA3nB,EAAAC,cAACi4B,EAAAl4B,EAAD,MAEA2nB,EAAA3nB,EAAAC,cAACk4B,EAAAn4B,EAAD,MAGF2nB,EAAA3nB,EAAAC,cAACm4B,EAAAp4B,EAAD,CAAYE,UAAWZ,EAAQkxB,OAGzC,IAAIrB,EAAQlzB,EAAK,IAAM,EAEvB,OACE0rB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CACEgN,IAAK4qB,EAAK37B,GACV2hB,QAAM,EACNuC,OAAK,EACLC,SAAO,EACP6S,SAAUA,EACVnZ,QAAS+d,EAAc,aAAW1/B,EAClC+H,UAAWivB,EAAO7vB,EAAQ6vB,KAAO7vB,EAAQ4vB,KAEzCvH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,CAAcE,UAAWZ,EAAQixB,UAC9B7f,GAEHiX,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CACEwM,QAASorB,EAAKlW,QACdhV,UACEib,EAAA3nB,EAAAC,cAAA,YACE0nB,EAAA3nB,EAAAC,cAAA,YACG23B,EAAKS,MACD1Q,EAAA3nB,EAAAC,cAAA,WACP0nB,EAAA3nB,EAAAC,cAAA,YACG23B,EAAKU,SAKbT,GACClQ,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8Z,QAASge,GAClBF,EAAKG,QACJpQ,EAAA3nB,EAAAC,cAACs4B,EAAAv4B,EAAD,MAEA2nB,EAAA3nB,EAAAC,cAACu4B,EAAAx4B,EAAD,iBAzDSrC,IAAMkD,WA+ElBC,uBApGA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,GAEPowB,SAAU,CACRjvB,OAAQ,GAEVkvB,KAAM,CACJC,QAAS,IAEXvB,IAAK,CACH7d,gBAAiB,sBAEnB8d,KAAM,CACJ9d,gBAAiB,yBAuFa,CAAE3O,WAAW,GAAhC5B,CAAwC62B,GCvEjDc,cACJ,SAAAA,EAAYz9B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAygC,IACjBx9B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAA2gC,GAAAr9B,KAAApD,KAAMgD,KAOR09B,UAAY,WACVt/B,OAAOmD,OAAOS,MAAM6L,QAAQ6vB,YAC5Bz9B,EAAKW,SAAS,CAAEi8B,aAAa,KAVZ58B,EAanBumB,SAAW,WACTpoB,OAAOmD,OAAOS,MAAM6L,QAAQ2Y,SAAS,KAAM,GAAI,KAd9BvmB,EAiBnB09B,aAAe,WACb19B,EAAKW,SAAS,CAAEi8B,aAAc58B,EAAKU,MAAMk8B,eAhBzC58B,EAAKU,MAAQ,CACXk8B,aAAa,EACb5E,UAAW,GAJIh4B,wEAqBV,IAAA8C,EAAA/F,KAAA4qB,EACqD5qB,KAAKgD,MAAzDsE,EADDsjB,EACCtjB,QAASs5B,EADVhW,EACUgW,SAAUh2B,EADpBggB,EACoBhgB,SAAUo1B,EAD9BpV,EAC8BoV,OAAQF,EADtClV,EACsCkV,WADtCha,EAE2B9lB,KAAK2D,MAA/Bk8B,EAFD/Z,EAEC+Z,YAAa5E,EAFdnV,EAEcmV,SAErB,OACEtL,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ6jB,QACtBwE,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAY2e,QAAQ,YAAYze,UAAWZ,EAAQgY,OACjDqQ,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQ8J,WACvBue,EAAA3nB,EAAAC,cAAA,WAAM2C,EAAS7J,OAAf,cAAkCi/B,EAAlC,YACArQ,EAAA3nB,EAAAC,cAAA,YACE0nB,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,iCACbqQ,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8Z,QAAS9hB,KAAK2gC,cACxBhR,EAAA3nB,EAAAC,cAAC44B,EAAA74B,EAAD,QAGJ2nB,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,uBACbqQ,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8Z,QAAS9hB,KAAK0gC,WACxB/Q,EAAA3nB,EAAAC,cAAC64B,EAAA94B,EAAD,QAGJ2nB,EAAA3nB,EAAAC,cAACkqB,EAAAnqB,EAAD,CAASsX,MAAM,uBACbqQ,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY8Z,QAAS9hB,KAAKwpB,SAAU1N,SAAU+jB,GAC5ClQ,EAAA3nB,EAAAC,cAAC84B,EAAA/4B,EAAD,YAOZ2nB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQslB,UACtB+C,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CACEmgB,OAAK,EACL0O,gBAAc,GAEbjsB,EAASiM,IAAI,SAAC+oB,EAAKzsB,GAAN,OACZwc,EAAA3nB,EAAAC,cAAC+4B,EAAD,CAAc/F,SAAUA,IAAa9nB,EAAGlP,GAAIkP,EAAG6B,IAAK7B,EAAG0sB,YAAaA,EAAaD,KAAMA,EACrFz/B,OAAQ,WACN4F,EAAKnC,SAAS,CAAEq3B,SAAU9nB,IAC1BytB,EAASztB,IAEX2sB,WAAY,kBAAMA,EAAW3sB,kBA/DtBxN,IAAMkD,WAkFdC,uBAhHA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLqY,UAAW,OACXrX,QAAS,OACTC,YAAa,iBAEf+hB,OAAQ,GAER7L,MAAO,GAEPsN,SAAU,CACRnM,UAAW,OACXpX,KAAM,GAER+H,UAAW,CACTjI,QAAS,OACTkW,SAAU,WACV6B,eAAgB,gBAChB2X,YAAa9vB,EAAM8P,QAAQC,KAC3BmoB,cAAe,UAEjB53B,KAAM,CACJA,KAAM,KA0FwB,CAAEqB,WAAW,GAAhC5B,CAAwC23B,4QCnDjDS,eACJ,SAAAA,EAAYl+B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAkhC,IACjBj+B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAohC,GAAA99B,KAAApD,KAAMgD,KAeRigB,SAAW,SAAA3f,GACTL,EAAKW,SAAS,CAAE0jB,SAAUhkB,EAAMiX,iBAjBftX,EAoBnBmf,UAAY,WACVnf,EAAKW,SAAS,CAAE0jB,SAAU,QArBTrkB,EAwBnBk+B,WAAa,WACX//B,OAAOmD,OAAOS,MAAM6L,QAAQswB,aAC5Bl+B,EAAKmf,aA1BYnf,EA6BnBm+B,YAAc,WACZhgC,OAAOmD,OAAOS,MAAM6L,QAAQuwB,cAC5Bn+B,EAAKmf,aA/BYnf,EAkCnBo+B,cAAgB,WACdjgC,OAAOmD,OAAOS,MAAM6L,QAAQwwB,gBAC5Bp+B,EAAKmf,aApCYnf,EAuCnBq+B,UAAY,WAAM,IACR1B,EAAS38B,EAAKD,MAAd48B,KACRx+B,OAAOmD,OAAOS,MAAM6L,QAAQ2Y,SAASoW,EAAKS,KAAM,OAAOT,EAAKlW,QAAS,KAzCpDzmB,EA4CnBs+B,YAAc,WAAM,IACV3B,EAAS38B,EAAKD,MAAd48B,KACRx+B,OAAOmD,OAAOS,MAAM6L,QAAQ2Y,SAAS,GAAI,QAAQoW,EAAKlW,QAASkW,EAAKjW,OA5CpE1mB,EAAKU,MAAQ,CACX2jB,SAAU,MAGZrkB,EAAK0mB,KAAOhkB,IAAMC,YAClB3C,EAAKs2B,SAAW,KAPCt2B,mFAUC,IACV28B,EAAS5/B,KAAKgD,MAAd48B,KACR5/B,KAAKu5B,SAAW,IAAIvzB,KAAShG,KAAK2pB,KAAK1jB,SACvCjG,KAAKu5B,SAASnyB,WAAWw4B,EAAKjW,KAAK,uCAoC5B,IAAAiB,EACmB5qB,KAAKgD,MAAvBsE,EADDsjB,EACCtjB,QAASs4B,EADVhV,EACUgV,KACTtY,EAAatnB,KAAK2D,MAAlB2jB,SAFD/f,EAGoBnG,OAAOmD,OAAOC,SAAjCgD,EAHDD,EAGCC,OAAQC,EAHTF,EAGSE,OAHT+xB,EAI0Bp4B,OAAOmD,OAAOC,SAEzCoD,EAAO,CACXF,WAAY,IAPP8xB,EAIC9xB,WAGyB,eAC/BC,SARK6xB,EAIa7xB,SAIG,MAMvB,OAHA3H,KAAKu5B,UAAYv5B,KAAKu5B,SAAShzB,QAC/BvG,KAAKu5B,UAAYv5B,KAAKu5B,SAASnyB,WAAWw4B,EAAKjW,KAAK,MAGlDgG,EAAA3nB,EAAAC,cAACwxB,EAAAzxB,EAAD,CAAME,UAAWZ,EAAQ2jB,MACvB0E,EAAA3nB,EAAAC,cAACyxB,GAAA1xB,EAAD,CAAYE,UAAWZ,EAAQ6jB,OAC7B7L,MAAOsgB,EAAKlW,QACZoC,UACE6D,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQklB,KACvBmD,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQmlB,MACtBmT,EAAKS,MAER1Q,EAAA3nB,EAAAC,cAAA,QAAMC,UAAWZ,EAAQolB,OACtBkT,EAAKU,SAKd3Q,EAAA3nB,EAAAC,cAAC0xB,GAAA3xB,EAAD,CAAaE,UAAWZ,EAAQqiB,MAC9BgG,EAAA3nB,EAAAC,cAAA,OAAKI,IAAKrI,KAAK2pB,KAAMzhB,UAAWI,IAAWhB,EAAQk6B,KAAMh6B,EAAQC,GAASc,MAAOX,KAEnF+nB,EAAA3nB,EAAAC,cAAC2xB,GAAA5xB,EAAD,CAAaE,UAAWZ,EAAQ8kB,SAC9BuD,EAAA3nB,EAAAC,cAACi0B,GAAAl0B,EAAD,CAAQE,UAAWZ,EAAQ60B,WAAYra,QAAS,kBAAM1gB,OAAOmD,OAAOS,MAAM6L,QAAQjN,SAAS,CAAEmH,SAAU,SACrG4kB,EAAA3nB,EAAAC,cAACm1B,GAAAp1B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACo0B,GAAAr0B,EAAD,OAFJ,SAMA2nB,EAAA3nB,EAAAC,cAACi0B,GAAAl0B,EAAD,CAAQE,UAAWZ,EAAQse,OAAQ9D,QAAS9hB,KAAKshC,WAC/C3R,EAAA3nB,EAAAC,cAACm1B,GAAAp1B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACw5B,GAAAz5B,EAAD,OAFJ,SAMA2nB,EAAA3nB,EAAAC,cAACi0B,GAAAl0B,EAAD,CAAQE,UAAWZ,EAAQse,OAAQ9D,QAAS9hB,KAAKuhC,aAC/C5R,EAAA3nB,EAAAC,cAACm1B,GAAAp1B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACy5B,GAAA15B,EAAD,OAFJ,WAMA2nB,EAAA3nB,EAAAC,cAAC4oB,EAAA7oB,EAAD,CAAY+e,YAAWO,EAAW,gBAAkB,KAAMN,gBAAc,OAAOlF,QAAS9hB,KAAKijB,UAC3F0M,EAAA3nB,EAAAC,cAAC05B,GAAA35B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACs3B,GAAAv3B,EAAD,CAAM/D,GAAG,gBAAgBqjB,SAAUA,EAAUjF,KAAM2D,QAAQsB,GAAWjnB,QAASL,KAAKoiB,WAClFuN,EAAA3nB,EAAAC,cAACw3B,GAAAz3B,EAAD,CAAU8Z,QAAS9hB,KAAKmhC,YAAxB,kBACCvB,EAAKG,QACJpQ,EAAA3nB,EAAAC,cAACw3B,GAAAz3B,EAAD,CAAU8Z,QAAS9hB,KAAKqhC,eAAxB,mBAEA1R,EAAA3nB,EAAAC,cAACw3B,GAAAz3B,EAAD,CAAU8Z,QAAS9hB,KAAKohC,aAAxB,2BA7GSz7B,IAAMkD,WA4HdC,wBAjLA,SAAAC,GAAK,MAAK,CACvBkiB,KAAM,CACJhiB,OAAQ,OACRE,QAAS,OACTC,YAAa,iBAEf+hB,OAAQ,CACNhiB,QAAS,OACTC,YAAa,cAEfojB,IAAK,CACHrjB,QAAS,QAEXsjB,KAAM,CACJpjB,KAAM,GAERqjB,MAAO,CACLC,WAAY,OAEdhD,KAAM,CACJtgB,KAAM,EACNF,QAAS,QAEXijB,QAAS,CACPS,kBAAmB,gBAErBjH,OAAQ,CACNzc,QAAS,SAEXq4B,KAAM,CACJj4B,cAAe,2BACfC,cAAe,SACfC,YAAa,OACbP,MAAO,OACPG,KAAM,EACNK,aAAc,OACdC,aAAc,SACdC,cAAe,WACfC,YAAa,aACbC,QAAS,gBAEXqyB,WAAWr8B,OAAAowB,EAAA,EAAApwB,CAAA,CACTqJ,QAAS,SACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B5D,QAAS,WAqImB,CAAEuB,WAAW,GAAhC5B,CAAwCo4B,IChKjDpyB,eACJ,SAAAA,EAAY9L,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA8O,IACjB7L,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAgP,GAAA1L,KAAApD,KAAMgD,KAUR49B,SAAW,SAAC7H,GAAY,IAAAjT,EACW7iB,EAAKU,MAA9BiH,EADckb,EACdlb,SAAUiY,EADIiD,EACJjD,WACZ+c,EAAOh1B,EAASmuB,GAElB6G,EAAKI,SACPJ,EAAKI,QAAS,EACd/8B,EAAKW,SAAS,CAAEgH,WAAUiY,WAAYA,EAAW,IACjDzhB,OAAOmD,OAAOpD,SAAS,gBAAgBy+B,EAAK37B,GAAG,UAGjD7C,OAAOmD,OAAOuO,QAAQ,WAAY8sB,EAAK37B,KArBtBhB,EAwBnB68B,WAAa,SAAC/G,GAAY,IAChBnuB,EAAa3H,EAAKU,MAAlBiH,SACFg1B,EAAOh1B,EAASmuB,GAEtB6G,EAAKG,SAAWH,EAAKG,QAEjBH,EAAKG,QACP3+B,OAAOmD,OAAOpD,SAAS,eAAey+B,EAAK37B,IAE3C7C,OAAOmD,OAAOpD,SAAS,iBAAiBy+B,EAAK37B,IAG/ChB,EAAKW,SAAS,CAAEgH,cAlChB3H,EAAKU,MAAQ,CACXoH,SAAU,KACV8X,WAAY7f,EAAMg9B,OAASh9B,EAAMg9B,OAAS,EAC1C4B,OAAQ5+B,EAAM4+B,OAAS5+B,EAAM4+B,OAAS,EACtCC,WAAY,CAAC,CAAE59B,GAAI,EAAG0L,KAAM,UAC5B/E,SAAU5H,EAAM4H,SAAW5H,EAAM4H,SAAW,IAP7B3H,6EAuCL4f,GACZ7iB,KAAK4D,SAAS,CAAEif,eAChBzhB,OAAOmD,OAAOS,MAAMC,QAAQ0d,cAAcE,yCAG9B,IAAAiI,EACmB9qB,KAAK2D,MAA5BiH,EADIkgB,EACJlgB,SAAUG,EADN+f,EACM/f,SAEdA,EAASg1B,UAIbh1B,EAASg1B,SAAU,EACnBn1B,EAASG,EAASiK,KAAK+qB,SAAU,EACjC3+B,OAAOmD,OAAOpD,SAAS,eAAe4J,EAAS9G,IAC/CjE,KAAK4D,SAAS,CAAEgH,WAAUG,sDAGZ,IAAAurB,EACiBt2B,KAAK2D,MAA5BiH,EADM0rB,EACN1rB,SAAUG,EADJurB,EACIvrB,SAEbA,EAASg1B,UAIdh1B,EAASg1B,SAAU,EACnBn1B,EAASG,EAASiK,KAAK+qB,SAAU,EACjC3+B,OAAOmD,OAAOpD,SAAS,iBAAiB4J,EAAS9G,IACjDjE,KAAK4D,SAAS,CAAEgH,WAAUG,mDAGf,IAAA+2B,EACgC9hC,KAAK2D,MAAxCiH,EADGk3B,EACHl3B,SAAUG,EADP+2B,EACO/2B,SAAU8X,EADjBif,EACiBjf,WAExB9X,EAASi1B,SAIbj1B,EAASi1B,QAAS,EAClBp1B,EAASG,EAASiK,KAAKgrB,QAAS,EAChC5+B,OAAOmD,OAAOpD,SAAS,gBAAgB4J,EAAS9G,GAAG,WACnDjE,KAAK4D,SAAS,CAAEgH,WAAUG,WAAU8X,WAAYA,EAAW,yCAI3D,GAAIzhB,OAAOshB,QAAQ,sCAAuC,KAAAqf,EACzB/hC,KAAK2D,MAA5BiH,EADgDm3B,EAChDn3B,SAAUG,EADsCg3B,EACtCh3B,SAEdA,GAAYH,EAASG,EAASiK,KAAK+qB,SAErC//B,KAAK4D,SAAS,CAAEmH,SAAU,OAE5B3J,OAAOmD,OAAOpD,SAAS,eACvBC,OAAOmD,OAAOuO,QAAQ,8CAIjBgX,EAAIJ,EAASC,GAChBvoB,OAAOmD,OAAOS,MAAM8L,UACtB1P,OAAOmD,OAAO4T,WAAW,YACrB/W,OAAOshB,QAAQ,yCACjBthB,OAAOmD,OAAOS,MAAM8L,SAASkxB,UAAUlY,EAAIJ,EAASC,KAGtDvoB,OAAOmD,OAAOmW,SAAS,WAAY,CAAEhC,KAAM,SAC3CtX,OAAOmD,OAAOS,MAAM8L,SAASkxB,UAAUlY,EAAIJ,EAASC,gDAKtDvoB,OAAOmD,OAAOS,MAAM6L,QAAU7Q,oDAI9BoB,OAAOmD,OAAOS,MAAM6L,QAAU,4CAGjB+wB,EAAQh3B,EAAUiY,GAC/B7iB,KAAK4D,SAAS,CAAEg+B,SAAQh3B,WAAUiY,wDAGnBgf,GACf7hC,KAAK4D,SAAS,CAAEi+B,oDAGL92B,GACU/K,KAAK2D,MAAlBiH,SACCwP,QAAQ,SAACwlB,EAAKzsB,GACjBysB,EAAK37B,KAAO8G,EAAS9G,KACvB8G,EAASiK,IAAM7B,KAGnBnT,KAAK4D,SAAS,CAAEmH,8CAGT,IACCzD,EAAYtH,KAAKgD,MAAjBsE,QADD26B,EAEoCjiC,KAAK2D,MAAxCiH,EAFDq3B,EAECr3B,SAAUG,EAFXk3B,EAEWl3B,SAAU8X,EAFrBof,EAEqBpf,WAE5B,OACE8M,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQmlB,MACtBkD,EAAA3nB,EAAAC,cAAA,QAAMC,UAAW6C,EAAWzD,EAAQm3B,YAAcn3B,EAAQo3B,YACtD9zB,GACA+kB,EAAA3nB,EAAAC,cAACi6B,EAAD,CAAUt3B,SAAUA,EAAUo1B,OAAQnd,EAAY+d,SAAU5gC,KAAK4gC,SAAUd,WAAY9/B,KAAK8/B,eAIlGnQ,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQolB,OACpB3hB,GACA4kB,EAAA3nB,EAAAC,cAACk6B,GAAD,CAAUvC,KAAM70B,aAtJNpF,IAAMkD,WAuKbC,yBAzMA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVC,OAAQ,OACRC,MAAO,OACPC,QAAS,OACTC,YAAa,cAEfqjB,KAAM,CACJzjB,SAAU,WACVwX,UAAW,OACXC,UAAW,OACX2P,UAAW,UAEb1D,MAAO,CACLrjB,KAAM,EACNmX,UAAW,OACXxX,SAAU,YAEZy1B,YAAY3+B,OAAAowB,EAAA,EAAApwB,CAAA,CACVqJ,QAAS,QACRJ,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5B5D,QAAS,SAGbu1B,WAAY,CACVv1B,QAAS,UA+KqB,CAAEuB,WAAW,GAAhC5B,CAAwCgG,uYC/KjDszB,cACJ,SAAAA,EAAYp/B,GAAO,IAAAC,EAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAAoiC,IACjBn/B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAAsiC,GAAAh/B,KAAApD,KAAMgD,KA4BRq/B,KAAO,SAAA/+B,GACLL,EAAKW,SAAS,CAAEujB,OAAQ7jB,EAAMiX,iBA9BbtX,EAiCnBgd,KAAO,WACLhd,EAAKW,SAAS,CAAEujB,OAAQ,QAlCPlkB,EAqCnBq/B,OAAS,SAACvoB,GAAD,OAAW,SAACzW,GACnBL,EAAKgd,OACLhd,EAAKD,MAAMoC,SAAS2U,KArCpB9W,EAAKU,MAAQ,CACXwjB,OAAQ,MAGV,IAAIob,EAASv/B,EAAMiH,WAAa,GAAK,GACrChH,EAAKu/B,KAAO,GACZ,IACIrvB,EAAG8C,EADHrJ,EAAS,GAGb,IAAKuG,EAAI,EAAGA,EAAI,EAAGA,IACjBvG,EAAO4N,KAAK,SAAWrH,EAAEovB,IAG3B,IAAKpvB,EAAI,EAAGA,EAAI,EAAGA,IACjBvG,EAAO4N,KAAK,SAAWrH,EAAEovB,GAAU,MAIrC,IAFAt/B,EAAKu/B,KAAKhoB,KAAK5N,GAEVuG,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAEvB,IADAvG,EAAS,GACJqJ,EAAI,EAAGA,EAAI,GAAIA,IAClBrJ,EAAO4N,KAAK,SAAW,EAAE+nB,GAAU,OAAW,GAAFpvB,EAAK8C,IAEnDhT,EAAKu/B,KAAKhoB,KAAK5N,GAzBA,OAAA3J,qKAgDV,IAIHw/B,EAJG18B,EAAA/F,KAAA4qB,EACgC5qB,KAAKgD,MAApCsE,EADDsjB,EACCtjB,QAAS2C,EADV2gB,EACU3gB,WAAYvB,EADtBkiB,EACsBliB,MACrBye,EAAWnnB,KAAK2D,MAAhBwjB,OAOR,OAJIld,IACFw4B,EAAQn7B,EAAQm7B,OAIhB9S,EAAA3nB,EAAAC,cAAA,WACE0nB,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQgf,gBAAc,OAAOD,YAAWI,EAAS,cAAgB,KAAMrF,QAAS9hB,KAAKqiC,MACnF1S,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWI,IAAWlH,OAAOmD,OAAOC,SAASgD,OAAQpG,OAAOmD,OAAOC,SAASiD,SAC9EiB,IAILinB,EAAA3nB,EAAAC,cAACy3B,EAAA13B,EAAD,CAASE,UAAWZ,EAAQo7B,QAASz+B,GAAG,cAAcqjB,SAAUH,EAAQ9E,KAAM2D,QAAQmB,GAAS9mB,QAASL,KAAKigB,MAC1GjgB,KAAKwiC,KAAK3rB,IAAI,SAACjK,EAAQuG,GAAT,OACbwc,EAAA3nB,EAAAC,cAAA,OAAK+M,IAAK,IAAK7B,GACZvG,EAAOiK,IAAI,SAACkD,EAAO9D,GAAR,OACV0Z,EAAA3nB,EAAAC,cAAA,QAAM+M,IAAO,GAAF7B,EAAK8C,EAAG/N,UAAWI,IAAWhB,EAAQq7B,OAAQF,EAAO1oB,GAAQ+H,QAAS/b,EAAKu8B,OAAOvoB,IAC1F,wBAvEOpU,IAAMkD,WA0FjBC,uBAhHA,SAAAC,GAAK,MAAK,CACvB25B,QAAS,CACP9V,SAAU,UAEZ+V,OAAQ,CACNC,OAAQ,UACRt5B,OAAQ,EACRc,OAAQ,EACRN,QAAS,EACTb,OAAQ,MACRC,MAAO,MACPonB,WAAY,QAEdmS,MAAO,CACL1oB,MAAO,iBAkGuB,CAAErP,WAAW,GAAhC5B,CAAwCs5B,udCNjDS,eACJ,SAAAA,EAAY7/B,GAAO,IAAAC,EAAA,OAAAnD,OAAAkvB,EAAA,EAAAlvB,CAAAE,KAAA6iC,IACjB5/B,EAAAnD,OAAAmvB,EAAA,EAAAnvB,CAAAE,KAAAF,OAAAovB,EAAA,EAAApvB,CAAA+iC,GAAAz/B,KAAApD,KAAMgD,KASR03B,aAAe,SAAA/qB,GAAI,OAAI,SAAArM,GACrBlC,OAAOmD,OAAO8e,cAAc1T,EAAMrM,EAAME,OAAOm3B,SAC/C13B,EAAKW,SAAL9D,OAAAowB,EAAA,EAAApwB,CAAA,GAAiB6P,EAAOvO,OAAOmD,OAAOC,SAASmL,KAC/CvO,OAAOmD,OAAO+e,eACdliB,OAAOmD,OAAOS,MAAMyL,OAAOhL,gBAdVxC,EAiBnB6/B,YAAc,SAAAnzB,GAAI,OAAI,SAAArM,GACpBlC,OAAOmD,OAAO8e,cAAc1T,EAAMrM,EAAME,OAAOC,OAC/CR,EAAKW,SAAL9D,OAAAowB,EAAA,EAAApwB,CAAA,GAAiB6P,EAAOvO,OAAOmD,OAAOC,SAASmL,KAC/CvO,OAAOmD,OAAO+e,eACdliB,OAAOmD,OAAOS,MAAMyL,OAAOhL,gBArBVxC,EAwBnB8/B,YAAc,SAAApzB,GAAI,OAAI,SAAAoK,GACpB3Y,OAAOmD,OAAO8e,cAAc1T,EAAMoK,GAClC9W,EAAKW,SAAL9D,OAAAowB,EAAA,EAAApwB,CAAA,GAAiB6P,EAAOvO,OAAOmD,OAAOC,SAASmL,KAC/CvO,OAAOmD,OAAO+e,eACdliB,OAAOmD,OAAOS,MAAMyL,OAAOhL,gBA5BVxC,EA+BnB+/B,aAAe,SAAAn+B,GAAK,OAAI,SAACvB,EAAO2/B,GAC9BhgC,EAAKW,SAAS,CACZq/B,WAAUA,GAAWp+B,EACrBq+B,WAAW,MAlCIjgC,EAsCnBmN,aAAe,WACbnN,EAAKW,SAAL9D,OAAAqjC,EAAA,EAAArjC,CAAA,GAAmBsB,OAAOmD,OAAOC,YAvChBvB,EA0CnBmgC,cAAgB,WACThiC,OAAOshB,QAAQ,0DAIpBthB,OAAOmD,OAAOC,SAAW1E,OAAOgV,OAAO,GAAI1T,OAAOmD,OAAO0I,iBACzDhK,EAAKmN,eACLhP,OAAOmD,OAAO+e,eACdliB,OAAOmD,OAAOS,MAAMyL,OAAOhL,gBAhD3BxC,EAAKU,MAAQ,CACXs/B,UAAU,EACVC,WAAW,GAGbjgC,EAAKU,MAAQ7D,OAAOgV,OAAO7R,EAAKU,MAAOvC,OAAOmD,OAAOC,UAPpCvB,qKA2DV,IAAA8C,EAAA/F,KAAA4qB,EAC0B5qB,KAAKgD,MAA9BsE,EADDsjB,EACCtjB,QAASgb,EADVsI,EACUtI,YADVwD,EAMqE9lB,KAAK2D,MAJzEs/B,EAFDnd,EAECmd,SAAUC,EAFXpd,EAEWod,UAAWn1B,EAFtB+X,EAEsB/X,YAAaX,EAFnC0Y,EAEmC1Y,gBAAiBC,EAFpDyY,EAEoDzY,aAAc7F,EAFlEse,EAEkEte,OAAQC,EAF1Eqe,EAE0Ere,OAAQ0F,EAFlF2Y,EAEkF3Y,UACvFD,EAHK4Y,EAGL5Y,gBAAiBc,EAHZ8X,EAGY9X,aAAcE,EAH1B4X,EAG0B5X,cAAeI,EAHzCwX,EAGyCxX,WAAYH,EAHrD2X,EAGqD3X,UAAWL,EAHhEgY,EAGgEhY,oBAAqBU,EAHrFsX,EAGqFtX,cAC1FD,EAJKuX,EAILvX,YAAa9J,EAJRqhB,EAIQrhB,iBAAkBkK,EAJ1BmX,EAI0BnX,kBAAmBC,EAJ7CkX,EAI6ClX,oBAAqBX,EAJlE6X,EAIkE7X,kBAAmBQ,EAJrFqX,EAIqFrX,aAC1FnB,EALKwY,EAKLxY,YAAaC,EALRuY,EAKQvY,cAAeE,EALvBqY,EAKuBrY,kBAAmBC,EAL1CoY,EAK0CpY,mBAAoBhG,EAL9Doe,EAK8Dpe,WAAYC,EAL1Eme,EAK0Ene,SAAU+G,EALpFoX,EAKoFpX,WACzFf,EANKmY,EAMLnY,kBAAmBC,EANdkY,EAMclY,iBAAkBC,GANhCiY,EAMgCjY,mBAAoBL,GANpDsY,EAMoDtY,aACrD61B,GAAWjiC,OAAOmD,OAAOuD,OAE3Bw7B,GACF3T,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,2BAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACs7B,EAAAv7B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,yBACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAAS5sB,EAAatK,MAAM,cAAc2B,SAAUpF,KAAK06B,aAAa,mBAGlF/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACs7B,EAAAv7B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,gCACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAAS3sB,EAAcvK,MAAM,eAAe2B,SAAUpF,KAAK06B,aAAa,qBAMpF8I,GACF7T,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,2BAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACw7B,GAAAz7B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,iBAAiBoT,UAAW7N,EAAmBxK,MAAOyK,EAAe9I,SAAUpF,KAAK8iC,YAAY,oBAEnHnT,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACy7B,GAAA17B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,cAAcoT,UAAW7N,EAAmBxK,MAAO6K,EAAYlJ,SAAUpF,KAAK8iC,YAAY,cAAeluB,KAAK,YAEjI+a,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC07B,GAAA37B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,iCACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASxsB,EAAW2N,UAAW7N,EAAmBxK,MAAM,YAAY2B,SAAUpF,KAAK06B,aAAa,kBAM5G5kB,GACF6Z,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,wBAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC27B,GAAA57B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,eAAejF,MAAO8K,EAAanJ,SAAUpF,KAAK8iC,YAAY,eAAgBluB,KAAK,SAASgX,WAAW,uCAG1H+D,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC27B,GAAA57B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,qBAAqBjF,MAAOgB,EAAkBW,SAAUpF,KAAK8iC,YAAY,oBAAqBluB,KAAK,SAASgX,WAAW,qCAK1I9lB,GACF6pB,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,wBAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC27B,GAAA57B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,sBAAsBjF,MAAOiL,EAAYtJ,SAAUpF,KAAK8iC,YAAY,cAAeluB,KAAK,SAASgX,WAAW,iCAG/H+D,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC47B,GAAA77B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,kCACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASnsB,EAAe/K,MAAM,gBAAgB2B,SAAUpF,KAAK06B,aAAa,qBAItF/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWtN,EAAetG,UAAWZ,EAAQw8B,WAC3DnU,EAAA3nB,EAAAC,cAACm1B,EAAAp1B,EAAD,CAAM+R,MAAM,UACV4V,EAAA3nB,EAAAC,cAAC87B,GAAA/7B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,aACA2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAA0B,UAAjBlsB,EACfsL,MAAM,UAAU+B,UAAWtN,EAC3B/K,MAAwB,UAAjBgL,EAA2B,OAAS,QAC3CrJ,SAAUpF,KAAK8iC,YAAY,kBAE7BnT,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,cACA2nB,EAAA3nB,EAAAC,cAACm1B,EAAAp1B,EAAD,CAAM+R,MAAM,UACV4V,EAAA3nB,EAAAC,cAAC+7B,GAAAh8B,EAAD,SAMJmB,GACFwmB,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,0BAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACg8B,EAAAj8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,iBAAiBjF,MAAO0J,EAAW/H,SAAUpF,KAAK8iC,YAAY,aAAcluB,KAAK,YAGpG+a,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACi8B,GAAAl8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,OAAOjF,MAAOiE,EAAYtC,SAAUpF,KAAK8iC,YAAY,iBAGxEnT,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACk8B,GAAAn8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,OAAOjF,MAAOkE,EAAUvC,SAAUpF,KAAK8iC,YAAY,YAAaluB,KAAK,aAKxFmF,GACF4V,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,wBAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACm8B,EAAAp8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACo8B,EAAD,CAAa37B,MAAM,aAAajF,MAAOgE,EAAQrC,SAAUpF,KAAK+iC,YAAY,UAAW94B,YAAU,KAGjG0lB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACm8B,EAAAp8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACo8B,EAAD,CAAa37B,MAAM,aAAajF,MAAO+D,EAAQpC,SAAUpF,KAAK+iC,YAAY,aAG5EpT,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACm8B,EAAAp8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,oCACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASztB,EAAiBzJ,MAAM,kBAAkB2B,SAAUpF,KAAK06B,aAAa,wBAM1F1pB,GACF2e,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,uBAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACq8B,GAAAt8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,4BACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASvtB,EAAiB3J,MAAM,kBAAkB2B,SAAUpF,KAAK06B,aAAa,uBAI1F/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACs8B,GAAAv8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACyqB,EAAA1qB,EAAD,CAAWU,MAAM,WAAWjF,MAAO4J,EAAcjI,SAAUpF,KAAK8iC,YAAY,gBAAiBlX,WAAW,8BAK1G4Y,GACF7U,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAMC,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,yBAC3E2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,GACbwH,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACw8B,GAAAz8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,kBACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAASrtB,EAAa7J,MAAM,cAAc2B,SAAUpF,KAAK06B,aAAa,mBAIlF/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,GACzBqiB,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAACy8B,GAAA18B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,6BACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWxO,EAAaqtB,QAASltB,EAAmBhK,MAAM,oBAAoB2B,SAAUpF,KAAK06B,aAAa,yBAItH/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,EAAapF,UAAWZ,EAAQw8B,WACzDnU,EAAA3nB,EAAAC,cAACm1B,EAAAp1B,EAAD,CAAM+R,MAAM,UACV4V,EAAA3nB,EAAAC,cAAC87B,GAAA/7B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,aACA2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAA2B,UAAlBptB,EACfwM,MAAM,UAAU+B,UAAWxO,EAC3B7J,MAAyB,UAAlB8J,EAA4B,OAAS,QAC5CnI,SAAUpF,KAAK8iC,YAAY,mBAE7BnT,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,cACA2nB,EAAA3nB,EAAAC,cAACm1B,EAAAp1B,EAAD,CAAM+R,MAAM,UACV4V,EAAA3nB,EAAAC,cAAC+7B,GAAAh8B,EAAD,QAIJ2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,GACzBqiB,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC08B,GAAA38B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,6BACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWxO,EAAaqtB,QAASntB,GAAc/J,MAAM,eAAe2B,SAAUpF,KAAK06B,aAAa,qBAO5GkK,GACFjV,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAM9a,UAAWxO,EAAaupB,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,yBACnG2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,GACzBqiB,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC48B,GAAA78B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,kBACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWxO,EAAaqtB,QAASjtB,EAAoBjK,MAAM,qBAAqB2B,SAAUpF,KAAK06B,aAAa,0BAIxH/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,GACzBqiB,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC68B,GAAA98B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,iBACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWxO,EAAaqtB,QAAShtB,EAAmBlK,MAAM,oBAAoB2B,SAAUpF,KAAK06B,aAAa,yBAItH/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,GACzBqiB,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC88B,GAAA/8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,gBACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ2yB,QAAS/sB,EAAkBkO,UAAWxO,EAAa7J,MAAM,mBAAmB2B,SAAUpF,KAAK06B,aAAa,wBAIpH/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,IAAgBM,GACzC+hB,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC88B,GAAA/8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,kBACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWxO,IAAgBM,EAAkB+sB,QAAS9sB,GAAoBpK,MAAM,qBAAqB2B,SAAUpF,KAAK06B,aAAa,0BAI7I/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWxO,IAAgBM,IAAqBC,IAC9D8hB,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC88B,GAAA/8B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,8BACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWxO,IAAgBM,IAAqBC,GAAoB8sB,QAAS7sB,EAAqBrK,MAAM,sBAAsB2B,SAAUpF,KAAK06B,aAAa,4BAMtK5yB,GACF6nB,EAAA3nB,EAAAC,cAAC0uB,EAAA3uB,EAAD,CAAME,UAAWZ,EAAQsvB,KAAM9a,UAAWunB,GAAUxM,gBAAc,EAAC1O,OAAK,EAAC2D,WAAYuX,IAAa1T,EAAA3nB,EAAAC,cAAC6uB,EAAA9uB,EAAD,qBAChG2nB,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWunB,IACzB1T,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC+8B,GAAAh9B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,yCACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWunB,GAAU1I,QAAShsB,EAAmBlL,MAAM,oBAAoB2B,SAAUpF,KAAK06B,aAAa,yBAInH/K,EAAA3nB,EAAAC,cAAC+uB,EAAAhvB,EAAD,CAAUmgB,OAAK,EAACrM,UAAWunB,IACzB1T,EAAA3nB,EAAAC,cAAC62B,EAAA92B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC+8B,GAAAh9B,EAAD,OAEF2nB,EAAA3nB,EAAAC,cAACmvB,EAAApvB,EAAD,CAAcE,UAAWZ,EAAQu0B,WAAYrnB,QAAQ,8CACrDmb,EAAA3nB,EAAAC,cAACg3B,EAAAj3B,EAAD,KACE2nB,EAAA3nB,EAAAC,cAAC6zB,EAAA9zB,EAAD,CAAQ8T,UAAWunB,GAAU1I,QAAS/rB,EAAqBnL,MAAM,sBAAsB2B,SAAUpF,KAAK06B,aAAa,4BAM3H,OACE/K,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQa,OACtBwnB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQmlB,MACtBkD,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ8R,QAAS6rB,SAAU,EAAGC,KAAK,UAChD7B,IACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,UAAU,EAAO79B,SAAU,kBAAMW,EAAKnC,SAAS,CAAEs/B,WAAYn9B,EAAKpC,MAAMu/B,cAChHvT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACs9B,GAAAv9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAActC,EAAY,0BAA4B,2BAK1FG,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,cAAbD,EAA0B79B,SAAUpF,KAAKgjC,aAAa,cACrHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,sBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7C/B,KAGD3T,EAAA3nB,EAAAC,cAAA,YAAOq7B,IAEZD,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,eAAbD,EAA2B79B,SAAUpF,KAAKgjC,aAAa,eACtHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,sBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7C7B,KAGD7T,EAAA3nB,EAAAC,cAAA,YAAOu7B,IAEZH,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,YAAbD,EAAwB79B,SAAUpF,KAAKgjC,aAAa,YACnHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,mBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7CvvB,KAGD6Z,EAAA3nB,EAAAC,cAAA,YAAO6N,IAEZutB,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,UAAbD,EAAsB79B,SAAUpF,KAAKgjC,aAAa,UACjHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,mBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7Cv/B,KAGD6pB,EAAA3nB,EAAAC,cAAA,YAAOnC,IAEZu9B,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,YAAbD,EAAwB79B,SAAUpF,KAAKgjC,aAAa,YACnHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,mBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7Cl8B,KAGDwmB,EAAA3nB,EAAAC,cAAA,YAAOkB,IAEZk6B,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,UAAbD,EAAsB79B,SAAUpF,KAAKgjC,aAAa,UACjHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,mBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7CtrB,KAGD4V,EAAA3nB,EAAAC,cAAA,YAAO8R,IAEZspB,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,WAAbD,EAAuB79B,SAAUpF,KAAKgjC,aAAa,WAClHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,kBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7Cr0B,KAGD2e,EAAA3nB,EAAAC,cAAA,YAAO+I,IAEZqyB,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,mBAAbD,EAA+B79B,SAAUpF,KAAKgjC,aAAa,mBAC1HrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,oBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7Cb,KAGD7U,EAAA3nB,EAAAC,cAAA,YAAOu8B,IAEZnB,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,mBAAbD,EAA+B79B,SAAUpF,KAAKgjC,aAAa,mBAC1HrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,oBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7CT,KAGDjV,EAAA3nB,EAAAC,cAAA,YAAO28B,IAEZvB,GACC1T,EAAA3nB,EAAAC,cAACk9B,EAAAn9B,EAAD,CAAgBE,UAAWZ,EAAQzC,MAAOo+B,SAAUC,GAA0B,WAAbD,EAAuB79B,SAAUpF,KAAKgjC,aAAa,WAClHrT,EAAA3nB,EAAAC,cAACm9B,EAAAp9B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,WAAaC,WAAY3V,EAAA3nB,EAAAC,cAACw9B,GAAAz9B,EAAD,OACvE2nB,EAAA3nB,EAAAC,cAAC8nB,EAAA/nB,EAAD,CAAYE,UAAWZ,EAAQk+B,aAA/B,gBAEF7V,EAAA3nB,EAAAC,cAACy9B,EAAA19B,EAAD,CAAuBV,QAAS,CAAEqB,KAAMrB,EAAQ+9B,YAC7Cv9B,KAGA6nB,EAAA3nB,EAAAC,cAAA,YAAOH,MAGlB6nB,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQolB,OACtBiD,EAAA3nB,EAAAC,cAAA,OAAKC,UAAWZ,EAAQ+H,SACtBsgB,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQE,UAAWZ,EAAQq+B,MAAO7jB,QAAS9hB,KAAKojC,eAAhD,SAGAzT,EAAA3nB,EAAAC,cAACi0B,EAAAl0B,EAAD,CAAQE,UAAWZ,EAAQ1F,MAAOkgB,QAASQ,GAA3C,mBAxfW3c,IAAMkD,WAwgBdC,yBA9kBA,SAAAC,GAAK,MAAK,CACvBZ,MAAO,CACLa,SAAU,WACVC,OAAQ,OACRC,MAAO,OACPC,QAAS,OACTy8B,cAAe,MACf1kB,eAAgB,WAChBwW,WAAY,WAEdjL,KAAM,CACJpjB,KAAM,EACNoX,UAAW,QAEbiM,MAAO,CACLvjB,QAAS,OACTkW,SAAU,iBAEZjG,QAAQtZ,OAAAowB,EAAA,EAAApwB,CAAA,CACNqJ,QAAS,OACTkW,SAAU,YACTtW,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BmU,eAAgB,iBAGpB0V,KAAM,CACJiP,SAAU,EACVC,UAAW,QAEbjK,WAAY,CACVhD,YAAa,EACbrZ,YAAa,EAAEzW,EAAM8P,QAAQC,MAE/BzJ,QAAQvP,OAAAowB,EAAA,EAAApwB,CAAA,CACN4sB,MAAO,EACPtkB,IAAK,EACLI,OAAQ,EACRa,KAAM,EACNF,QAAS,OACTkW,SAAU,yBACTtW,EAAMyB,YAAYuC,GAAG,MAAQ,CAC5BsS,SAAU,eAGdsmB,MAAO,CACLt8B,KAAM,GAERzH,MAAO,CACLyH,KAAM,GAERy6B,UAAW,CACT36B,QAAS,OACT+X,eAAgB,gBAChBwW,WAAY,UAEd2N,UAAW,CACTv7B,QAAS,GAEX07B,YAAa,CACX7Y,WAAY5jB,EAAM8P,QAAQC,MAE5BjU,MAAO,CACLqE,MAAO,UAghBuB,CAAEwB,WAAW,GAAhC5B,CAAwC+5B,4ECjoBvDkD,EAAAC,EAAAC,GAAA,IAGI1hC,EAAS,IAHbwhC,EAAA,KAGiBz5B,GAGjB/H,EAAO2hC,WAAW,cAElB3hC,EAAO4hC,eAAe,gECPhBngC,aA2HJ,SAAAA,EAAY2C,GAAM,IAAA1F,EAAAjD,KAAAF,OAAAC,EAAA,EAAAD,CAAAE,KAAAgG,GAAAhG,KAqlBlBgE,YAAc,SAACgR,GACb,GAAI5T,OAAO6T,aAAaC,eAAeF,GAAM,CAC3C,IAAMoxB,EAAOhlC,OAAO6T,aAAaD,GACjC,GAAa,KAAToxB,EACF,IACEnjC,EAAK0F,KAAKmR,UAAYssB,EAAOnjC,EAAK0F,KAAKmR,UACvC,MAAOzX,GACPC,QAAQC,IAAI,6BAA8BF,MA5lBhCrC,KAkmBlBoE,YAAc,SAAC4Q,EAAKqxB,GAClB,IAAMC,EAAQllC,OAAO6T,aAErB,GAAIoxB,EAAO,EAAG,CACZ,IAAME,EAAQtjC,EAAK0F,KAAK69B,WACpB1nB,EAAQynB,EAAMxlC,OAAS,EAE3B,GAAI+d,EAAQ,EAAG,OAIf,IAFA,IAAI2nB,EAAQ,EAEHtzB,EAAI2L,EAAO3L,GAAK,GAAKszB,EAAQJ,EAAMlzB,IAAK,CAC/C,IAAI3N,EAAQ+gC,EAAMpzB,GAAGwK,YAAYnK,MAAM,MAAMzS,OAEzCwlC,EAAMpzB,GAAGwK,YAAYtC,SAAS,QAChC7V,GAAgB,GAGdA,EAAQ,IACVihC,GAAgBjhC,EAChBsZ,EAAQ3L,GASZ,IAAIuzB,EAAQx0B,SAASy0B,cACrBD,EAAME,eAAeL,EAAMznB,IAC3B4nB,EAAMG,YAAYN,EAAMA,EAAMxlC,OAAO,IACrC,IAAIob,EAAWuqB,EAAMI,gBACjBC,EAAM70B,SAASjK,cAAc,OACjC8+B,EAAIv0B,YAAY2J,GAEhBmqB,EAAMtxB,GAAO+xB,EAAIjtB,sBAEVwsB,EAAMtxB,IAvoBfhV,KAAK2I,KAAOA,EACZ3I,KAAKoR,UAAY,KAEjBpR,KAAK4V,KAAO,GAEZ5V,KAAKyV,iBAGLzV,KAAKuX,UAAY,KAEjBvX,KAAKuG,sEA/Ga8mB,GAClB,IAAgB/P,EAAZrJ,EAAQ,GACRkC,EAAQ,mLAIZ,IADAA,EAAM6wB,UAAY,EACV1pB,EAASnH,EAAM8wB,KAAK5Z,IAAQ,CAClC,IAAI6Z,EAAO,GAEXA,EAAKpoB,MAAQxB,EAAO6pB,MAAQ7pB,EAAO,GAAGvc,OACtCmmC,EAAKE,QAAU,GACX9pB,EAAO,IACTA,EAASA,EAAO,GAChB4pB,EAAKrnC,IAAMyd,GACFA,EAAO,IAChBA,EAASA,EAAO,GAChB4pB,EAAKrnC,IAAM,UAAYyd,GACdA,EAAO,KAChBA,EAASA,EAAO,GAChB4pB,EAAKrnC,IAAM,GACXqnC,EAAKE,QAAU,QAAU9pB,EACzB4pB,EAAKh/B,UAAY,aAGnBg/B,EAAKG,IAAMH,EAAKpoB,MAAQxB,EAAOvc,OAE/BkT,EAAMA,EAAMlT,QAAUmmC,EAGxB,OAAOjzB,qCAMShT,EAAMqmC,GAEtB,GAAKA,EAAQvmC,OAAb,CAIA,IAAIwmC,EAAIC,EACJna,EAAO,GAEX,IAAKka,EAAK,EAAGC,EAAOF,EAAQvmC,OAAQwmC,EAAKC,IAAQD,EAC/Cla,GAAQia,EAAQC,GAAIE,UAItB,IAAIxzB,EAAQjO,EAAS0hC,aAAara,GAClC,GAAKpZ,EAAMlT,OAAX,CAKA,IAAI4mC,EAAU,EAAGC,EAAY,EAAGC,EAAUP,EAAQ,GAAGG,UAAU1mC,OAC/D,IAAKwmC,EAAK,EAAGC,EAAOvzB,EAAMlT,OAAQwmC,EAAKC,IAAQD,EAAI,CAGjD,IAFA,IAAsBO,EAAUC,EAAWC,EAAQC,EAA/Cf,EAAOjzB,EAAMszB,GAEVM,GAAWX,EAAKpoB,OACrB8oB,EAAYC,EACZA,GAAWP,IAAUK,GAASF,UAAU1mC,OAM1C,IAHA+mC,EAAWZ,EAAKpoB,MAAQ8oB,EACxBG,EAAYT,EAAQK,GAEbE,EAAUX,EAAKG,KACpBO,EAAYC,EACZA,GAAWP,IAAUK,GAASF,UAAU1mC,OAS1C,GANAinC,EAASd,EAAKG,IAAMO,EAMhBG,KALJE,EAAUX,EAAQK,IAKlB,CAKAL,EAAQK,GAAWM,EAAQC,UAAUF,GACrCJ,GAAaI,EAEb,IAAIG,EAAaJ,EAAUG,UAAUJ,GACjC3gB,EAASjV,SAASjK,cAAc,KACpCkgC,EAAW/zB,WAAWg0B,aAAajhB,EAAQghB,GAE3ChhB,EAAO3jB,OAAS,SACC,KAAb0jC,EAAKrnC,KAA+B,KAAjBqnC,EAAKE,SAC1BjgB,EAAOxT,aAAa,UAAW,mBAAmBuzB,EAAKE,QAAQ,OAC/DjgB,EAAO5P,UAAYtW,EAAKsW,WAExB4P,EAAOkhB,KAAOnB,EAAKrnC,IAErBsnB,EAAO3U,YAAY21B,QAlBjB/mC,OAAOkB,SAAWlB,OAAOkB,QAAQgmC,KAAK,OAAQpB,0CApGzB,OAAO,mCACV,OAAO,qCACL,OAAO,qCACP,OAAO,sCAEN,OAAO,sCACP,OAAO,yCACJ,OAAO,qCACX,OAAO,uCACL,OAAO,wCACN,OAAO,yCACP,OAAO,sCAEV,OAAO,sCACP,OAAO,yCAEJ,MAAO,CAAC,OAAQ,OAAQ,KAAM,MAAO,UAAW,QAAS,KAAM,MACpF,QAAS,SAAU,OAAQ,WAAY,OAAQ,QAAS,SAAU,QAAS,0DAuMjF,OATKlnC,KAAKuoC,YACRvoC,KAAKuoC,UAAY,CACfC,GAAIxiC,EAASyiC,WACbC,GAAI1iC,EAAS2iC,WACbC,OAAO,EACPC,OAAO,IAIJ7oC,KAAKuoC,4CAKJO,GACR,OAAQA,EAAKC,WAAWD,EAAK/nC,OAAS,IACtC,KAAK,IAIH,IAHA,IAEI0C,EAAOE,EAFPqlC,EAAQF,EAAKlmC,UAAU,EAAGkmC,EAAK/nC,OAAS,GAAGyS,MAAM,KAG5C+zB,EAAK,OAA2BvmC,KAAvByC,EAAQulC,EAAMzB,MAAsBA,EAAI,CAWxD,GARE9jC,EAFmB,IAAjBA,EAAM1C,OAEAiF,EAASijC,YAETxO,SAASh3B,EAAO,KAG1BE,EAAQ3D,KAAKkpC,WAGHljC,EAASmjC,gBAAkBxlC,EAAMqC,EAASojC,YAC9C3lC,GAAS,GAAKA,GAAS,KACzBE,EAAM6kC,GAAK/kC,EACXE,EAAMilC,OAAQ,EACdjlC,EAAMqC,EAASmjC,gBAAiB,EAChCxlC,EAAMqC,EAASojC,aAAc,GAG7BppC,KAAKuoC,UAAY,UAEd,GAAI5kC,EAAMqC,EAASqjC,gBAAkB1lC,EAAMqC,EAASojC,YACrD3lC,GAAS,GAAKA,GAAS,KACzBE,EAAM+kC,GAAKjlC,EACXE,EAAMklC,OAAQ,EACdllC,EAAMqC,EAASqjC,gBAAiB,EAChC1lC,EAAMqC,EAASojC,aAAc,GAG7BppC,KAAKuoC,UAAY,UAInB,OAAQ9kC,GACR,KAAKuC,EAASijC,YACZjpC,KAAKuoC,UAAY,KACjB,MAEF,KAAKviC,EAASsjC,YACd,KAAKtjC,EAASujC,eACd,KAAKvjC,EAASojC,WACd,KAAKpjC,EAASwjC,aACd,KAAKxjC,EAASmjC,cACd,KAAKnjC,EAASqjC,cACZ1lC,EAAMF,IAAS,EACf,MAEF,QACM,IAAMA,GAASA,GAAS,GAC1BE,EAAM6kC,GAAK/kC,EACF,IAAMA,GAASA,GAAS,KACjCE,EAAM+kC,GAAKjlC,EAAQ,IAMzBzD,KAAKypC,WAAY,kCAUjBhmC,EAAOqb,EAAOuoB,GAClB,GAAIvoB,IAAUuoB,EAAd,CAIA,GAAIrnC,KAAKypC,UAAW,CAClB,IAAIC,EAAO1jC,EAAS2jC,YAAY3pC,KAAKuoC,WAEjCvoC,KAAK4pC,YAAcF,IACrB1pC,KAAK4pC,UAAYF,EACjB1pC,KAAK6pC,KAAO,MAGd7pC,KAAKypC,WAAY,EAGfzpC,KAAK4pC,YAAc5pC,KAAK6pC,OAC1B7pC,KAAK6pC,KAAO33B,SAASjK,cAAc,QACnCjI,KAAK6pC,KAAK3hC,UAAYlI,KAAK4pC,UAC3B5pC,KAAK8pC,MAAM9pC,KAAK8pC,MAAM/oC,OAAS,GAAGyR,YAAYxS,KAAK6pC,OAGrD,IAAI5iC,EAAOiL,SAAS8B,eAAevQ,EAAMb,UAAUkc,EAAOuoB,IAC1DrnC,KAAKsnC,QAAQtnC,KAAKsnC,QAAQvmC,QAAUkG,EAEpCjH,KAAKwS,YAAYvL,mCAGZhG,EAAMqmC,GACXthC,EAAS+jC,WAAW9oC,EAAMqmC,qCAO1BtnC,KAAKgqC,QAAUhqC,KAAKgqC,OADThqC,KACsBA,KAAKsnC,SAEtCtnC,KAAKiqC,MAAM,KAAM,EAAG,GACpBjqC,KAAKsnC,QAAQvmC,OAAS,qCAKb0C,EAAOqb,EAAOuoB,GACvB,OAAQrnC,KAAK2D,OACb,KAAKqC,EAASkkC,YACZlqC,KAAKiqC,MAAMxmC,EAAOqb,EAAOuoB,GACzB,MAEF,KAAKrhC,EAASmkC,WACZnqC,KAAKiqC,MAAM,OAAU,EAAG,GACxB,MAEF,KAAKjkC,EAASokC,WACZpqC,KAAKiqC,MAAM,QAAW,EAAG,GACzBjqC,KAAKiqC,MAAMjqC,KAAKqqC,SAAU,EAAGrqC,KAAKqqC,SAAStpC,QAC3Cf,KAAKqqC,SAAW,uCASTxoC,GACT,GAAKA,EAAL,CAMA,IAJA,IAAIid,EAAQ,EAIHyoB,EAAK,EAAGC,EAAO3lC,EAAKd,OAAQwmC,EAAKC,IAAQD,EAAI,CACpD,IAAI+C,EAAKzoC,EAAKknC,WAAWxB,GAGzB,OAAQ+C,GACR,KAAK,GACCtqC,KAAK2D,QAAUqC,EAASukC,WAC1BvqC,KAAKwqC,WAAW3oC,EAAMid,EAAOyoB,GAC7BvnC,KAAKyqC,WAGP3rB,EAAQyoB,EAAK,EACbvnC,KAAK2D,MAAQqC,EAASkkC,YACtB,SAEF,KAAK,GACHlqC,KAAKwqC,WAAW3oC,EAAMid,EAAOyoB,GAC7BvnC,KAAKyqC,UACL3rB,EAAQyoB,EAAK,EACbvnC,KAAK2D,MAAQqC,EAASukC,SACtB,SAEF,KAAK,GACHvqC,KAAKwqC,WAAW3oC,EAAMid,EAAOyoB,GAC7BzoB,EAAQyoB,EAAK,EACbvnC,KAAK2D,MAAQqC,EAASmkC,WACtB,SAOF,OAAQnqC,KAAK2D,OACb,KAAKqC,EAASukC,SACZvqC,KAAK2D,MAAQqC,EAASkkC,YACtB,MAEF,KAAKlkC,EAASmkC,WACD,KAAPG,GAEFxrB,EAAQyoB,EAAK,EACbvnC,KAAK2D,MAAQqC,EAASokC,aAGtBpqC,KAAKwqC,WAAW3oC,EAAMid,EAAOyoB,GAC7BzoB,EAAQyoB,EACRvnC,KAAK2D,MAAQqC,EAASkkC,aAExB,MAEF,KAAKlkC,EAASokC,WACR,IAAME,GAAMA,GAAM,MAEpBtqC,KAAKqqC,UAAYxoC,EAAKe,UAAUkc,EAAQA,EAAQyoB,EAAK,GACrDvnC,KAAK0qC,UAAU1qC,KAAKqqC,UACpBrqC,KAAKqqC,SAAW,GAChBrqC,KAAK2D,MAAQqC,EAASkkC,cAU5B,OAAQlqC,KAAK2D,OACb,KAAKqC,EAASkkC,YACZlqC,KAAKiqC,MAAMpoC,EAAMid,EAAOjd,EAAKd,QAC7B,MAEF,KAAKiF,EAASokC,WACZpqC,KAAKqqC,UAAYxoC,EAAKe,UAAUkc,wCAUzBsnB,GACT,IAAIW,EAAM70B,SAASjK,cAAc,OAC7BkU,EAAWjK,SAASy4B,yBAExB5D,EAAIjtB,UAAYssB,EAGhB,IAAK,IAAI9sB,EAAQytB,EAAIjzB,WAAYwF,EAAOA,EAAQA,EAAMsxB,YAAa,CAEjE,IAAIxkC,EAAMkT,EAAMpF,aAAa,WACjB,OAAR9N,GAAwB,KAARA,IAClBkT,EAAM3F,aAAa,UAAW,mBAAqBvN,EAAM,OACzDkT,EAAM/B,UAAYvX,KAAKuX,UACvB+B,EAAMuxB,gBAAgB,YAExB1uB,EAAS3J,YAAY8G,GAGvBtZ,KAAKwS,YAAY2J,uCAKP7C,IACEtZ,KAAK6pC,MAAQ7pC,KAAK8pC,MAAM9pC,KAAK8pC,MAAM/oC,OAAS,IACnDyR,YAAY8G,yCAKL7C,EAASsiB,GACrB,IAAIgO,EAAM70B,SAASjK,cAAc,OACjC8+B,EAAI7+B,UAAYuO,EAGhB,IAAIxP,EAAOiL,SAAS8B,eAAe+kB,GACnCgO,EAAIv0B,YAAYvL,GAEhBjH,KAAKwS,YAAYu0B,uCAKP+D,GACV9qC,KAAK6pC,KAAO,KACZ7pC,KAAK8pC,MAAM9pC,KAAK8pC,MAAM/oC,OAAS,GAAGyR,YAAYs4B,GAC9C9qC,KAAK8pC,MAAM9pC,KAAK8pC,MAAM/oC,QAAU+pC,uCAMhC9qC,KAAK6pC,KAAO,KAER7pC,KAAK8pC,MAAM/oC,OAAS,IACpBf,KAAK8pC,MAAM/oC,OAEbK,OAAOkB,SAAWlB,OAAOkB,QAAQgmC,KAAK,gEAM7BzmC,GACX,IAAIwQ,EAAKgK,EAEL0uB,EAAMlpC,EAAKsS,QAAQ,MACV,IAAT42B,GACF14B,EAAMxQ,EAAKe,UAAU,EAAGmoC,GACxB1uB,EAAQxa,EAAKe,UAAUmoC,EAAM,KAE7B14B,EAAMxQ,EACNwa,EAAQ,IAGV,IAEIyC,EAFAsnB,EAAO,IAAM/zB,GAAOgK,EAAQ,IAAM,IAAMA,EAAQ,IAGrC,MAAXhK,EAAI,GACNyM,GAAQ,GAERA,GAAQ,EACRzM,EAAMA,EAAIzP,UAAU,IAItB,IAAIooC,GAAc,EASlB,GAR2B,MAAtB34B,EAAIzP,WAAW,IAAwC,MAAxByZ,EAAMzZ,WAAW,KACnDooC,GAAc,GAGZhlC,EAASilC,cAAc92B,QAAQ9B,EAAIkG,gBAAkB,IACvDyyB,GAAc,GAGH,aAAR34B,IACS,QAARA,IAAkF,IAA/DgK,EAAMhG,OAAO,8CAMtC,GAAIyI,EAAO,CACT,IAAIioB,EAAM70B,SAASjK,cAAc,OAYjCm+B,GALAA,GALAA,EAAOA,EAAK7vB,QACV,4CACA,KAGUA,QACV,2CACA,KAGUA,QACV,sBACA,cAGFwwB,EAAIjtB,UAAYssB,EAAK7vB,QACnB,qBACA,4CAGFwwB,EAAIjzB,WAAWyD,UAAYvX,KAAKuX,UAEhCwvB,EAAIpzB,aAAa,SAAU,UAG3B3T,KAAKkrC,YAAYnE,EAAIjzB,YAGjBk3B,GACFhrC,KAAKmrC,kBAMFH,GACHhrC,KAAKmrC,6CAQT,GAAkB,OAAdnrC,KAAK2I,KACP,OAAO,KAGT3I,KAAK2I,KAAKmR,UAAY,GAEtB9Z,KAAK8pC,MAAQ,CAAC9pC,KAAK2I,MAEnB3I,KAAK2D,MAAQqC,EAASkkC,YACtBlqC,KAAKqtB,KAAO,KACZrtB,KAAKsnC,QAAU,GACftnC,KAAK6pC,KAAO,KACZ7pC,KAAKqqC,SAAW,GAEhBrqC,KAAK4pC,UAAY,GACjB5pC,KAAKuoC,UAAY,KACjBvoC,KAAKypC,WAAY,qCAIR2B,GAGT,QAFWprC,KAAK2I,MAMZ3I,KAAKsF,iBAAmB8lC,2CAS5B,IAAIN,EAAU9qC,KAAK2I,KACnB,IAAKmiC,EACH,OAAO,EAIT,IAEIO,EAAOn5B,SAASjK,cAAc6iC,EAAQQ,UAQ1C,OAPAD,EAAK13B,aAAa,QAAQ,sCAAsCm3B,EAAQviC,MAAMb,WAAW,cAAcojC,EAAQviC,MAAMZ,UACrH0jC,EAAKtwB,UAJK,aAKVswB,EAAOP,EAAQt4B,YAAY64B,GAC3BrrC,KAAK4V,KAAK1M,MAAQmiC,EAAKhc,YAAc,GACrCrvB,KAAK4V,KAAK3M,OAASoiC,EAAK11B,aACxB01B,EAAKj3B,WAAWL,YAAYs3B,GAErBrrC,KAAK4V,6CAKZ,IAAIjN,EAAO3I,KAAKoR,WAAapR,KAAK2I,KAClC,OAAKA,EAID3I,KAAK4V,KAAK3M,QAAU,EACf,EAGF5E,KAAKknC,MAAMlnC,KAAKmnC,KAAK7iC,EAAKgP,aAAehP,EAAK8iC,aAAe9iC,EAAK+O,WAAa1X,KAAK4V,KAAK3M,SAPvF,yCAaT,IAAIN,EAAO3I,KAAKoR,WAAapR,KAAK2I,KAClCA,EAAK+O,WAAa/O,EAAKgN,aAAgC,EAAjB3V,KAAK4V,KAAK3M,gDAMhD,IAAIN,EAAO3I,KAAKoR,WAAapR,KAAK2I,KAClCA,EAAK+O,WAAa/O,EAAKgN,aAAgC,EAAjB3V,KAAK4V,KAAK3M,4CAMhD,IAAIN,EAAO3I,KAAKoR,WAAapR,KAAK2I,KAE7BA,IAILA,EAAK+O,UAAY/O,EAAKgP,oDAviBLhU,GACjB,IAAKA,EACH,MAAO,GAGT,IAAI2D,EAAU,GAEd,GAAI3D,EAAMqC,EAASwjC,cAAe,CAChC,IAAI/lC,EAAQE,EAAM6kC,GAClB7kC,EAAM6kC,GAAK7kC,EAAM+kC,GACjB/kC,EAAM+kC,GAAKjlC,EAEXA,EAAQE,EAAMilC,MACdjlC,EAAMilC,MAAQjlC,EAAMklC,MACpBllC,EAAMklC,MAAQplC,EAGhB,IAAI+kC,EAAK7kC,EAAM6kC,GACXE,EAAK/kC,EAAM+kC,GA2Cf,OAzCI/kC,EAAMqC,EAASujC,kBACjBjiC,EAAQA,EAAQvG,QAAU,QAAUiF,EAASujC,gBAI3C5lC,EAAMilC,MACRthC,EAAQA,EAAQvG,QAAU,aAAe4C,EAAM6kC,GAE3C7kC,EAAMqC,EAASsjC,aACb3lC,EAAMqC,EAASwjC,cACbhB,IAAOxiC,EAASyiC,aAClBnhC,EAAQA,EAAQvG,QAAU,QAAUynC,GAGtClhC,EAAQA,EAAQvG,QAAU,QAAUynC,EAAK,KAElCA,IAAOxiC,EAASyiC,aACzBnhC,EAAQA,EAAQvG,QAAU,QAAUynC,GAIpC7kC,EAAMklC,MACRvhC,EAAQA,EAAQvG,QAAU,aAAe4C,EAAM+kC,GAE3C/kC,EAAMqC,EAASsjC,cACb3lC,EAAMqC,EAASwjC,cACjBliC,EAAQA,EAAQvG,QAAU,SAAW2nC,EAAK,IAAM,KAMzCA,IAAO1iC,EAAS2iC,aACzBrhC,EAAQA,EAAQvG,QAAU,SAAW2nC,EAAK,MAI1C/kC,EAAMqC,EAASojC,aAAiBzlC,EAAMilC,OAASjlC,EAAMklC,QACvDvhC,EAAQA,EAAQvG,QAAU,QAAUiF,EAASojC,YAGxC9hC,EAAQyP,KAAK,cA+jBT/Q,yDC3wBTE,aAoHJ,SAAAA,EAAYyC,GAAO7I,OAAAC,EAAA,EAAAD,CAAAE,KAAAkG,GACjB,IAAIjF,EAAOjB,KAEXA,KAAK2I,KAAOA,EAEZ3I,KAAK0rC,eAAiB,EACtB1rC,KAAK2rC,cAAgB,EAGrB3rC,KAAKmG,QAAU,KACfnG,KAAKsG,SAAW,KAChBtG,KAAKwG,SAAW,KAChBxG,KAAK0G,WAAa,KAGlB1G,KAAK4rC,gBAAkB,KACvB5rC,KAAK6rC,iBAAmB,KAExB7rC,KAAKmkB,eAELnkB,KAAK2I,KAAKmjC,UAAY,SAASvqC,GAC7B2E,EAAU4lC,UAAU7qC,EAAMM,IAG5BvB,KAAK2I,KAAKojC,QAAU,SAASxqC,GAC3B2E,EAAU6lC,QAAQ9qC,EAAMM,kEAzIRN,GAClBA,EAAKkjB,cAAgBljB,EAAKkjB,iDAKXljB,EAAMM,GACrBN,EAAK+qC,WAAa/qC,EAAK+qC,UAAUzqC,mCAKpBN,EAAMM,GACnBN,EAAKgrC,SAAWhrC,EAAKgrC,QAAQ1qC,6CAINN,EAAM+T,GAC7B,OAAI/T,GAAQA,EAAK2qC,gBACR3qC,EAAK2qC,gBAAgB52B,GAGP,KAAbA,EAAI0H,MAAe1H,EAAI2Z,gDAKT1tB,EAAM+T,GAC9B,OAAI/T,GAAQA,EAAK4qC,iBACR5qC,EAAK4qC,iBAAiB72B,GAGR,KAAbA,EAAI0H,MAAe1H,EAAI2Z,sCAMnB1tB,EAAMoB,GACpB,IAAI2S,EAAM,CAAE0H,KAAOra,EAAE6pC,QAAU7pC,EAAE6pC,QAAU7pC,EAAEgY,MACjCsU,KAAMtsB,EAAE8pC,QACRtd,MAAOxsB,EAAE+pC,SACTxd,IAAKvsB,EAAEgqC,QAEfC,GAAU,EAEd,GAAIpmC,EAAUqmC,mBAAmBtrC,EAAM+T,GAGrC/T,EAAKwvB,qBAEA,GAAIvqB,EAAUsmC,kBAAkBvrC,EAAM+T,GAG3C/T,EAAK0vB,oBAEA,GAAiB,KAAb3b,EAAI0H,KAAa,CAI1B,IAAItW,EAAMnF,EAAK0H,KAAKlF,MACpBxC,EAAKwrC,cAGLxrC,EAAKkF,SAAWlF,EAAKkF,QAAQC,QAEP,KAAb4O,EAAI0H,KAGbzb,EAAKqF,UAAYrF,EAAKqF,WAEA,KAAb0O,EAAI0H,KAGbzb,EAAKuF,UAAYvF,EAAKuF,WAEA,KAAbwO,EAAI0H,KAGbzb,EAAKuF,UAAYvF,EAAKyF,aAItB4lC,GAAU,EAIRA,GACFjqC,EAAEwhB,iBAIJ5iB,EAAK4W,2CAKW5W,EAAMoB,GACtB,IAAI2S,EAAM,CAAE0H,KAAOra,EAAE6pC,QAAU7pC,EAAE6pC,QAAU7pC,EAAEgY,MACjCsU,KAAMtsB,EAAE8pC,QACRtd,MAAOxsB,EAAE+pC,SACTxd,IAAKvsB,EAAEgqC,SAEfnmC,EAAUqmC,mBAAmBtrC,EAAM+T,IACnC9O,EAAUsmC,kBAAkBvrC,EAAM+T,KAGpC/T,EAAKyrC,gEAoCCrqC,GACR6D,EAAUymC,SAAS3sC,KAAMqC,mCAKnBA,GACN6D,EAAU0mC,WAAW5sC,KAAMqC,0CAM3BrC,KAAK8V,QAAU,GACf9V,KAAK6sC,aAAe,GACpB7sC,KAAKiG,SAAW,wCAMQ,KAApBjG,KAAK2I,KAAKlF,QACZzD,KAAK8V,QAAQ9V,KAAK8V,QAAQ/U,QAAUf,KAAK2I,KAAKlF,MAC9CzD,KAAK6sC,aAAe,GACpB7sC,KAAKiG,SAAW,EAChBjG,KAAK2I,KAAKlF,MAAQ,4CAQhBzD,KAAKiG,QAAU,IACjBjG,KAAK6sC,aAAe7sC,KAAK2I,KAAKlF,OAI5BzD,KAAKiG,QAAUjG,KAAK8V,QAAQ/U,OAAS,IACvCf,KAAKiG,UACLjG,KAAK2I,KAAKlF,MAAQzD,KAAK8V,QAAQ9V,KAAK8V,QAAQ/U,OAASf,KAAKiG,QAAU,2CAQlEjG,KAAKiG,QAAU,GACjBjG,KAAKiG,UACLjG,KAAK2I,KAAKlF,MAAQzD,KAAK8V,QAAQ9V,KAAK8V,QAAQ/U,OAASf,KAAKiG,QAAU,IAC1C,IAAjBjG,KAAKiG,UAEdjG,KAAKiG,SAAW,EAChBjG,KAAK2I,KAAKlF,MAAQzD,KAAK6sC,mDAOzB,GAAwC,kBAA7B7sC,KAAK2I,KAAK+iC,eACjB1rC,KAAK2I,KAAK+iC,eAAiB1rC,KAAK2I,KAAKmkC,aAAe9sC,KAAK2I,KAAKlF,MAAM1C,YACjE,GAAyC,qBAA9Bf,KAAK2I,KAAKokC,gBAAiC,CACzD/sC,KAAK6X,QACL,IAAI6uB,EAAQ1mC,KAAK2I,KAAKokC,kBACtBrG,EAAMsG,UAAS,GACftG,EAAMuG,+CAMVjtC,KAAK0rC,eAAiB1rC,KAAK2I,KAAK+iC,eAChC1rC,KAAK2rC,cAAgB3rC,KAAK2I,KAAKgjC,oDAK3B3rC,KAAK0rC,gBAAkB1rC,KAAK2rC,eAC9B3rC,KAAK2I,KAAK+iC,eAAiB1rC,KAAK0rC,eAChC1rC,KAAK2I,KAAKgjC,cAAgB3rC,KAAK2rC,cAC/B3rC,KAAK0rC,eAAiB,KACtB1rC,KAAK2rC,cAAgB,MAErB3rC,KAAK2I,KAAK+iC,eAAiB1rC,KAAK2I,KAAKgjC,cAAgB3rC,KAAK2I,KAAKlF,MAAM1C,uCAOvEf,KAAK2I,KAAKlF,MAAQ,mCAMlB,OAAOzD,KAAK2I,KAAKlF,oCAKbmU,GAGJ,IAAI3Q,EAAO,GAEX,IAAK2Q,EAAO,CACNxW,OAAO8rC,aACTjmC,EAAO7F,OAAO8rC,eAAeC,WACpBj7B,SAASk7B,WAAyC,YAA5Bl7B,SAASk7B,UAAUx4B,OAClD3N,EAAOiL,SAASk7B,UAAUzG,cAAc1/B,MAI1C,IAAI6jC,EAAU54B,SAASm7B,cACnBC,EAAUxC,EAAQwC,QAAQ/0B,cAC9B,GAAgB,aAAZ+0B,EAAwB,OAE5B,GAAgB,UAAZA,EAAqB,CACvB,IAAI14B,EAAOk2B,EAAQ52B,aAAa,QAAQqE,cAGxC,GADiB,CAAC,OAAQ,WAAY,SAAU,QAAS,MAAO,MAAO,SAAU,OAAQ,WAAY,iBAAkB,OAAQ,QAAS,QACzHpE,QAAQS,IAAS,EAC9B,QAOF3N,EAAKsU,MAFM,UAGbvb,KAAK2I,KAAKkP,iBAMD3R","file":"static/js/main.533bf722.chunk.js","sourcesContent":["// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect(url=null) {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n    \n    this.url = url || this.url;\n    \n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\n\nimport Emulator from '../../client/emulator';\nimport UserInput from '../../client/userinput';\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 1000;\nconst HISTORY_KEY = \"output_history_\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    flex: 1,\n    display: \"flex\",\n  },\n  output: {\n    margin: '0.25em 0.5em',\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  bottom: {\n    \"background-color\": theme.palette.background.paper,\n    display: \"flex\",\n  },\n  input: {\n    flex: 1,\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n    [theme.breakpoints.down('sm')]: {\n      height: \"1.5em\",\n    },\n  },\n  prefix: {\n    width: \"5em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Spawn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prefix: props.prefix ? props.prefix : \"\",\n      saveHistory: props.saveHistory ? props.saveHistory : false,\n      autoHide: props.autoHide ? props.autoHide : false,\n    };\n\n    this.refoutput = React.createRef();\n    this.refinput = React.createRef();\n\n    this.output = null;\n    this.input = null;\n    \n    this.hasHidden = false;\n  }\n  \n  componentDidMount() {\n    this.output = new Emulator(this.refoutput.current);\n    \n    this.input = new UserInput(this.refinput.current);\n    this.input.onEnter = (cmd) => { this.sendCommand(cmd); };\n    this.input.onEscape = () => { this.input.clear(); };\n    this.input.onPageUp = () => { this.output.scrollPageUp(); };\n    this.input.onPageDown = () => { this.output.scrollPageDown(); };\n    \n    if (this.state.saveHistory) {\n      this.LoadHistory();\n      this.output.scrollDown();\n    }\n    \n    if (this.state.autoHide) {\n      this.AutoHide();\n    }\n  }\n  \n  componentWillUnmount() {\n    this.output = null;\n    this.input = null;\n  }\n  \n  sendCommand(cmd) {\n    const { prefix } = this.state;\n    window.client.sendMacro(prefix + cmd);\n  }\n  \n  changePrefix = event => {\n    this.Prefix(event.target.value);\n  };\n  \n  Prefix = prefix => {\n    if (this.state.prefix !== prefix) {\n      this.setState({ prefix });\n    }\n    \n    return this;\n  };\n\n  LoadHistory = () => {\n    this.output.loadHistory(HISTORY_KEY + this.props.id);\n    this.output.scrollDown();\n  };\n  \n  SaveHistory = saveHistory => {\n    if (typeof(saveHistory) === \"undefined\") {\n      saveHistory = true;\n    }\n    \n    if (this.state.saveHistory !== saveHistory) {\n      if (saveHistory) {\n        this.LoadHistory();\n        this.output.scrollDown();\n      }\n    \n      this.setState({ saveHistory });\n    }\n    \n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + this.props.id, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySpawnSize));\n    }\n    \n    return this;\n  };\n  \n  AutoHide = autoHide => {\n    if (typeof(autoHide) === \"undefined\") {\n      autoHide = true;\n    }\n    \n    if (this.state.autoHide !== autoHide) {\n      this.setState({ autoHide });\n    }\n    \n    if (this.state.autoHide && !this.hasHidden) {\n      this.props.panel.minimize();\n      this.hasHidden = true;\n    }\n    \n    return this;\n  };\n  \n  Focus = () => {\n    \n    window.client.react.taskbar.popTask(this.props.panel);\n    this.props.panel.normalize();\n    \n    return this;\n  };\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output.nearBottom(window.client.scrollThreshold)) {\n      scroll = true;\n    }\n    \n    fun();\n    \n    scroll && this.output.scrollDown();\n    \n    this.onChange();\n  }\n\n  onChange = () => {\n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + this.props.id, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySpawnSize));\n    }\n    \n    this.setState({ lines: this.output.linesOfScroll() });\n    \n    if (this.props.panel.status === \"minimized\") {\n      this.props.panel.count++;\n      window.client.react.taskbar.forceUpdate();\n    }\n  };\n  \n  appendText(text) {\n    this.scrollIfNeeded(() => this.output.appendText(text));\n  }\n  \n  append(text) {\n    this.scrollIfNeeded(() => this.output.appendText(text+\"\\n\"));\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { prefix } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: fontSize + \"pt\",\n    };\n    \n    const inputFont = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.top}>\n          <div ref={this.refoutput} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </div>\n        <div className={classes.bottom}>\n          <TextField label=\"Prefix\" classes={{ root: classes.prefix }} value={prefix} onChange={this.changePrefix} />\n          <textarea ref={this.refinput} className={classNames(classes.input, ansiFG, ansiBG)} style={inputFont}  autoComplete=\"off\"></textarea>\n        </div>\n      </div>\n    );\n  }\n}\n\nSpawn.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  panel: PropTypes.object.isRequired,\n  prefix: PropTypes.string,\n};\n\nexport default withStyles(styles, { withTheme: true })(Spawn);\n\n\t","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","/* eslint no-eval: 0 */\n/* eslint no-unused-vars: 0 */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\nimport Customizer from '../modules/Customizer';\nimport Spawn from '../modules/Spawn';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport JSONAPI from './jsonapi';\nimport Templates from './templates';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nconst UnicodeMap = {\n  \"\\u2013\": '-',\n  \"\\u2014\": '-',\n  \"\\u2018\": '\\'',\n  \"\\u2019\": '\\'',\n  \"\\u201B\": '\\'',\n  \"\\u201C\": '\"',\n  \"\\u201D\": '\"',\n  \"\\u201F\": '\"',\n  \"\\u2032\": '\\'',\n  \"\\u2033\": '\"',\n  \"\\u2035\": '\\'',\n  \"\\u2036\": '\"',\n}\n\nclass Client {\n\n  constructor() {\n    // Client colors and theme\n    this.colors = Colors;\n    this.theme = this.createTheme();\n    this.mobile = !window.matchMedia(this.theme.breakpoints.up('md').substring(7)).matches;\n    \n    // client settings\n    this.defaultSettings = {\n      // font\n      fontFamily: \"Courier New\",\n      fontSize: 10,\n      // default text colors\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      invertHighlight: false,\n      // terminal settings\n      wrapWidth: 100,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"right\",\n      sidebarDense: this.mobile,\n      sidebarAlwaysShow: false,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      sidebarLargeCompass: true,\n      // debugging\n      debugEvents: false,\n      debugActions: false,\n      // default connection settings, can override in public/local.js\n      allowServerChange: true,\n      serverAddress: \"node.grapenut.org\",\n      serverSSL: window.location.protocol === \"https:\",\n      serverPort: window.location.protocol === \"https:\" ? 2001 : 2000,\n      // history settings\n      historySize: 1000,\n      historySpawnSize: 100,\n      // command recall\n      recallButtons: true,\n      recallAnchor: \"right\",\n      recallSize: 1000,\n      // mobile settings\n      mobileHideTaskbar: true,\n      mobileHideStatusbar: true,\n    };\n    this.settings = null;\n    \n    // map react components to strings\n    this.components = {\n      \"Mailbox\": Mailbox,\n      \"Sendmail\": Sendmail,\n      \"BBoard\": BBoard,\n      \"Upload\": Upload,\n      \"Customizer\": Customizer,\n      \"Spawn\": Spawn,\n    };\n    \n    this.templates = new Templates();\n    \n    this.buttons = [];\n    this.triggers = [];\n    this.timers = [];\n    this.macros = [];\n    this.keys = [];\n    this.scripts = [{ name: \"onLoad.js\", text: \"\" }];\n    this.css = [{ name: \"ansi.css\", text: \"\" },\n                { name: \"inverse.css\", text: \"\" }];\n    \n    this.loadButtons();\n    this.loadTriggers();\n    this.loadTimers();\n    this.loadMacros();\n    this.loadKeys();\n    this.loadCSS();\n    this.loadScripts();\n    \n    // must come after client .css definitions\n    this.loadSettings();\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // External Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n      customizer: null,\n      spawns: [],\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // rendering, themeing, and styling react components\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  execUserScript(name) {\n    // load user customization file\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    const SendAPI = (cmd) => this.sendAPI(cmd);\n    const SendCommand = (cmd) => this.sendCommand(cmd);\n    const SendText = (cmd) => this.sendText(cmd);\n    const Output = (text) => this.output.appendText(text);\n    \n    var script = null;\n    for (let i=0; i < client.scripts.length; i++) {\n      if (client.scripts[i].name === name) {\n        script = client.scripts[i];\n        break;\n      }\n    }\n    \n    if (script && script.text !== \"\") {\n      try {\n        eval(this.filterUnicode(script.text));\n      } catch (e) {\n        client.debugActions && console.log(\"Error executing `\" + name + \"'.\");\n      }\n    }\n  }\n  \n  // evaluate an action javascript with a limited context\n  execActionScript(txt, event) {\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    const SendAPI = (cmd) => this.sendAPI(cmd);\n    const SendCommand = (cmd) => this.sendCommand(cmd);\n    const SendText = (cmd) => this.sendText(cmd);\n    const Output = (text) => this.output.appendText(text);\n    \n    try {\n      eval(this.filterUnicode(txt));\n    } catch (e) {\n      client.settings.debugActions && console.log(\"Error executing action:\", e);\n    }\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    const file = src.split('/').slice(-1)[0];\n\n    // see if we have a matching css override\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    var style;\n    if (css) {\n      // just update the <style> element\n      style = this.updateCSS(css);\n      if (css.text !== \"\") return;\n    }\n    \n    // css is not overridden, try to load a <link>\n    style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.head.appendChild(style);\n  }\n  \n  // update the css object's rules on its <style> element \n  updateCSS(css, erase=false) {\n    if (!css) return null;\n    \n    var style = document.getElementById(\"override_\" + css.name);\n    if (style) {\n      // remove what's already there\n      while (style.firstChild) {\n        style.removeChild(style.firstChild);\n      }\n    } else {\n      // create a new style element\n      style = document.createElement('style');\n      style.setAttribute('id', 'override_' + css.name);\n      document.head.appendChild(style);\n    }\n    \n    // update the CSS text on the <style> element\n    if (!erase) style.appendChild(document.createTextNode(css.text));\n    \n    return style;\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    // remove the <link> if it exists\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n    \n    // see if we have a css override to erase\n    const file = src.split('/').slice(-1)[0];\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    // we found a css override, delete the contents\n    if (css) {\n      this.updateCSS(css, true);\n    }\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // save and load objects from localStorage\n  \n  // load object from localstorage\n  loadLocalStorage(obj, key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      obj = Object.assign(obj, JSON.parse(window.localStorage[key]));\n    }\n  }\n  \n  // clear localStorage keys starting with prefix\n  clearLocalStorage(key) {\n    delete window.localStorage[key];\n  }\n  \n  // save object to localstorage\n  saveLocalStorage(obj, key) {\n    window.localStorage[key] = JSON.stringify(obj);\n  }\n  \n  // load a string directly from localstorage\n  loadHistoryBuffer(key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      return window.localStorage[key];\n    }\n    return \"\";\n  }\n  \n  // save a string directly to localstorage\n  saveHistoryBuffer(key, text) {\n    window.localStorage[key] = text;\n  }\n  \n  // casting a string argument to the correct type\n  castString(obj, key, value) {\n    if (!obj.hasOwnProperty(key)) return;\n    \n    var type = typeof obj[key];\n    \n    if (typeof value === type) {\n      obj[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          obj[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          obj[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          obj[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          obj[key] = value;\n          break;\n      }\n    }\n  }\n  \n  // change a setting, performing a secondary action if necessary\n  changeSetting(key, value) {\n    this.castString(this.settings, key, value);\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    } else if (key === 'wrapWidth') {\n      // send the screen dimensions\n      this.output.calcDimensions();\n      this.sendText(\"SCREENWIDTH \" + this.settings.wrapWidth);\n      this.sendText(\"SCREENHEIGHT \" + Math.floor(this.output.root.parentNode.clientHeight / this.output.dims.height));\n    }\n  }\n  \n  // load user defined taskbar buttons\n  loadButtons() {\n    this.loadLocalStorage(this.buttons, \"buttons\");\n  }\n  \n  // load regex/wildcard pattern triggers\n  loadTriggers() {\n    this.loadLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // load automatic timers\n  loadTimers() {\n    this.loadLocalStorage(this.timers, \"timers\");\n  }\n  \n  // load slash command macros\n  loadMacros() {\n    this.loadLocalStorage(this.macros, \"macros\");\n  }\n  \n  // load custom keybindings\n  loadKeys() {\n    this.loadLocalStorage(this.keys, \"keys\");\n  }\n  \n  // load custom css overrides\n  loadCSS() {\n    this.loadLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // override CSS, first check existing styles\n      let css = this.css[i];\n      \n      // autoload CSS changes, except inverse.css\n      if (css.name !== \"inverse.css\") {\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // load custom scrips\n  loadScripts() {\n    this.loadLocalStorage(this.scripts, \"scripts\");\n  }\n  \n  // load client settings\n  loadSettings() {\n    this.settings = Object.assign({}, this.defaultSettings);\n    this.loadLocalStorage(this.settings, \"settings\");\n    \n    if (this.settings['invertHighlight']) {\n      this.loadStyle('./inverse.css');\n    } else {\n      this.unloadStyle('./inverse.css');\n    }\n  }\n  \n  // load command recall history\n  loadRecallHistory() {\n    this.loadLocalStorage(this.input.history, \"recall_history\");\n  }\n  \n  // save command recall history\n  saveRecallHistory() {\n    const { recallSize } = this.settings;\n    this.clearLocalStorage(\"recall_history\");\n    this.saveLocalStorage(this.input.history.slice(-recallSize), \"recall_history\");\n  }\n  \n  // save user defined taskbar buttons\n  saveButtons() {\n    this.clearLocalStorage(\"buttons\");\n    this.saveLocalStorage(this.buttons, \"buttons\");\n    this.react.taskbar && this.react.taskbar.forceUpdate();\n  }\n  \n  // save regex/wildcard pattern triggers\n  saveTriggers() {\n    this.clearLocalStorage(\"triggers\");\n    this.saveLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // save automatic timers\n  saveTimers() {\n    this.clearLocalStorage(\"timers\");\n    this.saveLocalStorage(this.timers, \"timers\");\n  }\n  \n  // save slash command macros\n  saveMacros() {\n    this.clearLocalStorage(\"macros\");\n    this.saveLocalStorage(this.macros, \"macros\");\n  }\n  \n  // save custom keybindings\n  saveKeys() {\n    this.clearLocalStorage(\"keys\");\n    this.saveLocalStorage(this.keys, \"keys\");\n  }\n  \n  // save custom css overrides\n  saveCSS() {\n    this.clearLocalStorage(\"css\");\n    this.saveLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // update rules in css <style> element\n      let css = this.css[i];\n      \n      if (css.name === \"inverse.css\") {\n        // only load inverse.css if we need it\n        if (this.settings.invertHighlight) {\n          // unload inverse.css if it is linked\n          let links = document.getElementsByTagName(\"link\");\n          for (let j = links.length; j >= 0; j--) {\n            if (links[j] && links[j].getAttribute(\"href\") !== null) {\n              let name = links[j].getAttribute(\"href\").split(\"/\").slice(-1)[0];\n              if (name === css.name) {\n                links[j].parentNode.removeChild(links[j]);\n              }\n            }\n          }\n          \n          if (css.text === \"\") {\n            // there is no override, so relink inverse.css\n            this.loadStyle('./inverse.css');\n          } else {\n            // there is an override, update it\n            this.updateCSS(css);\n          }\n        }\n      } else {\n        // autoload all files that aren't inverse.css\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // save custom css overrides\n  saveScripts() {\n    this.clearLocalStorage(\"scripts\");\n    this.saveLocalStorage(this.css, \"scripts\");\n  }\n  \n  // save client settings\n  saveSettings() {\n    this.clearLocalStorage(\"settings\");\n    this.saveLocalStorage(this.settings, \"settings\");\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // miscellaneous logging and command links\n\n  // detect if more user input is required for a pueblo command\n  parseCommand(command) {\n    var cmd = command;\n    var regex = new RegExp('\\\\?\\\\?');\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(this.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // manage triggers, timers, macros, and keys\n  createPattern(regex, pattern) {\n    if (regex) {\n      return new RegExp('^' + pattern + '$');\n    } else {\n      return new RegExp('^' + pattern.split(/\\*+/).map(s => s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')).join('(.*)') + '$');\n    }\n  }\n  \n  replaceArgs(args, text) {\n    let newText = text.slice();\n    for (let i = args.length-1; i > -1; i--) {\n      let tmp = args[i] || \"\";\n      \n      try {\n        let re = new RegExp('(^|[^\\\\%])%'+i, 'g');\n        let escre = new RegExp('[\"\\'`]', 'g');\n        let esc = tmp.replace(escre, '\\\\$&');\n        newText = newText.replace(re, '$1'+esc);\n      } catch (e) {\n        this.settings.debugActions && console.log(\"Unable to compile regular expression:\", e);\n      }\n    }\n    return newText;\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // initialize terminal elements (input, output, prompt) and clear them\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n      this.loadRecallHistory();\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // handle input window focus and output window scrolling\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    if (this.mobile) return;\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun();\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // spawn, focus and close window panels\n  addPanel(id, cfg, component) {\n    var spawn = this.findSpawn(id);\n    \n    if (spawn) {\n      this.focusPanel(id);\n      return spawn;\n    }\n    \n    var comp = component || id;\n    var el = this.components[comp];\n    \n    if (!el) {\n      el = Spawn;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.id) {\n      config.id = id.toLowerCase();\n    }\n    \n    if (!config.headerTitle) {\n      config.headerTitle = id;\n    }\n    \n    if (!config.headerLogo) {\n      var icon = config.icon || \"tab\";\n      var gameicon = icon.startsWith('icon-');\n      \n      if (gameicon) {\n        config.headerLogo = \"<i class='\" + icon + \"' style='margin-left: \"+this.theme.spacing.unit+\"px'>\"+icon+\"</i>\";\n      } else {\n        config.headerLogo = \"<i class='material-icons' style='margin-left: \"+this.theme.spacing.unit+\"px'>\"+icon+\"</i>\";\n      }\n    }\n    \n    if (!config.panelSize) {\n      const margin = this.panels.defaults.maximizedMargin;\n      let wstr = 'calc(50% - ' + 1.5*margin + 'px)';\n\n      if (this.mobile) {\n        wstr = 'calc(100% - ' + 2*margin + 'px)';\n      }\n    \n      config.panelSize = {\n        width: wstr,\n        height: 'calc(100% - ' + 2*margin + 'px)',\n      };\n    }\n    \n    let ref = React.createRef();\n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      let child = React.createElement(el, { innerRef: ref, id: id.toLowerCase(), panel: container, ...config.props }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content, () => {\n        // add the helpText() controlbar icon\n        let obj = ref.current;\n        if (obj && obj.helpText) {\n          let helpButton = document.createElement('div');\n          helpButton.classList.add(\"jsPanel-btn\",\"jsPanel-btn-help\");\n          helpButton.innerHTML = `<svg class=\"jsPanel-icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 512 512\"><circle fill=\"currentColor\" cx=\"255.984\" cy=\"492\" r=\"20\"/><path fill=\"currentColor\" d=\"M412.979,155.775C412.321,69.765,342.147,0,255.984,0c-86.57,0-157,70.43-157,157c0,11.046,8.954,20,20,20 s20-8.954,20-20c0-64.514,52.486-117,117-117s117,52.486,117,117c0,0.356,0.009,0.71,0.028,1.062 c-0.405,46.562-28.227,88.348-71.12,106.661c-40.038,17.094-65.908,56.675-65.908,100.839V412c0,11.046,8.954,20,20,20 c11.046,0,20-8.954,20-20v-46.438c0-28.117,16.334-53.258,41.614-64.051c57.979-24.754,95.433-81.479,95.418-144.516 C413.016,156.585,413.003,156.179,412.979,155.775z\"/></svg>`;\n          helpButton.style.color = this.panels.calcColors(this.panels.defaults.theme)[3];\n          container.controlbar.insertBefore(helpButton, container.controlbar.firstChild);\n          \n          jsPanel.pointerup.forEach((which) => {\n            helpButton.addEventListener(which, (evt) => {\n              obj.helpText(evt.currentTarget);\n            });\n          });\n        }\n        \n        window.client.react.spawns.push(obj);\n      });\n      \n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n    return ref.current;\n  }\n  \n  // create a Spawn window\n  // don't focus if it already exists\n  getSpawn(id, cfg, el) {\n    let spawn = this.findSpawn(id);\n    if (spawn) return spawn;\n    \n    return this.addPanel(id, cfg, el);\n  }\n  \n  // delete spawn window from internal list\n  delSpawn(id) {\n    const spawns = this.react.spawns;\n    const lower = id.toLowerCase();\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id === lower) {\n        spawns.splice(i, 1);\n      }\n    }\n  }\n  \n  // find spawn window in internal list\n  findSpawn(id) {\n    const spawns = this.react.spawns;\n    const lower = id.toLowerCase();\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id.toLowerCase() === lower) {\n        return spawns[i];\n      }\n    }\n    return null;\n  }\n  \n  // find and close a panel\n  closePanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  // bring a panel into focus\n  focusPanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.settings.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n    \n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      // implement @dec/tf\n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      }\n      \n      // handle text triggers\n      let suppress = false;\n      client.triggers.forEach((trigger, i) => {\n        if (trigger.disabled) return;\n        \n        let re = client.createPattern(trigger.regex, trigger.pattern);\n        let args = text.match(re);\n        \n        if (args) {\n          let txt = client.replaceArgs(args, trigger.text);\n          if (trigger.javascript) {\n            client.execActionScript(txt);\n          } else {\n            client.sendText(txt);\n          }\n        \n          if (trigger.suppress) {\n            client.eatNewline = true;\n            suppress = true;\n          }\n        }\n      });\n      \n      if (suppress) return;\n      \n      if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      \n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect(force=false) {\n    if (!force && this.isConnected()) {\n      return;\n    }\n    \n    if (force || this.reconnectCount < this.reconnectMaxCount) {\n      // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n      let serverProto = window.location.protocol === \"https:\" || this.settings.serverSSL ? \"wss://\" : \"ws://\";\n      let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient';\n      \n      this.reconnectCount++;\n      this.conn && this.conn.reconnect(serverUrl);\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  filterUnicode(text) {\n    if (!text) return \"\";\n    try {\n      let re = new RegExp(\"[\\u2013\\u2014\\u2018\\u2019\\u201B\\u201C\\u201D\\u201F\\u2032\\u2033\\u2035\\u2036]\",\"g\");\n      return text.replace(re, code => UnicodeMap[code]);\n    } catch (e) {\n      this.settings.debugActions && console.log(\"Unable to filter Unicode:\", e);\n    }\n    return text;\n  }\n\n  sendText(data) {\n    this.conn && this.conn.sendText(this.filterUnicode(data));\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n  \n    if (!this.isConnected()) {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n      return;\n    }\n    \n    if (cmd === '') return;\n    \n    this.sendMacro(cmd);\n    this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n    this.saveRecallHistory();\n  }\n    \n  sendMacro(cmds) {\n    let matched = false;\n    this.macros.forEach((m) => {\n      if (m.disabled) return;\n      \n      let re = this.createPattern(m.regex, m.pattern);\n      \n      cmds.split('\\n').forEach((cmd) => {\n        let args = cmd.match(re);\n      \n        if (args) {\n          matched = true;\n          let text = this.replaceArgs(args, m.text);\n          if (m.javascript) {\n            this.execActionScript(text);\n          } else {\n            this.sendMacro(text);\n          }\n        }\n      });\n    });\n    \n    if (!matched) {\n      this.sendText(cmds);\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content);\n      window.client.delSpawn(this.id);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput };\n\n","/* eslint no-eval: 0 */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  root: {\n    width: \"100%\",\n  },\n  title: {\n    margin: '0 ' + theme.spacing.unit + 'px',\n    flex: 1,\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n    display: \"flex\",\n    \"flexFlow\": \"row nowrap\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  mobileButtons: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n  },\n  scrollButtons: {\n    flex: '0 0 24px',\n    padding: 0,\n    alignSelf: \"center\",\n  },\n  emptyText: {\n    textAlign: \"center\",\n  },\n  buttonBar: {\n    justifyContent: \"space-evenly\",\n  },\n  sidebarButton: {\n    minWidth: 24,\n    padding: theme.spacing.unit,\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count : 0;\n  \n  if (count && count !== \"\") {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon className={props.children}>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon className={props.children}>{props.children}</Icon>);\n};\n\n\nfunction BadgeWrapper(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        {props.children}\n      </Badge>\n    );\n  }\n  return props.children;\n};\n\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n    window.client.react.taskbar = this;\n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  // wrapper that scrolls the output\n  scrollIfNeeded() {\n    window.client.output.scrollDown();\n  }\n\n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    var scroll = false;\n    \n    if (taskbar.length < 1) {\n      if (window.client.output.nearBottom(window.client.scrollThreshold)) {\n        scroll = true;\n      }\n    }\n    \n    task.count = 0;\n    taskbar.push(task);\n    this.setState({ taskbar });\n    \n    if (scroll) {\n      clearTimeout(this.scrollIfNeeded);\n      setTimeout(this.scrollIfNeeded, 1000);\n    }\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  toggleSidebar = () => {\n    const client = window.client;\n    \n    const toggle = !client.settings.sidebarOpen;\n    client.changeSetting('sidebarOpen', toggle);\n    this.setState({ sidebarOpen: toggle });\n    client.saveSettings();\n    client.react.portal.forceUpdate();\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event ? event.currentTarget : null });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n\n  openCustomizer = () => {\n    window.client.addPanel(\"Customizer\", { icon: 'build' });\n  };\n  \n  previewUpload = () => {\n    window.client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n  \n  pushButton = button => event => {\n    if (button && button.text && button.text !== \"\") {\n      if (button.javascript) {\n        window.client.execActionScript(button.text, event);\n      } else {\n        window.client.sendText(button.text);\n      }\n    }\n  }\n  \n  showCount = button => {\n    if (button && button.count && button.count !== \"\") {\n      try {\n        var val = eval(button.count);\n        if (val) {\n          return val;\n        }\n      } catch (e) {\n        window.client.settings.debugActions && console.log(\"Unable to execute button count expression:\", e);\n      }\n    }\n    \n    return 0;\n  };\n  \n  componentDidMount() {\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, historyAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n    const { sidebarOpen, sidebarAnchor, mobileHideTaskbar } = window.client.settings;\n    \n    const buttons = window.client.buttons;\n\n    var rev = input && Boolean(historyAnchor) ? input.history.slice().reverse() : [];\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n          <Toolbar disableGutters={!this.state.open}>\n            <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n              <Button className={classes.sidebarButton} aria-label=\"open-sidebar\" onClick={this.toggleSidebar}>\n                {sidebarAnchor === \"left\" ? (\n                  sidebarOpen ? <ChevronLeftIcon /> : <ChevronRightIcon />\n                ) : (\n                  sidebarOpen ? <ChevronRightIcon /> : <ChevronLeftIcon />\n                )}\n              </Button>\n            </Tooltip>\n            \n            <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n              {title}\n            </Typography>\n            \n            <div className={classes.sectionDesktop}>\n              <div className={classes.flex}></div>\n              {taskbar.map((task,i) => (\n                <Tooltip key={i} title={task.headertitle.innerText}>\n                  <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n                    <BadgeWrapper count={() => task.count}>\n                      <Icon className={classNames(classes.taskicon, task.headerlogo.innerText)}>{task.headerlogo.innerText}</Icon>\n                      {!window.client.mobile && task.headertitle.innerText}\n                    </BadgeWrapper>\n                  </Button>\n                </Tooltip>\n              ))}\n              <div className={classes.tasksep}></div>\n              {buttons.map((button,i) => !button.disabled && (\n                <Tooltip key={i} title={button.tooltip}>\n                  <Button aria-label={button.name} onClick={this.pushButton(button)}>\n                    <BadgeIcon count={this.showCount(button)}>\n                      {button.icon}\n                    </BadgeIcon>\n                  </Button>\n                </Tooltip>\n              ))}\n            </div>\n            \n            <Tooltip title=\"Client utilities...\">\n              <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n                <MenuIcon />\n              </Button>\n            </Tooltip>\n            \n            <SwipeableDrawer\n              variant=\"temporary\"\n              anchor=\"left\"\n              open={open}\n              onClose={this.closeDrawer}\n              onOpen={this.openDrawer}\n              \n            >\n              <Settings closeDrawer={this.closeDrawer} />\n            </SwipeableDrawer>\n\n            <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n              <form onSubmit={this.searchHelp}>\n                <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"off\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n              </form>\n              <Button fullWidth onClick={this.searchHelp}>\n                Get Help\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n              <form onSubmit={this.saveLog}>\n                <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                  onChange={this.typeLog} autoFocus\n                  InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n                />\n              </form>\n              <Button fullWidth onClick={this.saveLog}>\n                Save Log\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n              <form onSubmit={this.handleURL} className={classes.padded}>\n                <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n              </form>\n              <Button onClick={this.handleURL}>\n                Upload URL\n              </Button>\n              <input\n                accept=\"text/plain\"\n                className={classes.fileinput}\n                id=\"file.upload\"\n                type=\"file\"\n                onChange={this.handleFile}\n              />\n              <label htmlFor=\"file.upload\">\n                <Button component=\"span\">\n                  Choose File\n                </Button>\n              </label>\n              <Button onClick={this.previewUpload}>\n                Paste Text\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n              <List className={classes.historyPopover}>\n                {rev.map((cmd, i) => (\n                  <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                    <ListItemText primary={cmd} />\n                  </ListItem>\n                ))}\n              </List>\n              <Button onClick={this.clearHistory}>\n                Clear History\n              </Button>\n            </Popover>\n            \n            <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n              <MenuItem onClick={this.closeMenu}>\n                <Tooltip title=\"Close menu.\">\n                  <ExpandLessIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openDrawer}>\n                <Tooltip title=\"Change settings.\">\n                  <SettingsIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openCustomizer}>\n                <Tooltip title=\"Client customization.\">\n                  <BuildIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n                <Tooltip title=\"Upload file/URL.\">\n                  <CloudUploadIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n                <Tooltip title=\"Save display log.\">\n                  <SaveIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n                <Tooltip title=\"Show command history.\">\n                  <KeyboardIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.clearScreen}>\n                <Tooltip title=\"Clear screen.\">\n                  <BackspaceIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.reconnect}>\n                <Tooltip title=\"Reconnect.\">\n                  <WifiIcon />\n                </Tooltip>\n              </MenuItem>            \n            </Menu>\n\n            <div className={classes.tasksep}></div>\n          </Toolbar>\n        </AppBar>\n        \n        {(!mobileHideTaskbar || buttons.length > 0) && (\n          <div className={classes.sectionMobile}>\n            <AppBar position=\"relative\">\n              <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons, flexContainer: classes.buttonBar }}>\n                {buttons.length > 0 && buttons.map((button,i) => !button.disabled && (\n                  <Tooltip key={i} title={button.tooltip}>\n                    <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                      aria-label={button.name} \n                      icon={(<BadgeIcon count={this.showCount(button)}>{button.icon}</BadgeIcon>)}\n                      onClick={this.pushButton(button)}\n                    />\n                  </Tooltip>\n                ))}\n              </Tabs>\n            </AppBar>\n          </div>\n        )}\n        \n        {(!mobileHideTaskbar || taskbar.length > 0) && (\n          <div className={classes.sectionMobile}>\n            <AppBar position=\"relative\">\n              <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n                {taskbar.length > 0 && taskbar.map((task,i) => (\n                  <Tooltip key={i} title={task.headertitle.innerText}>\n                    <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                      aria-label=\"open-task\"\n                      label={(\n                        <span>\n                          <BadgeWrapper count={() => task.count}>\n                            <Icon className={classNames(classes.taskicon, task.headerlogo.innerText)}>{task.headerlogo.innerText}</Icon>\n                          </BadgeWrapper>\n                          {task.headertitle.innerText}\n                        </span>\n                      )}\n                      onClick={() => this.popTask(task)}\n                    />\n                  </Tooltip>\n                ))}\n              </Tabs>\n            </AppBar>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\n//import AceEditor from 'react-ace';\n//import 'brace/mode/mushcode';\n//import 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body: this.editor.current.value });\n  };\n  \n  onResize = () => {\n    //this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <textarea className={classNames(classes.bodytext, font, ansiFG, ansiBG)}\n            ref={this.editor}\n            width=\"100%\"\n            value={body}\n            onChange={this.changeText}\n          />\n{/*\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n*/}\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","\n\nclass Templates {\n  constructor() {\n    // blank triggers, timers, macros, and keybindings\n    this.empty = {\n      buttons: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        icon: \"widgets\",\n        count: \"0\",\n        tooltip: \"\",\n        \n      },\n      triggers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n        suppress: false,\n      },\n      timers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        delay: 0,\n        repeat: false,\n        times: 0,\n      },\n      macros: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n      },\n      keys: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        keycode: null,\n        ctrl: false,\n        alt: false,\n        shift: false,\n      },\n      css: {\n        name: \"\",\n        text: \"\",\n      },\n      scripts: {\n        name: \"\",\n        text: \"// Insert JavaScript below.\\n\",\n      },\n    };\n    \n    this.saved = {\n      buttons: [\n        {\n          name: \"look\",\n          text: \"look\",\n          javascript: false,\n          icon: \"remove_red_eye\",\n          count: \"\",\n          tooltip: \"Look around.\",\n        },\n        {\n          name: \"inventory\",\n          text: \"inventory\",\n          javascript: false,\n          icon: \"business_center\",\n          count: \"\",\n          tooltip: \"What am I carrying?\",\n        },\n        {\n          name: \"who\",\n          text: \"who\",\n          javascript: false,\n          icon: \"people\",\n          count: \"\",\n          tooltip: \"Who's online?\",\n        },\n        {\n          name: \"Mailbox\",\n          text: \"SendAPI(\\\"maillist\\\");\",\n          javascript: true,\n          icon: \"mail\",\n          count: \"client.react.taskbar.state.unreadMail\",\n          tooltip: \"@mail Inbox\",\n        },\n        {\n          name: \"BBoard\",\n          text: \"SendAPI(\\\"boardlist\\\");\",\n          javascript: true,\n          icon: \"forum\",\n          count: \"client.react.taskbar.state.unreadBB\",\n          tooltip: \"Bulletin Boards\",\n        },\n        {\n          name: \"help\",\n          text: \"client.react.taskbar.showHelp(event);\",\n          javascript: true,\n          icon: \"search\",\n          count: \"\",\n          tooltip: \"Search help files\",\n        },\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          icon: \"widgets\",\n          count: \"\",\n          tooltip: \"\",\n        },\n*/        \n      ],\n      triggers: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          pattern: \"\",\n          regex: false,\n          suppress: false,\n        }\n*/\n        {\n          name: \"PerChannel\",\n          text: \"Window(\\\"%1\\\").SaveHistory().Prefix(\\\"+%1 \\\").AutoHide().append(\\\"%0\\\");\",\n          javascript: true,\n          pattern: \"<*> *\",\n          regex: false,\n          suppress: true,\n        },\n        {\n          name: \"AllChannels\",\n          text: \"Window(\\\"Channels\\\").SaveHistory().append(\\\"%0\\\");\",\n          javascript: true,\n          pattern: \"<*> *\",\n          regex: false,\n          suppress: true,\n        },\n      ],\n      timers: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          delay: 0,\n          repeat: false,\n          times: 0,\n        },\n*/\n      ],\n      macros: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          pattern: \"\",\n          regex: false,\n        },\n*/\n        {\n          name: \"OpenWindow\",\n          text: \"Window(\\\"%2\\\").SaveHistory().Prefix(\\\"+%2 \\\").Focus();\",\n          javascript: true,\n          pattern: \"/win(dow)? (.*)\",\n          regex: true,\n        },\n        {\n          name: \"ChannelRecall\",\n          text: \"th crecall(%1,100,,%r)\",\n          javascript: false,\n          pattern: \"/recall *\",\n          regex: false,\n        },\n      ],\n      keys: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          keycode: null,\n          ctrl: false,\n          alt: false,\n          shift: false,\n        },\n*/\n      ],\n      css: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n        },\n*/\n      ],\n      scripts: [\n/*\n        {\n          name: \"\",\n          text: \"// Insert JavaScript below.\\n\",\n        },\n*/\n      ],\n    };\n  }\n\n}\n\n\n\nexport default Templates;\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 10000;\nconst HISTORY_KEY = \"output_history\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    height: \"100%\",\n    bottom: 0,\n    right: 0,\n  },\n  lineheight: {\n    lineHeight: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.body.onresize = this.onResize;\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    \n    if (window.client.settings.historySize > 0) {\n      window.client.output.loadHistory(HISTORY_KEY);\n    }\n    \n    this.onResize();\n  }\n  \n  onResize = event => {\n    clearTimeout(this.doResize);\n    setTimeout(this.doResize, 1000);\n  };\n  \n  doResize = () => {\n    const client = window.client;\n    client.output.calcDimensions();\n    client.sendText(\"SCREENWIDTH \" + Math.min(client.settings.wrapWidth, Math.floor(window.client.output.root.parentNode.clientWidth / window.client.output.dims.width)));\n    client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n    client.output.scrollDown();\n    \n    client.mobile = !window.matchMedia(this.props.theme.breakpoints.up('md').substring(7)).matches;\n    \n    this.onChange();\n  };\n\n  onChange = () => {\n    if (window.client.settings.historySize > 0) {\n      window.client.output.saveHistory(HISTORY_KEY, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySize));\n    }\n    \n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    const { fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classNames(classes.frame)} style={font} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\" variant=\"caption\" className={classes.lineheight}>\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport IconButton from '@material-ui/core/IconButton';\n\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"1.5em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n    [theme.breakpoints.up('md')]: {\n      height: \"3em\",\n    },\n  },\n  buttons: {\n//    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"center\",\n    alignContent: \"center\",\n    [theme.breakpoints.up('md')]: {\n      flexFlow: \"column wrap\",\n    },\n  },\n  smallIcons: {\n    padding: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  recallBack = () => {\n    window.client.input.cycleBackward();\n    window.client.input.focus(true);\n  };\n  \n  recallForward = () => {\n    window.client.input.cycleForward();\n    window.client.input.focus(true);\n  };\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    const { fontFamily, fontSize, recallButtons, recallAnchor } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n    \n    const buttons = (\n      <span className={classes.buttons}>\n        <IconButton classes={{ root: classes.smallIcons }} onClick={this.recallBack}>\n          <ArrowDropUpIcon />\n        </IconButton>\n        <IconButton classes={{ root: classes.smallIcons }} onClick={this.recallForward}>\n          <ArrowDropDownIcon />\n        </IconButton>\n      </span>\n    );\n    \n    return (\n      <div className={classes.frame}>\n        {recallButtons && recallAnchor === \"left\" && buttons}\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)} style={font}  autoComplete=\"off\" autoFocus={!window.client.mobile}></textarea>\n        {recallButtons && recallAnchor === \"right\" && buttons}\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \"\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    const { mobileHideStatusbar } = window.client.settings;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        {!mobileHideStatusbar && (\n          <Typography\n            align=\"right\"\n            color=\"textPrimary\"\n            noWrap\n          >\n            {status}\n          </Typography>\n        )}\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n  },\n  right: {\n    position: \"absolute\",\n    right: 0,\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  setMessage = (msg) => {\n    this.setState({ msg: msg });\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <Dialog\n        className={classes.frame}\n        open={open}\n        fullScreen={window.client.mobile}\n        onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n        onClose={this.closeLogin}\n        aria-labelledby=\"responsive-dialog-title\"\n        disableBackdropClick\n        disableEscapeKeyDown\n      >\n        <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n          Character Login\n          <span className={classes.right}>\n            <Tooltip title=\"Reconnect.\">\n              <IconButton onClick={this.reconnect}>\n                <WifiIcon />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Change settings.\">\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n          </span>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <span dangerouslySetInnerHTML={{ __html: msg }} />\n          </DialogContentText>\n          <TextField\n            className={classes.text}\n            autoComplete=\"username\"\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n            label=\"Character Name\"\n            type=\"string\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n          <TextField\n            className={classes.text}\n            autoComplete=\"current-password\"\n            margin=\"dense\"\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Fab className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extended\">\n            <PersonAddIcon />\n            Register\n          </Fab>\n          <Fab classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extended\">\n            <PersonOutlineIcon />\n            Guest\n          </Fab>\n          <Fab classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extended\" aria-label=\"login\">\n            <PersonIcon />\n            Login\n          </Fab>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Login);\n\n\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n//import Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst EXTRA = {\n  NORTH: false,\n  SOUTH: false,\n  WEST: false,\n  EAST: false,\n  SOUTHEAST: false,\n  SOUTHWEST: false,\n  NORTHEAST: false,\n  NORTHWEST: false,\n  UP: true,\n  DOWN: true,\n  IN: true,\n  OUT: true,\n};\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    maxWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'flex-end',\n  },\n  contents: {\n    flex: 1,\n    width: \"100%\",\n    alignSelf: 'flex-start',\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  overflow: {\n  },\n  list: {\n    width: \"100%\",\n  },\n  listHeader: {\n    lineHeight: 1.5,\n  },\n  playerItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  thingItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  exitItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  customExits: {\n    flex: 1,\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"flex-end\",\n    alignContent: \"flex-end\",\n    alignItems: \"flex-end\",\n  },\n  middle: {\n    width: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    width: \"100%\",\n  },\n  navWidget: {\n  },\n  smallIcons: {\n    padding: 0.5*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass, sidebarLargeCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n      let skip = false;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (!skip && match === -1) {\n          match = keys.indexOf(exit);\n          if (!sidebarLargeCompass && match !== -1 && EXTRA[exit]) {\n            skip = true;\n          }\n        }\n      });\n\n      if (skip || match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    const { classes } = this.props;\n    const { sidebarDense } = window.client.settings;\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton classes={(window.client.mobile || sidebarDense) ? { root: classes.smallIcons } : null} onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n\n  buildLook = () => {\n    const { classes, sidebarDense } = this.props;\n    \n    return (\n      <Tooltip title=\"Update contents.\">\n        <span>\n          <IconButton classes={sidebarDense ? { root: classes.smallIcons } : null} onClick={this.action}>\n            <RemoveRedEyeIcon />\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarDense, sidebarShowPlayers, sidebarLargeCompass,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n\n    var width;\n    var numicons = sidebarShowCompass ? (sidebarLargeCompass ? 4 : 3) : 0;\n    if (window.client.mobile || sidebarDense) {\n      width = (24 + this.props.theme.spacing.unit) * numicons;\n    } else {\n      width = 48 * numicons;\n    }\n    width = Math.min(192, Math.max(96, width)) + \"px\";\n    \n    var exitWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.middle}>\n              <div className={classes.bottom}>\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Exits</ListSubheader>}>\n                  {customExits.map((exit, i) => (\n                    <ListItem className={classNames(classes.exitItem, i%2 ? classes.odd : classes.even)} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                      <ListItemText primary={exit.split(\";\")[0]} />\n                    </ListItem>\n                  ))}\n                </List>\n              </div>\n            </div>\n          </div>\n        );\n      }\n      \n      var navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {sidebarLargeCompass && this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {sidebarLargeCompass ? this.buildExit(\"In\") : this.buildLook()}\n            {this.buildExit(\"East\")}\n            {sidebarLargeCompass && this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {sidebarLargeCompass && this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n\n    return (\n      <div className={classes.frame} style={{ width: width }} onClick={() => window.client.focus()}>\n        {((sidebarShowPlayers && players.length > 0) || (sidebarShowThings && things.length > 0)) && (\n          <div className={classes.contents}>\n            <span className={classes.overflow}>\n              {sidebarShowPlayers && players.length > 0 && (\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Players</ListSubheader>}>\n                  {players.map((player, i) => (\n                    <ListItem className={classNames(classes.playerItem, i%2 ? classes.odd : classes.even)} key={i}\n                      button onClick={() => this.sendCommand(\"look \"+player)}\n                    >\n{/*\n                      {!sidebarDense && (\n                        <ListItemAvatar>\n                          <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                        </ListItemAvatar>\n                      )}\n*/}\n                      <ListItemText primary={player} />\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n              {sidebarShowThings && things.length > 0 && (\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Contents</ListSubheader>}>\n                  {things.map((thing, i) => (\n                    <ListItem className={classNames(classes.thingItem, i%2 ? classes.odd : classes.even)} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                      <ListItemText primary={thing} />\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n            </span>\n          </div>\n        )}\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarDense: PropTypes.bool.isRequired,\n  sidebarLargeCompass: PropTypes.bool.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarDense,\n      sidebarLargeCompass } = window.client.settings;\n      \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarLargeCompass={sidebarLargeCompass} sidebarDense={sidebarDense} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = \"font-family: '\" + fontFamily + \"', monospace; font-size: \" + (window.client.mobile ? fontSize/2 : fontSize) + \"pt;\";\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/mode/javascript';\nimport 'brace/mode/css';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    overflow: \"hidden\",\n  },\n  form: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    flexFlow: \"column nowrap\", \n  },\n  container: {\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  name: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n  },\n  flow: {\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  top: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n    [theme.breakpoints.down('sm')]: {\n      flex: 1,\n    },\n  },\n  editor: {\n    flex: 1,\n    margin: theme.spacing.unit+\"px 0\",\n    [theme.breakpoints.down('sm')]: {\n      margin: 0,\n      fontSize: \"16pt\",\n    },\n  },\n  bottom: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    width: \"100%\",\n  },\n  middle: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      flex: 1,\n      alignItems: \"center\",\n    },\n  },\n  align: {\n    width: \"100%\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n  },\n  flex: {\n    flex: 1,\n    minWidth: \"10em\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  mobileOnly: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  desktopOnly: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass FormEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const { list, listName, selected, template } = props;\n\n    const empty = window.client.templates.empty[listName];\n    \n    this.state = {\n      list: list,\n      item: Object.assign({}, list && selected > -1 ? list[selected] : (template || empty)),\n      selected: selected,\n      status: \"\",\n      error: false,\n      javascript: true,\n      needsToResize: false,\n    };\n    \n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    this.props.panel.options.resizeit.resize = null;\n    clearTimeout(this.clearStatus);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { list, listName, selected, template } = props;\n    \n    const empty = window.client.templates.empty[listName];\n    \n    var newState = {};\n    \n    if (list !== state.list) {\n      newState.list = list;\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (selected !== state.selected) {\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (template !== state.template) {\n      newState.template = template;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    return null;\n  }\n  \n  defaultText() {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const name = item.name;\n    \n    if (!immutable) return \"\";\n    \n    if (list && selected > -1 && list[selected].text !== \"\") {\n      return list[selected].text.slice();\n    }\n    \n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          item.name = name;\n          item.text = req.responseText;\n          this.setState({ item, list, selected });\n        } else {\n          alert(\"Unable to download file! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", \"./\" + name);\n    req.send();\n    \n    return window.client.templates.empty[listName].text.slice();\n  }\n\n  setStatus = (error, status) => {\n    this.setState({ error: error, status: status });\n    clearTimeout(this.clearStatus);\n    setTimeout(this.clearStatus, 3000);\n  };\n\n  clearStatus = () => {\n    this.setState({ error: false, status: \"\" });\n  };\n  \n  handleChange = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.value;\n    this.setState({ item });\n  };\n  \n  handleNumber = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = parseInt(e.target.value);\n    this.setState({ item });\n  };\n  \n  handleSwitch = (key) => (e) => {\n    const { item } = this.state;\n    if (item.hasOwnProperty(key)) {\n      item[key] = e.target.checked;\n      this.setState({ item });\n    } else {\n      this.setState({ [key]: e.target.checked });\n    }\n  };\n  \n  changeText = (text) => {\n    const { item } = this.state;\n    item.text = text;\n    this.setState({ item });\n  };\n\n  save = () => {\n    const { list, listName, Form } = this.props;\n    const css = listName === \"CSS\";\n  \n    if (Form && Form.save) {\n      Form.save();\n    } else if (css) {\n      window.client.saveCSS();\n    } else {\n      window.client.saveLocalStorage(list, listName);\n    }\n    \n    window.client.react.taskbar.forceUpdate();\n  };\n\n  onResize = () => {\n    this.setState({ needsToResize: false });\n    this.editor.current.editor.resize();\n  };\n  \n  onSubmit = (e) => {\n    const { list, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n\n    e.preventDefault();\n\n    if (item.name === \"\") {\n      this.setStatus(true, \"Name must not be blank.\" );\n      return;\n    }\n    \n    var match = list.map((item) => item.name).indexOf(item.name);\n    if (match > -1 && match !== selected) {\n      this.setStatus(true, \"Name already saved, choose another.\");\n      return;\n    }\n    \n    if (immutable && selected === -1) {\n      this.setStatus(true, \"You may only edit existing items.\");\n      return;\n    }\n    \n    this.setStatus(false, \"Saved.\" );\n    \n    if (selected > -1) {\n      list[selected] = item;\n      client.react.customizer.setState({ selected: selected });\n    } else {\n      list.push(item);\n      client.react.customizer.setState({ selected: list.length-1 });\n    }\n    \n    this.save();\n    \n  };\n  \n  onDelete = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const client = window.client;\n    \n    if (window.confirm(\"Do you really want to delete that?\") && list && selected > -1) {\n      if (immutable) {\n        let name = list[selected].name;\n        list[selected] = Object.assign({}, client.templates.empty[listName]);\n        list[selected].name = name;\n        this.setState({ item: Object.assign({}, list[selected]) });\n      } else {\n        list.splice(selected, 1);\n        client.react.customizer.setState({ selected: -1 });\n      }\n      \n      this.setStatus(false, \"Deleted.\" );\n      \n      this.save();\n    }\n  };\n  \n  onReset = () => {\n    const { list, listName, selected, immutable, template } = this.props;\n    const { item } = this.state;\n    var empty = Object.assign({}, window.client.templates.empty[listName]);\n    \n    if (list && selected > -1) {\n      if (immutable) {\n        empty.name = list[selected].name;\n        if (item.text === \"\") {\n          empty.text = this.defaultText();\n        } else {\n          empty.text = list[selected].text;\n        }\n      } else {\n        empty = list[selected];\n      }\n    }\n    \n    this.setState({\n      item: Object.assign({}, template || empty),\n    });\n    \n    this.setStatus(false, \"Reset.\");\n  };\n  \n  componentDidUpdate() {\n    if (this.state.needsToResize) {\n      this.onResize();\n    }\n  }\n  \n  render() {\n    const { classes, selected, Form, immutable } = this.props;\n    const { item, error, status } = this.state;\n    \n    var ltype = \"MushCode\";\n    var rtype = \"JavaScript\";\n    if (!Form) {\n      ltype = \"Text\";\n      if (item.name.endsWith('.css')) {\n        rtype = \"CSS\";\n      }\n    }\n    \n    var mode = this.state.javascript;\n    if (item.hasOwnProperty('javascript')) {\n      mode = item.javascript;\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <form onSubmit={this.onSubmit} className={classes.form}>\n          <div className={classes.container}>\n            <div className={classes.top}>\n              <div className={classes.name}>\n                <TextField label=\"Name\" className={classes.flex} value={item.name} onChange={this.handleChange('name')} disabled={immutable} InputProps={{ classes: { input: classes.inputBase }, }} />\n                <span className={classes.switchText}>\n                  <Typography>{ltype}</Typography>\n                  <Switch checked={mode}\n                    classes={{ switchBase: classes.switchBase }}\n                    color=\"default\"\n                    onChange={this.handleSwitch('javascript')}\n                  />\n                  <Typography>{rtype}</Typography>\n                </span>\n              </div>\n              {Form && (<Form item={item} handleNumber={this.handleNumber} handleChange={this.handleChange} handleSwitch={this.handleSwitch} />)}\n            </div>\n            \n            <div className={classes.editor}>\n              <AceEditor\n                width=\"100%\"\n                height=\"100%\"\n                minHeight=\"4em\"\n                minWidth=\"10em\"\n                className={classes.editor}\n                ref={this.editor}\n                mode={mode ? rtype.toLowerCase() : ltype.toLowerCase()}\n                theme=\"tomorrow_night_bright\"\n                value={item.text}\n                onChange={this.changeText}\n                wrapEnabled={true}\n                highlightActiveLine={false}\n                editorProps={{ $blockScrolling: Infinity }}\n              />\n            </div>\n          </div>\n          \n          <div className={classes.bottom}>\n            <Button className={classes.mobileOnly} classes={{ label: classes.block }} onClick={() => window.client.react.customizer.setState({ edit: false, selected: -1 })}>\n              <CloseIcon /><span className={classes.desktopOnly}>Close</span>\n            </Button>\n            <Button onClick={this.onDelete} classes={{ label: classes.block }} disabled={selected === -1}>\n              <DeleteIcon /><span className={classes.desktopOnly}>Delete</span>\n            </Button>\n            <span className={classes.middle}>\n              <Typography className={classes.align} color={error ? \"error\" : \"default\"}>\n                {status}\n              </Typography>\n            </span>\n            <Button onClick={this.onSubmit} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              <SaveIcon /><span className={classes.desktopOnly}>Save</span>\n            </Button>\n            <Button onClick={this.onReset} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              {immutable && item.text === \"\" ? (<CloudDownloadIcon />) : (<UndoIcon />)}\n              <span className={classes.desktopOnly}>\n                {immutable && item.text === \"\" ? \"Source\" : \"Reset\"}\n              </span>\n            </Button>\n          </div>\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nFormEditor.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n  list: PropTypes.array.isRequired,\n  listName: PropTypes.string.isRequired,\n  selected: PropTypes.number.isRequired,\n  Form: PropTypes.func,\n  immutable: PropTypes.bool,\n  template: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(FormEditor);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TriggerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  static save() {\n    window.client.saveTriggers();\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} classes={{ switchBase: classes.switchBase }} />\n            <Typography>RegExp</Typography>\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Suppress terminal output?</Typography>\n            <Switch checked={item.suppress} onChange={handleSwitch('suppress')} classes={{ switchBase: classes.switchBase }} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nTriggerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TriggerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MacroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  static save() {\n    window.client.saveMacros();\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} classes={{ switchBase: classes.switchBase }} />\n            <Typography>RegExp</Typography>\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nMacroForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MacroForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ButtonForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  static save() {\n    window.client.saveButtons();\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange } = this.props;\n    \n    const icon = item.icon.startsWith('icon-');\n    \n    return (\n      <div className={classes.frame}>\n        <Tooltip title=\"Button preview.\">\n          <IconButton>\n            <Icon className={icon ? item.icon : null}>{!icon && item.icon}</Icon>\n          </IconButton>\n        </Tooltip>\n        <TextField label=\"Icon\" value={item.icon} onChange={handleChange('icon')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <TextField label=\"Badge Expression\" fullWidth value={item.count} onChange={handleChange('count')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <TextField label=\"Tooltip\" fullWidth value={item.tooltip} onChange={handleChange('tooltip')} inputProps={{ classes: { input: classes.inputBase } }} />\n      </div>\n    );\n  }\n}\n\nButtonForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(ButtonForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Switch from '@material-ui/core/Switch';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\n//import KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport ReorderIcon from '@material-ui/icons/Reorder';\nimport SortIcon from '@material-ui/icons/Sort';\n\nimport FormEditor from './FormEditor';\nimport TriggerForm from './TriggerForm';\n//import TimerForm from './TimerForm';\nimport MacroForm from './MacroForm';\n//import KeyForm from './KeyForm';\nimport ButtonForm from './ButtonForm';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  container: {\n    padding: theme.spacing.unit,\n    flex: 1,\n    display: \"flex\",\n    \"flex-flow\": \"row wrap\",\n    [theme.breakpoints.up('md')]: {\n      padding: 3*theme.spacing.unit,\n    },\n  },\n  left: {\n    marginRight: 0,\n    [theme.breakpoints.up('md')]: {\n      marginRight: 3*theme.spacing.unit,\n    }\n  },\n  right: {\n    position: \"relative\",\n    flex: 1,\n    height: \"100%\",\n    overflow: \"hidden\",\n  },\n  listText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  overflow: {\n    flex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      height: \"100%\",\n      display: 'flex',\n      flexFlow: \"column nowrap\",\n      justifyContent: \"space-between\",\n    },\n  },\n  mobileOpen: {\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n  },\n  scrollButtons: {\n    [theme.breakpoints.down('sm')]: {\n      flex: '0 0 24px',\n      padding: 0,\n      alignSelf: \"center\",\n    }\n  },\n  subHeader: {\n    width: \"100%\",\n    flex: 1,\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  arrowButton: {\n    flex: '0 0 24px',\n    padding: 0,\n    alignSelf: \"flex-end\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n});\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Customizer extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const client = window.client;\n    \n    this.tabs = [\n      {\n        list: client.buttons,\n        listName: \"Buttons\",\n        Form: ButtonForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.triggers,\n        listName: \"Triggers\",\n        Form: TriggerForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.macros,\n        listName: \"Macros\",\n        Form: MacroForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.css,\n        listName: \"CSS\",\n        Form: null,\n        immutable: true,\n        sortable: false,\n      },\n      {\n        list: client.scripts,\n        listName: \"Scripts\",\n        Form: null,\n        immutable: true,\n        sortable: false,\n      },\n/*\n      {\n        list: client.timers,\n        listName: \"Timers\",\n        Form: TimerForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.keys,\n        listName: \"Keys\",\n        Form: KeyForm,\n        immutable: false,\n        sortable: true,\n      },\n*/\n    ];\n    \n    this.state = {\n      tab: 0,\n      edit: false,\n      selected: -1,\n      menuAnchor: null,\n      template: null,\n      helpText: null,\n      sortList: false,\n    };\n  }\n\n\n  ///////////////////////////////////////////////////////////////////\n\n\n  changeTab = (event, tab) => {\n    this.setState({ tab, selected: -1, edit: false, template: null });\n  };\n  \n  onSelect = (key) => (event) => {\n    this.setState({ selected: key, template: null });\n  };\n  \n  showTemplates = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  hideTemplates = () => {\n    this.setState({ menuAnchor: null });\n  };\n  \n  chooseTemplate = template => () => {\n    this.setState({ template, edit: true, selected: -1 });\n  };\n  \n  handleSwitch = (item) => (e) => {\n    item.disabled = !e.target.checked;\n    this.saveList();\n  };\n  \n  saveList = () => {\n    const tab = this.tabs[this.state.tab];\n    const css = tab.listName === \"CSS\";\n    \n    if (tab.Form && tab.Form.save) {\n      tab.Form.save();\n    } else if (css) {\n      window.client.saveCSS();\n    } else {\n      window.client.saveLocalStorage(tab.list, tab.listName);\n    }\n    \n    this.forceUpdate();\n  };\n  \n  toggleSort = (e) => {\n    this.setState({ sortList: !this.state.sortList });\n  };\n  \n  moveItemUp = (list, i) => {\n    if (i === 0) return;\n    \n    var tmp = list[i-1];\n    list[i-1] = list[i];\n    list[i] = tmp;\n    \n    if (i === this.state.selected) {\n      this.setState({ selected: i-1 });\n    }\n\n    this.saveList();\n  };\n  \n  moveItemDown = (list, i) => {\n    if (i === list.length-1) return;\n    \n    var tmp = list[i+1];\n    list[i+1] = list[i];\n    list[i] = tmp;\n    \n    if (i === this.state.selected) {\n      this.setState({ selected: i+1 });\n    } else if (i+1 === this.state.selected) {\n      this.setState({ selected: i });\n    }\n\n    this.saveList();\n  };\n  \n  componentDidMount() {\n    window.client.react.customizer = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.customizer = null;\n  }\n  \n  helpText(anchor) {\n    this.setState({ helpText: anchor });\n  }\n  \n  render() {\n    const { classes, panel } = this.props;\n    const { selected, edit, helpText, menuAnchor, template, sortList } = this.state;\n    \n    const tab = this.tabs[this.state.tab];\n    const smallName = tab.listName.toLowerCase();\n    const templates = window.client.templates.saved[smallName];\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar position=\"static\">\n          <Tabs value={this.state.tab} scrollable scrollButtons=\"on\" onChange={this.changeTab} ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n            {this.tabs.map((t,i) => (<Tab key={i} label={t.listName} />))}\n          </Tabs>\n        </AppBar>\n        <Typography className={classes.container} component=\"div\">\n          <div className={classes.left}>\n            <span className={edit || selected > -1 ? classes.mobileClose : classes.mobileOpen}>\n              <div className={classes.overflow}>\n                <List disablePadding dense subheader={\n                  <ListSubheader disableGutters className={classes.subHeader}>\n                    {tab.listName}\n                    <Tooltip title=\"Reorder list.\">\n                      <IconButton disabled={!tab.sortable} onClick={this.toggleSort}>\n                        {sortList ? (<SortIcon />) : (<ReorderIcon />)}\n                      </IconButton>\n                    </Tooltip>\n                  </ListSubheader>\n                }>\n                  {tab.list.map((item, i) => (\n                    <ListItem key={i} dense button divider selected={selected === i} onClick={this.onSelect(i)} className={i % 2 === 0 ? classes.even : classes.odd}>\n                      <ListItemIcon className={classes.listNum}>\n                          <span>{i+1}</span>\n                      </ListItemIcon>\n                      <ListItemText className={classes.listText} primary={item.name} />\n                      {!tab.immutable && (\n                        <ListItemSecondaryAction>\n                          {sortList ? (\n                            <IconButton classes={{ root: classes.arrowButton }} disabled={i === tab.list.length-1} onClick={() => this.moveItemDown(tab.list, i)}>\n                              <KeyboardArrowDownIcon />\n                            </IconButton>\n                          ) : (\n                            <Switch checked={!item.disabled}\n                              classes={{ switchBase: classes.switchBase }}\n                              onChange={this.handleSwitch(item)}\n                            />\n                          )}\n                        </ListItemSecondaryAction>\n                      )}\n                    </ListItem>\n                  ))}\n                  {tab.list.length < 1 && (\n                    <ListItem key={-1} dense className={classes.even}>\n                      <ListItemText className={classes.listText} secondary={\"No \"+smallName} />\n                    </ListItem>\n                  )}\n                </List>\n              </div>\n              \n              {templates && templates.length > 0 && (\n                <Button aria-owns={menuAnchor ? 'template.menu' : null} aria-label=\"open-templates\" aria-haspopup=\"true\" classes={{ label: classes.block }} onClick={this.showTemplates}>\n                  <FileCopyIcon />\n                  Templates\n                </Button>\n              )}\n              \n              {!tab.immutable && (\n                <Button classes={{ label: classes.block }} onClick={() => this.setState({ edit: true, selected: -1, template: null })}>\n                  <AddCircleIcon />\n                  New {tab.listName.slice(0,-1)}\n                </Button>\n              )}\n            </span>\n          </div>\n          <div className={classes.right}>\n            <div className={edit || selected > -1 ? classes.mobileOpen : classes.mobileClose}>\n              <FormEditor list={tab.list} listName={smallName} template={template} selected={selected} panel={panel} Form={tab.Form} immutable={tab.immutable} />\n            </div>\n          </div>\n        </Typography>\n        \n        <Menu disableEnforceFocus id=\"template.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.hideTemplates} onClose={this.hideTemplates}>\n          {templates && templates.map((tmpl, i) => (\n            <MenuItem key={i} onClick={this.chooseTemplate(tmpl)}>\n              {tmpl.name}\n            </MenuItem>\n          ))}\n        </Menu>\n        \n        \n        <Popover anchorEl={helpText} open={Boolean(helpText)} onClose={() => this.setState({ helpText: null })}>\n          <Typography>\n            This is where help text goes.\n          </Typography>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nCustomizer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Customizer);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              <div>{maillist.length} Messages ({unread} unread)</div>\n              <span>\n                <Tooltip title=\"Move multiple files to trash.\">\n                  <IconButton onClick={this.toggleDelete}>\n                    <DeleteSweepIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Purge deleted mail.\">\n                  <IconButton onClick={this.purgeMail}>\n                    <DeleteForeverIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Send a new message.\">\n                  <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                    <CreateIcon />\n                  </IconButton>\n                </Tooltip>\n              </span>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  mobileOnly: {\n    display: 'block',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body+'\\n');\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: fontSize + \"pt\",\n    };\n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body+'\\n');\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.mobileOnly} onClick={() => window.client.react.mailbox.setState({ mailitem: null })}>\n            <Icon>\n              <CloseIcon />\n            </Icon>\n            Close\n          </Button>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  mobileOpen: {\n    display: 'flex',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addPanel(\"Sendmail\", { icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <span className={mailitem ? classes.mobileClose : classes.mobileOpen}>\n            { maillist && (\n              <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n            )}\n          </span>\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={classNames(window.client.settings.ansiFG, window.client.settings.ansiBG)}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\n\nimport ColorPicker from './ColorPicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentDecreaseIcon from '@material-ui/icons/FormatIndentDecrease';\nimport PublicIcon from '@material-ui/icons/Public';\nimport SettingsEthernetIcon from '@material-ui/icons/SettingsEthernet';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport FontDownloadIcon from '@material-ui/icons/FontDownload';\nimport FormatSizeIcon from '@material-ui/icons/FormatSize';\nimport HistoryIcon from '@material-ui/icons/History';\nimport MobileScreenShareIcon from '@material-ui/icons/MobileScreenShare';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport UnfoldMoreIcon from '@material-ui/icons/UnfoldMore';\nimport RepeatIcon from '@material-ui/icons/Repeat';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n    overflowY: \"auto\",\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    flexFlow: \"row wrap\",\n    [theme.breakpoints.up('md')]: {\n      justifyContent: 'space-evenly',\n    },\n  },\n  list: {\n    flexGrow: 0,\n    flexBasis: 'auto',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    right: 0,\n    top: 0,\n    bottom: 0,\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"column-reverse nowrap\",\n    [theme.breakpoints.up('md')]: {\n      flexFlow: \"row nowrap\",\n    },\n  },\n  reset: {\n    flex: 1,\n  },\n  close: {\n    flex: 1,\n  },\n  leftright: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  noPadding: {\n    padding: 0,\n  },\n  summaryText: {\n    marginLeft: theme.spacing.unit,\n  },\n  panel: {\n    width: \"100%\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n      expandAll: false,\n    };\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleExpand = panel => (event, expanded) => {\n    this.setState({\n      expanded: expanded ? panel : false,\n      expandAll: false,\n    });\n  };\n\n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { expanded, expandAll, debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth,\n      invertHighlight, debugActions, serverAddress, serverPort, serverSSL, sidebarLargeCompass, recallButtons,\n      historySize, historySpawnSize, mobileHideTaskbar, mobileHideStatusbar, allowServerChange, recallAnchor,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, sidebarShowPlayers, fontFamily, fontSize, recallSize,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarDense } = this.state;\n    const isMobile = window.client.mobile;\n   \n    var debugging = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Debugging Console</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <BugReportIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <BugReportIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Debug user-defined actions?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={debugActions} value=\"debugActions\" onChange={this.handleSwitch('debugActions')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var connection = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Server Connection</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <PublicIcon />\n          </ListItemIcon>\n          <TextField label=\"Server address\" disabled={!allowServerChange} value={serverAddress} onChange={this.handleValue('serverAddress')} />\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <SettingsEthernetIcon />\n          </ListItemIcon>\n          <TextField label=\"Server port\" disabled={!allowServerChange} value={serverPort} onChange={this.handleValue('serverPort')} type=\"number\" />\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <SecurityIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Encrypt connection with SSL?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={serverSSL} disabled={!allowServerChange} value=\"serverSSL\" onChange={this.handleSwitch('serverSSL')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var history = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Output History</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"History Size\" value={historySize} onChange={this.handleValue('historySize')} type=\"number\" helperText=\"Lines of terminal output history.\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"Spawn History Size\" value={historySpawnSize} onChange={this.handleValue('historySpawnSize')} type=\"number\" helperText=\"Lines of spawn window history.\" />\n        </ListItem>\n      </List>\n    );\n    \n    var input = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Command Recall</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"Recall History Size\" value={recallSize} onChange={this.handleValue('recallSize')} type=\"number\" helperText=\"Commands in recall history.\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <RepeatIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show command history buttons?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={recallButtons} value=\"recallButtons\" onChange={this.handleSwitch('recallButtons')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!recallButtons} className={classes.leftright}>\n          <Icon color=\"action\">\n            <BorderLeftIcon />\n          </Icon>\n          <Typography>Left</Typography>\n          <Switch checked={recallAnchor === \"right\"}\n            color=\"default\" disabled={!recallButtons}\n            value={recallAnchor === \"right\" ? \"left\" : \"right\"}\n            onChange={this.handleValue('recallAnchor')}\n          />\n          <Typography>Right</Typography>\n          <Icon color=\"action\">\n            <BorderRightIcon />\n          </Icon>\n        </ListItem>\n      </List>\n    );\n\n    var display = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Terminal Display</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <WrapTextIcon />\n          </ListItemIcon>\n          <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <FontDownloadIcon />\n          </ListItemIcon>\n          <TextField label=\"Font\" value={fontFamily} onChange={this.handleValue('fontFamily')} />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <FormatSizeIcon />\n          </ListItemIcon>\n          <TextField label=\"Size\" value={fontSize} onChange={this.handleValue('fontSize')} type=\"number\" />\n        </ListItem>\n      </List>\n    );\n    \n    var color = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Default Colors</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ColorPicker label=\"Background\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n        </ListItem>\n\n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ColorPicker label=\"Foreground\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Invert foreground & background?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var upload = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>@decompile/tf</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <EditIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n          <ListItemSecondaryAction>\n            <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n\n        <ListItem dense>\n          <ListItemIcon>\n            <CodeIcon />\n          </ListItemIcon>\n          <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n        </ListItem>\n      </List>\n    );\n    \n    var sidebarDisplay = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Sidebar Display</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <VerticalSplitIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <PictureInPictureIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen} className={classes.leftright}>\n          <Icon color=\"action\">\n            <BorderLeftIcon />\n          </Icon>\n          <Typography>Left</Typography>\n          <Switch checked={sidebarAnchor === \"right\"}\n            color=\"default\" disabled={!sidebarOpen}\n            value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n            onChange={this.handleValue('sidebarAnchor')}\n          />\n          <Typography>Right</Typography>\n          <Icon color=\"action\">\n            <BorderRightIcon />\n          </Icon>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <FormatIndentDecreaseIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Use small sidebar icons?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarDense} value=\"sidebarDense\" onChange={this.handleSwitch('sidebarDense')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n      </List>\n    );\n    \n    var sidebarContent = (\n      <List className={classes.list} disabled={!sidebarOpen} disablePadding dense subheader={!isMobile && (<ListSubheader>Sidebar Content</ListSubheader>)}>\n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <AccountCircleIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show players?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <GroupWorkIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show things?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen || !sidebarShowExits || !sidebarShowCompass}>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show in, out, up, & down?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen || !sidebarShowExits || !sidebarShowCompass} checked={sidebarLargeCompass} value=\"sidebarLargeCompass\" onChange={this.handleSwitch('sidebarLargeCompass')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var mobile = (\n      <List className={classes.list} disabled={!isMobile} disablePadding dense subheader={!isMobile && (<ListSubheader>Mobile Only</ListSubheader>)}>\n        <ListItem dense disabled={!isMobile}>\n          <ListItemIcon>\n            <MobileScreenShareIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Auto hide mobile taskbar when empty?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!isMobile} checked={mobileHideTaskbar} value=\"mobileHideTaskbar\" onChange={this.handleSwitch('mobileHideTaskbar')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!isMobile}>\n          <ListItemIcon>\n            <MobileScreenShareIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Hide the status bar to save screen space?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!isMobile} checked={mobileHideStatusbar} value=\"mobileHideStatusbar\" onChange={this.handleSwitch('mobileHideStatusbar')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            {isMobile && (\n              <ExpansionPanel className={classes.panel} expanded={false} onChange={() => this.setState({ expandAll: !this.state.expandAll })}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<UnfoldMoreIcon />}>\n                  <Typography className={classes.summaryText}>{expandAll ? \"Collapse All Categories\" : \"Expand All Categories\"}</Typography>\n                </ExpansionPanelSummary>\n              </ExpansionPanel>\n            )}\n          \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'debugging'} onChange={this.handleExpand('debugging')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Debugging Console</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {debugging}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{debugging}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'connection'} onChange={this.handleExpand('connection')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Server Connection</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {connection}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{connection}</span> )}\n\n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'history'} onChange={this.handleExpand('history')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Output History</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {history}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{history}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'input'} onChange={this.handleExpand('input')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Command Recall</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {input}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{input}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'display'} onChange={this.handleExpand('display')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Display & Font</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {display}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{display}</span> )}\n              \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'color'} onChange={this.handleExpand('color')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Default Colors</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {color}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{color}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'upload'} onChange={this.handleExpand('upload')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>@decompile/tf</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {upload}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{upload}</span> )}\n\n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'sidebarDisplay'} onChange={this.handleExpand('sidebarDisplay')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Sidebar Display</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {sidebarDisplay}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{sidebarDisplay}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'sidebarContent'} onChange={this.handleExpand('sidebarContent')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Sidebar Content</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {sidebarContent}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{sidebarContent}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'mobile'} onChange={this.handleExpand('mobile')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Mobile Only</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {mobile}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n             ) : ( <span>{mobile}</span> )}\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n\nclient.execUserScript('onLoad.js');\n\n\n\n\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-37-1\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Emulator.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n  \n  onLine(that, lineBuf) {\n    Emulator.parseLinks(that, lineBuf);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    if (!data) return;\n    \n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    //var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    var txt = \"0123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 10.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  /////////////////////////////////////////////////////////\n  // save and load history buffers\n  \n  loadHistory = (key) => {\n    if (window.localStorage.hasOwnProperty(key)) {\n      const html = window.localStorage[key];\n      if (html !== \"\") {\n        try {\n          this.root.innerHTML = html + this.root.innerHTML;\n        } catch (e) {\n          console.log(\"Unable to insert history: \", e);\n        }\n      }\n    }\n  };\n\n  saveHistory = (key, size) => {\n    const store = window.localStorage;\n    \n    if (size > 0) {\n      const nodes = this.root.childNodes;\n      var start = nodes.length - 1;\n      \n      if (start < 0) return;\n      \n      var found = 0;\n      \n      for (let i = start; i > -1 && found < size; i--) {\n        let count = nodes[i].textContent.split(\"\\n\").length;\n        \n        if (nodes[i].textContent.endsWith('\\n')) {\n          count = count - 1;\n        }\n        \n        if (count > 0) {\n          found = found + count;\n          start = i;\n        }\n      }\n      \n      //var buff = \"\";\n      //for (let i = start; i < nodes.length; i++) {\n      //  buff = buff + nodes[i].outerHTML;\n      //}\n      \n      var range = document.createRange();\n      range.setStartBefore(nodes[start]);\n      range.setEndAfter(nodes[nodes.length-1]);\n      var fragment = range.cloneContents();\n      var div = document.createElement('div');\n      div.appendChild(fragment);\n      \n      store[key] = div.innerHTML;\n    } else {\n      delete store[key];\n    }\n  };\n  \n  \n}\n\nexport default Emulator;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.history.length] = this.root.value;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.history.length - 1) {\n      this.current++;\n      this.root.value = this.history[this.history.length - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.history.length - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n"],"sourceRoot":""}