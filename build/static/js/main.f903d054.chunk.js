(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){"use strict";var n=a(9),i=a(8),l=function(){function e(t){Object(n.a)(this,e),this.url=t,this.socket=null,this.isOpen=!1,this.onOpen=null,this.onError=null,this.onClose=null,this.onUpdate=null,this.onText=null,this.onObject=null,this.onHTML=null,this.onPueblo=null,this.onPrompt=null,this.hasData=!1,this.reconnect()}return Object(i.a)(e,null,[{key:"CHANNEL_TEXT",get:function(){return"t"}},{key:"CHANNEL_JSON",get:function(){return"j"}},{key:"CHANNEL_HTML",get:function(){return"h"}},{key:"CHANNEL_PUEBLO",get:function(){return"p"}},{key:"CHANNEL_PROMPT",get:function(){return">"}}]),Object(i.a)(e,[{key:"reconnect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this;this.isConnected()&&this.sendText("QUIT"),this.url=t||this.url,this.socket=new window.WebSocket(this.url),this.isOpen=!1,this.socket.onopen=function(t){e.onopen(a,t)},this.socket.onerror=function(t){e.onerror(a,t)},this.socket.onclose=function(t){e.onclose(a,t)},this.socket.onmessage=function(t){e.onmessage(a,t)}}},{key:"isConnected",value:function(){return this.socket&&this.isOpen&&1===this.socket.readyState}},{key:"close",value:function(){this.socket&&this.socket.close()}},{key:"sendText",value:function(t){this.isConnected()&&this.socket.send(e.CHANNEL_TEXT+t+"\r\n")}},{key:"sendObject",value:function(t){this.isConnected()&&this.socket.send(e.CHANNEL_JSON+window.JSON.stringify(t))}},{key:"onMessage",value:function(t,a){switch(this.onUpdate&&this.onUpdate(t,a),this.hasData=!0,t){case e.CHANNEL_TEXT:this.onText&&this.onText(a);break;case e.CHANNEL_JSON:try{this.onObject&&this.onObject(window.JSON.parse(a))}catch(n){console.log("JSON ERROR ",n,a)}break;case e.CHANNEL_HTML:this.onHTML&&this.onHTML(a);break;case e.CHANNEL_PUEBLO:this.onPueblo&&this.onPueblo(a);break;case e.CHANNEL_PROMPT:this.onPrompt&&this.onPrompt(a);break;default:return window.console&&window.console.log("unhandled message",t,a),!1}return!0}}],[{key:"onopen",value:function(e,t){e.isOpen=!0,e.onOpen&&e.onOpen(t)}},{key:"onerror",value:function(e,t){e.isOpen=!1,e.onError&&e.onError(t)}},{key:"onclose",value:function(e,t){e.isOpen=!1,e.onClose&&e.onClose(t)}},{key:"onmessage",value:function(e,t){e.onMessage&&e.onMessage(t.data[0],t.data.substring(1))}}]),e}();t.a=l},129:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(40),_=a(16),c=a(0),u=a.n(c),d=a(2),m=a.n(d),h=a(10),p=a(21),E=a.n(p),f=a(46),b=a(78),w=1e3,g="output_history_",O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).changePrefix=function(e){a.Prefix(e.target.value)},a.Prefix=function(e){return a.state.prefix!==e&&a.setState({prefix:e}),Object(o.a)(Object(o.a)(a))},a.LoadHistory=function(){a.output.loadHistory(g+a.props.id),a.output.scrollDown()},a.SaveHistory=function(e){return"undefined"===typeof e&&(e=!0),a.state.saveHistory!==e&&(e&&(a.LoadHistory(),a.output.scrollDown()),a.setState({saveHistory:e})),a.state.saveHistory&&a.output.saveHistory(g+a.props.id,Math.min(w,window.client.settings.historySpawnSize)),Object(o.a)(Object(o.a)(a))},a.AutoHide=function(e){return"undefined"===typeof e&&(e=!0),a.state.autoHide!==e&&a.setState({autoHide:e}),a.state.autoHide&&!a.hasHidden&&(a.props.panel.minimize(),a.hasHidden=!0),Object(o.a)(Object(o.a)(a))},a.Focus=function(){return window.client.react.taskbar.popTask(a.props.panel),a.props.panel.normalize(),Object(o.a)(Object(o.a)(a))},a.onChange=function(){a.state.saveHistory&&a.output.saveHistory(g+a.props.id,Math.min(w,window.client.settings.historySpawnSize)),a.setState({lines:a.output.linesOfScroll()}),"minimized"===a.props.panel.status&&(a.props.panel.count++,window.client.react.taskbar.forceUpdate())},a.state={prefix:e.prefix?e.prefix:"",saveHistory:!!e.saveHistory&&e.saveHistory,autoHide:!!e.autoHide&&e.autoHide},a.refoutput=u.a.createRef(),a.refinput=u.a.createRef(),a.output=null,a.input=null,a.hasHidden=!1,a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.output=new f.a(this.refoutput.current),this.input=new b.a(this.refinput.current),this.input.onEnter=function(t){e.sendCommand(t)},this.input.onEscape=function(){e.input.clear()},this.input.onPageUp=function(){e.output.scrollPageUp()},this.input.onPageDown=function(){e.output.scrollPageDown()},this.state.saveHistory&&(this.LoadHistory(),this.output.scrollDown()),this.state.autoHide&&this.AutoHide()}},{key:"componentWillUnmount",value:function(){this.output=null,this.input=null}},{key:"sendCommand",value:function(e){var t=this.state.prefix;window.client.sendMacro(t+e)}},{key:"scrollIfNeeded",value:function(e){var t=!1;this.output.nearBottom(window.client.scrollThreshold)&&(t=!0),e(),t&&this.output.scrollDown(),this.onChange()}},{key:"appendText",value:function(e){var t=this;this.scrollIfNeeded(function(){return t.output.appendText(e)})}},{key:"append",value:function(e){var t=this;this.scrollIfNeeded(function(){return t.output.appendText(e+"\n")})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.prefix,a=window.client.settings,n=a.ansiFG,i=a.ansiBG,l=a.fontFamily,s=a.fontSize,r={fontFamily:"'"+l+"', monospace",fontSize:s+"pt"},o={fontFamily:"'"+l+"', monospace",fontSize:(window.client.mobile?16:s)+"pt"};return u.a.createElement("div",{className:e.frame},u.a.createElement("div",{className:e.top},u.a.createElement("div",{ref:this.refoutput,className:m()(e.output,n,i),style:r})),u.a.createElement("div",{className:e.bottom},u.a.createElement(E.a,{label:"Prefix",classes:{root:e.prefix},value:t,onChange:this.changePrefix}),u.a.createElement("textarea",{ref:this.refinput,className:m()(e.input,n,i),style:o,autoComplete:"off"})))}}]),t}(u.a.Component);t.a=Object(h.withStyles)(function(e){return{frame:{position:"absolute",height:"100%",width:"100%",display:"flex","flex-flow":"column nowrap"},top:{flex:1,display:"flex"},output:{margin:"0.25em 0.5em","font-family":"'Courier New', monospace","font-weight":"normal","font-size":"10pt",width:"100%",flex:1,"overflow-y":"auto","overflow-x":"hidden","white-space":"pre-wrap","word-wrap":"break-word",padding:"0.25em 0.5em"},bottom:{"background-color":e.palette.background.paper,display:"flex"},input:Object(_.a)({flex:1,margin:"1px 0 0 0",border:"none",outline:"none","vertical-align":"middle",padding:"0.25em",resize:"none",height:"3em","font-family":"'Courier New', monospace","font-weight":"normal","font-size":"16pt"},e.breakpoints.down("sm"),{height:"1.5em"}),prefix:{width:"5em"}}},{withTheme:!0})(O)},130:function(e,t,a){"use strict";t.a={maillist:function(e,t){e.sendText("th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\,)]\\],unread,json(number,extract(mailfstats(%#),6,1)))))")},mailitem:function(e,t){e.sendText("th null(oob(%#,mailitem,json(object,id,json(string,"+t+"),deleted,switch(setr(0,mailstatus(%#,"+t+")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,"+t+")),subject,json(string,mailsubject(%#,"+t+")),from,json(string,if(setr(0,mailfrom(%#,"+t+")),name(%q0),!PURGED!)),body,json(string,mail(%#,"+t+")))))")},boardlist:function(e,t){e.sendText("+bbread")},bbmsglist:function(e,t){e.sendText("+bbread "+t)},bbmsg:function(e,t){e.sendText("+bbread "+t)},listcontents:function(e,t){e.sendText("th null(oob(%#,listcontents,json(object,players,\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\,)]\\],exits,\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\,)]\\],things,\\[[iter(lvthings(%l),json(string,name(%i0)),,\\,)]\\])))")}}},185:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(89),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),react_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(37),react_dom__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_4__),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__),file_saver__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(186),file_saver__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_6__),_modules_Portal__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(252),_modules_Mailbox__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(254),_modules_Sendmail__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(240),_modules_BBoard__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(253),_modules_Upload__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(243),_modules_Backup__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(246),_modules_Configure__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(251),_modules_Spawn__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(129),_connection__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(119),_emulator__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(46),_userinput__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(78),_jsonapi__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(130),_templates__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(250),jspanel4_dist_jspanel_min_css__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(454),jspanel4_dist_jspanel_min_css__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(jspanel4_dist_jspanel_min_css__WEBPACK_IMPORTED_MODULE_20__),jspanel4__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(131),shortid__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(132),shortid__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(shortid__WEBPACK_IMPORTED_MODULE_22__),EventEmitter=__webpack_require__(464),TinyCon=__webpack_require__(465),Colors=__webpack_require__(466),LOGINFAIL=[/There is no player with that name\./,/That is not the correct password\./,/Either that player does not exist, or has a different password\./,/You cannot connect to that player at this time\./,/Guest connections not allowed\./,/Connection to .* (Non-GUEST) not allowed from .* (.*)/,/Too many guests are connected now\./],UnicodeMap={"\u2013":"-","\u2014":"-","\u2018":"'","\u2019":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201f":'"',"\u2032":"'","\u2033":'"',"\u2035":"'","\u2036":'"'},Client=function(){function Client(){var e=this;Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Client),this.setBubble=function(){e.hidden?e.tinycon.setBubble(e.updateCounter):e.tinycon.setBubble(0)},this.enableTimers=function(){e.settings.timersEnabled||e.changeSetting("timersEnabled",!0)},this.disableTimers=function(){e.settings.timersEnabled&&e.changeSetting("timersEnabled",!1)},this.startTimers=function(){e.settings.timersEnabled&&(clearTimeout(e.runTimers),setTimeout(e.runTimers,1e3))},this.stopTimers=function(){clearTimeout(e.runTimers)},this.runTimers=function(){if(e.settings.timersEnabled){for(var t=0;t<e.timers.length;t++){var a=e.timers[t];a.disabled?a.timeleft&&delete a.timeleft:("undefined"===typeof a.timeleft&&(a.timeleft=Math.max(1,a.delay)),a.timeleft>0?a.timeleft--:(a.javascript?e.execActionScript(a.text):e.sendText(a.text),a.repeat&&0!==a.times?(a.times>0&&a.times--,a.timeleft=a.delay):(delete a.timeleft,a.disabled=!0)))}setTimeout(e.runTimers,1e3)}},this.keyPress=function(t){for(var a=t.keyCode?t.keyCode:t.which,n=t.ctrlKey,i=t.shiftKey,l=t.altKey,s=!1,r=0;r<e.keys.length;r++){var o=e.keys[r];if(!o.disabled&&!o.release&&(o.code===a&&o.ctrl===n&&o.alt===l&&o.shift===i)){o.javascript?e.execActionScript(o.text):e.sendText(o.text),o.prevent&&(s=!0);break}}s&&t.preventDefault()},this.keyRelease=function(t){for(var a=t.keyCode?t.keyCode:t.which,n=t.ctrlKey,i=t.shiftKey,l=t.altKey,s=!1,r=0;r<e.keys.length;r++){var o=e.keys[r];if(!o.disabled&&o.release&&(o.code===a&&o.ctrl===n&&o.alt===l&&o.shift===i)){o.javascript?e.execActionScript(o.text,t):e.sendText(o.text),o.prevent&&(s=!0);break}}s&&t.preventDefault()},this.colors=Colors,this.theme=this.createTheme(),this.mobile=!window.matchMedia(this.theme.breakpoints.up("md").substring(7)).matches,this.defaultSettings={fontFamily:"Courier New",fontSize:10,ansiFG:"ansi-37",ansiBG:"ansi-40",invertHighlight:!1,terminalWidth:100,terminalAutoScroll:!0,decompileEditor:!0,decompileKey:"FugueEdit > ",sidebarOpen:!0,sidebarAnchor:"right",sidebarDense:!0,sidebarAlwaysShow:!1,sidebarShowPlayers:!0,sidebarShowThings:!0,sidebarShowExits:!0,sidebarShowCompass:!0,sidebarLargeCompass:!0,debugEvents:!1,debugActions:!1,allowServerChange:!0,serverAddress:"node.grapenut.org",serverSSL:"https:"===window.location.protocol,serverPort:"https:"===window.location.protocol?2001:2e3,historySize:1e3,historySpawnSize:100,recallButtons:!0,recallAnchor:"right",recallSize:1e3,mobileFontSize:6,mobileHideTaskbar:!0,mobileHideStatusbar:!0,timersEnabled:!1},this.settings=null,this.components={Mailbox:_modules_Mailbox__WEBPACK_IMPORTED_MODULE_8__.a,Sendmail:_modules_Sendmail__WEBPACK_IMPORTED_MODULE_9__.a,BBoard:_modules_BBoard__WEBPACK_IMPORTED_MODULE_10__.a,Upload:_modules_Upload__WEBPACK_IMPORTED_MODULE_11__.a,Backup:_modules_Backup__WEBPACK_IMPORTED_MODULE_12__.a,Configure:_modules_Configure__WEBPACK_IMPORTED_MODULE_13__.a,Spawn:_modules_Spawn__WEBPACK_IMPORTED_MODULE_14__.a},this.templates=new _templates__WEBPACK_IMPORTED_MODULE_19__.a,this.buttons=[],this.triggers=[],this.timers=[],this.macros=[],this.keys=[],this.scripts=[{name:"onLoad.js",text:""}],this.css=[{name:"ansi.css",text:""},{name:"inverse.css",text:""}],this.loadButtons(),this.loadTriggers(),this.loadTimers(),this.loadMacros(),this.loadKeys(),this.loadCSS(),this.loadScripts(),this.loadSettings(),this.output=null,this.prompt=null,this.input=null,this.events=new EventEmitter,this.panels=jspanel4__WEBPACK_IMPORTED_MODULE_21__.a,this.tinycon=TinyCon,this.react={portal:null,taskbar:null,terminal:null,input:null,statusbar:null,login:null,mailbox:null,sendmail:null,bboard:null,upload:null,backup:null,configure:null,spawns:[]},this.conn=null,this.container=null,this.loggedIn=!1,this.jsonapi=!1,this.hidden=!1,this.updateCounter=0,this.updateLines=0,this.eatNewline=!1,this.delayContents=500,this.scrollThreshold=5,this.reconnectTimer=2e3,this.reconnectCount=0,this.reconnectMaxCount=10,window.client=this,this.initPanels(),this.initNotifications(),this.render(),this.startTimers(),this.bindKeys()}return Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Client,[{key:"render",value:function(){react_dom__WEBPACK_IMPORTED_MODULE_4___default.a.render(react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_modules_Portal__WEBPACK_IMPORTED_MODULE_7__.a,{theme:this.theme},null),document.getElementById("root"))}},{key:"loadScript",value:function(e,t,a){var n=document.createElement("script");n.async=!1,n.src=e,n.onload=t,n.onerror=a,document.getElementsByTagName("body")[0].appendChild(n)}},{key:"execUserScript",value:function(e){for(var t=null,a=0;a<this.scripts.length;a++)if(this.scripts[a].name===e){t=this.scripts[a];break}t&&""!==t.text&&this.execActionScript(t.text)}},{key:"execActionScript",value:function execActionScript(txt,event){var _this2=this,client=this,Window=function(e,t,a){return _this2.getSpawn(e,t,a)},SendAPI=function(e){return _this2.sendAPI(e)},Send=function(e){return _this2.sendCommand(e)},SendText=function(e){return _this2.sendText(e)},Append=function(e){return _this2.output.appendText(e)},Output=this.output,Input=this.input,UI=this.react;try{eval(txt)}catch(e){client.settings.debugActions&&console.log("Error executing action:",e)}}},{key:"loadStyle",value:function(e){for(var t,a=e.split("/").slice(-1)[0],n=null,i=0;i<this.css.length;i++)if(this.css[i].name===a){n=this.css[i];break}n&&(t=this.updateCSS(n),""!==n.text)||((t=document.createElement("link")).setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.head.appendChild(t))}},{key:"updateCSS",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=document.getElementById("override_"+e.name);if(a)for(;a.firstChild;)a.removeChild(a.firstChild);else(a=document.createElement("style")).setAttribute("id","override_"+e.name),document.head.appendChild(a);return t||a.appendChild(document.createTextNode(e.text)),a}},{key:"unloadStyle",value:function(e){for(var t=document.getElementsByTagName("link"),a=t.length;a>=0;a--)t[a]&&null!==t[a].getAttribute("href")&&-1!==t[a].getAttribute("href").indexOf(e)&&t[a].parentNode.removeChild(t[a]);for(var n=e.split("/").slice(-1)[0],i=null,l=0;l<this.css.length;l++)if(this.css[l].name===n){i=this.css[l];break}i&&this.updateCSS(i,!0)}},{key:"createTheme",value:function(e){var t={typography:{useNextVariants:!0},palette:{primary:this.colors.indigo,secondary:this.colors.blueGrey,type:"dark"}};return Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__.createMuiTheme)(Object.assign(t,e))}},{key:"saveText",value:function(e,t,a){if(a||(a="text/plain"),t.length>0){var n=new Blob([t],{type:a});return file_saver__WEBPACK_IMPORTED_MODULE_6___default()(n,e),!0}return!1}},{key:"localStorageToText",value:function(e){var t=window.localStorage,a={};return Object.keys(t).forEach(function(e){a[e]=t[e]}),e?JSON.stringify(a,function(e,t){switch(e){case"buttons":case"triggers":case"timers":case"macros":case"keys":case"css":case"scripts":case"settings":case"recall_history":return JSON.parse(t);default:return t}},e):JSON.stringify(a)}},{key:"restoreLocalStorage",value:function(e){var t,a=this;try{t=JSON.parse(e,function(e,t){switch(e){case"buttons":case"triggers":case"timers":case"macros":case"keys":case"css":case"scripts":case"settings":case"recall_history":return JSON.stringify(t);default:return t}})}catch(n){return alert("Failed to parse local storage file!"),!1}return t?(Object.keys(t).forEach(function(e){if(window.localStorage[e]=t[e],"output_history"===e)a.output.loadHistory(e);else if(e.startsWith("output_history_")){var n=e.split("_").slice(2).join("_"),i=a.findSpawn(n);i&&i.react&&i.react.output.loadHistory(e)}}),this.loadRecallHistory(),this.loadButtons(),this.loadTriggers(),this.loadTimers(),this.loadMacros(),this.loadKeys(),this.loadCSS(),this.loadScripts(),this.loadSettings(),this.react.portal.forceUpdate(),!0):(alert("Failed to parse local storage file!"),!1)}},{key:"loadLocalStorage",value:function(e,t){window.localStorage.hasOwnProperty(t)&&(e=Object.assign(e,JSON.parse(window.localStorage[t])))}},{key:"clearLocalStorage",value:function(e){delete window.localStorage[e]}},{key:"saveLocalStorage",value:function(e,t){window.localStorage[t]=JSON.stringify(e)}},{key:"loadHistoryBuffer",value:function(e){return window.localStorage.hasOwnProperty(e)?window.localStorage[e]:""}},{key:"saveHistoryBuffer",value:function(e,t){window.localStorage[e]=t}},{key:"castString",value:function(e,t,a){if(e.hasOwnProperty(t)){var n=typeof e[t];if(typeof a===n)e[t]=a;else switch(n){case"string":e[t]=String.bind(null,a)();break;case"number":e[t]=Number.bind(null,a)();break;case"boolean":e[t]="true"===a;break;default:e[t]=a}}}},{key:"changeSetting",value:function(e,t){this.castString(this.settings,e,t),"invertHighlight"===e?this.settings[e]?this.loadStyle("./inverse.css"):this.unloadStyle("./inverse.css"):"terminalWidth"===e?(this.output.calcDimensions(),this.sendText("SCREENWIDTH "+this.settings.terminalWidth),this.sendText("SCREENHEIGHT "+Math.floor(this.output.root.parentNode.clientHeight/this.output.dims.height))):"timersEnabled"===e&&(this.settings[e]?this.startTimers():this.stopTimers())}},{key:"loadButtons",value:function(){this.loadLocalStorage(this.buttons,"buttons")}},{key:"loadTriggers",value:function(){this.loadLocalStorage(this.triggers,"triggers")}},{key:"loadTimers",value:function(){this.loadLocalStorage(this.timers,"timers")}},{key:"loadMacros",value:function(){this.loadLocalStorage(this.macros,"macros")}},{key:"loadKeys",value:function(){this.loadLocalStorage(this.keys,"keys")}},{key:"loadCSS",value:function(){this.loadLocalStorage(this.css,"css");for(var e=0;e<this.css.length;e++){var t=this.css[e];"inverse.css"!==t.name&&this.updateCSS(t)}}},{key:"loadScripts",value:function(){this.loadLocalStorage(this.scripts,"scripts")}},{key:"loadSettings",value:function(){this.settings=Object.assign({},this.defaultSettings),this.loadLocalStorage(this.settings,"settings"),this.settings.invertHighlight?this.loadStyle("./inverse.css"):this.unloadStyle("./inverse.css")}},{key:"loadRecallHistory",value:function(){this.loadLocalStorage(this.input.history,"recall_history")}},{key:"saveRecallHistory",value:function(){var e=this.settings.recallSize;this.clearLocalStorage("recall_history"),this.saveLocalStorage(this.input.history.slice(-e),"recall_history")}},{key:"saveButtons",value:function(){this.clearLocalStorage("buttons"),this.saveLocalStorage(this.buttons,"buttons"),this.react.taskbar&&this.react.taskbar.forceUpdate()}},{key:"saveTriggers",value:function(){this.clearLocalStorage("triggers"),this.saveLocalStorage(this.triggers,"triggers")}},{key:"saveTimers",value:function(){this.clearLocalStorage("timers"),this.saveLocalStorage(this.timers,"timers")}},{key:"saveMacros",value:function(){this.clearLocalStorage("macros"),this.saveLocalStorage(this.macros,"macros")}},{key:"saveKeys",value:function(){this.clearLocalStorage("keys"),this.saveLocalStorage(this.keys,"keys")}},{key:"saveCSS",value:function(){this.clearLocalStorage("css"),this.saveLocalStorage(this.css,"css");for(var e=0;e<this.css.length;e++){var t=this.css[e];if("inverse.css"===t.name){if(this.settings.invertHighlight){for(var a=document.getElementsByTagName("link"),n=a.length;n>=0;n--){if(a[n]&&null!==a[n].getAttribute("href"))a[n].getAttribute("href").split("/").slice(-1)[0]===t.name&&a[n].parentNode.removeChild(a[n])}""===t.text?this.loadStyle("./inverse.css"):this.updateCSS(t)}}else this.updateCSS(t)}}},{key:"saveScripts",value:function(){this.clearLocalStorage("scripts"),this.saveLocalStorage(this.css,"scripts")}},{key:"saveSettings",value:function(){this.clearLocalStorage("settings"),this.saveLocalStorage(this.settings,"settings")}},{key:"parseCommand",value:function(e){var t=e,a=new RegExp("\\?\\?");if(-1!==t.search(a)){var n=prompt(e);t=null===n?"":t.replace(a,n)}return t}},{key:"onCommand",value:function(e){this.sendCommand&&this.sendCommand(this.parseCommand(e))}},{key:"appendMessage",value:function(e,t){var a=!1;this.output&&(this.output.nearBottom(this.scrollThreshold)&&(a=!0),this.output.appendMessage(e,t),a&&this.output.scrollDown(),this.react.terminal&&this.react.terminal.onChange())}},{key:"createPattern",value:function(e,t){return e?new RegExp("^"+t+"$"):new RegExp("^"+t.split(/\*+/).map(function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}).join("(.*)")+"$")}},{key:"replaceArgs",value:function(e,t){for(var a=t.slice(),n=e.length-1;n>-1;n--){var i=e[n]||"";try{var l=new RegExp("(^|[^\\%])%"+n,"g"),s=new RegExp("[\"'`]","g"),r=i.replace(s,"\\$&");a=a.replace(l,"$1"+r)}catch(o){this.settings.debugActions&&console.log("Unable to compile regular expression:",o)}}return a}},{key:"clear",value:function(){this.output&&this.output.clear(),this.prompt&&this.prompt.clear(),this.input&&this.input.clear()}},{key:"initInput",value:function(e){var t=this;null!==e&&(this.input=new _userinput__WEBPACK_IMPORTED_MODULE_17__.a(e),this.loadRecallHistory(),this.input.onEnter=function(e){t.sendCommand(e),t.prompt&&t.prompt.clear(),t.settings.terminalAutoScroll&&t.output.scrollDown()},this.input.onEscape=function(){t.input.clear()},this.input.onPageUp=function(){t.output&&t.output.scrollPageUp()},this.input.onPageDown=function(){t.output&&t.output.scrollPageDown()})}},{key:"initOutput",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==e&&(this.output=new _emulator__WEBPACK_IMPORTED_MODULE_16__.a(e),this.output.container=a,this.output.onCommand=function(e){t.onCommand(e)},e.onunload=function(){t.sendText("QUIT"),t.close()},e.onresize=function(){t.output&&t.output.scrollDown()})}},{key:"initPrompt",value:function(e){null!==e&&(this.prompt=new _emulator__WEBPACK_IMPORTED_MODULE_16__.a(e))}},{key:"scrollDown",value:function(e){e&&(e.scrollTop=this.root.scrollHeight)}},{key:"focus",value:function(e){this.mobile||this.input&&this.input.focus(e)}},{key:"scrollIfNeeded",value:function(e){var t=!1;this.output&&(this.output.nearBottom(this.scrollThreshold)&&(t=!0),e(),t&&this.output.scrollDown(),this.react.terminal&&this.react.terminal.onChange())}},{key:"addPanel",value:function(e,t,a){var n=this,i=this.findSpawn(e);if(i)return this.focusPanel(e),i;var l=a||e,s=this.components[l];s||(s=_modules_Spawn__WEBPACK_IMPORTED_MODULE_14__.a);var r=t||{};if(r.id||(r.id=e.toLowerCase()),r.headerTitle||(r.headerTitle=e),r.icon||(r.icon="tab"),!r.headerLogo){var o=r.icon.startsWith("icon-");r.headerLogo=o?"<i class='"+r.icon+"' style='margin-left: "+this.theme.spacing.unit+"px'></i>":"<i class='material-icons' style='margin-left: "+this.theme.spacing.unit+"px'>"+r.icon+"</i>"}if(!r.panelSize){var _=this.panels.defaults.maximizedMargin,c="calc(50% - "+1.5*_+"px)";this.mobile&&(c="calc(100% - "+2*_+"px)"),r.panelSize={width:c,height:"calc(100% - "+2*_+"px)"}}var u=react__WEBPACK_IMPORTED_MODULE_3___default.a.createRef();return r.callback=function(t){t.content.style.backgroundColor=n.theme.palette.background.paper,r.react=react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(s,Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__.a)({innerRef:u,id:e.toLowerCase(),panel:t},r.props),null),react_dom__WEBPACK_IMPORTED_MODULE_4___default.a.render(react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__.MuiThemeProvider,{theme:n.theme},r.react),t.content,function(){var e=u.current;if(e&&e.helpText){var a=document.createElement("div");a.classList.add("jsPanel-btn","jsPanel-btn-help"),a.innerHTML='<svg class="jsPanel-icon" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 512 512"><circle fill="currentColor" cx="255.984" cy="492" r="20"/><path fill="currentColor" d="M412.979,155.775C412.321,69.765,342.147,0,255.984,0c-86.57,0-157,70.43-157,157c0,11.046,8.954,20,20,20 s20-8.954,20-20c0-64.514,52.486-117,117-117s117,52.486,117,117c0,0.356,0.009,0.71,0.028,1.062 c-0.405,46.562-28.227,88.348-71.12,106.661c-40.038,17.094-65.908,56.675-65.908,100.839V412c0,11.046,8.954,20,20,20 c11.046,0,20-8.954,20-20v-46.438c0-28.117,16.334-53.258,41.614-64.051c57.979-24.754,95.433-81.479,95.418-144.516 C413.016,156.585,413.003,156.179,412.979,155.775z"/></svg>',a.style.color=n.panels.calcColors(n.panels.defaults.theme)[3],t.controlbar.insertBefore(a,t.controlbar.firstChild),jspanel4__WEBPACK_IMPORTED_MODULE_21__.a.pointerup.forEach(function(t){a.addEventListener(t,function(t){e.helpText(t.currentTarget)})})}window.client.react.spawns.push(e)})},r.container=this.container,this.panels.create(r),u.current}},{key:"getSpawn",value:function(e,t,a){var n=this.findSpawn(e);return n||this.addPanel(e,t,a)}},{key:"delSpawn",value:function(e){for(var t=this.react.spawns,a=e.toLowerCase(),n=0;n<t.length;n++)t[n]&&t[n].props.id===a&&t.splice(n,1)}},{key:"findSpawn",value:function(e){for(var t=this.react.spawns,a=e.toLowerCase(),n=0;n<t.length;n++)if(t[n]&&t[n].props.id.toLowerCase()===a)return t[n];return null}},{key:"closePanel",value:function(e){var t=this.panels.getPanels(function(){return this.id===e||this.headertitle.innerText===e});t.length>0&&("minimized"===t[0].status&&this.react.taskbar.popTask(t[0]),t[0].close())}},{key:"focusPanel",value:function(e){var t=this.panels.getPanels(function(){return this.id===e||this.headertitle.innerText===e});t.length>0&&("minimized"===t[0].status?this.react.taskbar.popTask(t[0]):(t[0].unsmallify(),t[0].front()))}},{key:"connect",value:function(){var e=this,t=(this.settings.serverSSL?"wss://":"ws://")+this.settings.serverAddress+":"+this.settings.serverPort+"/wsclient";this.close(),this.conn=new _connection__WEBPACK_IMPORTED_MODULE_15__.a(t),this.conn.onOpen=function(t){e.appendMessage("logMessage","%% Connected."),e.conn.hasData=!1,e.reconnectCount=0},this.conn.onError=function(t){e.appendMessage("logMessage","%% Connection error!"),console.log(t)},this.conn.onClose=function(t){e.appendMessage("logMessage","%% Connection closed."),setTimeout(function(){e.reconnect()},(e.serverSSL?2:1)*e.reconnectTimer)},this.conn.onUpdate=function(t,a){e.conn.hasData||(e.react.login&&e.react.login.openLogin(),e.sendText("SCREENWIDTH "+e.settings.terminalWidth),e.sendText("SCREENHEIGHT "+Math.floor(e.output.root.parentNode.clientHeight/e.output.dims.height))),e.hidden&&a.endsWith("\n")&&(e.updateCounter++,clearTimeout(e.setBubble),setTimeout(e.setBubble,1e3))},this.conn.onText=function(t){if(!e.loggedIn){for(var a=0;a<LOGINFAIL.length;a++)if(t.match(LOGINFAIL[a])){e.react.login&&e.react.login.openLogin(t);break}t.match(/Last( FAILED)? connect was from/)&&(e.loggedIn=!0,setTimeout(function(){e.jsonapi||e.sendAPI("listcontents")},e.delayContents))}var n=new RegExp("^"+e.settings.decompileKey);if(t.match(n)){var i=t.replace(n,"");return e.eatNewline=!0,void(e.settings.decompileEditor?(e.addPanel("Upload",{icon:"cloud_upload"}),e.react.upload.editor.current.editor.insert(i+"\n")):e.input.root.value=i)}var l=!1;e.triggers.forEach(function(a,n){if(!a.disabled){var i=e.createPattern(a.regex,a.pattern),s=t.match(i);if(s){var r=e.replaceArgs(s,a.text);a.javascript?e.execActionScript(r):e.sendText(r),a.suppress&&(e.eatNewline=!0,l=!0)}}}),l||(!e.eatNewline||"\n"!==t&&"\r\n"!==t?(e.eatNewline=!1,e.scrollIfNeeded(function(){return e.output.appendText(t)})):e.eatNewline=!1)},this.conn.onHTML=function(t){e.output&&e.scrollIfNeeded(function(){return e.output.appendHTML(t)})},this.conn.onPueblo=function(t,a){e.output&&e.scrollIfNeeded(function(){return e.output.appendPueblo(t,a)})},this.conn.onPrompt=function(t){null!==e.prompt&&(e.prompt.clear(),e.prompt.appendText(t+"\r\n"))},this.conn.onObject=function(t){var a="";t.hasOwnProperty("gmcp")?a=t.gmcp:t.hasOwnProperty("op")&&(a=t.op),a&&""!==a?(e.settings.debugEvents&&console.log("JSON "+a+":",t),e.events.emit(a,t)):e.settings.debugEvents&&console.log("JSON (unknown):",t)}}},{key:"reconnect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||!this.isConnected())if(e||this.reconnectCount<this.reconnectMaxCount){var t=("https:"===window.location.protocol||this.settings.serverSSL?"wss://":"ws://")+this.settings.serverAddress+":"+this.settings.serverPort+"/wsclient";this.reconnectCount++,this.conn&&this.conn.reconnect(t)}else this.appendMessage("logMessage","%% Auto-reconnect aborted.")}},{key:"isConnected",value:function(){return this.conn&&this.conn.isConnected()}},{key:"close",value:function(){this.conn&&this.conn.close()}},{key:"filterUnicode",value:function(e){if(!e)return"";try{var t=new RegExp("[\u2013\u2014\u2018\u2019\u201b\u201c\u201d\u201f\u2032\u2033\u2035\u2036]","g");return e.replace(t,function(e){return UnicodeMap[e]})}catch(a){this.settings.debugActions&&console.log("Unable to filter Unicode:",a)}return e}},{key:"sendText",value:function(e){this.conn&&this.conn.sendText(e)}},{key:"sendCommand",value:function(e){var t=this;if(!this.isConnected())return this.conn&&this.conn.reconnect(),void this.scrollIfNeeded(function(){return t.appendMessage("logMessage","%% Reconnecting to server...")});""!==e&&(e=this.filterUnicode(e),this.sendMacro(e),this.scrollIfNeeded(function(){return t.appendMessage("localEcho",e)}),this.saveRecallHistory())}},{key:"sendMacro",value:function(e){var t=this,a=!1;this.macros.forEach(function(n){if(!n.disabled){var i=t.createPattern(n.regex,n.pattern);e.split("\n").forEach(function(e){var l=e.match(i);if(l){a=!0;var s=t.replaceArgs(l,n.text);n.javascript?t.execActionScript(s):t.sendMacro(s)}})}}),a||this.sendText(e)}},{key:"sendAPI",value:function(e,t){if(this.jsonapi){var a=String(e);if(t){var n=String(t);n.length>0&&(a+=" "+n)}this.sendText("jsonapi/"+a)}else _jsonapi__WEBPACK_IMPORTED_MODULE_18__.a.hasOwnProperty(e)&&_jsonapi__WEBPACK_IMPORTED_MODULE_18__.a[e](this,t)}},{key:"execString",value:function(e,t){var a=this,n="exec_"+shortid__WEBPACK_IMPORTED_MODULE_22___default.a.generate(),i="th null(oob(%#,"+n+",json(object,result,json(string,"+e+"))))";this.events.on(n,function(e){t(e.result),a.events.removeAllListeners([n])}),this.sendText(i)}},{key:"execJSON",value:function(e,t){var a=this,n="exec_"+shortid__WEBPACK_IMPORTED_MODULE_22___default.a.generate(),i="th null(oob(%#,"+n+","+e+"))";this.events.on(n,function(e){t(e),a.events.removeAllListeners([n])}),this.sendText(i)}},{key:"saveLog",value:function(e){if(this.output){var t=this.output.root,a=t.innerText||t.textContent;this.saveText(e,a,"text/html;charset=utf-8")||alert("File not saved! The current output is empty.")}}},{key:"saveBackup",value:function(e){var t=this.localStorageToText(2);this.saveText(e,t)||alert("File not saved! Local storage is empty.")}},{key:"initNotifications",value:function(){var e,t,a=this;"undefined"!==typeof document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),"undefined"===typeof document.addEventListener||void 0===e?console.log("This browser does not support background notifications."):document.addEventListener(t,function(){a.updateCounter=0,a.updateLines=0,document[e]?a.hidden=!0:a.hidden=!1,a.setBubble()},!1),this.tinycon.setOptions({fallback:!0,abbreviate:!0})}},{key:"initPanels",value:function(){this.panels.defaults.minimizeTo=!1,this.panels.defaults.onminimized=function(e){window.client.react.taskbar.pushTask(this),window.client.focus()},this.panels.defaults.onclosed=function(e){react_dom__WEBPACK_IMPORTED_MODULE_4___default.a.unmountComponentAtNode(e.content),window.client.delSpawn(this.id),window.client.focus()},this.panels.defaults.dragit.start=function(){window.client.input.saveCursor()},this.panels.defaults.resizeit.start=function(){window.client.input.saveCursor()},this.panels.defaults.dragit.stop=function(){window.client.focus(),window.client.input.resetCursor()},this.panels.defaults.resizeit.stop=function(){window.client.focus(),window.client.input.resetCursor()}}},{key:"bindKeys",value:function(){document.addEventListener("keydown",this.keyPress),document.addEventListener("keyup",this.keyRelease)}},{key:"unbindKeys",value:function(){document.removeEventListener("keydown",this.keyPress),document.removeEventListener("keyup",this.keyRelease)}}]),Client}();__webpack_exports__.a=Client},187:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(14),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(40),_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),classnames__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2),classnames__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_8__),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__),_material_ui_core_SwipeableDrawer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(208),_material_ui_core_SwipeableDrawer__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_material_ui_core_SwipeableDrawer__WEBPACK_IMPORTED_MODULE_10__),_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(71),_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11__),_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(206),_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_12__),_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(15),_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_13__),_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(19),_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14__),_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(20),_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15__),_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(125),_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_16__),_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(62),_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_17__),_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(38),_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18__),_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(21),_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19__),_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(45),_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20__),_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(128),_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_21__),_material_ui_core_List__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(30),_material_ui_core_List__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_material_ui_core_List__WEBPACK_IMPORTED_MODULE_22__),_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(18),_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_23__),_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(29),_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_24__),_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(35),_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25__),_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(79),_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_26__),_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(80),_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_27__),_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(31),_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_28__),_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(209),_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_29__),_material_ui_icons_Menu__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(207),_material_ui_icons_Menu__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(_material_ui_icons_Menu__WEBPACK_IMPORTED_MODULE_30__),_material_ui_icons_Backspace__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(212),_material_ui_icons_Backspace__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(_material_ui_icons_Backspace__WEBPACK_IMPORTED_MODULE_31__),_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(64),_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_32__),_material_ui_icons_Build__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(210),_material_ui_icons_Build__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(_material_ui_icons_Build__WEBPACK_IMPORTED_MODULE_33__),_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(93),_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_34__),_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(94),_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_35__),_material_ui_icons_Keyboard__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(211),_material_ui_icons_Keyboard__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(_material_ui_icons_Keyboard__WEBPACK_IMPORTED_MODULE_36__),_material_ui_icons_Wifi__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(95),_material_ui_icons_Wifi__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(_material_ui_icons_Wifi__WEBPACK_IMPORTED_MODULE_37__),_material_ui_icons_ExpandLess__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(92),_material_ui_icons_ExpandLess__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(_material_ui_icons_ExpandLess__WEBPACK_IMPORTED_MODULE_38__),_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(126),_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_39__),_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(127),_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_40__),_material_ui_icons_KeyboardArrowLeft__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(90),_material_ui_icons_KeyboardArrowLeft__WEBPACK_IMPORTED_MODULE_41___default=__webpack_require__.n(_material_ui_icons_KeyboardArrowLeft__WEBPACK_IMPORTED_MODULE_41__),_material_ui_icons_KeyboardArrowRight__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(91),_material_ui_icons_KeyboardArrowRight__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(_material_ui_icons_KeyboardArrowRight__WEBPACK_IMPORTED_MODULE_42__),_material_ui_icons_CloudDownload__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(63),_material_ui_icons_CloudDownload__WEBPACK_IMPORTED_MODULE_43___default=__webpack_require__.n(_material_ui_icons_CloudDownload__WEBPACK_IMPORTED_MODULE_43__),_Settings__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(256),drawerHeight=240,styles=function(e){return{frame:{display:"flex",flexFlow:"column nowrap"},root:{width:"100%"},title:{margin:"0 "+e.spacing.unit+"px",flex:1,"&:hover":{cursor:"pointer"}},tasksep:{marginRight:e.spacing.unit},taskbutton:{margin:e.spacing.unit},taskicon:{marginRight:e.spacing.unit},tasklabel:{display:"flex",flexFlow:"row nowrap"},cmdbutton:{},cmdlabel:{display:"flex","flex-direction":"column"},flex:{flex:1},drawerFrame:{width:"100%"},drawerButton:{margin:e.spacing.unit},hide:{display:"none"},drawerPaper:{position:"relative",height:drawerHeight},mailButton:{margin:e.spacing.unit},BBButton:{margin:e.spacing.unit},fileinput:{display:"none"},padded:{width:"calc(100%-"+2*e.spacing.unit+")",padding:-e.spacing.unit,margin:e.spacing.unit},historyPopover:{maxHeight:"10em",overflowY:"auto"},sectionDesktop:Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),mobileButtons:{display:"flex",flexFlow:"row wrap",width:"100%"},scrollButtons:{flex:"0 0 24px",padding:0,alignSelf:"center"},emptyText:{textAlign:"center"},buttonBar:{justifyContent:"space-evenly"},sidebarButton:{minWidth:24,padding:e.spacing.unit},backup:{display:"flex",flexFlow:"row wrap"}}};function BadgeIcon(e){var t=e.count?e.count:0;return t&&""!==t?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_16___default.a,{badgeContent:t,color:"error"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25___default.a,{className:e.children},e.children)):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25___default.a,{className:e.children},e.children)}function BadgeWrapper(e){var t=e.count?e.count():0;return t>0?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_16___default.a,{badgeContent:t,color:"error"},e.children):e.children}function TabButton(e){return e.visible?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_28___default.a,{onClick:e.onClick,className:e.className},"left"===e.direction?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_KeyboardArrowLeft__WEBPACK_IMPORTED_MODULE_41___default.a,null):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_KeyboardArrowRight__WEBPACK_IMPORTED_MODULE_42___default.a,null)):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:e.className})}var Taskbar=function(_React$Component){function Taskbar(props){var _this;return Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Taskbar),_this=Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__.a)(this,Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__.a)(Taskbar).call(this,props)),_this.openDrawer=function(){_this.closeMenu(),_this.setState({open:!0})},_this.closeDrawer=function(){_this.setState({open:!1}),window.client.react.portal.forceUpdate(),window.client.focus(!0)},_this.setTitle=function(e,t){_this.setState({title:e,url:t})},_this.clearScreen=function(){window.confirm("Do you want to clear the screen?")&&window.client.clear()},_this.sendCommand=function(e){window.client.sendCommand(e)},_this.sendText=function(e){window.client.sendText(e)},_this.sendAPI=function(e,t){window.client.sendAPI(e,t)},_this.setUnreadMail=function(e){_this.setState({unreadMail:e})},_this.setUnreadBB=function(e){_this.setState({unreadBB:e})},_this.pushTask=function(e){var t=_this.state.taskbar,a=!1;t.length<1&&window.client.output.nearBottom(window.client.scrollThreshold)&&(a=!0),e.count=0,t.push(e),_this.setState({taskbar:t}),a&&(clearTimeout(_this.scrollIfNeeded),setTimeout(_this.scrollIfNeeded,1e3))},_this.popTask=function(e){var t=_this.state.taskbar,a=t.indexOf(e);t.splice(a,1),e.unsmallify(),e.front(),_this.setState({taskbar:t})},_this.showMenu=function(e){_this.setState({menuAnchor:e.currentTarget})},_this.closeMenu=function(){_this.setState({menuAnchor:null}),window.client.focus(!0)},_this.toggleSidebar=function(){var e=window.client,t=!e.settings.sidebarOpen;e.changeSetting("sidebarOpen",t),_this.setState({sidebarOpen:t}),e.saveSettings(),e.react.portal.forceUpdate()},_this.showHelp=function(e){_this.help=null,_this.setState({helpAnchor:e?e.currentTarget:null})},_this.closeHelp=function(){_this.setState({helpAnchor:null}),window.client.focus(!0)},_this.typeHelp=function(e){_this.help=e.target.value},_this.searchHelp=function(e){e.preventDefault(),_this.help&&_this.help.length>0?window.client.sendCommand("help "+_this.help):window.client.sendCommand("help"),_this.closeHelp()},_this.showUpload=function(e){_this.file=null,_this.closeMenu(),_this.setState({uploadAnchor:e.currentTarget})},_this.closeUpload=function(){_this.setState({uploadAnchor:null}),window.client.focus(!0)},_this.insertCommand=function(e){return function(t){window.client.input.root.value=e,_this.closeHistory()}},_this.clearHistory=function(){window.confirm("Do you want to clear the command history?")&&(window.client.input.clearHistory(),_this.closeHistory())},_this.showHistory=function(e){_this.closeMenu(),_this.setState({historyAnchor:e.currentTarget})},_this.closeHistory=function(){_this.setState({historyAnchor:null}),window.client.focus(!0)},_this.showLog=function(e){_this.logname=null,_this.closeMenu(),_this.setState({logAnchor:e.currentTarget})},_this.closeLog=function(){_this.setState({logAnchor:null}),window.client.focus(!0)},_this.typeLog=function(e){_this.logname=e.target.value},_this.saveLog=function(e){e.preventDefault(),_this.logname&&_this.logname.length>0&&(window.client.saveLog(_this.logname+".txt"),_this.closeLog())},_this.typeURL=function(e){_this.url=e.target.value},_this.openConfigure=function(){window.client.addPanel("Configure",{icon:"build"})},_this.previewUpload=function(){window.client.addPanel("Upload",{icon:"cloud_upload"}),_this.file&&_this.file.length>0&&window.client.react.upload.setText(_this.file),_this.file=null,_this.closeUpload()},_this.handleFile=function(e){e.preventDefault();var t=e.target.files;if(t.length>0){var a=new FileReader;a.onload=function(){_this.file=a.result,_this.previewUpload()},a.readAsText(t[0])}},_this.handleURL=function(e){if(e.preventDefault(),_this.url&&_this.url.startsWith("http")){var t=new window.XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(_this.file=t.responseText,_this.previewUpload()):alert("Unable to download URL! See console for more information."))},t.open("GET",_this.url),t.send()}},_this.showBackup=function(e){_this.backupname=null,_this.closeMenu(),_this.setState({backupAnchor:e.currentTarget})},_this.closeBackup=function(){_this.setState({backupAnchor:null}),window.client.focus(!0)},_this.typeBackup=function(e){_this.backupname=e.target.value},_this.saveBackup=function(e){e.preventDefault(),_this.backupname&&_this.backupname.length>0&&(window.client.saveBackup(_this.backupname+".txt"),_this.closeBackup())},_this.previewBackup=function(){var e=window.client;e.addPanel("Backup",{icon:"save"}),_this.file&&_this.file.length>0?e.react.backup.setText(_this.file):e.react.backup.setText(e.localStorageToText(2)),_this.file=null,_this.closeBackup()},_this.handleBackupFile=function(e){e.preventDefault();var t=e.target.files;if(t.length>0){var a=new FileReader;a.onload=function(){_this.file=a.result,_this.previewBackup()},a.readAsText(t[0])}},_this.handleBackupURL=function(e){if(e.preventDefault(),_this.url&&_this.url.startsWith("http")){var t=new window.XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(_this.file=t.responseText,_this.previewBackup()):alert("Unable to download URL! See console for more information."))},t.open("GET",_this.url),t.send()}},_this.pushButton=function(e){return function(t){e&&e.text&&""!==e.text&&(e.javascript?window.client.execActionScript(e.text,t):window.client.sendText(e.text))}},_this.showCount=function(button){if(button&&button.count&&""!==button.count)try{var val=eval(button.count);if(val)return val}catch(e){window.client.settings.debugActions&&console.log("Unable to execute button count expression:",e)}return 0},_this.state={open:!1,title:props.title,url:props.url,taskbar:[],unreadBB:0,unreadMail:0,menuAnchor:null,uploadAnchor:null,helpAnchor:null,logAnchor:null,historyAnchor:null,backupAnchor:null},_this.help="",_this.url="",_this.file="",_this.logname="",_this.backupname="",_this.history=null,_this.frame=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),window.client.react.taskbar=Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(_this)),_this}return Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(Taskbar,_React$Component),Object(_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Taskbar,[{key:"scrollIfNeeded",value:function(){window.client.output.scrollDown()}},{key:"reconnect",value:function(){window.confirm("Do you want to reconnect?")&&window.client.reconnect(!0)}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){window.client.react.taskbar=null}},{key:"render",value:function(){var e=this,t=window.client.input,a=this.props.classes,n=this.state,i=n.title,l=n.taskbar,s=n.open,r=n.historyAnchor,o=n.backupAnchor,_=n.url,c=n.menuAnchor,u=n.uploadAnchor,d=n.helpAnchor,m=n.logAnchor,h=window.client.settings,p=h.sidebarOpen,E=h.sidebarAnchor,f=h.mobileHideTaskbar,b=window.client.buttons,w=t&&Boolean(r)?t.history.slice().reverse():[];return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:a.frame},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11___default.a,{className:a.root,position:"static",onClick:function(){return window.client.focus()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_12___default.a,{disableGutters:!this.state.open},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:p?"Open sidebar.":"Close sidebar."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{className:a.sidebarButton,"aria-label":"open-sidebar",onClick:this.toggleSidebar},"left"===E?p?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_39___default.a,null):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_40___default.a,null):p?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_40___default.a,null):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_39___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_13___default.a,{variant:"h6",color:"inherit",noWrap:!0,className:a.title,onClick:function(){_&&window.open(_,"_blank")}},i),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:a.sectionDesktop},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:a.flex}),l.map(function(t,n){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{key:n,title:t.headertitle.innerText},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{key:t.id,classes:{label:a.tasklabel},className:a.taskbutton,"aria-label":"open-task",onClick:function(){return e.popTask(t)}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(BadgeWrapper,{count:function(){return t.count}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25___default.a,{className:classnames__WEBPACK_IMPORTED_MODULE_8___default()(a.taskicon,t.options.icon)},t.options.icon),!window.client.mobile&&t.headertitle.innerText)))}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:a.tasksep}),b.map(function(t,a){return!t.disabled&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{key:a,title:t.tooltip},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{"aria-label":t.name,onClick:e.pushButton(t)},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(BadgeIcon,{count:e.showCount(t)},t.icon)))})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Client utilities..."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{"aria-owns":c?"taskbar.menu":null,"aria-label":"open-menu","aria-haspopup":"true",onClick:this.showMenu},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Menu__WEBPACK_IMPORTED_MODULE_30___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_SwipeableDrawer__WEBPACK_IMPORTED_MODULE_10___default.a,{variant:"temporary",anchor:"left",open:s,onClose:this.closeDrawer,onOpen:this.openDrawer},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_Settings__WEBPACK_IMPORTED_MODULE_44__.a,{closeDrawer:this.closeDrawer})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default.a,{id:"taskbar.help",anchorEl:d,open:Boolean(d),onClose:this.closeHelp},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("form",{onSubmit:this.searchHelp},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default.a,{label:"Help topic",className:a.padded,autoComplete:"off",autoFocus:!0,variant:"outlined",onChange:this.typeHelp})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{fullWidth:!0,onClick:this.searchHelp},"Get Help")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default.a,{id:"taskbar.log",anchorEl:m,open:Boolean(m),onClose:this.closeLog},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("form",{onSubmit:this.saveLog},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default.a,{label:"File Name",variant:"outlined",className:a.padded,onChange:this.typeLog,autoFocus:!0,InputProps:{inputProps:{style:{textAlign:"right"}},endAdornment:react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_21___default.a,{position:"end"},".txt")}})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{fullWidth:!0,onClick:this.saveLog},"Save Log")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default.a,{id:"taskbar.upload",anchorEl:u,open:Boolean(u),onClose:this.closeUpload},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("form",{onSubmit:this.handleURL,className:a.padded},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default.a,{type:"url",fullWidth:!0,label:"Insert URL",variant:"outlined",onChange:this.typeURL,autoFocus:!0})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{onClick:this.handleURL},"Upload URL"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("input",{accept:"text/plain",className:a.fileinput,id:"file.upload",type:"file",onChange:this.handleFile}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("label",{htmlFor:"file.upload"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{component:"span"},"Choose File")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{onClick:this.previewUpload},"Edit Commands")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default.a,{id:"taskbar.backup",className:a.backup,anchorEl:o,open:Boolean(o),onClose:this.closeBackup},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("form",{onSubmit:this.saveBackup,className:classnames__WEBPACK_IMPORTED_MODULE_8___default()(a.padded,a.backup)},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default.a,{label:"File Name",variant:"outlined",onChange:this.typeBackup,autoFocus:!0,InputProps:{inputProps:{style:{textAlign:"right"}},endAdornment:react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_21___default.a,{position:"end"},".txt")}}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{className:a.flex,onClick:this.saveBackup},"Backup To File")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_29___default.a,{variant:"fullWidth"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("form",{onSubmit:this.handleBackupURL,className:a.padded},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default.a,{type:"url",fullWidth:!0,label:"Insert URL",variant:"outlined",onChange:this.typeURL})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{onClick:this.handleBackupURL},"Restore URL"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("input",{accept:"text/plain",className:a.fileinput,id:"file.backup",type:"file",onChange:this.handleBackupFile}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("label",{htmlFor:"file.backup"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{component:"span"},"Restore File")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{onClick:this.previewBackup},"Edit Settings")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default.a,{id:"taskbar.history",anchorEl:r,open:Boolean(r),onClose:this.closeHistory},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_List__WEBPACK_IMPORTED_MODULE_22___default.a,{className:a.historyPopover},w.map(function(t,a){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_23___default.a,{key:a,button:!0,dense:!0,divider:!0,onClick:e.insertCommand(t)},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_24___default.a,{primary:t}))})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default.a,{onClick:this.clearHistory},"Clear History")),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_17___default.a,{disableEnforceFocus:!0,id:"taskbar.menu",anchorEl:c,open:Boolean(c),onClick:this.closeMenu,onClose:this.closeMenu},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{onClick:this.closeMenu},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Close menu."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_ExpandLess__WEBPACK_IMPORTED_MODULE_38___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{onClick:this.openDrawer},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Change settings."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_34___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{onClick:this.openConfigure},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Configure client."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Build__WEBPACK_IMPORTED_MODULE_33___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{"aria-owns":u?"taskbar.upload":null,"aria-label":"open-upload","aria-haspopup":"true",onClick:this.showUpload},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Upload commands."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_35___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{"aria-owns":m?"taskbar.log":null,"aria-label":"open-log","aria-haspopup":"true",onClick:this.showLog},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Download display log."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_CloudDownload__WEBPACK_IMPORTED_MODULE_43___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{"aria-owns":o?"taskbar.backup":null,"aria-label":"open-backup","aria-haspopup":"true",onClick:this.showBackup},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Backup & restore settings."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_32___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{"aria-owns":r?"taskbar.history":null,"aria-label":"open-history","aria-haspopup":"true",onClick:this.showHistory},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Show command history."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Keyboard__WEBPACK_IMPORTED_MODULE_36___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{onClick:this.clearScreen},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Clear screen."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Backspace__WEBPACK_IMPORTED_MODULE_31___default.a,null))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default.a,{onClick:this.reconnect},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{title:"Reconnect."},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_icons_Wifi__WEBPACK_IMPORTED_MODULE_37___default.a,null)))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:a.tasksep}))),(!f||b.length>0)&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:a.sectionMobile},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11___default.a,{position:"relative"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_26___default.a,{value:!1,indicatorColor:"primary",scrollable:!0,scrollButtons:"on",ScrollButtonComponent:TabButton,classes:{scrollButtons:a.scrollButtons,flexContainer:a.buttonBar}},b.length>0&&b.map(function(t,n){return!t.disabled&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{key:n,title:t.tooltip},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_27___default.a,{key:n,classes:{wrapper:a.tasklabel},"aria-label":t.name,icon:react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(BadgeIcon,{count:e.showCount(t)},t.icon),onClick:e.pushButton(t)}))})))),(!f||l.length>0)&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:a.sectionMobile},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11___default.a,{position:"relative"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_26___default.a,{value:!1,indicatorColor:"primary",scrollable:!0,scrollButtons:"on",ScrollButtonComponent:TabButton,classes:{scrollButtons:a.scrollButtons}},l.length>0&&l.map(function(t,n){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default.a,{key:n,title:t.headertitle.innerText},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_27___default.a,{key:n,classes:{wrapper:a.tasklabel},"aria-label":"open-task",label:react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(BadgeWrapper,{count:function(){return t.count}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25___default.a,{className:classnames__WEBPACK_IMPORTED_MODULE_8___default()(a.taskicon,t.options.icon)},t.options.icon)),t.headertitle.innerText),onClick:function(){return e.popTask(t)}}))})))))}}]),Taskbar}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component);__webpack_exports__.a=Object(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_9__.withStyles)(styles,{withTheme:!0})(Taskbar)},240:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(16),_=a(0),c=a.n(_),u=a(2),d=a.n(u),m=a(10),h=a(65),p=a.n(h),E=a(66),f=a.n(E),b=a(67),w=a.n(b),g=a(68),O=a.n(g),v=a(35),y=a.n(v),P=a(19),C=a.n(P),M=a(20),D=a.n(M),k=a(21),T=a.n(k),x=a(242),S=a.n(x),B=a(99),A=a.n(B),L=a(241),I=a.n(L),R=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).sendMail=function(){var e=a.state,t=e.chips,n=e.subject,i=e.body,l=n;if(t.length<1)alert("Invalid recipients.");else if(i&&""!==i){n&&""!==n||(l=i.length>20?i.substr(0,20)+"...":i);var s='"'+t.join('" "')+'"';window.client.sendCommand("@mail "+s+"="+l+"/"+i.split("\n").join("%r")),a.closePanel()}else alert("Empty message.")},a.closePanel=function(){window.client.closePanel("Sendmail")},a.handleChange=function(e){return function(t){a.setState(Object(o.a)({},e,t.target.value))}},a.changeText=function(e){a.setState({body:a.editor.current.value})},a.onResize=function(){},a.setError=function(e){a.setState({error:e})},a.onInput=function(){a.setError(null)},a.addChip=function(e){var t=a.state.chips,n=e.replace(/(?!\\)\\/g,"").replace(/(?!\\)"/g,"");window.client.execString('if(setr(0,namelist("'+n+'")),name(%q0))',function(e){""!==e?(-1===t.indexOf(e)&&(t.push(e),a.setState({chips:t})),a.setError(null)):a.setError("Unknown player.")})},a.delChip=function(e,t){var n=a.state.chips;n.splice(t,1),a.setState({chips:n}),a.setError(null)},a.beforeAdd=function(e){return!(e.startsWith('"')&&!e.endsWith('"')||e.startsWith("'")&&!e.endsWith("'")||e.endsWith("\\"))},a.state={subject:e.subject?e.subject:"",body:e.body?e.body:"",error:null,chips:[]},a.editor=c.a.createRef(),a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"setTarget",value:function(e){this.addChip(e)}},{key:"setSubject",value:function(e){this.setState({subject:e})}},{key:"setBody",value:function(e){this.setState({body:e})}},{key:"setFields",value:function(e,t,a){e&&this.addChip(e),this.setState({subject:t,body:a})}},{key:"componentDidMount",value:function(){window.client.react.sendmail=this;var e=this.props,t=e.panel,a=e.to;t.options.resizeit.resize=this.onResize,window.client.panels.resizeit(t,t.options.resizeit),a&&this.addChip(a)}},{key:"componentWillUnmount",value:function(){this.props.panel.options.resizeit.resize=null,window.client.react.sendmail=null}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.chips,n=t.subject,i=t.body,l=t.error,s=window.client.settings,r=s.ansiFG,o=s.ansiBG,_=s.fontFamily,u=s.fontSize,m={fontFamily:"'"+_+"', monospace",fontSize:(window.client.mobile?16:u)+"pt"};return c.a.createElement(p.a,{className:e.card},c.a.createElement(f.a,{className:e.header,title:c.a.createElement(I.a,{label:"Recipients",fullWidth:!0,value:a,blurBehavior:"add",onUpdateInput:this.onInput,newChipKeyCodes:[13,32,187],onBeforeAdd:this.beforeAdd,onAdd:this.addChip,classes:{input:e.nameInput},onDelete:this.delChip,helperText:l,FormHelperTextProps:{error:!0,className:e.helperText}}),subheader:c.a.createElement(T.a,{label:"Subject",value:n,onChange:this.handleChange("subject"),className:e.stretch})}),c.a.createElement(w.a,{className:e.body},c.a.createElement("textarea",{className:d()(e.bodytext,m,r,o),ref:this.editor,width:"100%",value:i,onChange:this.changeText})),c.a.createElement(O.a,{className:e.actions},c.a.createElement(D.a,{title:"Send draft."},c.a.createElement(C.a,{fullWidth:!0,className:e.button,onClick:this.sendMail},c.a.createElement(y.a,null,c.a.createElement(S.a,null)))),c.a.createElement(D.a,{title:"Discard draft."},c.a.createElement(C.a,{fullWidth:!0,className:e.button,onClick:this.closePanel},c.a.createElement(y.a,null,c.a.createElement(A.a,null))))))}}]),t}(c.a.Component);t.a=Object(m.withStyles)(function(e){return{card:{position:"absolute",width:"100%",height:"100%",display:"flex","flex-flow":"column nowrap"},header:{display:"flex","flex-flow":"row nowrap"},sub:{display:"flex"},left:{flex:1},right:{marginLeft:"3em"},stretch:{width:"100%"},body:{position:"relative",flex:1,display:"flex",overflow:"hidden","flex-flow":"column nowrap"},bodytext:Object(o.a)({flex:1},e.breakpoints.down("sm"),{fontSize:"16pt"}),actions:{"justify-content":"space-evenly"},button:{display:"block"},helperText:{textAlign:"right",width:"100%"},nameInput:{minWidth:"10em"}}},{withTheme:!0})(R)},243:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(16),_=a(0),c=a.n(_),u=a(10),d=a(19),m=a.n(d),h=a(21),p=a.n(h),E=a(20),f=a.n(E),b=a(94),w=a.n(b),g=a(245),O=a.n(g),v=a(244),y=a.n(v),P=a(70),C=a.n(P),M=(a(184),a(118),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).startUpload=function(){a.setState({uploading:!0}),a.uploadLine()},a.pauseUpload=function(){a.setState({uploading:!1})},a.resetText=function(){a.setState({text:a.text})},a.changeDelay=function(e){if(!a.state.uploading){var t=e.target.value;a.setState({delay:t})}},a.changeText=function(e){a.state.uploading||a.setText(e)},a.onResize=function(){a.editor.current.editor.resize()},a.state={uploading:!1,text:"",delay:1e3},a.text="",a.editor=c.a.createRef(),a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.client.react.upload=this;var e=this.props.panel;e.options.resizeit.resize=this.onResize,window.client.panels.resizeit(e,e.options.resizeit)}},{key:"componentWillUnmount",value:function(){window.client.react.upload=null}},{key:"setText",value:function(e){this.text=e,this.setState({text:e})}},{key:"uploadLine",value:function(){var e=this,t=this.state.text,a=this.state.delay;a<100?a=100:a>1e5&&(a=1e5),setTimeout(function(){if(e.state.uploading){var a=t.split("\n");if(a.length>0){var n=a[0];n.length>0&&window.client.sendCommand(n),a.splice(0,1);var i=a.join("\n");e.setState({text:i}),a.length>0?e.uploadLine():(e.setState({uploading:!1}),window.client.closePanel("Upload"))}else e.setState({uploading:!1}),window.client.closePanel("Upload")}},a)}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.text,n=t.uploading,i=t.delay;return c.a.createElement("div",{className:e.frame},c.a.createElement(C.a,{className:e.editor,ref:this.editor,mode:"mushcode",width:"100%",theme:"tomorrow_night_bright",value:a,onChange:this.changeText,readOnly:n,wrapEnabled:!window.client.mobile,highlightActiveLine:!1,editorProps:{$blockScrolling:1/0}}),c.a.createElement("div",{className:e.flex},c.a.createElement("div",{className:e.stretchflex},c.a.createElement("div",{className:e.pad}),c.a.createElement(p.a,{className:e.padded,label:"Command delay (in ms)",value:i,type:"number",variant:"outlined",onChange:this.changeDelay,fullWidth:!0})),n?c.a.createElement("div",{className:e.stretchflex},c.a.createElement(f.a,{title:"Pause uploading."},c.a.createElement(m.a,{className:e.stretch,classes:{label:e.block},onClick:this.pauseUpload},c.a.createElement(O.a,null)))):c.a.createElement("div",{className:e.stretchflex},c.a.createElement(f.a,{title:"Start uploading."},c.a.createElement(m.a,{className:e.stretch,classes:{label:e.block},onClick:this.startUpload},c.a.createElement(w.a,null),"Upload")),c.a.createElement(f.a,{title:"Reset partially uploaded text."},c.a.createElement(m.a,{className:e.stretch,classes:{label:e.block},onClick:this.resetText},c.a.createElement(y.a,null),"Reset")))))}}]),t}(c.a.Component));t.a=Object(u.withStyles)(function(e){return{frame:{position:"absolute",display:"flex",height:"100%",width:"100%","flex-flow":"column nowrap"},editor:Object(o.a)({flex:1},e.breakpoints.down("sm"),{fontSize:"16pt"}),flex:{display:"flex"},stretch:{flex:1},stretchflex:{display:"flex",flex:1},pad:{margin:"1em"},padded:{margin:e.spacing.unit},block:{display:"flex","flex-direction":"column"}}},{withTheme:!0})(M)},246:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(16),_=a(0),c=a.n(_),u=a(10),d=a(19),m=a.n(d),h=a(20),p=a.n(h),E=a(63),f=a.n(E),b=a(64),w=a.n(b),g=a(100),O=a.n(g),v=a(70),y=a.n(v),P=(a(444),a(118),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).changeText=function(e){a.setState({text:e})},a.resetText=function(){a.setState({text:a.text})},a.saveBackup=function(){window.client.saveText("localStorage.txt",a.state.text),window.client.closePanel("Backup")},a.saveLocalStorage=function(){window.client.restoreLocalStorage(a.state.text)&&window.client.closePanel("Backup")},a.onResize=function(){a.editor.current.editor.resize()},a.state={text:""},a.text="",a.editor=c.a.createRef(),a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.client.react.backup=this;var e=this.props.panel;e.options.resizeit.resize=this.onResize,window.client.panels.resizeit(e,e.options.resizeit)}},{key:"componentWillUnmount",value:function(){window.client.react.backup=null}},{key:"setText",value:function(e){this.text=e,this.setState({text:e})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.text;return c.a.createElement("div",{className:e.frame},c.a.createElement(y.a,{className:e.editor,ref:this.editor,mode:"mushcode",width:"100%",theme:"tomorrow_night_bright",value:t,onChange:this.changeText,wrapEnabled:!window.client.mobile,highlightActiveLine:!1,editorProps:{$blockScrolling:1/0}}),c.a.createElement("div",{className:e.flex},c.a.createElement("div",{className:e.stretchflex},c.a.createElement(p.a,{title:"Save backup to file."},c.a.createElement(m.a,{className:e.stretch,classes:{label:e.block},onClick:this.saveBackup},c.a.createElement(f.a,null),"Backup",!window.client.mobile&&" to File")),c.a.createElement(p.a,{title:"Save local storage."},c.a.createElement(m.a,{className:e.stretch,classes:{label:e.block},onClick:this.saveLocalStorage},c.a.createElement(w.a,null),"Commit",!window.client.mobile&&" Changes")),c.a.createElement(p.a,{title:"Restore original text."},c.a.createElement(m.a,{className:e.stretch,classes:{label:e.block},onClick:this.resetText},c.a.createElement(O.a,null),"Undo",!window.client.mobile&&" Changes")))))}}]),t}(c.a.Component));t.a=Object(u.withStyles)(function(e){return{frame:{position:"absolute",display:"flex",height:"100%",width:"100%","flex-flow":"column nowrap"},editor:Object(o.a)({flex:1},e.breakpoints.down("sm"),{fontSize:"16pt"}),flex:{display:"flex"},stretch:{flex:1},block:{display:"flex","flex-direction":"column"},stretchflex:{display:"flex",flex:1},pad:{margin:"1em"},padded:{margin:e.spacing.unit}}},{withTheme:!0})(P)},250:function(e,t,a){"use strict";var n=a(9);t.a=function e(){Object(n.a)(this,e),this.empty={buttons:{name:"",text:"",javascript:!1,icon:"widgets",count:"0",tooltip:""},triggers:{name:"",text:"",javascript:!1,pattern:"",regex:!1,suppress:!1},timers:{name:"",text:"",javascript:!1,disabled:!0,delay:0,repeat:!1,times:0},macros:{name:"",text:"",javascript:!1,pattern:"",regex:!1},keys:{name:"",text:"",javascript:!1,code:0,ctrl:!1,alt:!1,shift:!1,prevent:!0,release:!0},css:{name:"",text:""},scripts:{name:"",text:"// Insert JavaScript below.\n"}},this.saved={buttons:[{name:"look",text:"look",javascript:!1,icon:"remove_red_eye",count:"",tooltip:"Look around."},{name:"inventory",text:"inventory",javascript:!1,icon:"business_center",count:"",tooltip:"What am I carrying?"},{name:"who",text:"who",javascript:!1,icon:"people",count:"",tooltip:"Who's online?"},{name:"Mailbox",text:'SendAPI("maillist");',javascript:!0,icon:"mail",count:"client.react.taskbar.state.unreadMail",tooltip:"@mail Inbox"},{name:"BBoard",text:'SendAPI("boardlist");',javascript:!0,icon:"forum",count:"client.react.taskbar.state.unreadBB",tooltip:"Bulletin Boards"},{name:"help",text:"client.react.taskbar.showHelp(event);",javascript:!0,icon:"search",count:"",tooltip:"Search help files"}],triggers:[{name:"PerChannel",text:'Window("%1").SaveHistory().Prefix("+%1 ").AutoHide().append("%0");',javascript:!0,pattern:"<*> *",regex:!1,suppress:!0},{name:"AllChannels",text:'Window("Channels").SaveHistory().append("%0");',javascript:!0,pattern:"<*> *",regex:!1,suppress:!0}],timers:[{name:"EveryMinute",text:"th DING!",javascript:!1,disabled:!0,delay:60,repeat:!0,times:-1}],macros:[{name:"OpenWindow",text:'Window("%2").SaveHistory().Prefix("+%2 ").Focus();',javascript:!0,pattern:"/win(dow)? (.*)",regex:!0},{name:"ChannelRecall",text:"th crecall(%1,100,,%r)",javascript:!1,pattern:"/recall *",regex:!1}],keys:[{name:"ScrollToBottom",text:"Output.scrollDown();",javascript:!0,code:34,ctrl:!1,alt:!1,shift:!0,prevent:!0,release:!0},{name:"RecallPrevious",text:"Input.cycleBackward();",javascript:!0,code:38,ctrl:!1,alt:!1,shift:!0,prevent:!0,release:!0},{name:"RecallNext",text:"Input.cycleForward();",javascript:!0,code:40,ctrl:!1,alt:!1,shift:!0,prevent:!0,release:!0}],css:[],scripts:[]}}},251:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(16),_=a(0),c=a.n(_),u=a(10),d=a(71),m=a.n(d),h=a(79),p=a.n(h),E=a(80),f=a.n(E),b=a(30),w=a.n(b),g=a(18),O=a.n(g),v=a(29),y=a.n(v),P=a(25),C=a.n(P),M=a(33),D=a.n(M),k=a(36),T=a.n(k),x=a(15),S=a.n(x),B=a(19),A=a.n(B),L=a(45),I=a.n(L),R=a(31),U=a.n(R),N=a(62),W=a.n(N),K=a(38),j=a.n(K),H=a(24),F=a.n(H),q=a(20),z=a.n(q),G=a(248),V=a.n(G),X=a(249),J=a.n(X),$=a(90),Y=a.n($),Z=a(91),Q=a.n(Z),ee=a(247),te=a.n(ee),ae=a(39),ne=a.n(ae),ie=a(92),le=a.n(ie),se=a(21),re=a.n(se),oe=a(64),_e=a.n(oe),ce=a(100),ue=a.n(ce),de=a(98),me=a.n(de),he=a(69),pe=a.n(he),Ee=a(63),fe=a.n(Ee),be=a(70),we=a.n(be),ge=(a(184),a(446),a(448),a(118),function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).setStatus=function(e,t){a.setState({error:e,status:t}),clearTimeout(a.clearStatus),setTimeout(a.clearStatus,3e3)},a.clearStatus=function(){a.setState({error:!1,status:""}),a.onResize()},a.handleChange=function(e){return function(t){var n=a.state.item;n[e]=t.target.value,a.setState({item:n})}},a.handleNumber=function(e){return function(t){var n=a.state.item;n[e]=parseInt(t.target.value),a.setState({item:n})}},a.handleSwitch=function(e){return function(t){var n=a.state.item;n.hasOwnProperty(e)?(n[e]=t.target.checked,a.setState({item:n})):a.setState(Object(o.a)({},e,t.target.checked))}},a.changeText=function(e){var t=a.state.item;t.text=e,a.setState({item:t})},a.save=function(){var e=a.props,t=e.list,n=e.listName,i=e.Form,l="CSS"===n;i&&i.save?i.save():l?window.client.saveCSS():window.client.saveLocalStorage(t,n)},a.onResize=function(){a.setState({needsToResize:!1}),a.editor.current.editor.resize()},a.onSubmit=function(e){var t=a.props,n=t.list,i=t.selected,l=t.immutable,s=a.state.item,r=window.client;if(e.preventDefault(),""!==s.name){s.name=r.filterUnicode(s.name),s.text=r.filterUnicode(s.text),s.pattern&&(s.pattern=r.filterUnicode(s.pattern)),s.tooltip&&(s.tooltip=r.filterUnicode(s.tooltip)),s.icon&&(s.icon=r.filterUnicode(s.icon)),s.count&&(s.count=r.filterUnicode(s.count));var o=n.map(function(e){return e.name}).indexOf(s.name);o>-1&&o!==i?a.setStatus(!0,"Name already saved, choose another."):l&&-1===i?a.setStatus(!0,"You may only edit existing items."):(a.setStatus(!1,"Saved."),i>-1?(n[i]=Object.assign({},s),r.react.configure.setState({selected:i})):(n.push(s),r.react.configure.setState({selected:n.length-1})),a.save())}else a.setStatus(!0,"Name must not be blank.")},a.onDelete=function(){var e=a.props,t=e.list,n=e.listName,i=e.selected,l=e.immutable,s=window.client;if(window.confirm("Do you really want to delete that?")&&t&&i>-1){if(l){var r=t[i].name;t[i]=Object.assign({},s.templates.empty[n]),t[i].name=r,a.setState({item:Object.assign({},t[i])})}else t.splice(i,1),s.react.configure.setState({selected:-1});a.setStatus(!1,"Deleted."),a.save()}},a.onReset=function(){var e=a.props,t=e.list,n=e.listName,i=e.selected,l=e.immutable,s=e.template,r=a.state.item,o=Object.assign({},window.client.templates.empty[n]);t&&i>-1&&(l?(o.name=t[i].name,""===r.text?o.text=a.defaultText():o.text=t[i].text):o=t[i]),a.setState({item:Object.assign({},s||o)}),a.setStatus(!1,"Reset.")};var i=e.list,r=e.listName,_=e.selected,u=e.template,d=window.client.templates.empty[r];return a.state={list:i,item:Object.assign({},i&&_>-1?i[_]:u||d),selected:_,status:"",error:!1,javascript:!0,needsToResize:!1},a.editor=c.a.createRef(),a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.panel;e.options.resizeit.resize=this.onResize,window.client.panels.resizeit(e,e.options.resizeit)}},{key:"componentWillUnmount",value:function(){this.props.panel.options.resizeit.resize=null,clearTimeout(this.clearStatus)}},{key:"defaultText",value:function(){var e=this,t=this.props,a=t.list,n=t.listName,i=t.selected,l=t.immutable,s=this.state.item,r=s.name;if(!l)return"";if(a&&i>-1&&""!==a[i].text)return a[i].text.slice();var o=new window.XMLHttpRequest;return o.onreadystatechange=function(){4===o.readyState&&(200===o.status?(s.name=r,s.text=o.responseText,e.setState({item:s,list:a,selected:i})):alert("Unable to download file! See console for more information."))},o.open("GET","./"+r),o.send(),window.client.templates.empty[n].text.slice()}},{key:"componentDidUpdate",value:function(){this.state.needsToResize&&this.onResize()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.selected,n=e.Form,i=e.immutable,l=this.state.item,s="MushCode",r="JavaScript";n||(s="Text",l.name.endsWith(".css")&&(r="CSS"));var o=this.state.javascript;return l.hasOwnProperty("javascript")&&(o=l.javascript),c.a.createElement("div",{className:t.frame},c.a.createElement("form",{onSubmit:this.onSubmit,className:t.form},c.a.createElement("div",{className:t.container},c.a.createElement("div",{className:t.top},c.a.createElement("div",{className:t.name},c.a.createElement(re.a,{label:"Name",className:t.flex,value:l.name,onChange:this.handleChange("name"),disabled:i,InputProps:{classes:{input:t.inputBase}}}),c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,s),c.a.createElement(F.a,{checked:o,classes:{switchBase:t.switchBase},color:"default",onChange:this.handleSwitch("javascript")}),c.a.createElement(S.a,null,r))),n&&c.a.createElement(n,{item:l,handleNumber:this.handleNumber,handleChange:this.handleChange,handleSwitch:this.handleSwitch})),c.a.createElement("div",{className:t.editor},c.a.createElement(we.a,{width:"100%",height:"100%",minHeight:"4em",minWidth:"10em",className:t.editor,ref:this.editor,mode:o?r.toLowerCase():s.toLowerCase(),theme:"tomorrow_night_bright",value:l.text,onChange:this.changeText,wrapEnabled:!window.client.mobile,highlightActiveLine:!1,editorProps:{$blockScrolling:1/0}}))),c.a.createElement("div",{className:t.bottom},c.a.createElement(A.a,{className:t.mobileOnly,classes:{label:t.block},onClick:function(){return window.client.react.configure.setState({edit:!1,selected:-1})}},c.a.createElement(pe.a,null),"Close"),c.a.createElement(A.a,{onClick:this.onDelete,classes:{label:t.block},disabled:-1===a},c.a.createElement(me.a,null),"Delete"),c.a.createElement("span",{className:t.middle}),c.a.createElement(A.a,{onClick:this.onSubmit,classes:{label:t.block},disabled:i&&-1===a},c.a.createElement(_e.a,null),"Save"),c.a.createElement(A.a,{onClick:this.onReset,classes:{label:t.block},disabled:i&&-1===a},i&&""===l.text?c.a.createElement(fe.a,null):c.a.createElement(ue.a,null),i&&""===l.text?"Source":"Undo"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.list,n=e.listName,i=e.selected,l=e.template,s=window.client.templates.empty[n],r={};return a!==t.list?(r.list=a,r.selected=i,r.item=Object.assign({},a&&i>-1?a[i]:l||s),r.needsToResize=!0,r):i!==t.selected?(r.selected=i,r.item=Object.assign({},a&&i>-1?a[i]:l||s),r.needsToResize=!0,r):l!==t.template?(r.template=l,r.item=Object.assign({},a&&i>-1?a[i]:l||s),r.needsToResize=!0,r):null}}]),t}(c.a.Component)),Oe=Object(u.withStyles)(function(e){return{frame:{position:"absolute",height:"100%",width:"100%",overflow:"hidden"},form:{position:"absolute",display:"flex",height:"100%",width:"100%",flexFlow:"column nowrap"},container:{flex:1,display:"flex",flexFlow:"column nowrap"},name:{width:"100%",display:"flex",flexFlow:"row wrap"},flow:{overflowX:"hidden",overflowY:"auto"},top:Object(o.a)({display:"flex",flexFlow:"row wrap",width:"100%",overflowX:"hidden",overflowY:"auto"},e.breakpoints.down("sm"),{flex:1}),editor:Object(o.a)({flex:1,margin:e.spacing.unit+"px 0"},e.breakpoints.down("sm"),{margin:0,fontSize:"16pt"}),bottom:{display:"flex",flexFlow:"row nowrap",width:"100%"},middle:{display:"flex",flexFlow:"row nowrap",flex:1,alignItems:"center"},align:{width:"100%",textAlign:"center",verticalAlign:"middle"},flex:{flex:1,minWidth:"10em"},block:{display:"flex","flex-direction":"column"},mobileOnly:Object(o.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),desktopOnly:Object(o.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),switchText:{display:"flex",justifyContent:"space-between",alignItems:"center"},switchBase:Object(o.a)({},e.breakpoints.down("sm"),{height:"24px"}),inputBase:Object(o.a)({padding:.25*e.spacing.unit},e.breakpoints.up("md"),{padding:e.spacing.unit})}},{withTheme:!0})(ge),ve=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.item,n=e.handleChange,i=e.handleSwitch;return c.a.createElement("div",{className:t.frame},c.a.createElement(re.a,{label:"Matching pattern",fullWidth:!0,value:a.pattern,onChange:n("pattern"),inputProps:{classes:{input:t.inputBase}}}),c.a.createElement("div",{className:t.row},c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Wildcard"),c.a.createElement(F.a,{checked:a.regex,color:"default",onChange:i("regex"),classes:{switchBase:t.switchBase}}),c.a.createElement(S.a,null,"RegExp")),c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Suppress terminal output?"),c.a.createElement(F.a,{checked:a.suppress,onChange:i("suppress"),classes:{switchBase:t.switchBase}}))))}}],[{key:"save",value:function(){window.client.saveTriggers()}}]),t}(c.a.Component),ye=Object(u.withStyles)(function(e){return{frame:{position:"relative",width:"100%"},row:{width:"100%",display:"flex",flexFlow:"row wrap",justifyContent:"space-between"},switchText:{display:"flex",justifyContent:"space-between",alignItems:"center"},switchBase:Object(o.a)({},e.breakpoints.down("sm"),{height:"24px"}),inputBase:Object(o.a)({padding:.25*e.spacing.unit},e.breakpoints.up("md"),{padding:e.spacing.unit})}},{withTheme:!0})(ve),Pe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.item,n=e.handleNumber,i=e.handleSwitch;return c.a.createElement("div",{className:t.frame},c.a.createElement(re.a,{type:"number",label:"Delay seconds",className:t.flex,value:String(a.delay),onChange:n("delay"),inputProps:{classes:{input:t.inputBase}}}),c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Repeat this timer?"),c.a.createElement(F.a,{checked:a.repeat,onChange:i("repeat"),classes:{switchBase:t.switchBase}})),c.a.createElement(re.a,{type:"number",disabled:!a.repeat,label:"Number of times",className:t.flex,value:String(a.times),onChange:n("times"),inputProps:{classes:{input:t.inputBase}}}))}}],[{key:"save",value:function(){window.client.saveTimers()}}]),t}(c.a.Component),Ce=Object(u.withStyles)(function(e){return{frame:{display:"flex",flexFlow:"row nowrap"},flex:{flex:1},switchText:{display:"flex",justifyContent:"space-between",alignItems:"center"},switchBase:Object(o.a)({},e.breakpoints.down("sm"),{height:"24px"}),inputBase:Object(o.a)({padding:.25*e.spacing.unit},e.breakpoints.up("md"),{padding:e.spacing.unit})}},{withTheme:!0})(Pe),Me=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.item,n=e.handleChange,i=e.handleSwitch;return c.a.createElement("div",{className:t.frame},c.a.createElement(re.a,{label:"Matching pattern",fullWidth:!0,value:a.pattern,onChange:n("pattern"),inputProps:{classes:{input:t.inputBase}}}),c.a.createElement("div",{className:t.row},c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Wildcard"),c.a.createElement(F.a,{checked:a.regex,color:"default",onChange:i("regex"),classes:{switchBase:t.switchBase}}),c.a.createElement(S.a,null,"RegExp"))))}}],[{key:"save",value:function(){window.client.saveMacros()}}]),t}(c.a.Component),De=Object(u.withStyles)(function(e){return{frame:{position:"relative",width:"100%"},row:{width:"100%",display:"flex",flexFlow:"row wrap",justifyContent:"space-between"},switchText:{display:"flex",justifyContent:"space-between",alignItems:"center"},switchBase:Object(o.a)({},e.breakpoints.down("sm"),{height:"24px"}),inputBase:Object(o.a)({padding:.25*e.spacing.unit},e.breakpoints.up("md"),{padding:e.spacing.unit})}},{withTheme:!0})(Me),ke=a(105),Te=a.n(ke),xe=a(96),Se=a.n(xe),Be=a(97),Ae=a.n(Be),Le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).showKeyForm=function(){a.setState({capturing:!0}),document.addEventListener("keyup",a.captureKey,!0)},a.hideKeyForm=function(){a.setState({capturing:!1}),document.removeEventListener("keyup",a.captureKey)},a.captureKey=function(e){var t={code:e.keyCode?e.keyCode:e.which,ctrl:e.ctrlKey,shift:e.shiftKey,alt:e.altKey};e.preventDefault(),a.state.capturing&&(a.props.item.code=t.code,a.props.item.ctrl=t.ctrl,a.props.item.alt=t.alt,a.props.item.shift=t.shift),a.hideKeyForm()},a.getKeyName=function(){var e=a.props.item.code;if(0===e)return"Capture Key";var t="Meta",n=window.navigator.platform;-1!==["Macintosh","MacIntel","MacPPC","Mac68K","iPhone","iPad","iPod"].indexOf(n)?t="Command":-1!==["Win32","Win64","Windows","WinCE"].indexOf(n)&&(t="Windows");var i={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause/Break",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:t,93:"Right Click",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"Numpad *",107:"Numpad +",109:"Numpad -",110:"Numpad .",111:"Numpad /",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num Lock",145:"Scroll Lock",182:"My Computer",183:"My Calculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};return i.hasOwnProperty(e)?i[e]+" (code "+e+")":e},a.state={capturing:!1},a.keyform=c.a.createRef(),a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.item,n=e.handleSwitch,i=this.state.capturing,l=this.getKeyName();return c.a.createElement("div",{className:t.frame},c.a.createElement("span",{className:t.button},c.a.createElement(A.a,{className:t.flex,variant:"contained",onClick:this.showKeyForm,color:"primary"},l)),c.a.createElement("div",{className:t.row},c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Ctrl"),c.a.createElement(Te.a,{checked:a.ctrl,onChange:n("ctrl")})),c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Alt"),c.a.createElement(Te.a,{checked:a.alt,onChange:n("alt")})),c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Shift"),c.a.createElement(Te.a,{checked:a.shift,onChange:n("shift")}))),c.a.createElement("div",{className:t.row},c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Press"),c.a.createElement(F.a,{checked:a.release,color:"default",onChange:n("release"),classes:{switchBase:t.switchBase}}),c.a.createElement(S.a,null,"Release")),c.a.createElement("span",{className:t.switchText},c.a.createElement(S.a,null,"Prevent default event?"),c.a.createElement(F.a,{checked:a.prevent,onChange:n("prevent"),classes:{switchBase:t.switchBase}}))),c.a.createElement(Se.a,{ref:this.keyform,open:i,className:t.keyform,disableEscapeKeyDown:!0,onClose:this.hideKeyForm,"aria-labelledby":"keyform.title"},c.a.createElement(Ae.a,{id:"keyform.title"},"Press key combination to capture."),c.a.createElement(A.a,{className:t.flex,onClick:this.hideKeyForm},c.a.createElement(pe.a,null))))}}],[{key:"save",value:function(){window.client.saveKeys()}}]),t}(c.a.Component),Ie=Object(u.withStyles)(function(e){return{frame:{width:"100%",display:"flex",flexFlow:"row wrap"},row:{width:"100%",display:"flex",flexFlow:"row wrap",justifyContent:"space-between"},flex:{flex:1},switchText:{display:"flex",justifyContent:"space-between",alignItems:"center"},switchBase:Object(o.a)({},e.breakpoints.down("sm"),{height:"24px"}),inputBase:Object(o.a)({padding:.25*e.spacing.unit},e.breakpoints.up("md"),{padding:e.spacing.unit}),keyform:{display:"flex",flexFlow:"row wrap"},button:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",minWidth:"10em",padding:e.spacing.unit}}},{withTheme:!0})(Le),Re=a(35),Ue=a.n(Re),Ne=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.item,n=e.handleChange,i=a.icon.startsWith("icon-");return c.a.createElement("div",{className:t.frame},c.a.createElement(z.a,{title:"Button preview."},c.a.createElement(U.a,null,c.a.createElement(Ue.a,{className:i?a.icon:null},!i&&a.icon))),c.a.createElement(re.a,{label:"Icon",value:a.icon,onChange:n("icon"),inputProps:{classes:{input:t.inputBase}}}),c.a.createElement(re.a,{label:"Badge Expression",fullWidth:!0,value:a.count,onChange:n("count"),inputProps:{classes:{input:t.inputBase}}}),c.a.createElement(re.a,{label:"Tooltip",fullWidth:!0,value:a.tooltip,onChange:n("tooltip"),inputProps:{classes:{input:t.inputBase}}}))}}],[{key:"save",value:function(){window.client.saveButtons()}}]),t}(c.a.Component),We=Object(u.withStyles)(function(e){return{frame:{position:"relative",width:"100%"},row:{width:"100%",display:"flex",flexFlow:"row wrap",justifyContent:"space-between"},switchText:{display:"flex",justifyContent:"space-between",alignItems:"center"},switchBase:Object(o.a)({},e.breakpoints.down("sm"),{height:"24px"}),inputBase:Object(o.a)({padding:.25*e.spacing.unit},e.breakpoints.up("md"),{padding:e.spacing.unit})}},{withTheme:!0})(Ne);function Ke(e){return e.visible?c.a.createElement(U.a,{onClick:e.onClick,className:e.className},"left"===e.direction?c.a.createElement(Y.a,null):c.a.createElement(Q.a,null)):c.a.createElement("div",{className:e.className})}var je=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).changeTab=function(e,t){a.setState({tab:t,selected:-1,edit:!1,template:null})},a.onSelect=function(e){return function(t){a.setState({selected:e,template:null})}},a.showTemplates=function(e){a.setState({menuAnchor:e.currentTarget})},a.hideTemplates=function(){a.setState({menuAnchor:null})},a.chooseTemplate=function(e){return function(){a.setState({template:e,edit:!0,selected:-1})}},a.handleSwitch=function(e){return function(t){e.disabled=!t.target.checked,a.saveList()}},a.saveList=function(){var e=a.tabs[a.state.tab],t="CSS"===e.listName;e.Form&&e.Form.save?e.Form.save():t?window.client.saveCSS():window.client.saveLocalStorage(e.list,e.listName),a.forceUpdate()},a.toggleSort=function(e){a.setState({sortList:!a.state.sortList})},a.moveItemUp=function(e,t){if(0!==t){var n=e[t-1];e[t-1]=e[t],e[t]=n,t===a.state.selected&&a.setState({selected:t-1}),a.saveList()}},a.moveItemDown=function(e,t){if(t!==e.length-1){var n=e[t+1];e[t+1]=e[t],e[t]=n,t===a.state.selected?a.setState({selected:t+1}):t+1===a.state.selected&&a.setState({selected:t}),a.saveList()}};var i=window.client;return a.tabs=[{list:i.buttons,listName:"Buttons",Form:We,immutable:!1,sortable:!0},{list:i.triggers,listName:"Triggers",Form:ye,immutable:!1,sortable:!0},{list:i.macros,listName:"Macros",Form:De,immutable:!1,sortable:!0},{list:i.keys,listName:"Keys",Form:Ie,immutable:!1,sortable:!0},{list:i.timers,listName:"Timers",Form:Ce,immutable:!1,sortable:!0},{list:i.css,listName:"CSS",Form:null,immutable:!0,sortable:!1},{list:i.scripts,listName:"Scripts",Form:null,immutable:!0,sortable:!1}],a.state={tab:0,edit:!1,selected:-1,menuAnchor:null,template:null,helpText:null,sortList:!1},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.client.react.configure=this}},{key:"componentWillUnmount",value:function(){window.client.react.configure=null}},{key:"helpText",value:function(e){this.setState({helpText:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.panel,i=this.state,l=i.selected,s=i.edit,r=i.helpText,o=i.menuAnchor,_=i.template,u=i.sortList,d=this.tabs[this.state.tab],h=d.listName.toLowerCase(),E=window.client.templates.saved[h];return c.a.createElement("div",{className:a.frame},c.a.createElement(m.a,{position:"static"},c.a.createElement(p.a,{value:this.state.tab,scrollable:!0,scrollButtons:"on",onChange:this.changeTab,ScrollButtonComponent:Ke,classes:{scrollButtons:a.scrollButtons}},this.tabs.map(function(e,t){return c.a.createElement(f.a,{key:t,label:e.listName})}))),c.a.createElement(S.a,{className:a.container,component:"div"},c.a.createElement("div",{className:a.left},c.a.createElement("span",{className:s||l>-1?a.mobileClose:a.mobileOpen},c.a.createElement("div",{className:a.overflow},c.a.createElement(w.a,{disablePadding:!0,dense:!0,subheader:c.a.createElement(T.a,{disableGutters:!0,className:a.subHeader},d.listName,c.a.createElement(z.a,{title:"Reorder list."},c.a.createElement(U.a,{disabled:!d.sortable,onClick:this.toggleSort},u?c.a.createElement(le.a,null):c.a.createElement(ne.a,null))))},d.list.map(function(t,n){return c.a.createElement(O.a,{key:n,dense:!0,button:!0,divider:!0,selected:l===n,onClick:e.onSelect(n),className:n%2===0?a.even:a.odd},c.a.createElement(C.a,{className:a.listNum},c.a.createElement("span",null,n+1)),c.a.createElement(y.a,{className:a.listText,primary:t.name}),!d.immutable&&c.a.createElement(D.a,null,u?c.a.createElement(U.a,{classes:{root:a.arrowButton},disabled:n===d.list.length-1,onClick:function(){return e.moveItemDown(d.list,n)}},c.a.createElement(te.a,null)):c.a.createElement(F.a,{checked:!t.disabled,classes:{switchBase:a.switchBase},onChange:e.handleSwitch(t)})))}),d.list.length<1&&c.a.createElement(O.a,{key:-1,dense:!0,className:a.even},c.a.createElement(y.a,{className:a.listText,secondary:"No "+h})))),E&&E.length>0&&c.a.createElement(A.a,{"aria-owns":o?"template.menu":null,"aria-label":"open-templates","aria-haspopup":"true",classes:{label:a.block},onClick:this.showTemplates},c.a.createElement(V.a,null),"Templates"),!d.immutable&&c.a.createElement(A.a,{classes:{label:a.block},onClick:function(){return e.setState({edit:!0,selected:-1,template:null})}},c.a.createElement(J.a,null),"New ",d.listName.slice(0,-1)))),c.a.createElement("div",{className:a.right},c.a.createElement("div",{className:s||l>-1?a.mobileOpen:a.mobileClose},c.a.createElement(Oe,{list:d.list,listName:h,template:_,selected:l,panel:n,Form:d.Form,immutable:d.immutable})))),c.a.createElement(W.a,{disableEnforceFocus:!0,id:"template.menu",anchorEl:o,open:Boolean(o),onClick:this.hideTemplates,onClose:this.hideTemplates},E&&E.map(function(t,a){return t.name?c.a.createElement(j.a,{key:a,onClick:e.chooseTemplate(t)},t.name):null})),c.a.createElement(I.a,{anchorEl:r,open:Boolean(r),onClose:function(){return e.setState({helpText:null})}},c.a.createElement(S.a,null,"This is where help text goes.")))}}]),t}(c.a.Component);t.a=Object(u.withStyles)(function(e){return{frame:{position:"absolute",height:"100%",width:"100%",display:"flex","flex-flow":"column nowrap"},container:Object(o.a)({padding:e.spacing.unit,flex:1,display:"flex","flex-flow":"row wrap"},e.breakpoints.up("md"),{padding:3*e.spacing.unit}),left:Object(o.a)({marginRight:0},e.breakpoints.up("md"),{marginRight:3*e.spacing.unit}),right:{position:"relative",flex:1,height:"100%",overflow:"hidden"},listText:{paddingLeft:0,marginRight:2*e.spacing.unit},odd:{backgroundColor:"rgba(0, 0, 0, 0.2)"},even:{backgroundColor:"rgba(0, 0, 0, 0.05)"},flex:{flex:1},block:{display:"flex","flex-direction":"column"},overflow:{flex:1,overflowX:"hidden",overflowY:"auto"},mobileClose:Object(o.a)({display:"none"},e.breakpoints.up("md"),{height:"100%",display:"flex",flexFlow:"column nowrap",justifyContent:"space-between"}),mobileOpen:{height:"100%",display:"flex",flexFlow:"column nowrap",justifyContent:"space-between"},scrollButtons:Object(o.a)({},e.breakpoints.down("sm"),{flex:"0 0 24px",padding:0,alignSelf:"center"}),subHeader:{width:"100%",flex:1,display:"flex",justifyContent:"space-between"},arrowButton:{flex:"0 0 24px",padding:0,alignSelf:"flex-end"},switchBase:Object(o.a)({},e.breakpoints.down("sm"),{height:"24px"})}},{withTheme:!0})(je)},252:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(0),_=a.n(o),c=a(10),u=a(187),d=a(16),m=a(2),h=a.n(m),p=a(15),E=a.n(p),f=a(20),b=a.n(f),w=1e4,g="output_history",O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).focusInput=function(){window.client.focus()},a.onResize=function(e){clearTimeout(a.doResize),setTimeout(a.doResize,1e3)},a.doResize=function(){var e=window.client;e.output.calcDimensions(),e.sendText("SCREENWIDTH "+Math.min(e.settings.terminalWidth,Math.floor(window.client.output.root.parentNode.clientWidth/window.client.output.dims.width))),e.sendText("SCREENHEIGHT "+Math.floor(e.output.root.parentNode.clientHeight/e.output.dims.height)),e.output.scrollDown(),e.mobile=!window.matchMedia(a.props.theme.breakpoints.up("md").substring(7)).matches,a.onChange()},a.onChange=function(){window.client.settings.historySize>0&&window.client.output.saveHistory(g,Math.min(w,window.client.settings.historySize)),a.setState({lines:a.linesOfScroll()})},a.state={lines:0},a.terminal=_.a.createRef(),a.output=_.a.createRef(),a.prompt=_.a.createRef(),a.init=!1,a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){document.body.onresize=this.onResize,window.client.react.terminal=this,window.client.initOutput(this.output.current,this.terminal.current),window.client.initPrompt(this.prompt.current),this.init=!0,window.client.settings.historySize>0&&window.client.output.loadHistory(g),this.onResize()}},{key:"linesOfScroll",value:function(){return window.client.output.linesOfScroll()}},{key:"scrollDown",value:function(){window.client.output.scrollDown()}},{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.width,i=t.ansiFG,l=t.ansiBG,s=t.containerRef,r=this.state.lines,o=window.client.settings,c=o.fontFamily,u=o.fontSize,d=o.mobileFontSize,m={fontFamily:"'"+c+"', monospace",fontSize:(window.client.mobile?d:u)+"pt"};return e=this.init?n*window.client.output.dims.width+"px":"100%",_.a.createElement("div",{id:"terminal-container",className:h()(a.frame),style:m,onClick:this.focusInput,ref:s},_.a.createElement("div",{ref:this.terminal,className:h()(a.terminal,i,l),onScroll:this.onChange},_.a.createElement("div",{ref:this.output,className:h()(a.output,i,l),style:{maxWidth:e}})),_.a.createElement("div",{className:a.taskbar},_.a.createElement("div",{ref:this.prompt,className:h()(a.prompt,i,l)}),_.a.createElement("div",{className:a.scrollcount},_.a.createElement(b.a,{title:"Click to scroll down."},_.a.createElement(E.a,{color:"error",align:"right",variant:"caption",className:a.lineheight,onClick:this.scrollDown},r>0&&"...and "+r+" more lines...")))))}}]),t}(_.a.Component),v=Object(c.withStyles)(function(e){return{frame:Object(d.a)({position:"relative",display:"flex","flex-flow":"column nowrap",margin:0,padding:0,border:"none","background-color":e.palette.primary.main,flex:1,height:"100%","font-family":"'Courier New', monospace","font-weight":"normal","font-size":"10pt"},e.breakpoints.down("sm"),{"font-size":"5pt"}),terminal:{flex:1,position:"relative",overflowY:"scroll",overflowX:"hidden",padding:"0.25em 0.5em"},output:{"white-space":"pre-wrap","word-wrap":"break-word",position:"absolute",margin:0,border:0,padding:0},taskbar:{padding:"0",position:"relative",overflow:"hidden"},prompt:{overflow:"hidden","white-space":"pre-wrap","text-align":"left","vertical-align":"middle",height:"1em",padding:"0.25em"},scrollcount:{position:"absolute",height:"100%",bottom:0,right:0},lineheight:{lineHeight:1},noPadding:{padding:0}}},{withTheme:!0})(O),y=a(31),P=a.n(y),C=a(213),M=a.n(C),D=a(214),k=a.n(D),T=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).recallBack=function(){window.client.input.cycleBackward(),window.client.input.focus(!0)},a.recallForward=function(){window.client.input.cycleForward(),window.client.input.focus(!0)},a.state={},a.input=_.a.createRef(),a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.client.react.input=this,window.client.initInput(this.input.current)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.ansiFG,n=e.ansiBG,i=window.client.settings,l=i.fontFamily,s=i.fontSize,r=i.recallButtons,o=i.recallAnchor,c={fontFamily:"'"+l+"', monospace",fontSize:(window.client.mobile?16:s)+"pt"},u=_.a.createElement("span",{className:t.buttons},_.a.createElement(P.a,{classes:{root:t.smallIcons},onClick:this.recallBack},_.a.createElement(M.a,null)),_.a.createElement(P.a,{classes:{root:t.smallIcons},onClick:this.recallForward},_.a.createElement(k.a,null)));return _.a.createElement("div",{className:t.frame},r&&"left"===o&&u,_.a.createElement("textarea",{ref:this.input,className:h()(t.text,a,n),style:c,autoComplete:"off",autoFocus:!window.client.mobile}),r&&"right"===o&&u)}}]),t}(_.a.Component),x=Object(c.withStyles)(function(e){return{frame:{"background-color":e.palette.primary.main,display:"flex"},text:Object(d.a)({flex:1,margin:"1px 0 0 0",border:"none",outline:"none","vertical-align":"middle",padding:"0.25em",resize:"none",height:"1.5em","font-family":"'Courier New', monospace","font-weight":"normal","font-size":"16pt"},e.breakpoints.up("md"),{height:"3em"}),buttons:Object(d.a)({display:"flex",flexFlow:"row wrap",justifyContent:"center",alignContent:"center"},e.breakpoints.up("md"),{flexFlow:"column wrap"}),smallIcons:{padding:0}}},{withTheme:!0})(T),S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={status:""},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"setStatus",value:function(e){this.setState({status:e})}},{key:"componentDidMount",value:function(){window.client.react.statusbar=this}},{key:"componentWillUnmount",value:function(){window.client.react.statusbar=null}},{key:"render",value:function(){var e=this.props.classes,t=this.state.status,a=window.client.settings.mobileHideStatusbar;return _.a.createElement("div",{className:e.frame,onClick:function(){return window.client.focus()}},!a&&_.a.createElement(E.a,{align:"right",color:"textPrimary",noWrap:!0},t))}}]),t}(_.a.Component),B=Object(c.withStyles)(function(e){return{frame:{background:e.palette.primary.main,margin:0,border:"none",outline:"none","text-align":"right","vertical-align":"middle",padding:"0.25em"}}},{withTheme:!0})(S),A=a(21),L=a.n(A),I=a(96),R=a.n(I),U=a(217),N=a.n(U),W=a(215),K=a.n(W),j=a(216),H=a.n(j),F=a(97),q=a.n(F),z=a(104),G=a.n(z),V=a(220),X=a.n(V),J=a(219),$=a.n(J),Y=a(218),Z=a.n(Y),Q=a(93),ee=a.n(Q),te=a(95),ae=a.n(te),ne=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).openLogin=function(e){a.setState({open:!0}),a.setState({msg:e}),a.focusInput("username")},a.closeLogin=function(){a.setState({open:!1}),window.client.focus()},a.setMessage=function(e){a.setState({msg:e})},a.submitLogin=function(){var e=document.getElementById("username").value,t=document.getElementById("password").value;document.getElementById("password").value="";var n='connect "'+e+'" '+t;window.client.sendText(n),a.closeLogin()},a.submitGuest=function(){window.client.sendText("connect guest"),a.closeLogin()},a.submitCreate=function(){var e=document.getElementById("username").value,t=document.getElementById("password").value;document.getElementById("password").value="";var n='create "'+e+'" '+t;window.client.sendText(n),a.closeLogin()},a.catchReturn=function(e){"Enter"===e.key&&(a.submitLogin(),e.preventDefault())},a.state={open:!1,msg:null},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"focusInput",value:function(e){var t=document.getElementById(e);t&&t.focus()}},{key:"reconnect",value:function(){window.confirm("Do you want to reconnect?")&&window.client.reconnect(!0)}},{key:"componentDidMount",value:function(){window.client.react.login=this}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.open,n=t.msg;return _.a.createElement(R.a,{className:e.frame,open:a,onEscapeKeyDown:function(){return window.client.react.taskbar.openDrawer()},onClose:this.closeLogin,"aria-labelledby":"responsive-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0},_.a.createElement(q.a,{className:e.title,id:"responsive-dialog-title"},"Character Login",_.a.createElement("span",{className:e.right},_.a.createElement(b.a,{title:"Reconnect."},_.a.createElement(P.a,{onClick:this.reconnect},_.a.createElement(ae.a,null))),_.a.createElement(b.a,{title:"Change settings."},_.a.createElement(P.a,{onClick:function(){return window.client.react.taskbar.openDrawer()}},_.a.createElement(ee.a,null))))),_.a.createElement(K.a,null,_.a.createElement(H.a,null,_.a.createElement("span",{dangerouslySetInnerHTML:{__html:n}})),_.a.createElement(L.a,{className:e.text,autoComplete:"username",margin:"dense",id:"username",name:"username",label:"Character Name",type:"string",fullWidth:!0,onKeyPress:this.catchReturn}),_.a.createElement(L.a,{className:e.text,autoComplete:"current-password",margin:"dense",id:"password",name:"password",label:"Password",type:"password",fullWidth:!0,onKeyPress:this.catchReturn})),_.a.createElement(N.a,null,_.a.createElement(G.a,{className:e.left,classes:{label:e.block},onClick:this.submitCreate,color:"primary",variant:"extended"},_.a.createElement(Z.a,null),"Register"),_.a.createElement(G.a,{classes:{label:e.block},onClick:this.submitGuest,color:"primary",variant:"extended"},_.a.createElement($.a,null),"Guest"),_.a.createElement(G.a,{classes:{label:e.block},onClick:this.submitLogin,color:"primary",variant:"extended","aria-label":"login"},_.a.createElement(X.a,null),"Login")))}}]),t}(_.a.Component),ie=Object(c.withStyles)(function(e){return{frame:{position:"absolute",top:0,bottom:0,right:0,left:0},right:{position:"absolute",right:0},left:{marginRight:"auto"},text:{"font-size":"16pt"},title:{},block:{display:"flex","flex-direction":"column"}}},{withTheme:!0})(ne),le=a(30),se=a.n(le),re=a(18),oe=a.n(re),_e=a(29),ce=a.n(_e),ue=a(36),de=a.n(ue),me=a(43),he=a.n(me),pe=a(229),Ee=a.n(pe),fe=a(224),be=a.n(fe),we=a(223),ge=a.n(we),Oe=a(221),ve=a.n(Oe),ye=a(222),Pe=a.n(ye),Ce=a(225),Me=a.n(Ce),De=a(226),ke=a.n(De),Te=a(227),xe=a.n(Te),Se=a(228),Be=a.n(Se),Ae={NORTH:_.a.createElement(ve.a,null),SOUTH:_.a.createElement(Pe.a,null),WEST:_.a.createElement(ge.a,null),EAST:_.a.createElement(be.a,null),SOUTHEAST:_.a.createElement(he.a,null,_.a.createElement("polygon",{points:"12,12 0,12 12,0"})),SOUTHWEST:_.a.createElement(he.a,null,_.a.createElement("polygon",{points:"12,12 12,0 24,12"})),NORTHEAST:_.a.createElement(he.a,null,_.a.createElement("polygon",{points:"12,12 12,24 0,12"})),NORTHWEST:_.a.createElement(he.a,null,_.a.createElement("polygon",{points:"12,12 12,24 24,12"})),UP:_.a.createElement(Me.a,null),DOWN:_.a.createElement(ke.a,null),IN:_.a.createElement(xe.a,null),OUT:_.a.createElement(Be.a,null)},Le={NORTH:!1,SOUTH:!1,WEST:!1,EAST:!1,SOUTHEAST:!1,SOUTHWEST:!1,NORTHEAST:!1,NORTHWEST:!1,UP:!0,DOWN:!0,IN:!0,OUT:!0},Ie=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).go=function(e){return function(t){var n=window.client,i=n.jsonapi,l=n.delayContents;e&&e.length>0&&(a.sendCommand("go "+e),i||(clearTimeout(a.getContents),setTimeout(a.getContents,l)))}},a.action=function(e){window.client.sendCommand("look"),window.client.sendAPI("listcontents")},a.matchExit=function(e){for(var t=0;t<a.ucExits.length;t++){if(-1!==a.ucExits[t].split(";").indexOf(e))return t}return-1},a.buildExit=function(e){var t=a.props.classes,n=window.client.settings.sidebarDense,i=e.toUpperCase(),l=-1===a.matchExit(i);return _.a.createElement(b.a,{disabled:l,title:e},_.a.createElement("span",null,_.a.createElement(P.a,{classes:n?{root:t.smallIcons}:null,onClick:a.go(e),disabled:l},Ae[i])))},a.buildLook=function(){var e=a.props,t=e.classes,n=e.sidebarDense;return _.a.createElement(b.a,{title:"Update contents."},_.a.createElement("span",null,_.a.createElement(P.a,{classes:n?{root:t.smallIcons}:null,onClick:a.action},_.a.createElement(Ee.a,null))))},a.sendCommand=function(e){window.client.sendCommand(e)},a.state={exits:[],things:[],players:[],friends:[]},a.ucExits=[],a.customExits=[],a.useCompass=!1,a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"parseExits",value:function(e){var t=this,a=this.props,n=a.sidebarShowCompass,i=a.sidebarLargeCompass;if(this.ucExits=[],this.customExits=[],this.useCompass=!1,e.forEach(function(e,a){t.ucExits.push(e.toUpperCase())}),n)for(var l=Object.keys(Ae),s=function(a){var n=t.ucExits[a],s=-1,r=!1;n.split(";").forEach(function(e,t){r||-1!==s||(s=l.indexOf(e),!i&&-1!==s&&Le[e]&&(r=!0))}),r||-1===s?t.customExits.push(e[a]):t.useCompass=!0},r=0;r<e.length;r++)s(r);else this.customExits=e.slice(0)}},{key:"getContents",value:function(){window.client.sendAPI("listcontents")}},{key:"updateExits",value:function(e){this.setState({exits:e})}},{key:"updateThings",value:function(e){this.setState({things:e})}},{key:"updatePlayers",value:function(e){this.setState({players:e})}},{key:"addObject",value:function(e){var t=this.state,a=t.players,n=t.things;e.player?(a.push(e.name),this.setState({players:a})):(n.push(e.name),this.setState({things:n}))}},{key:"delObject",value:function(e){var t,a=this.state,n=a.players,i=a.things;e.player?-1!==(t=n.indexOf(e.name))&&(n.splice(t,1),this.setState({players:n})):-1!==(t=i.indexOf(e.name))&&(i.splice(t,1),this.setState({things:i}))}},{key:"componentDidMount",value:function(){window.client.react.sidebar=this,window.client.sendAPI("listcontents")}},{key:"componentWillUnMount",value:function(){window.client.react.sidebar=null}},{key:"render",value:function(){var e,t,a=this,n=this.props,i=n.classes,l=n.sidebarDense,s=n.sidebarShowPlayers,r=n.sidebarLargeCompass,o=n.sidebarShowThings,c=n.sidebarShowExits,u=n.sidebarShowCompass,d=this.state,m=d.exits,p=d.things,f=d.players,b=this.customExits,w=u?r?4:3:0;if(e=l?(24+this.props.theme.spacing.unit)*w:48*w,e=Math.min(192,Math.max(96,e))+"px",c){this.parseExits(m),b.length>0&&(t=_.a.createElement("div",{className:i.customExits},_.a.createElement("div",{className:i.middle},_.a.createElement("div",{className:i.bottom},_.a.createElement(se.a,{className:i.list,dense:!0,disablePadding:!0,subheader:_.a.createElement(de.a,{className:i.listHeader,component:"div"},"Exits")},b.map(function(e,t){return _.a.createElement(oe.a,{className:h()(i.exitItem,t%2?i.odd:i.even),key:t,button:!0,onClick:a.go(e.split(";")[0])},_.a.createElement(ce.a,{primary:e.split(";")[0]}))}))))));var g=_.a.createElement("div",{className:i.navWidget},_.a.createElement(E.a,{variant:"subtitle2",color:"textSecondary"},"Navigation"),this.buildExit("Northwest"),this.buildExit("North"),this.buildExit("Northeast"),r&&this.buildExit("Up"),_.a.createElement("br",null),this.buildExit("West"),r?this.buildExit("In"):this.buildLook(),this.buildExit("East"),r&&this.buildExit("Out"),_.a.createElement("br",null),this.buildExit("Southwest"),this.buildExit("South"),this.buildExit("Southeast"),r&&this.buildExit("Down"))}return _.a.createElement("div",{className:i.frame,style:{width:e},onClick:function(){return window.client.focus()}},(s&&f.length>0||o&&p.length>0)&&_.a.createElement("div",{className:i.contents},_.a.createElement("span",{className:i.overflow},s&&f.length>0&&_.a.createElement(se.a,{className:i.list,dense:!0,disablePadding:!0,subheader:_.a.createElement(de.a,{className:i.listHeader,component:"div"},"Players")},f.map(function(e,t){return _.a.createElement(oe.a,{className:h()(i.playerItem,t%2?i.odd:i.even),key:t,button:!0,onClick:function(){return a.sendCommand("look "+e)}},_.a.createElement(ce.a,{primary:e}))})),o&&p.length>0&&_.a.createElement(se.a,{className:i.list,dense:!0,disablePadding:!0,subheader:_.a.createElement(de.a,{className:i.listHeader,component:"div"},"Contents")},p.map(function(e,t){return _.a.createElement(oe.a,{className:h()(i.thingItem,t%2?i.odd:i.even),key:t,button:!0,onClick:function(){return a.sendCommand("look "+e)}},_.a.createElement(ce.a,{primary:e}))})))),c&&t,c&&u&&g)}}]),t}(_.a.Component),Re=Object(c.withStyles)(function(e){return{frame:{position:"relative",height:"100%",maxWidth:"192px",backgroundColor:e.palette.background.paper,display:"flex","flex-flow":"column nowrap",textAlign:"center",justifyContent:"flex-end"},contents:{flex:1,width:"100%",alignSelf:"flex-start",overflowX:"hidden",overflowY:"auto"},overflow:{},list:{width:"100%"},listHeader:{lineHeight:1.5},playerItem:{padding:"2px "+e.spacing.unit+"px"},thingItem:{padding:"2px "+e.spacing.unit+"px"},exitItem:{padding:"2px "+e.spacing.unit+"px"},customExits:{flex:1,width:"100%",display:"flex",flexFlow:"column nowrap",justifyContent:"flex-end",alignContent:"flex-end",alignItems:"flex-end"},middle:{width:"100%",overflowY:"auto",overflowX:"hidden"},bottom:{width:"100%"},navWidget:{},smallIcons:{padding:.5*e.spacing.unit},odd:{backgroundColor:"rgba(0, 0, 0, 0.2)"},even:{backgroundColor:"rgba(0, 0, 0, 0.05)"}}},{withTheme:!0})(Ie),Ue=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={theme:e.theme},a.middle=_.a.createRef(),a.terminal=_.a.createRef(),a.dock=_.a.createRef(),a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=window.client.settings.sidebarAlwaysShow;window.client.react.portal=this,window.scrollTo(0,1),window.client.container=this.middle.current,window.client.container=e?this.terminal.current:this.middle.current}},{key:"componentWillUnmount",value:function(){window.client.react.portal=null}},{key:"updateTheme",value:function(e){this.setState({theme:e})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.theme,a=window.client.settings,n=a.sidebarOpen,i=a.sidebarAnchor,l=a.ansiFG,s=a.ansiBG,r=a.terminalWidth,o=a.sidebarAlwaysShow,d=a.sidebarShowExits,m=a.sidebarShowPlayers,h=a.sidebarShowThings,p=a.sidebarShowCompass,E=a.sidebarDense,f=a.sidebarLargeCompass,b=n&&"left"===i,w=n&&"right"===i;window.client.container=o?this.terminal.current:this.middle.current;var g=_.a.createElement(Re,{sidebarShowCompass:p,sidebarLargeCompass:f,sidebarDense:E,sidebarShowExits:d,sidebarShowPlayers:m,sidebarShowThings:h});return _.a.createElement(c.MuiThemeProvider,{theme:t},_.a.createElement("div",{className:e.frame},_.a.createElement("div",{className:e.top},_.a.createElement(u.a,{title:"MUSH Portal",url:"http://www.mushportal.com"})),_.a.createElement("div",{className:e.middle,ref:this.middle},b&&g,_.a.createElement(v,{width:r,ansiFG:l,ansiBG:s,containerRef:this.terminal}),w&&g),_.a.createElement("div",{className:e.bottom},_.a.createElement(x,{ansiFG:l,ansiBG:s}),_.a.createElement(B,null)),_.a.createElement(ie,null)))}}]),t}(_.a.Component);t.a=Object(c.withStyles)(function(e){return{frame:{width:"100%",height:"100%",background:"white",position:"absolute",top:0,left:0,display:"flex","flex-flow":"column nowrap"},top:{top:0,left:0,width:"100%"},middle:{position:"relative",display:"flex","flex-flow":"row nowrap",flex:1,left:0,width:"100%"},flex:{flex:1},bottom:{bottom:0,left:0,width:"100%"},dock:{position:"relative",height:"100%",backgroundColor:e.palette.background.paper}}},{withTheme:!0})(Ue)},253:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(0),_=a.n(o),c=a(10),u=a(30),d=a.n(u),m=a(15),h=a.n(m),p=a(18),E=a.n(p),f=a(29),b=a.n(f),w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.board,n=e.onOpen;return _.a.createElement("div",{className:t.frame},_.a.createElement(E.a,{key:a.id,button:!0,dense:!0,divider:!0,onClick:n},_.a.createElement(b.a,{primary:a.name,secondary:_.a.createElement("span",null,_.a.createElement("span",null,a.posts," Posts"),_.a.createElement("br",null),_.a.createElement("span",null,a.lastmod))})))}}]),t}(_.a.Component),g=Object(c.withStyles)(function(e){return{frame:{},listicon:{margin:0},read:{opacity:.5}}},{withTheme:!0})(w),O=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.openBoard,n=e.boardlist;return _.a.createElement("div",{className:t.frame},_.a.createElement("div",{className:t.header},_.a.createElement(h.a,{variant:"subtitle1",className:t.title},_.a.createElement("span",{className:t.container},n.length," Bulletin Boards",_.a.createElement("span",{className:t.flex})))),_.a.createElement("div",{className:t.overflow},_.a.createElement(d.a,{dense:!0,disablePadding:!0},n.map(function(e,t){return _.a.createElement(g,{key:t,board:e,onOpen:function(){return a(t)}})}))))}}]),t}(_.a.Component),v=Object(c.withStyles)(function(e){return{frame:{maxHeight:"100%",display:"flex","flex-flow":"column nowrap"},header:{},title:{},overflow:{overflowY:"auto",flex:1},container:{display:"flex",paddingLeft:"2em"},flex:{flex:1}}},{withTheme:!0})(O),y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.message,n=e.onOpen;return _.a.createElement("div",{className:t.frame},_.a.createElement(E.a,{key:a.id,button:!0,dense:!0,divider:!0,onClick:n},_.a.createElement(b.a,{primary:a.subject,secondary:_.a.createElement("span",null,_.a.createElement("span",null,a.author),_.a.createElement("br",null),_.a.createElement("span",null,a.date))})))}}]),t}(_.a.Component),P=Object(c.withStyles)(function(e){return{frame:{},listicon:{margin:0},read:{opacity:.5}}},{withTheme:!0})(y),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.openMessage,n=e.board;return _.a.createElement("div",{className:t.frame},_.a.createElement("div",{className:t.header},_.a.createElement(h.a,{variant:"subtitle1",className:t.title},_.a.createElement("span",{className:t.container},n.messages.length," Posts",_.a.createElement("span",{className:t.flex})))),_.a.createElement("div",{className:t.overflow},_.a.createElement(d.a,{dense:!0,disablePadding:!0},n.messages.map(function(e,t){return _.a.createElement(P,{key:t,message:e,onOpen:function(){return a(t)}})}))))}}]),t}(_.a.Component),M=Object(c.withStyles)(function(e){return{frame:{maxHeight:"100%",display:"flex","flex-flow":"column nowrap"},header:{},title:{},overflow:{overflowY:"auto",flex:1},container:{display:"flex",paddingLeft:"2em"},flex:{flex:1}}},{withTheme:!0})(C),D=a(2),k=a.n(D),T=a(65),x=a.n(T),S=a(66),B=a.n(S),A=a(67),L=a.n(A),I=a(68),R=a.n(I),U=a(46),N=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a.body=_.a.createRef(),a.emulator=null,a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.message;this.emulator=new U.a(this.body.current),this.emulator.appendText(e.body)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.message,n=window.client.settings,i=n.ansiFG,l=n.ansiBG,s=window.client.settings,r=s.fontFamily,o=s.fontSize,c="font-family: '"+r+"', monospace; font-size: "+(window.client.mobile?o/2:o)+"pt;";return this.emulator&&this.emulator.clear(),this.emulator&&this.emulator.appendText(a.body),_.a.createElement(x.a,{className:t.card},_.a.createElement(B.a,{className:t.header,title:a.subject,subheader:_.a.createElement("span",{className:t.sub},_.a.createElement("span",{className:t.left},a.author),_.a.createElement("span",{className:t.right},a.date))}),_.a.createElement(L.a,{className:t.body},_.a.createElement("div",{ref:this.body,className:k()(t.output,i,l),style:c})),_.a.createElement(R.a,{className:t.actions}))}}]),t}(_.a.Component),W=Object(c.withStyles)(function(e){return{card:{height:"100%",display:"flex","flex-flow":"column nowrap"},header:{display:"flex","flex-flow":"row nowrap"},sub:{display:"flex"},left:{flex:1},right:{marginLeft:"3em"},body:{flex:1,"overflow-y":"auto","overflow-x":"hidden"},actions:{"justify-content":"space-evenly"},button:{display:"block"},output:{"font-family":"'Courier New', monospace","font-weight":"normal","font-size":"10pt",width:"100%",height:"100%","overflow-y":"scroll","overflow-x":"hidden","white-space":"pre-wrap","word-wrap":"break-word"}}},{withTheme:!0})(N),K=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).openBB=function(e){var t=a.state.boardlist[e];window.client.sendAPI("bbmsglist",t.id)},a.openBBMsg=function(e){var t=a.state.board,n=t.messages[e];window.client.sendAPI("bbmsg",t.id+"="+n.id)},a.state={bbmsg:null,board:null,boardlist:e.boardlist?e.boardlist:[]},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.client.react.bboard=this}},{key:"componentWillUnmount",value:function(){window.client.react.bboard=null}},{key:"updateBoardList",value:function(e){this.setState({boardlist:e,board:null,bbmsg:null})}},{key:"updateBoard",value:function(e){this.setState({board:e,bbmsg:null})}},{key:"openMessage",value:function(e){this.state.board.messages.forEach(function(t,a){e.id===t.id&&(e.key=a)}),this.setState({bbmsg:e})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.boardlist,n=t.board,i=t.bbmsg;return _.a.createElement("div",{className:e.frame},n?_.a.createElement("div",{className:e.full},_.a.createElement("div",{className:e.left},_.a.createElement(M,{board:n,openMessage:this.openBBMsg})),_.a.createElement("div",{className:e.right},i&&_.a.createElement(W,{message:i}))):_.a.createElement("div",{className:e.full},_.a.createElement("div",{className:e.left},_.a.createElement(v,{boardlist:a,openBoard:this.openBB})),_.a.createElement("div",{className:e.right})))}}]),t}(_.a.Component);t.a=Object(c.withStyles)(function(e){return{frame:{position:"absolute",height:"100%",width:"100%",display:"flex","flex-flow":"row nowrap"},left:{position:"relative",maxHeight:"100%",flex:1},right:{flex:1,maxHeight:"100%",position:"relative"},full:{flex:1,position:"relative",display:"flex"}}},{withTheme:!0})(K)},254:function(e,t,a){"use strict";var n=a(9),i=a(8),l=a(13),s=a(12),r=a(14),o=a(16),_=a(0),c=a.n(_),u=a(10),d=a(30),m=a.n(d),h=a(15),p=a.n(h),E=a(31),f=a.n(E),b=a(20),w=a.n(b),g=a(235),O=a.n(g),v=a(234),y=a.n(v),P=a(236),C=a.n(P),M=a(18),D=a.n(M),k=a(25),T=a.n(k),x=a(29),S=a.n(x),B=a(33),A=a.n(B),L=a(231),I=a.n(L),R=a(232),U=a.n(R),N=a(230),W=a.n(N),K=a(98),j=a.n(K),H=a(233),F=a.n(H),q=a(99),z=a.n(q),G=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.mail,i=t.onOpen,l=t.quickDelete,s=t.handleMark,r=t.selected,o=t.id;e=n.deleted?c.a.createElement(j.a,{className:n.unread?null:a.read}):n.unread?n.urgent?c.a.createElement(W.a,null):c.a.createElement(I.a,null):c.a.createElement(U.a,{className:a.read});var _=o%2===0;return c.a.createElement("div",{className:a.frame},c.a.createElement(D.a,{key:n.id,button:!0,dense:!0,divider:!0,selected:r,onClick:l?function(){}:i,className:_?a.even:a.odd},c.a.createElement(T.a,{className:a.listicon},e),c.a.createElement(S.a,{primary:n.subject,secondary:c.a.createElement("span",null,c.a.createElement("span",null,n.from),c.a.createElement("br",null),c.a.createElement("span",null,n.time))}),l&&c.a.createElement(A.a,null,c.a.createElement(f.a,{onClick:s},n.deleted?c.a.createElement(F.a,null):c.a.createElement(z.a,null)))))}}]),t}(c.a.Component),V=Object(u.withStyles)(function(e){return{frame:{},listicon:{margin:0},read:{opacity:.5},odd:{backgroundColor:"rgba(0, 0, 0, 0.2)"},even:{backgroundColor:"rgba(0, 0, 0, 0.05)"}}},{withTheme:!0})(G),X=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).purgeMail=function(){window.client.react.mailbox.purgeMail(),a.setState({quickDelete:!1})},a.sendMail=function(){window.client.react.mailbox.sendMail(null,"","")},a.toggleDelete=function(){a.setState({quickDelete:!a.state.quickDelete})},a.state={quickDelete:!1,selected:-1},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.openMail,i=t.maillist,l=t.unread,s=t.handleMark,r=this.state,o=r.quickDelete,_=r.selected;return c.a.createElement("div",{className:a.frame},c.a.createElement("div",{className:a.header},c.a.createElement(p.a,{variant:"subtitle1",className:a.title},c.a.createElement("span",{className:a.container},c.a.createElement("div",null,i.length," Messages (",l," unread)"),c.a.createElement("span",null,c.a.createElement(w.a,{title:"Move multiple files to trash."},c.a.createElement(f.a,{onClick:this.toggleDelete},c.a.createElement(y.a,null))),c.a.createElement(w.a,{title:"Purge deleted mail."},c.a.createElement(f.a,{onClick:this.purgeMail},c.a.createElement(O.a,null))),c.a.createElement(w.a,{title:"Send a new message."},c.a.createElement(f.a,{onClick:this.sendMail,disabled:o},c.a.createElement(C.a,null))))))),c.a.createElement("div",{className:a.overflow},c.a.createElement(m.a,{dense:!0,disablePadding:!0},i.map(function(t,a){return c.a.createElement(V,{selected:_===a,id:a,key:a,quickDelete:o,mail:t,onOpen:function(){e.setState({selected:a}),n(a)},handleMark:function(){return s(a)}})}))))}}]),t}(c.a.Component),J=Object(u.withStyles)(function(e){return{frame:{maxHeight:"100%",display:"flex","flex-flow":"column nowrap"},header:{},title:{},overflow:{overflowY:"auto",flex:1},container:{display:"flex",flexFlow:"row wrap",justifyContent:"space-between",paddingLeft:e.spacing.unit,"align-items":"center"},flex:{flex:1}}},{withTheme:!0})(X),$=a(2),Y=a.n($),Z=a(65),Q=a.n(Z),ee=a(66),te=a.n(ee),ae=a(67),ne=a.n(ae),ie=a(68),le=a.n(ie),se=a(35),re=a.n(se),oe=a(19),_e=a.n(oe),ce=a(62),ue=a.n(ce),de=a(38),me=a.n(de),he=a(239),pe=a.n(he),Ee=a(237),fe=a.n(Ee),be=a(238),we=a.n(be),ge=a(69),Oe=a.n(ge),ve=a(46),ye=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).showMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.closeMenu=function(){a.setState({anchorEl:null})},a.markUnread=function(){window.client.react.mailbox.markUnread(),a.closeMenu()},a.markDeleted=function(){window.client.react.mailbox.markDeleted(),a.closeMenu()},a.markUndeleted=function(){window.client.react.mailbox.markUndeleted(),a.closeMenu()},a.replyMail=function(){var e=a.props.mail;window.client.react.mailbox.sendMail(e.from,"Re: "+e.subject,"")},a.forwardMail=function(){var e=a.props.mail;window.client.react.mailbox.sendMail("","Fwd: "+e.subject,e.body)},a.state={anchorEl:null},a.body=c.a.createRef(),a.emulator=null,a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.mail;this.emulator=new ve.a(this.body.current),this.emulator.appendText(e.body+"\n")}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.mail,n=this.state.anchorEl,i=window.client.settings,l=i.ansiFG,s=i.ansiBG,r=window.client.settings,o={fontFamily:"'"+r.fontFamily+"', monospace",fontSize:r.fontSize+"pt"};return this.emulator&&this.emulator.clear(),this.emulator&&this.emulator.appendText(a.body+"\n"),c.a.createElement(Q.a,{className:t.card},c.a.createElement(te.a,{className:t.header,title:a.subject,subheader:c.a.createElement("span",{className:t.sub},c.a.createElement("span",{className:t.left},a.from),c.a.createElement("span",{className:t.right},a.time))}),c.a.createElement(ne.a,{className:t.body},c.a.createElement("div",{ref:this.body,className:Y()(t.wrap,l,s),style:o})),c.a.createElement(le.a,{className:t.actions},c.a.createElement(_e.a,{className:t.mobileOnly,onClick:function(){return window.client.react.mailbox.setState({mailitem:null})}},c.a.createElement(re.a,null,c.a.createElement(Oe.a,null)),"Close"),c.a.createElement(_e.a,{className:t.button,onClick:this.replyMail},c.a.createElement(re.a,null,c.a.createElement(fe.a,null)),"Reply"),c.a.createElement(_e.a,{className:t.button,onClick:this.forwardMail},c.a.createElement(re.a,null,c.a.createElement(we.a,null)),"Forward"),c.a.createElement(f.a,{"aria-owns":n?"mailitem.menu":null,"aria-haspopup":"true",onClick:this.showMenu},c.a.createElement(pe.a,null)),c.a.createElement(ue.a,{id:"mailitem.menu",anchorEl:n,open:Boolean(n),onClose:this.closeMenu},c.a.createElement(me.a,{onClick:this.markUnread},"Mark as Unread"),a.deleted?c.a.createElement(me.a,{onClick:this.markUndeleted},"Restore Message"):c.a.createElement(me.a,{onClick:this.markDeleted},"Move to Trash"))))}}]),t}(c.a.Component),Pe=Object(u.withStyles)(function(e){return{card:{height:"100%",display:"flex","flex-flow":"column nowrap"},header:{display:"flex","flex-flow":"row nowrap"},sub:{display:"flex"},left:{flex:1},right:{marginLeft:"3em"},body:{flex:1,display:"flex"},actions:{"justify-content":"space-evenly"},button:{display:"block"},wrap:{"font-family":"'Courier New', monospace","font-weight":"normal","font-size":"10pt",width:"100%",flex:1,"overflow-y":"auto","overflow-x":"hidden","white-space":"pre-wrap","word-wrap":"break-word",padding:"0.25em 0.5em"},mobileOnly:Object(o.a)({display:"block"},e.breakpoints.up("md"),{display:"none"})}},{withTheme:!0})(ye),Ce=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e))).openMail=function(e){var t=a.state,n=t.maillist,i=t.unreadMail,l=n[e];l.unread&&(l.unread=!1,a.setState({maillist:n,unreadMail:i-1}),window.client.sendText("@mail/status "+l.id+"=read")),window.client.sendAPI("mailitem",l.id)},a.handleMark=function(e){var t=a.state.maillist,n=t[e];n.deleted=!n.deleted,n.deleted?window.client.sendText("@mail/clear "+n.id):window.client.sendText("@mail/unclear "+n.id),a.setState({maillist:t})},a.state={mailitem:null,unreadMail:e.unread?e.unread:0,folder:e.folder?e.folder:0,folderlist:[{id:0,name:"Inbox"}],maillist:e.maillist?e.maillist:[]},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"setUnreadMail",value:function(e){this.setState({unreadMail:e}),window.client.react.taskbar.setUnreadMail(e)}},{key:"markDeleted",value:function(){var e=this.state,t=e.maillist,a=e.mailitem;a.deleted||(a.deleted=!0,t[a.key].deleted=!0,window.client.sendText("@mail/clear "+a.id),this.setState({maillist:t,mailitem:a}))}},{key:"markUndeleted",value:function(){var e=this.state,t=e.maillist,a=e.mailitem;a.deleted&&(a.deleted=!1,t[a.key].deleted=!1,window.client.sendText("@mail/unclear "+a.id),this.setState({maillist:t,mailitem:a}))}},{key:"markUnread",value:function(){var e=this.state,t=e.maillist,a=e.mailitem,n=e.unreadMail;a.unread||(a.unread=!0,t[a.key].unread=!0,window.client.sendText("@mail/status "+a.id+"=unread"),this.setState({maillist:t,mailitem:a,unreadMail:n+1}))}},{key:"purgeMail",value:function(){if(window.confirm("Do you want to purge deleted mail?")){var e=this.state,t=e.maillist,a=e.mailitem;a&&t[a.key].deleted&&this.setState({mailitem:null}),window.client.sendText("@mail/purge"),window.client.sendAPI("maillist")}}},{key:"sendMail",value:function(e,t,a){window.client.react.sendmail?(window.client.focusPanel("Sendmail"),window.confirm("Replace current draft with new mail?")&&window.client.react.sendmail.setFields(e,t,a)):(window.client.addPanel("Sendmail",{icon:"mail"}),window.client.react.sendmail.setFields(e,t,a))}},{key:"componentDidMount",value:function(){window.client.react.mailbox=this}},{key:"componentWillUnmount",value:function(){window.client.react.mailbox=null}},{key:"updateMailList",value:function(e,t,a){this.setState({folder:e,maillist:t,unreadMail:a})}},{key:"updateFolderList",value:function(e){this.setState({folderlist:e})}},{key:"openMailItem",value:function(e){this.state.maillist.forEach(function(t,a){t.id===e.id&&(e.key=a)}),this.setState({mailitem:e})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.maillist,n=t.mailitem,i=t.unreadMail;return c.a.createElement("div",{className:e.frame},c.a.createElement("div",{className:e.left},c.a.createElement("span",{className:n?e.mobileClose:e.mobileOpen},a&&c.a.createElement(J,{maillist:a,unread:i,openMail:this.openMail,handleMark:this.handleMark}))),c.a.createElement("div",{className:e.right},n&&c.a.createElement(Pe,{mail:n})))}}]),t}(c.a.Component);t.a=Object(u.withStyles)(function(e){return{frame:{position:"absolute",height:"100%",width:"100%",display:"flex","flex-flow":"row nowrap"},left:{position:"relative",maxHeight:"100%",overflowY:"auto",overflowX:"hidden"},right:{flex:1,maxHeight:"100%",position:"relative"},mobileClose:Object(o.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),mobileOpen:{display:"flex"}}},{withTheme:!0})(Ce)},256:function(e,t,a){"use strict";var n=a(89),i=a(9),l=a(8),s=a(13),r=a(12),o=a(14),_=a(16),c=a(0),u=a.n(c),d=a(10),m=a(19),h=a.n(m),p=a(35),E=a.n(p),f=a(30),b=a.n(f),w=a(18),g=a.n(w),O=a(29),v=a.n(O),y=a(25),P=a.n(y),C=a(33),M=a.n(C),D=a(36),k=a.n(D),T=a(24),x=a.n(T),S=a(21),B=a.n(S),A=a(15),L=a.n(A),I=a(41),R=a.n(I),U=a(44),N=a.n(U),W=a(42),K=a.n(W),j=a(2),H=a.n(j),F=a(45),q=a.n(F),z=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).show=function(e){a.setState({anchor:e.currentTarget})},a.hide=function(){a.setState({anchor:null})},a.choose=function(e){return function(t){a.hide(),a.props.onChange(e)}},a.state={anchor:null};var n=e.background?40:30;a.rows=[];var l,o,_=[];for(l=0;l<8;l++)_.push("ansi-"+(l+n));for(l=0;l<8;l++)_.push("ansi-"+(l+n)+"-1");for(a.rows.push(_),l=1;l<16;l++){for(_=[],o=0;o<16;o++)_.push("ansi-"+(8+n)+"-5-"+(16*l+o));a.rows.push(_)}return a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.classes,i=a.background,l=a.label,s=this.state.anchor;return i&&(e=n.bgfix),u.a.createElement("div",null,u.a.createElement(h.a,{"aria-haspopup":"true","aria-owns":s?"colorpicker":null,onClick:this.show},u.a.createElement("div",{className:H()(window.client.settings.ansiFG,window.client.settings.ansiBG)},l)),u.a.createElement(q.a,{className:n.popover,id:"colorpicker",anchorEl:s,open:Boolean(s),onClose:this.hide},this.rows.map(function(a,i){return u.a.createElement("div",{key:1e3+i},a.map(function(a,l){return u.a.createElement("span",{key:16*i+l,className:H()(n.swatch,e,a),onClick:t.choose(a)},"\u2588")}))})))}}]),t}(u.a.Component),G=Object(d.withStyles)(function(e){return{popover:{overflow:"hidden"},swatch:{cursor:"pointer",margin:0,border:0,padding:0,height:"1em",width:"1em",lineHeight:"100%"},bgfix:{color:"transparent"}}},{withTheme:!0})(z),V=a(120),X=a.n(V),J=a(102),$=a.n(J),Y=a(193),Z=a.n(Y),Q=a(196),ee=a.n(Q),te=a(194),ae=a.n(te),ne=a(197),ie=a.n(ne),le=a(121),se=a.n(le),re=a(122),oe=a.n(re),_e=a(200),ce=a.n(_e),ue=a(201),de=a.n(ue),me=a(204),he=a.n(me),pe=a(203),Ee=a.n(pe),fe=a(103),be=a.n(fe),we=a(202),ge=a.n(we),Oe=a(189),ve=a.n(Oe),ye=a(190),Pe=a.n(ye),Ce=a(191),Me=a.n(Ce),De=a(195),ke=a.n(De),Te=a(123),xe=a.n(Te),Se=a(101),Be=a.n(Se),Ae=a(124),Le=a.n(Ae),Ie=a(39),Re=a.n(Ie),Ue=a(205),Ne=a.n(Ue),We=a(192),Ke=a.n(We),je=a(198),He=a.n(je),Fe=a(199),qe=a.n(Fe),ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(r.a)(t).call(this,e))).handleSwitch=function(e){return function(t){window.client.changeSetting(e,t.target.checked),a.setState(Object(_.a)({},e,window.client.settings[e])),window.client.saveSettings(),window.client.react.portal.forceUpdate()}},a.handleValue=function(e){return function(t){window.client.changeSetting(e,t.target.value),a.setState(Object(_.a)({},e,window.client.settings[e])),window.client.saveSettings(),window.client.react.portal.forceUpdate()}},a.handleColor=function(e){return function(t){window.client.changeSetting(e,t),a.setState(Object(_.a)({},e,window.client.settings[e])),window.client.saveSettings(),window.client.react.portal.forceUpdate()}},a.handleExpand=function(e){return function(t,n){a.setState({expanded:!!n&&e,expandAll:!1})}},a.loadSettings=function(){a.setState(Object(n.a)({},window.client.settings))},a.resetSettings=function(){window.confirm("Are you sure you want to reset settings to defaults?")&&(window.client.settings=Object.assign({},window.client.defaultSettings),a.loadSettings(),window.client.saveSettings(),window.client.react.portal.forceUpdate())},a.state={expanded:!1,expandAll:!1},a.state=Object.assign(a.state,window.client.settings),a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.closeDrawer,i=this.state,l=i.expanded,s=i.expandAll,r=i.debugEvents,o=i.decompileEditor,_=i.decompileKey,c=i.ansiFG,d=i.ansiBG,m=i.terminalWidth,p=i.invertHighlight,f=i.debugActions,w=i.serverAddress,O=i.serverPort,y=i.serverSSL,C=i.sidebarLargeCompass,D=i.recallButtons,T=i.historySize,S=i.historySpawnSize,A=i.mobileHideTaskbar,I=i.mobileHideStatusbar,U=i.allowServerChange,W=i.recallAnchor,j=i.sidebarOpen,H=i.sidebarAnchor,F=i.sidebarAlwaysShow,q=i.sidebarShowPlayers,z=i.fontFamily,V=i.fontSize,J=i.recallSize,Y=i.mobileFontSize,Q=i.sidebarShowThings,te=i.sidebarShowExits,ne=i.sidebarShowCompass,le=i.sidebarDense,re=i.timersEnabled,_e=i.terminalAutoScroll,ue=window.client.mobile,me=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Debugging Console")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(X.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Debug server events?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:r,value:"debugEvents",onChange:this.handleSwitch("debugEvents")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(X.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Debug user-defined actions?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:f,value:"debugActions",onChange:this.handleSwitch("debugActions")})))),pe=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Server Connection")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(ve.a,null)),u.a.createElement(B.a,{label:"Server address",disabled:!U,value:w,onChange:this.handleValue("serverAddress")})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Pe.a,null)),u.a.createElement(B.a,{label:"Server port",disabled:!U,value:O,onChange:this.handleValue("serverPort"),type:"number"})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Me.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Encrypt connection with SSL?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:y,disabled:!U,value:"serverSSL",onChange:this.handleSwitch("serverSSL")})))),fe=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Output History")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Be.a,null)),u.a.createElement(B.a,{label:"History Size",value:T,onChange:this.handleValue("historySize"),type:"number",helperText:"Lines of terminal output history."})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Be.a,null)),u.a.createElement(B.a,{label:"Spawn History Size",value:S,onChange:this.handleValue("historySpawnSize"),type:"number",helperText:"Lines of spawn window history."}))),we=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Command Recall")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Be.a,null)),u.a.createElement(B.a,{label:"Recall History Size",value:J,onChange:this.handleValue("recallSize"),type:"number",helperText:"Commands in recall history."})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Ke.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Show command history buttons?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:D,value:"recallButtons",onChange:this.handleSwitch("recallButtons")}))),u.a.createElement(g.a,{dense:!0,className:a.leftright},u.a.createElement(E.a,{color:"action"},u.a.createElement(se.a,null)),u.a.createElement(L.a,null,"Left"),u.a.createElement(x.a,{checked:"right"===W,color:"default",value:"right"===W?"left":"right",onChange:this.handleValue("recallAnchor")}),u.a.createElement(L.a,null,"Right"),u.a.createElement(E.a,{color:"action"},u.a.createElement(oe.a,null)))),Oe=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Terminal Display")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Z.a,null)),u.a.createElement(B.a,{label:"Terminal Width",value:m,onChange:this.handleValue("terminalWidth"),type:"number"})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(ae.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Scroll to bottom on command input?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:_e,value:"terminalAutoScroll",onChange:this.handleSwitch("terminalAutoScroll")})))),ye=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Terminal Font")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(ke.a,null)),u.a.createElement(B.a,{label:"Font",value:z,onChange:this.handleValue("fontFamily")})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(xe.a,null)),u.a.createElement(B.a,{label:"Size",value:V,onChange:this.handleValue("fontSize"),type:"number"}))),Ce=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Default Colors")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement($.a,null)),u.a.createElement(G,{label:"Background",value:d,onChange:this.handleColor("ansiBG"),background:!0})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement($.a,null)),u.a.createElement(G,{label:"Foreground",value:c,onChange:this.handleColor("ansiFG")})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement($.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Invert foreground & background?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:p,value:"invertHighlight",onChange:this.handleSwitch("invertHighlight")})))),De=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"@decompile/tf")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(ee.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Send @dec/tf to editor."}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:o,value:"decompileEditor",onChange:this.handleSwitch("decompileEditor")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(ie.a,null)),u.a.createElement(B.a,{label:"TFPREFIX",value:_,onChange:this.handleValue("decompileKey"),helperText:"Prefix used by @dec/tf."}))),Te=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"User-defined Actions")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,re?u.a.createElement(He.a,null):u.a.createElement(qe.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Enable timers?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:re,value:"timersEnabled",onChange:this.handleSwitch("timersEnabled")})))),Se=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Sidebar Display")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(ce.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Show sidebar?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:j,value:"sidebarOpen",onChange:this.handleSwitch("sidebarOpen")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(de.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Keep panels off sidebar?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:F,value:"sidebarAlwaysShow",onChange:this.handleSwitch("sidebarAlwaysShow")}))),u.a.createElement(g.a,{dense:!0,className:a.leftright},u.a.createElement(E.a,{color:"action"},u.a.createElement(se.a,null)),u.a.createElement(L.a,null,"Left"),u.a.createElement(x.a,{checked:"right"===H,color:"default",value:"right"===H?"left":"right",onChange:this.handleValue("sidebarAnchor")}),u.a.createElement(L.a,null,"Right"),u.a.createElement(E.a,{color:"action"},u.a.createElement(oe.a,null))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(ge.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Use small sidebar icons?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:le,value:"sidebarDense",onChange:this.handleSwitch("sidebarDense")})))),Ae=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Sidebar Content")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Ee.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Show players?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:q,value:"sidebarShowPlayers",onChange:this.handleSwitch("sidebarShowPlayers")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(he.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Show things?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:Q,value:"sidebarShowThings",onChange:this.handleSwitch("sidebarShowThings")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(be.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Show exits?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:te,value:"sidebarShowExits",onChange:this.handleSwitch("sidebarShowExits")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(be.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Show compass?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:ne,value:"sidebarShowCompass",onChange:this.handleSwitch("sidebarShowCompass")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(be.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Show in, out, up, & down?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:C,value:"sidebarLargeCompass",onChange:this.handleSwitch("sidebarLargeCompass")})))),Ie=u.a.createElement(b.a,{className:a.list,disablePadding:!0,dense:!0,subheader:!ue&&u.a.createElement(k.a,null,"Mobile Display")},u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(xe.a,null)),u.a.createElement(B.a,{label:"Terminal Font Size",value:Y,onChange:this.handleValue("mobileFontSize"),type:"number"})),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Le.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Auto hide mobile taskbar when empty?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:A,value:"mobileHideTaskbar",onChange:this.handleSwitch("mobileHideTaskbar")}))),u.a.createElement(g.a,{dense:!0},u.a.createElement(P.a,null,u.a.createElement(Le.a,null)),u.a.createElement(v.a,{className:a.switchText,primary:"Hide the status bar to save screen space?"}),u.a.createElement(M.a,null,u.a.createElement(x.a,{checked:I,value:"mobileHideStatusbar",onChange:this.handleSwitch("mobileHideStatusbar")}))));return u.a.createElement("div",{className:a.frame},u.a.createElement("div",{className:a.left},u.a.createElement("div",{className:a.content,tabIndex:0,role:"button"},ue&&u.a.createElement(R.a,{className:a.panel,expanded:!1,onChange:function(){return e.setState({expandAll:!e.state.expandAll})}},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Ne.a,null)},u.a.createElement(L.a,{className:a.summaryText},s?"Collapse All Categories":"Expand All Categories"))),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"connection"===l,onChange:this.handleExpand("connection")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Server Connection")),u.a.createElement(N.a,{classes:{root:a.noPadding}},pe)):u.a.createElement("span",null,pe),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"history"===l,onChange:this.handleExpand("history")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Output History")),u.a.createElement(N.a,{classes:{root:a.noPadding}},fe)):u.a.createElement("span",null,fe),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"input"===l,onChange:this.handleExpand("input")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Command Recall")),u.a.createElement(N.a,{classes:{root:a.noPadding}},we)):u.a.createElement("span",null,we),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"terminal"===l,onChange:this.handleExpand("terminal")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Terminal Display")),u.a.createElement(N.a,{classes:{root:a.noPadding}},Oe)):u.a.createElement("span",null,Oe),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"font"===l,onChange:this.handleExpand("font")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Terminal Font")),u.a.createElement(N.a,{classes:{root:a.noPadding}},ye)):u.a.createElement("span",null,ye),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"color"===l,onChange:this.handleExpand("color")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Default Colors")),u.a.createElement(N.a,{classes:{root:a.noPadding}},Ce)):u.a.createElement("span",null,Ce),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"sidebarDisplay"===l,onChange:this.handleExpand("sidebarDisplay")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Sidebar Display")),u.a.createElement(N.a,{classes:{root:a.noPadding}},Se)):u.a.createElement("span",null,Se),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"sidebarContent"===l,onChange:this.handleExpand("sidebarContent")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Sidebar Content")),u.a.createElement(N.a,{classes:{root:a.noPadding}},Ae)):u.a.createElement("span",null,Ae),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"upload"===l,onChange:this.handleExpand("upload")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"@decompile/tf")),u.a.createElement(N.a,{classes:{root:a.noPadding}},De)):u.a.createElement("span",null,De),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"actions"===l,onChange:this.handleExpand("actions")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"User-defined Actions")),u.a.createElement(N.a,{classes:{root:a.noPadding}},Te)):u.a.createElement("span",null,Te),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"debugging"===l,onChange:this.handleExpand("debugging")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Debugging Console")),u.a.createElement(N.a,{classes:{root:a.noPadding}},me)):u.a.createElement("span",null,me),ue?u.a.createElement(R.a,{className:a.panel,expanded:s||"mobile"===l,onChange:this.handleExpand("mobile")},u.a.createElement(K.a,{classes:{root:a.noPadding},expandIcon:u.a.createElement(Re.a,null)},u.a.createElement(L.a,{className:a.summaryText},"Mobile Display")),u.a.createElement(N.a,{classes:{root:a.noPadding}},Ie)):u.a.createElement("span",null,Ie))),u.a.createElement("div",{className:a.right},u.a.createElement("div",{className:a.buttons},u.a.createElement(h.a,{className:a.reset,onClick:this.resetSettings},"Reset"),u.a.createElement(h.a,{className:a.close,onClick:n},"Close"))))}}]),t}(u.a.Component);t.a=Object(d.withStyles)(function(e){return{frame:{position:"relative",height:"auto",width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"stretch"},left:{flex:1,overflowY:"auto"},right:{display:"flex",flexFlow:"column nowrap"},content:Object(_.a)({display:"flex",flexFlow:"row wrap"},e.breakpoints.up("md"),{justifyContent:"space-evenly"}),list:{flexGrow:0,flexBasis:"auto"},switchText:{paddingLeft:0,marginRight:2*e.spacing.unit},buttons:Object(_.a)({right:0,top:0,bottom:0,flex:1,display:"flex",flexFlow:"column-reverse nowrap"},e.breakpoints.up("md"),{flexFlow:"row nowrap"}),reset:{flex:1},close:{flex:1},leftright:{display:"flex",justifyContent:"space-between",alignItems:"center"},noPadding:{padding:0},summaryText:{marginLeft:e.spacing.unit},panel:{width:"100%"}}},{withTheme:!0})(ze)},257:function(e,t,a){e.exports=a(258)},258:function(e,t,a){"use strict";a.r(t);var n=new(a(185).a);window.onclientload?window.onclientload(n):n.loadScript("./local.js"),n.execUserScript("onLoad.js")},46:function(e,t,a){"use strict";var n=a(9),i=a(8),l=function(){function e(t){var a=this;Object(n.a)(this,e),this.loadHistory=function(e){if(window.localStorage.hasOwnProperty(e)){var t=window.localStorage[e];if(""!==t)try{a.root.innerHTML=t+a.root.innerHTML}catch(n){console.log("Unable to insert history: ",n)}}},this.saveHistory=function(e,t){var n=window.localStorage;if(t>0){var i=a.root.childNodes,l=i.length-1;if(l<0)return;for(var s=0,r=l;r>-1&&s<t;r--){var o=i[r].textContent.split("\n").length;i[r].textContent.endsWith("\n")&&(o-=1),o>0&&(s+=o,l=r)}var _=document.createRange();_.setStartBefore(i[l]),_.setEndAfter(i[i.length-1]);var c=_.cloneContents(),u=document.createElement("div");u.appendChild(c),n[e]=u.innerHTML}else delete n[e]},this.root=t,this.container=null,this.dims={},this.calcDimensions(),this.onCommand=null,this.clear()}return Object(i.a)(e,null,[{key:"extractLinks",value:function(e){var t,a=[],n=/(^|[^a-zA-Z0-9]+)(?:((?:http|https):\/\/[-a-zA-Z0-9_.~:\/?#[\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:\/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\w*))/g;for(n.lastIndex=0;t=n.exec(e);){var i={};i.start=t.index+t[1].length,i.xch_cmd="",t[2]?(t=t[2],i.url=t):t[3]?(t=t[3],i.url="mailto:"+t):t[4]&&(t=t[4],i.url="",i.xch_cmd="help "+t,i.className="ansi-37-1"),i.end=i.start+t.length,a[a.length]=i}return a}},{key:"parseLinks",value:function(t,a){if(a.length){var n,i,l="";for(n=0,i=a.length;n<i;++n)l+=a[n].nodeValue;var s=e.extractLinks(l);if(s.length){var r=0,o=0,_=a[0].nodeValue.length;for(n=0,i=s.length;n<i;++n){for(var c,u,d,m,h=s[n];_<=h.start;)o=_,_+=a[++r].nodeValue.length;for(c=h.start-o,u=a[r];_<h.end;)o=_,_+=a[++r].nodeValue.length;if(d=h.end-o,u===(m=a[r])){a[r]=m.splitText(d),o+=d;var p=u.splitText(c),E=document.createElement("a");p.parentNode.replaceChild(E,p),E.target="_blank",""===h.url&&""!==h.xch_cmd?(E.setAttribute("onClick",'this.onCommand("'+h.xch_cmd+'");'),E.onCommand=t.onCommand):E.href=h.url,E.appendChild(p)}else window.console&&window.console.warn("link",h)}}}}},{key:"PARSE_PLAIN",get:function(){return 0}},{key:"PARSE_CR",get:function(){return 1}},{key:"PARSE_ESC1",get:function(){return 2}},{key:"PARSE_ESC2",get:function(){return 3}},{key:"ANSI_NORMAL",get:function(){return 0}},{key:"ANSI_BRIGHT",get:function(){return 1}},{key:"ANSI_UNDERLINE",get:function(){return 4}},{key:"ANSI_BLINK",get:function(){return 5}},{key:"ANSI_INVERSE",get:function(){return 7}},{key:"ANSI_XTERM_FG",get:function(){return 38}},{key:"ANSI_XTERM_BG",get:function(){return 48}},{key:"DEFAULT_FG",get:function(){return 37}},{key:"DEFAULT_BG",get:function(){return 30}},{key:"UNCLOSED_TAGS",get:function(){return["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}}]),Object(i.a)(e,[{key:"getANSI",value:function(){return this.ansiState||(this.ansiState={fg:e.DEFAULT_FG,bg:e.DEFAULT_BG,fg256:!1,bg256:!1}),this.ansiState}},{key:"applyANSI",value:function(t){switch(t.charCodeAt(t.length-1)){case 109:for(var a,n,i=t.substring(0,t.length-1).split(";"),l=0;void 0!==(a=i[l]);++l){if(a=0===a.length?e.ANSI_NORMAL:parseInt(a,10),(n=this.getANSI())[e.ANSI_XTERM_FG]&&n[e.ANSI_BLINK])a>=0&&a<=255?(n.fg=a,n.fg256=!0,n[e.ANSI_XTERM_FG]=!1,n[e.ANSI_BLINK]=!1):this.ansiState=null;else if(n[e.ANSI_XTERM_BG]&&n[e.ANSI_BLINK])a>=0&&a<=255?(n.bg=a,n.bg256=!0,n[e.ANSI_XTERM_BG]=!1,n[e.ANSI_BLINK]=!1):this.ansiState=null;else switch(a){case e.ANSI_NORMAL:this.ansiState=null;break;case e.ANSI_BRIGHT:case e.ANSI_UNDERLINE:case e.ANSI_BLINK:case e.ANSI_INVERSE:case e.ANSI_XTERM_FG:case e.ANSI_XTERM_BG:n[a]=!0;break;default:30<=a&&a<=37?n.fg=a:40<=a&&a<=47&&(n.bg=a-10)}this.ansiDirty=!0}}}},{key:"write",value:function(t,a,n){if(a!==n){if(this.ansiDirty){var i=e.encodeState(this.ansiState);this.ansiClass!==i&&(this.ansiClass=i,this.span=null),this.ansiDirty=!1}this.ansiClass&&!this.span&&(this.span=document.createElement("span"),this.span.className=this.ansiClass,this.stack[this.stack.length-1].appendChild(this.span));var l=document.createTextNode(t.substring(a,n));this.lineBuf[this.lineBuf.length]=l,this.appendChild(l)}}},{key:"onLine",value:function(t,a){e.parseLinks(t,a)}},{key:"endLine",value:function(){this.onLine&&this.onLine(this,this.lineBuf),this.write("\n",0,1),this.lineBuf.length=0}},{key:"abortParse",value:function(t,a,n){switch(this.state){case e.PARSE_PLAIN:this.write(t,a,n);break;case e.PARSE_ESC1:this.write("\x1b",0,1);break;case e.PARSE_ESC2:this.write("\x1b[",0,2),this.write(this.parseBuf,0,this.parseBuf.length),this.parseBuf=""}}},{key:"appendText",value:function(t){if(t){for(var a=0,n=0,i=t.length;n<i;++n){var l=t.charCodeAt(n);switch(l){case 10:this.state!==e.PARSE_CR&&(this.abortParse(t,a,n),this.endLine()),a=n+1,this.state=e.PARSE_PLAIN;continue;case 13:this.abortParse(t,a,n),this.endLine(),a=n+1,this.state=e.PARSE_CR;continue;case 27:this.abortParse(t,a,n),a=n+1,this.state=e.PARSE_ESC1;continue}switch(this.state){case e.PARSE_CR:this.state=e.PARSE_PLAIN;break;case e.PARSE_ESC1:91===l?(a=n+1,this.state=e.PARSE_ESC2):(this.abortParse(t,a,n),a=n,this.state=e.PARSE_PLAIN);break;case e.PARSE_ESC2:64<=l&&l<=126&&(this.parseBuf+=t.substring(a,a=n+1),this.applyANSI(this.parseBuf),this.parseBuf="",this.state=e.PARSE_PLAIN)}}switch(this.state){case e.PARSE_PLAIN:this.write(t,a,t.length);break;case e.PARSE_ESC2:this.parseBuf+=t.substring(a)}}}},{key:"appendHTML",value:function(e){var t=document.createElement("div"),a=document.createDocumentFragment();t.innerHTML=e;for(var n=t.firstChild;n;n=n.nextSibling){var i=n.getAttribute("xch_cmd");null!==i&&""!==i&&(n.setAttribute("onclick",'this.onCommand("'+i+'");'),n.onCommand=this.onCommand,n.removeAttribute("xch_cmd")),a.appendChild(n)}this.appendChild(a)}},{key:"appendChild",value:function(e){(this.span||this.stack[this.stack.length-1]).appendChild(e)}},{key:"appendMessage",value:function(e,t){var a=document.createElement("div");a.className=e;var n=document.createTextNode(t);a.appendChild(n),this.appendChild(a)}},{key:"pushElement",value:function(e){this.span=null,this.stack[this.stack.length-1].appendChild(e),this.stack[this.stack.length]=e}},{key:"popElement",value:function(){this.span=null,this.stack.length>1?--this.stack.length:window.console&&window.console.warn("element stack underflow")}},{key:"appendPueblo",value:function(t){var a,n,i=t.indexOf(" ");-1!==i?(a=t.substring(0,i),n=t.substring(i+1)):(a=t,n="");var l,s="<"+a+(n?" ":"")+n+">";"/"!==a[0]?l=!0:(l=!1,a=a.substring(1));var r=!1;if("/"!==a.substring(-1)&&"/"!==n.substring(-1)||(r=!0),e.UNCLOSED_TAGS.indexOf(a.toLowerCase())>-1&&(r=!0),"XCH_PAGE"!==a&&("IMG"!==a||-1===n.search(/xch_graph=(("[^"]*")|('[^']*')|([^\s]*))/i)))if(l){var o=document.createElement("div");s=(s=(s=s.replace(/xch_graph=(("[^"]*")|('[^']*')|([^\s]*))/i,"")).replace(/xch_mode=(("[^"]*")|('[^']*')|([^\s]*))/i,"")).replace(/xch_hint="([^"]*)"/i,'title="$1"'),o.innerHTML=s.replace(/xch_cmd="([^"]*)"/i,"onclick='this.onCommand(&quot;$1&quot;)'"),o.firstChild.onCommand=this.onCommand,o.setAttribute("target","_blank"),this.pushElement(o.firstChild),r&&this.popElement()}else r||this.popElement()}},{key:"clear",value:function(){if(null===this.root)return null;this.root.innerHTML="",this.stack=[this.root],this.state=e.PARSE_PLAIN,this.line=null,this.lineBuf=[],this.span=null,this.parseBuf="",this.ansiClass="",this.ansiState=null,this.ansiDirty=!1}},{key:"nearBottom",value:function(e){return!!this.root&&this.linesOfScroll()<=e}},{key:"calcDimensions",value:function(){var e=this.root;if(!e)return 0;var t=document.createElement(e.nodeName);return t.setAttribute("style","margin:0px;padding:0px;font-family:"+e.style.fontFamily+";font-size:"+e.style.fontSize),t.innerText="0123456789",t=e.appendChild(t),this.dims.width=t.clientWidth/10,this.dims.height=t.clientHeight,t.parentNode.removeChild(t),this.dims}},{key:"linesOfScroll",value:function(){var e=this.container||this.root;return e?this.dims.height<=0?0:Math.round(Math.abs((e.scrollHeight-e.offsetHeight-e.scrollTop)/this.dims.height)):0}},{key:"scrollPageUp",value:function(){var e=this.container||this.root;e.scrollTop-=e.clientHeight-5*this.dims.height}},{key:"scrollPageDown",value:function(){var e=this.container||this.root;e.scrollTop+=e.clientHeight-4*this.dims.height}},{key:"scrollDown",value:function(){var e=this.container||this.root;e&&(e.scrollTop=e.scrollHeight)}}],[{key:"encodeState",value:function(t){if(!t)return"";var a=[];if(t[e.ANSI_INVERSE]){var n=t.fg;t.fg=t.bg,t.bg=n,n=t.fg256,t.fg256=t.bg256,t.bg256=n}var i=t.fg,l=t.bg;return t[e.ANSI_UNDERLINE]&&(a[a.length]="ansi-"+e.ANSI_UNDERLINE),t.fg256?a[a.length]="ansi-38-5-"+t.fg:t[e.ANSI_BRIGHT]?t[e.ANSI_INVERSE]?i!==e.DEFAULT_FG&&(a[a.length]="ansi-"+i):a[a.length]="ansi-"+i+"-1":i!==e.DEFAULT_FG&&(a[a.length]="ansi-"+i),t.bg256?a[a.length]="ansi-48-5-"+t.bg:t[e.ANSI_BRIGHT]&&t[e.ANSI_INVERSE]?a[a.length]="ansi-"+(l+10)+"-1":l!==e.DEFAULT_BG&&(a[a.length]="ansi-"+(l+10)),!t[e.ANSI_BLINK]||t.fg256||t.bg256||(a[a.length]="ansi-"+e.ANSI_BLINK),a.join(" ")}}]),e}();t.a=l},78:function(e,t,a){"use strict";var n=a(9),i=a(8),l=function(){function e(t){Object(n.a)(this,e);var a=this;this.root=t,this.selectionStart=0,this.selectionStop=0,this.onEnter=null,this.onEscape=null,this.onPageUp=null,this.onPageDown=null,this.keyCycleForward=null,this.keyCycleBackward=null,this.clearHistory(),this.root.onkeydown=function(t){e.onkeydown(a,t)},this.root.onkeyup=function(t){e.onkeyup(a,t)}}return Object(i.a)(e,null,[{key:"clearhistory",value:function(e){e.clearHistory&&e.clearHistory()}},{key:"onkeydown",value:function(e,t){e.onKeyDown&&e.onKeyDown(t)}},{key:"onkeyup",value:function(e,t){e.onKeyUp&&e.onKeyUp(t)}},{key:"isKeyCycleForward",value:function(e,t){return e&&e.keyCycleForward?e.keyCycleForward(t):78===t.code&&t.ctrl}},{key:"isKeyCycleBackward",value:function(e,t){return e&&e.keyCycleBackward?e.keyCycleBackward(t):80===t.code&&t.ctrl}},{key:"pressKey",value:function(t,a){var n={code:a.keyCode?a.keyCode:a.which,ctrl:a.ctrlKey,shift:a.shiftKey,alt:a.altKey},i=!0;if(e.isKeyCycleBackward(t,n))t.cycleBackward();else if(e.isKeyCycleForward(t,n))t.cycleForward();else if(13===n.code){var l=t.root.value;t.saveCommand(),t.onEnter&&t.onEnter(l)}else 27===n.code?t.onEscape&&t.onEscape():33===n.code?t.onPageUp&&t.onPageUp():34===n.code?t.onPageUp&&t.onPageDown():i=!1;i&&a.preventDefault(),t.focus()}},{key:"releaseKey",value:function(t,a){var n={code:a.keyCode?a.keyCode:a.which,ctrl:a.ctrlKey,shift:a.shiftKey,alt:a.altKey};(e.isKeyCycleBackward(t,n)||e.isKeyCycleForward(t,n))&&t.moveCursor()}}]),Object(i.a)(e,[{key:"onKeyDown",value:function(t){e.pressKey(this,t)}},{key:"onKeyUp",value:function(t){e.releaseKey(this,t)}},{key:"clearHistory",value:function(){this.history=[],this.save_current="",this.current=-1}},{key:"saveCommand",value:function(){""!==this.root.value&&(this.history[this.history.length]=this.root.value,this.save_current="",this.current=-1,this.root.value="")}},{key:"cycleBackward",value:function(){this.current<0&&(this.save_current=this.root.value),this.current<this.history.length-1&&(this.current++,this.root.value=this.history[this.history.length-this.current-1])}},{key:"cycleForward",value:function(){this.current>0?(this.current--,this.root.value=this.history[this.history.length-this.current-1]):0===this.current&&(this.current=-1,this.root.value=this.save_current)}},{key:"moveCursor",value:function(){if("number"===typeof this.root.selectionStart)this.root.selectionStart=this.root.selectionEnd=this.root.value.length;else if("undefined"!==typeof this.root.createTextRange){this.focus();var e=this.root.createTextRange();e.collapse(!1),e.select()}}},{key:"saveCursor",value:function(){this.selectionStart=this.root.selectionStart,this.selectionStop=this.root.selectionStop}},{key:"resetCursor",value:function(){this.selectionStart&&this.selectionStop?(this.root.selectionStart=this.selectionStart,this.root.selectionStop=this.selectionStop,this.selectionStart=null,this.selectionStop=null):this.root.selectionStart=this.root.selectionStop=this.root.value.length}},{key:"clear",value:function(){this.root.value=""}},{key:"value",value:function(){return this.root.value}},{key:"focus",value:function(e){var t="";if(!e){window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(t=document.selection.createRange().text);var a=document.activeElement,n=a.tagName.toLowerCase();if("textarea"===n)return;if("input"===n){var i=a.getAttribute("type").toLowerCase();if(["text","password","number","email","tel","url","search","date","datetime","datetime-local","time","month","week"].indexOf(i)>=0)return}}t.match(/^\w*$/)&&this.root.focus()}}]),e}();t.a=l}},[[257,2,1]]]);
//# sourceMappingURL=main.f903d054.chunk.js.map