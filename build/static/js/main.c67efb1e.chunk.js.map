{"version":3,"sources":["modules/Settings/colorpicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/Chargen/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","client/emulator.js","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","modules/Sendmail/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Upload/index.jsx","client/connection.js","client/userinput.js","client/utils.js","client/jsonapi.js","client/index.js","index.js"],"names":["ColorPicker","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","show","event","setState","anchor","currentTarget","hide","choose","color","value","onChange","state","offset","background","rows","i","j","colors","push","bgfix","_this2","_this$props","classes","label","_this$state","react_default","a","createElement","Button_default","aria-haspopup","aria-owns","onClick","className","Popover_default","popover","id","anchorEl","open","Boolean","onClose","map","key","classNames","swatch","React","Component","withStyles","theme","overflow","cursor","margin","border","padding","height","width","lineHeight","withTheme","Settings","handleSwitch","name","window","client","changeSetting","target","checked","defineProperty","settings","saveSettings","react","portal","forceUpdate","handleValue","handleColor","showColor","colorAnchor","closeColor","chooseColor","loadSettings","objectSpread","resetSettings","confirm","assign","defaultSettings","closeDrawer","debugEvents","decompileEditor","decompileKey","ansiFG","ansiBG","wrapWidth","invertHighlight","sidebarOpen","sidebarAnchor","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","sidebarWidth","frame","left","content","tabIndex","role","List_default","disablePadding","dense","subheader","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","primary","ListItemSecondaryAction_default","Switch_default","WrapText_default","TextField_default","type","Palette_default","colorpicker","Edit_default","Code_default","helperText","VerticalSplit_default","disabled","PictureInPicture_default","Icon_default","BorderLeft_default","BorderRight_default","FormatIndentIncrease_default","AccountCircle_default","GroupWork_default","Explore_default","right","buttons","reset","close","position","display","flexDirection","justifyContent","alignItems","flex","flexFlow","paddingLeft","marginRight","spacing","unit","BadgeIcon","count","Badge_default","badgeContent","children","Taskbar","openDrawer","closeMenu","focus","setTitle","t","title","clearScreen","clear","sendCommand","cmd","sendText","txt","sendAPI","args","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","addButton","button","pushTask","task","taskbar","popTask","indexOf","splice","unsmallify","front","showMenu","menuAnchor","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","preventDefault","length","showUpload","file","uploadAnchor","closeUpload","insertCommand","input","root","closeHistory","clearHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","url","previewUpload","addReactPanel","icon","upload","setText","handleFile","files","reader","FileReader","onload","result","readAsText","handleURL","startsWith","req","XMLHttpRequest","onreadystatechange","readyState","status","responseText","alert","send","history","createRef","conn","reconnect","rev","slice","reverse","AppBar_default","Toolbar_default","disableGutters","Typography_default","variant","noWrap","Tooltip_default","headertitle","innerText","tasklabel","taskbutton","aria-label","taskicon","headerlogo","tasksep","ariaLabel","action","icons_Menu_default","SwipeableDrawer_default","onOpen","modules_Settings","onSubmit","padded","autoComplete","autoFocus","fullWidth","InputProps","inputProps","style","textAlign","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","component","historyPopover","divider","Menu_default","disableEnforceFocus","MenuItem_default","Settings_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","flexGrow","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","overflowY","Terminal","focusInput","onResize","output","calcDimensions","Math","floor","parentNode","clientHeight","dims","scrollDown","lines","linesOfScroll","terminal","prompt","init","document","addEventListener","initOutput","current","initPrompt","dim","containerRef","ref","onScroll","maxWidth","scrollcount","align","flex-flow","background-color","palette","main","font-family","font-weight","font-size","breakpoints","down","overflowX","white-space","word-wrap","text-align","vertical-align","bottom","Input","initInput","text","outline","resize","Statusbar","statusbar","Login","openLogin","msg","closeLogin","submitLogin","username","getElementById","password","str","submitGuest","submitCreate","catchReturn","e","login","Dialog_default","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","IconButton_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","withMobileDialog","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","Sidebar","go","exit","_window$client","jsonapi","delayContents","clearTimeout","getContents","setTimeout","matchExit","ucExits","split","buildExit","uc","toUpperCase","exits","things","players","friends","customExits","useCompass","forEach","keys","_loop","fullexit","match","n","obj","player","_this$state2","sidebar","exitWidget","navWidget","_this3","_this$state3","parseExits","exitItem","contents","playerItem","ListItemAvatar_default","Avatar_default","p","join","thing","thingItem","minWidth","backgroundColor","paper","flexShrink","-webkit-transform","transform","Portal","middle","dock","scrollTo","container","_window$client$settin","modules_Sidebar","core_styles","top","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","Chargen","MailListItem","mail","quickDelete","handleMark","selected","deleted","Delete_default","unread","read","urgent","PriorityHigh_default","Mail_default","Drafts_default","even","odd","listicon","subject","secondary","from","time","CheckCircle_default","Cancel_default","opacity","MailList","purgeMail","mailbox","sendMail","toggleDelete","openMail","maillist","header","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","Emulator","onCommand","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","substring","ii","undefined","ANSI_NORMAL","parseInt","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","start","end","next","encodeState","ansiClass","span","stack","appendChild","createTextNode","lineBuf","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","data","ilen","ch","PARSE_CR","abortParse","endLine","applyANSI","html","div","fragment","createDocumentFragment","innerHTML","child","firstChild","nextSibling","getAttribute","setAttribute","removeAttribute","classid","message","element","console","warn","tag","attrs","idx","selfClosing","UNCLOSED_TAGS","toLowerCase","search","replace","pushElement","popElement","line","threshold","temp","nodeName","fontFamily","fontSize","clientWidth","removeChild","round","abs","scrollHeight","offsetHeight","scrollTop","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","body","emulator","appendText","Card_default","card","CardHeader_default","sub","CardContent_default","wrap","CardActions_default","actions","Reply_default","Forward_default","MoreVert_default","marginLeft","justify-content","overflow-y","overflow-x","Mailbox","mailitem","folder","folderlist","_this$state4","_this$state5","to","sendmail","focusPanel","setFields","panelSize","_this$state6","Mailbox_MailList","Mailbox_MailItem","Sendmail","chips","realsub","substr","closePanel","handleChange","changeText","editor","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","endsWith","panel","options","resizeit","panels","ChipInput_default","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","FormHelperTextProps","stretch","lib_default","bodytext","mode","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","Send_default","BBListItem","board","posts","lastmod","BBList","openBoard","boardlist","BBoard_BBListItem","BBMessageListItem","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","BBoard","openBB","openBBMsg","bbmsg","bboard","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","Upload","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","delay","newtext","readOnly","stretchflex","pad","Pause_default","Redo_default","Connection","socket","isOpen","onError","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","that","isConnected","WebSocket","onopen","evt","onerror","onclose","onmessage","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","UserInput","selectionStart","selectionStop","onEnter","onEscape","onPageUp","onPageDown","keyCycleForward","keyCycleBackward","onkeydown","onkeyup","onKeyDown","onKeyUp","code","ctrl","keyCode","which","ctrlKey","shift","shiftKey","alt","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","saveCommand","moveCursor","pressKey","releaseKey","ncommand","save_current","selectionEnd","createTextRange","range","collapse","select","force","getSelection","toString","selection","createRange","activeElement","tagName","Utils","links","regex","lastIndex","exec","info","index","xch_cmd","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","href","command","val","JSONAPI","self","bbmsglist","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","Client","setBubble","hidden","tinycon","updateCounter","createTheme","events","jsPanel","serverAddress","serverPort","serverSSL","loggedIn","updateLines","eatNewline","scrollThreshold","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","render","defaultTheme","typography","useNextVariants","indigo","blueGrey","createMuiTheme","ReactDOM","src","async","getElementsByTagName","store","localStorage","String","hasOwnProperty","bind","Number","loadStyle","unloadStyle","parseCommand","scroll","nearBottom","appendMessage","_this4","scrollPageUp","scrollPageDown","_this5","arguments","onunload","onresize","fun","cfg","_this6","el","config","headerTitle","headerLogo","callback","MuiThemeProvider","create","getPanels","serverUrl","re_fugueedit","RegExp","insert","scrollIfNeeded","appendHTML","appendPueblo","op","gmcp","emit","_this7","astr","_this8","shortid","generate","on","removeAllListeners","_this9","filename","node","textContent","blob","Blob","saveAs","visibilityChange","_this10","msHidden","webkitHidden","setOptions","fallback","abbreviate","defaults","minimizeTo","onminimized","onclosed","unmountComponentAtNode","dragit","saveCursor","stop","resetCursor","loadScript"],"mappings":"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","file":"static/js/main.c67efb1e.chunk.js","sourcesContent":["\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n      value: props.value,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.setState({ value: color });\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor, value } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={value}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\n\nimport ColorPicker from './colorpicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentIncreaseIcon from '@material-ui/icons/FormatIndentIncrease';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    height: \"100%\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      colorAnchor: null,\n    };\n    \n    this.color = null;\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  showColor = name => event => {\n    this.color = name;\n    this.setState({ colorAnchor: event.currentTarget });\n  };\n  \n  closeColor = () => {\n    this.setState({ colorAnchor: null });\n  };\n  \n  chooseColor = color => event => {\n    this.setState({ [this.color]: \"ansi-\"+color });\n    this.closeColor();\n  };\n  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth, invertHighlight,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, colorAnchor, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarWidth } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <Popover id=\"settings.color\" anchorEl={colorAnchor} open={false} onClose={this.closeColor}>\n            </Popover>\n            \n            <List disablePadding dense subheader={<ListSubheader>Debugging</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Display Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <WrapTextIcon />\n                </ListItemIcon>\n                <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Background Color\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Foreground Color\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Swap black and white?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List disablePadding dense subheader={<ListSubheader>@decompile/tf</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <EditIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <CodeIcon />\n                </ListItemIcon>\n                <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Sidebar Display</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <VerticalSplitIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <PictureInPictureIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <Icon color=\"action\">\n                  <BorderLeftIcon />\n                </Icon>\n                <ListItemText primary=\"Left\" />\n                <Switch checked={sidebarAnchor === \"right\"}\n                  color=\"default\" disabled={!sidebarOpen}\n                  value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n                  onChange={this.handleValue('sidebarAnchor')}\n                />\n                <ListItemText primary=\"Right\" />\n                <Icon color=\"action\">\n                  <BorderRightIcon />\n                </Icon>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <FormatIndentIncreaseIcon />\n                </ListItemIcon>\n                <TextField label=\"Sidebar Width\" value={sidebarWidth} onChange={this.handleValue('sidebarWidth')} />\n              </ListItem>\n            </List>\n            \n            <List disabled={!sidebarOpen} disablePadding dense subheader={<ListSubheader>Sidebar Content</ListSubheader>}>\n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <AccountCircleIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show players?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <GroupWorkIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show things?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    margin: '0 20px',\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n//    display: \"flex\",\n//    \"flex-direction\": \"column\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon>{props.children}</Icon>);\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      buttons: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  addButton = (button) => {\n    const { buttons } = this.state;\n    buttons.push(button);\n    this.setState({ buttons });\n  };\n  \n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    taskbar.push(task);\n    this.setState({ taskbar });\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n  \n  previewUpload = () => {\n    window.client.addReactPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.conn.reconnect();\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, buttons, historyAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n\n    var rev = input ? input.history.slice().reverse() : [];\n    \n    return (\n      <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n        <Toolbar disableGutters={!this.state.open}>\n          <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n            {title}\n          </Typography>\n          <div className={classes.flex}></div>\n          {taskbar.map((task,i) => (\n            <Tooltip key={i} title={task.headertitle.innerText}>\n              <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n                <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n                {task.headertitle.innerText}\n              </Button>\n            </Tooltip>\n          ))}\n          \n          <div className={classes.tasksep}></div>\n          \n          {buttons.map((button,i) => (\n            <Tooltip key={i} title={button.title}>\n              <Button aria-label={button.ariaLabel} onClick={button.action}>\n                <BadgeIcon count={button.count}>\n                  {button.icon}\n                </BadgeIcon>\n              </Button>\n            </Tooltip>\n          ))}\n          \n          <Tooltip title=\"More tasks...\">\n            <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n              <MenuIcon />\n            </Button>\n          </Tooltip>\n          \n          <SwipeableDrawer\n            variant=\"temporary\"\n            anchor=\"top\"\n            open={open}\n            onClose={this.closeDrawer}\n            onOpen={this.openDrawer}\n          >\n            <Settings closeDrawer={this.closeDrawer} />\n          </SwipeableDrawer>\n\n          <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n            <form onSubmit={this.searchHelp}>\n              <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"false\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n            </form>\n            <Button fullWidth onClick={this.searchHelp}>\n              Get Help\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n            <form onSubmit={this.saveLog}>\n              <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                onChange={this.typeLog} autoFocus\n                InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n              />\n            </form>\n            <Button fullWidth onClick={this.saveLog}>\n              Save Log\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n            <form onSubmit={this.handleURL} className={classes.padded}>\n              <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n            </form>\n            <Button onClick={this.handleURL}>\n              Upload URL\n            </Button>\n            <input\n              accept=\"text/plain\"\n              className={classes.fileinput}\n              id=\"file.upload\"\n              type=\"file\"\n              onChange={this.handleFile}\n            />\n            <label htmlFor=\"file.upload\">\n              <Button component=\"span\">\n                Choose File\n              </Button>\n            </label>\n            <Button onClick={this.previewUpload}>\n              Paste Text\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n            <List className={classes.historyPopover}>\n              {rev.map((cmd, i) => (\n                <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                  <ListItemText primary={cmd} />\n                </ListItem>\n              ))}\n            </List>\n            <Button onClick={this.clearHistory}>\n              Clear History\n            </Button>\n          </Popover>\n          \n          <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n            <MenuItem onClick={this.closeMenu}>\n              <Tooltip title=\"Close menu.\">\n                <MenuIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openDrawer}>\n              <Tooltip title=\"Change settings.\">\n                <SettingsIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n              <Tooltip title=\"Upload file/URL.\">\n                <CloudUploadIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n              <Tooltip title=\"Save display log.\">\n                <SaveIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n              <Tooltip title=\"Show command history.\">\n                <KeyboardIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.clearScreen}>\n              <Tooltip title=\"Clear screen.\">\n                <BackspaceIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.reconnect}>\n              <Tooltip title=\"Reconnect.\">\n                <WifiIcon />\n              </Tooltip>\n            </MenuItem>            \n          </Menu>\n\n          <div className={classes.tasksep}></div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.addEventListener('resize', this.onResize);\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    this.forceUpdate();\n  }\n  \n  onResize = event => {\n    window.client.output.calcDimensions();\n    window.client.sendText(\"SCREENWIDTH \" + window.client.settings.wrapWidth);\n    window.client.sendText(\"SCREENHEIGHT \" + Math.floor(window.client.output.root.parentNode.clientHeight / window.client.output.dims.height));\n    window.client.output.scrollDown();\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classes.frame} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\">\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)}  autoComplete=\"off\" autoFocus></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \".\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        <Typography\n          align=\"right\"\n          color=\"textPrimary\"\n          noWrap\n        >\n          {status}\n        </Typography>\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst styles = theme => ({\n  frame: {\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n    position: \"relative\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <Dialog\n          open={open}\n          onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n          onClose={this.closeLogin}\n          aria-labelledby=\"responsive-dialog-title\"\n          disableBackdropClick\n          disableEscapeKeyDown\n        >\n          <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n            Character Login\n            <ListItemSecondaryAction>\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <span dangerouslySetInnerHTML={{ __html: msg }} />\n            </DialogContentText>\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"username\"\n              label=\"Character Name\"\n              type=\"string\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n              <PersonAddIcon />\n              Register\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n              <PersonOutlineIcon />\n              Guest\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n              <PersonIcon />\n              Login\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withMobileDialog()(withStyles(styles, { withTheme: true })(Login));\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    minWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'space-between',\n  },\n  contents: {\n    flexShrink: 1,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  playerItem: {\n    padding: 2,\n  },\n  thingItem: {\n  },\n  customExits: {\n    flexGrow: 1,\n    position: \"relative\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  navWidget: {\n    position: \"relative\",\n    bottom: 0,\n    left: \"50%\",\n    flexShrink: 0,\n    '-webkit-transform': 'translateX(-50%)',\n    transform: 'translateX(-50%)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (match === -1) {\n          match = keys.indexOf(exit);\n        }\n      });\n\n      if (match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarWidth, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n    var exitWidget;\n    var navWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.bottom}>\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Other Exits</ListSubheader>}>\n                {customExits.map((exit, i) => (\n                  <ListItem className={classes.exitItem} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                    <ListItemText primary={exit.split(\";\")[0]} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n          </div>\n        );\n      }\n      \n      if (this.useCompass) {\n        navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {this.buildExit(\"In\")}\n            {this.buildExit(\"East\")}\n            {this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={classes.frame} style={{ width: sidebarWidth }} onClick={() => window.client.focus()}>\n        <div className={classes.contents}>\n          <span>\n            {sidebarShowPlayers && players.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Players</ListSubheader>}>\n                {players.map((player, i) => (\n                  <ListItem disableGutters className={classes.playerItem} key={i}\n                    button onClick={() => this.sendCommand(\"look \"+player)}\n                  >\n                    <ListItemAvatar>\n                      <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText primary={player} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {sidebarShowThings && things.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Contents</ListSubheader>}>\n                {things.map((thing, i) => (\n                  <ListItem className={classes.thingItem} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                    <ListItemText primary={thing} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </span>\n        </div>\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarWidth: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  }\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarWidth } = window.client.settings;\n    \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarWidth={sidebarWidth} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  frame: {\n  },\n});\n\nclass Chargen extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  componentDidMount() {\n  }\n  \n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.frame}>Character Builder?</div>\n    );\n  }\n}\n\nChargen.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Chargen);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"inline-flex\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {maillist.length} Messages ({unread} unread)\n              <Tooltip title=\"Move multiple files to trash.\">\n                <IconButton onClick={this.toggleDelete}>\n                  <DeleteSweepIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Purge deleted mail.\">\n                <IconButton onClick={this.purgeMail}>\n                  <DeleteForeverIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Send a new message.\">\n                <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                  <CreateIcon />\n                </IconButton>\n              </Tooltip>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 100.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n\n  \n}\n\nexport default Emulator;\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body);\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addReactPanel(\"Sendmail\", { panelSize: \"30em 30em\", icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          { maillist && (\n            <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n          )}\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body });\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    var that = this;\n    \n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect(that);\n  }\n  \n  static reconnect(that) {\n    that.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect() {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n\n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n","class Utils {\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-1-37\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Utils.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n\n\n  //////////////////////////////////////////////////////////////////\n  // detect if more user input is required for a pueblo command\n  static parseCommand(command) {\n    var cmd = command;\n    var regex = /\\?\\?/;\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n}\n\nexport default Utils;\n\n","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Chargen from '../modules/Chargen';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport Utils from './utils';\nimport JSONAPI from './jsonapi';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.settings = {\n      // default emulator fg/bg\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      wrapWidth: 100,\n      invertHighlight: false,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarWidth: \"192px\",\n      sidebarAlwaysShow: true,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      // debugging\n      debugEvents: false,\n    };\n    this.defaultSettings = Object.assign({}, this.settings);\n    this.loadSettings();\n    \n    this.colors = Colors;\n    this.theme = this.createTheme();\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // App Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // default connection settings, can override in public/local.js\n    this.serverAddress = \"node.grapenut.org\";\n    this.serverPort = 2001;\n    this.serverSSL = true;\n\n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    var style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.getElementsByTagName(\"head\")[0].appendChild(style);\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n  }\n  \n  // load settings from localstorage\n  loadSettings() {\n    const store = window.localStorage;\n    Object.keys(this.settings).forEach((key) => {\n      if (store[\"settings_\"+key]) {\n        this.changeSetting(key, store[\"settings_\"+key]);\n      }\n    });\n  }\n  \n  // save settings to localstorage\n  saveSettings() {\n    const store = window.localStorage;\n    Object.keys(this.settings).forEach((key) => {\n      store[\"settings_\"+key] = String(this.settings[key]);\n    });\n  }\n  \n  // change a setting, casting the string argument to the correct type\n  changeSetting(key, value) {\n    if (!this.settings.hasOwnProperty(key)) return;\n    \n    var type = typeof this.settings[key];\n    \n    if (typeof value === type) {\n      this.settings[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          this.settings[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          this.settings[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          this.settings[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          this.settings[key] = value;\n          break;\n      }\n    }\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    }\n  }\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(Utils.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun()\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  addReactPanel(name, cfg) {\n    var el = null;\n    var obj = null;\n    switch (name) {\n      case 'Chargen':\n        el = Chargen;\n        break;\n      case 'Mailbox':\n        el = Mailbox;\n        obj = this.react.mailbox;\n        break;\n      case 'Upload':\n        el = Upload;\n        obj = this.react.upload;\n        break;\n      case 'Sendmail':\n        el = Sendmail;\n        obj = this.react.sendmail;\n        break;\n      case 'BBoard':\n        el = BBoard;\n        obj = this.react.bboard;\n        break;\n      default:\n        break;\n    }\n    \n    if (!el) {\n      return;\n    }\n    \n    if (obj) {\n      this.focusPanel(name);\n      return;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.headerTitle) {\n      config.headerTitle = name;\n    }\n    \n    if (!config.headerLogo) {\n      var icon = config.icon || \"tab\";\n      config.headerLogo = \"<i class='material-icons'>\"+icon+\"</i>\";\n    }\n    \n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      var child = React.createElement(el, { panel: container }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content);\n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n  }\n  \n  closePanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  focusPanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.serverAddress + \":\" + this.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n\n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addReactPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      } else if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect() {\n    if (this.isConnected()) {\n      return;\n    }\n    \n    if (this.reconnectCount < this.reconnectMaxCount) {\n      this.reconnectCount++;\n      this.conn && this.conn.reconnect();\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n    if (this.isConnected()) {\n      if (cmd !== '') {\n        this.sendText(cmd);\n        this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n      }\n    } else {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content)\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput, Utils };\n\n","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n"],"sourceRoot":""}