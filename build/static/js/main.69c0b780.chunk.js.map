{"version":3,"sources":["client/userinput.js","client/utils.js","client/jsonapi.js","client/index.js","modules/Chargen/index.jsx","modules/Sendmail/index.jsx","modules/Upload/index.jsx","modules/Settings/colorpicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/Actions/ActionForm.jsx","modules/Actions/TriggerForm.jsx","modules/Actions/TimerForm.jsx","modules/Actions/MacroForm.jsx","modules/Actions/KeyForm.jsx","modules/Actions/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","index.js","client/emulator.js","client/connection.js"],"names":["UserInput","root","Object","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","that","selectionStart","selectionStop","onEnter","onEscape","onPageUp","onPageDown","keyCycleForward","keyCycleBackward","clearHistory","onkeydown","evt","onkeyup","onKeyDown","onKeyUp","key","code","ctrl","e","keyCode","which","ctrlKey","shift","shiftKey","alt","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","cmd","value","saveCommand","preventDefault","focus","moveCursor","pressKey","releaseKey","history","ncommand","save_current","current","selectionEnd","length","createTextRange","range","collapse","select","force","text","window","getSelection","toString","document","selection","type","createRange","element","activeElement","tagName","toLowerCase","getAttribute","indexOf","match","Utils","line","result","links","regex","lastIndex","exec","info","start","index","xch_cmd","url","className","end","lineBuf","ii","ilen","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","anchor","createElement","parentNode","replaceChild","target","setAttribute","onCommand","href","appendChild","console","warn","command","search","val","prompt","replace","JSONAPI","maillist","self","args","sendText","mailitem","boardlist","bbmsglist","bbmsg","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","Client","_this","setBubble","hidden","tinycon","updateCounter","settings","ansiFG","ansiBG","wrapWidth","invertHighlight","decompileEditor","decompileKey","sidebarOpen","sidebarAnchor","sidebarWidth","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","debugEvents","debugActions","defaultSettings","assign","loadSettings","actionTemplates","triggers","name","action","javascript","pattern","suppress","timers","delay","repeat","times","macros","keys","keycode","loadTriggers","loadTimers","loadMacros","loadKeys","colors","theme","createTheme","output","input","events","panels","jsPanel","react","portal","taskbar","terminal","statusbar","login","mailbox","sendmail","bboard","upload","actions","conn","container","serverAddress","serverPort","serverSSL","loggedIn","jsonapi","updateLines","eatNewline","delayContents","scrollThreshold","reconnectTimer","reconnectCount","reconnectMaxCount","client","initPanels","initNotifications","render","ReactDOM","React","Portal","getElementById","src","tag","async","getElementsByTagName","style","i","removeChild","defaultTheme","typography","useNextVariants","palette","primary","indigo","secondary","blueGrey","createMuiTheme","obj","localStorage","hasOwnProperty","JSON","parse","stringify","String","bind","Number","castString","loadStyle","unloadStyle","loadLocalStorage","clearLocalStorage","saveLocalStorage","sendCommand","parseCommand","classid","msg","scroll","nearBottom","appendMessage","scrollDown","onChange","RegExp","split","map","s","join","newText","re","push","splice","clear","_this2","scrollPageUp","scrollPageDown","_this3","arguments","undefined","Emulator","onunload","close","onresize","scrollTop","scrollHeight","fun","cfg","_this4","el","Chargen","Mailbox","Upload","Sendmail","BBoard","Actions","focusPanel","config","headerTitle","headerLogo","icon","spacing","unit","callback","content","backgroundColor","background","paper","child","panel","MuiThemeProvider","create","getPanels","id","headertitle","innerText","status","popTask","unsmallify","front","serverProto","serverUrl","Connection","onOpen","onError","log","onClose","setTimeout","reconnect","onUpdate","channel","data","hasData","openLogin","Math","floor","clientHeight","dims","height","endsWith","clearTimeout","onText","sendAPI","re_fugueedit","str","addReactPanel","editor","insert","forEach","trigger","createPattern","eval","applyPattern","scrollIfNeeded","appendText","onHTML","fragment","appendHTML","onPueblo","attrs","appendPueblo","onPrompt","onObject","op","gmcp","emit","isConnected","_this5","matched","m","astr","_this6","shortid","generate","on","removeAllListeners","_this7","filename","node","textContent","blob","Blob","saveAs","alert","visibilityChange","_this8","msHidden","webkitHidden","addEventListener","setOptions","fallback","abbreviate","defaults","minimizeTo","onminimized","pushTask","onclosed","unmountComponentAtNode","dragit","saveCursor","resizeit","stop","resetCursor","props","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","classes","react__WEBPACK_IMPORTED_MODULE_5___default","a","frame","Component","withStyles","withTheme","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","sendMail","_this$state","chips","subject","body","realsub","substr","to","closePanel","handleChange","event","setState","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","changeText","onResize","resize","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","startsWith","createRef","_this$props","options","_this$state2","react__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_8___default","card","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_9___default","header","title","material_ui_chip_input__WEBPACK_IMPORTED_MODULE_18___default","label","fullWidth","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","helperText","FormHelperTextProps","subheader","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_15___default","stretch","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_10___default","react_ace__WEBPACK_IMPORTED_MODULE_19___default","bodytext","ref","mode","width","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_14___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_13___default","button","onClick","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_16___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_17___default","position","display","flex-flow","sub","left","flex","right","marginLeft","overflow","justify-content","textAlign","minWidth","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","setText","lines","newtext","react_ace__WEBPACK_IMPORTED_MODULE_13___default","readOnly","stretchflex","pad","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_8___default","padded","variant","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7___default","_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_icons_Redo__WEBPACK_IMPORTED_MODULE_12___default","margin","ColorPicker","classCallCheck","possibleConstructorReturn","getPrototypeOf","show","currentTarget","hide","choose","color","offset","rows","j","bgfix","react_default","Button_default","aria-haspopup","aria-owns","Popover_default","popover","anchorEl","open","Boolean","classNames","swatch","cursor","border","padding","lineHeight","Settings","handleSwitch","changeSetting","checked","defineProperty","saveSettings","forceUpdate","handleValue","handleColor","showColor","colorAnchor","closeColor","chooseColor","objectSpread","resetSettings","confirm","closeDrawer","debugRegistry","tabIndex","role","List_default","disablePadding","dense","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","ListItemSecondaryAction_default","Switch_default","WrapText_default","TextField_default","Palette_default","colorpicker","Edit_default","Code_default","VerticalSplit_default","disabled","PictureInPicture_default","Icon_default","BorderLeft_default","BorderRight_default","FormatIndentIncrease_default","AccountCircle_default","GroupWork_default","Explore_default","buttons","reset","flexDirection","justifyContent","alignItems","flexFlow","paddingLeft","marginRight","BadgeIcon","count","Badge_default","badgeContent","children","Taskbar","openDrawer","closeMenu","setTitle","t","clearScreen","txt","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","addButton","task","showMenu","menuAnchor","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","showUpload","file","uploadAnchor","closeUpload","insertCommand","closeHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","openActions","panelSize","maximizedMargin","previewUpload","handleFile","files","reader","FileReader","onload","readAsText","handleURL","req","XMLHttpRequest","onreadystatechange","readyState","responseText","send","rev","slice","reverse","AppBar_default","Toolbar_default","disableGutters","Typography_default","noWrap","Tooltip_default","tasklabel","taskbutton","aria-label","taskicon","headerlogo","tasksep","ariaLabel","icons_Menu_default","SwipeableDrawer_default","modules_Settings","onSubmit","autoComplete","autoFocus","InputProps","inputProps","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","component","historyPopover","divider","Menu_default","disableEnforceFocus","MenuItem_default","Settings_default","Build_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","flexGrow","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","overflowY","Terminal","focusInput","calcDimensions","linesOfScroll","init","initOutput","initPrompt","dim","containerRef","onScroll","maxWidth","scrollcount","align","background-color","main","font-family","font-weight","font-size","breakpoints","down","overflowX","white-space","word-wrap","text-align","vertical-align","bottom","Input","initInput","outline","Statusbar","Login","closeLogin","submitLogin","username","password","submitGuest","submitCreate","catchReturn","Dialog_default","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","IconButton_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","withMobileDialog","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","Sidebar","go","exit","_window$client","getContents","matchExit","ucExits","buildExit","uc","toUpperCase","exits","things","players","friends","customExits","useCompass","_loop","fullexit","n","player","sidebar","exitWidget","navWidget","_this$state3","parseExits","exitItem","contents","playerItem","ListItemAvatar_default","Avatar_default","p","thing","thingItem","flexShrink","-webkit-transform","transform","middle","dock","scrollTo","_window$client$settin","modules_Sidebar","core_styles","top","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","ActionForm","refs","setStatus","clearStatus","list","listName","selected","item","handleNumber","parseInt","changeAction","_this$props2","template","_this$props3","Form","form","lib_default","Delete_default","Undo_default","newState","verticalAlign","TriggerForm","row","TimerForm","MacroForm","KeyForm","Checkbox_default","Shift","changeTab","tab","onSelect","Tabs_default","Tab_default","even","odd","listNum","listText","AddCircle_default","Actions_ActionForm","BBListItem","board","posts","lastmod","listicon","read","opacity","BBList","openBoard","BBoard_BBListItem","BBMessageListItem","message","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","emulator","Card_default","CardHeader_default","CardContent_default","CardActions_default","overflow-y","overflow-x","openBB","openBBMsg","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","MailListItem","mail","quickDelete","handleMark","deleted","unread","urgent","PriorityHigh_default","Mail_default","Drafts_default","from","time","CheckCircle_default","Cancel_default","MailList","purgeMail","toggleDelete","openMail","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","wrap","Reply_default","Forward_default","MoreVert_default","folder","folderlist","_this$state4","_this$state5","setFields","_this$state6","Mailbox_MailList","Mailbox_MailItem","__webpack_require__","r","__webpack_exports__","loadScript","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","substring","ANSI_NORMAL","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","next","encodeState","ansiClass","span","stack","createTextNode","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","ch","PARSE_CR","abortParse","endLine","applyANSI","html","div","createDocumentFragment","innerHTML","firstChild","nextSibling","removeAttribute","idx","selfClosing","UNCLOSED_TAGS","pushElement","popElement","threshold","temp","nodeName","fontFamily","fontSize","clientWidth","round","abs","offsetHeight","socket","isOpen","WebSocket","onopen","onerror","onclose","onmessage","CHANNEL_TEXT","CHANNEL_JSON","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage"],"mappings":"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","file":"static/js/main.69c0b780.chunk.js","sourcesContent":["class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n","class Utils {\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-1-37\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Utils.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n\n\n  //////////////////////////////////////////////////////////////////\n  // detect if more user input is required for a pueblo command\n  static parseCommand(command) {\n    var cmd = command;\n    var regex = /\\?\\?/;\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n}\n\nexport default Utils;\n\n","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","/* eslint no-eval: 0 */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Chargen from '../modules/Chargen';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\nimport Actions from '../modules/Actions';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport Utils from './utils';\nimport JSONAPI from './jsonapi';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.settings = {\n      // default emulator fg/bg\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      wrapWidth: 100,\n      invertHighlight: false,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarWidth: \"192px\",\n      sidebarAlwaysShow: true,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      // debugging\n      debugEvents: false,\n      debugActions: false,\n    };\n    this.defaultSettings = Object.assign({}, this.settings);\n    this.loadSettings();\n    \n    // triggers, timers, macros, and keybindings\n    this.actionTemplates = {\n      triggers: {\n        name: \"\",\n        action: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n        suppress: false,\n      },\n      timers: {\n        name: \"\",\n        action: \"\",\n        javascript: false,\n        delay: 0,\n        repeat: false,\n        times: 0,\n      },\n      macros: {\n        name: \"\",\n        action: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n      },\n      keys: {\n        name: \"\",\n        action: \"\",\n        javascript: false,\n        keycode: null,\n        ctrl: false,\n        alt: false,\n        shift: false,\n      },\n    };\n        \n    this.triggers = [];\n    this.timers = [];\n    this.macros = [];\n    this.keys = [];\n    \n    this.loadTriggers();\n    this.loadTimers();\n    this.loadMacros();\n    this.loadKeys();\n    \n    // Client colors and theme\n    this.colors = Colors;\n    this.theme = this.createTheme();\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // External Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n      actions: null,\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // default connection settings, can override in public/local.js\n    this.serverAddress = \"node.grapenut.org\";\n    this.serverPort = 2001;\n    this.serverSSL = true;\n\n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // rendering, themeing, and styling react components\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    var style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.getElementsByTagName(\"head\")[0].appendChild(style);\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // save and load objects from localStorage\n  \n  // load object from localstorage\n  loadLocalStorage(obj, key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      obj = Object.assign(obj, JSON.parse(window.localStorage[key]));\n    }\n  }\n  \n  // clear localStorage keys starting with prefix\n  clearLocalStorage(key) {\n    delete window.localStorage[key];\n  }\n  \n  // save object to localstorage\n  saveLocalStorage(obj, key) {\n    window.localStorage[key] = JSON.stringify(obj);\n  }\n  \n  // casting a string argument to the correct type\n  castString(obj, key, value) {\n    if (!obj.hasOwnProperty(key)) return;\n    \n    var type = typeof obj[key];\n    \n    if (typeof value === type) {\n      obj[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          obj[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          obj[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          obj[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          obj[key] = value;\n          break;\n      }\n    }\n  }\n  \n  // change a setting, performing a secondary action if necessary\n  changeSetting(key, value) {\n    this.castString(this.settings, key, value);\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    }\n  }\n  \n  // load regex/wildcard pattern triggers\n  loadTriggers() {\n    this.loadLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // load automatic timers\n  loadTimers() {\n    this.loadLocalStorage(this.timers, \"timers\");\n  }\n  \n  // load slash command macros\n  loadMacros() {\n    this.loadLocalStorage(this.macros, \"macros\");\n  }\n  \n  // load custom keybindings\n  loadKeys() {\n    this.loadLocalStorage(this.keys, \"keys\");\n  }\n  \n  // load client settings\n  loadSettings() {\n    this.loadLocalStorage(this.settings, \"settings\");\n    \n    if (this.settings['invertHighlight']) {\n      this.loadStyle('./inverse.css');\n    } else {\n      this.unloadStyle('./inverse.css');\n    }\n  }\n  \n  // save regex/wildcard pattern triggers\n  saveTriggers() {\n    this.clearLocalStorage(\"triggers\");\n    this.saveLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // save automatic timers\n  saveTimers() {\n    this.clearLocalStorage(\"timers\");\n    this.saveLocalStorage(this.timers, \"timers\");\n  }\n  \n  // save slash command macros\n  saveMacros() {\n    this.clearLocalStorage(\"macros\");\n    this.saveLocalStorage(this.macros, \"macros\");\n  }\n  \n  // save custom keybindings\n  saveKeys() {\n    this.clearLocalStorage(\"keys\");\n    this.saveLocalStorage(this.keys, \"keys\");\n  }\n  \n  // save client settings\n  saveSettings() {\n    this.clearLocalStorage(\"settings\");\n    this.saveLocalStorage(this.settings, \"settings\");\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // miscellaneous logging and command links\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(Utils.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // manage triggers, timers, macros, and keys\n  createPattern(regex, pattern) {\n    if (regex) {\n      return new RegExp('^' + pattern + '$');\n    } else {\n      return new RegExp('^' + pattern.split(/\\*+/).map(s => s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')).join('(.*)') + '$');\n    }\n  }\n  \n  applyPattern(args, text) {\n    let newText = text;\n    for (let i = args.length-1; i > -1; i--) {\n      let re = new RegExp('(?![\\\\%])(%'+i+')', 'g');\n      newText = newText.replace(re, args[i]);\n    }\n    return newText;\n  }\n  \n  addTrigger(name, pattern, regex, javascript, suppress, action) {\n    this.triggers.push({ name, pattern, regex, javascript, suppress, action });\n  }\n  \n  delTrigger(which) {\n    this.triggers.splice(which, 1);\n  }\n  \n  addTimer(name, delay, repeat, times, javascript, action) {\n    this.timers.push({ name, delay, repeat, times, javascript, action });\n  }\n  \n  delTimer(which) {\n    this.timers.splice(which, 1);\n  }\n  \n  addMacro(name, pattern, regex, javascript, action) {\n    this.macros.push({ name, pattern, regex, javascript, action });\n  }\n  \n  delMacro(which) {\n    this.macros.splice(which, 1);\n  }\n  \n  addKey(name, key, ctrl, alt, shift, javascript, action) {\n    this.keys.push({ name, key, ctrl, alt, shift, javascript, action });\n  }\n  \n  delKey(which) {\n    this.keys.splice(which, 1);\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // initialize terminal elements (input, output, prompt) and clear them\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // handle input window focus and output window scrolling\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun()\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // spawn, focus and close window panels\n  \n  // spawn a window using a react components\n  addReactPanel(name, cfg) {\n    var el = null;\n    var obj = null;\n    switch (name) {\n      case 'Chargen':\n        el = Chargen;\n        break;\n      case 'Mailbox':\n        el = Mailbox;\n        obj = this.react.mailbox;\n        break;\n      case 'Upload':\n        el = Upload;\n        obj = this.react.upload;\n        break;\n      case 'Sendmail':\n        el = Sendmail;\n        obj = this.react.sendmail;\n        break;\n      case 'BBoard':\n        el = BBoard;\n        obj = this.react.bboard;\n        break;\n      case 'Actions':\n        el = Actions;\n        obj = this.react.actions;\n        break;\n      default:\n        break;\n    }\n    \n    if (!el) {\n      return;\n    }\n    \n    if (obj) {\n      this.focusPanel(name);\n      return;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.headerTitle) {\n      config.headerTitle = name;\n    }\n    \n    if (!config.headerLogo) {\n      var icon = config.icon || \"tab\";\n      config.headerLogo = \"<i class='material-icons' style='margin-left: \"+this.theme.spacing.unit+\"px'>\"+icon+\"</i>\";\n    }\n    \n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      var child = React.createElement(el, { panel: container }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content);\n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n  }\n  \n  closePanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  focusPanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.serverAddress + \":\" + this.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n    \n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      // implement @dec/tf\n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addReactPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      }\n      \n      // handle text triggers\n      let suppress = false;\n      client.triggers.forEach((trigger, i) => {\n        try {\n          let re = client.createPattern(trigger.regex, trigger.pattern);\n          let args = text.match(re);\n          \n          if (args) {\n            if (trigger.javascript) {\n              eval(trigger.action);\n            } else {\n              let action = client.applyPattern(args, trigger.action);\n              client.sendText(action);\n            }\n          \n            if (trigger.suppress) {\n              client.eatNewline = true;\n              suppress = true;\n            }\n          }\n        } catch (e) {\n          client.settings.debugActions && console.log(\"Trigger error:\", e);\n        }\n      });\n      \n      if (suppress) return;\n      \n      if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      \n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect() {\n    if (this.isConnected()) {\n      return;\n    }\n    \n    if (this.reconnectCount < this.reconnectMaxCount) {\n      this.reconnectCount++;\n      this.conn && this.conn.reconnect();\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n    if (!this.isConnected()) {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n      return;\n    }\n    \n    if (cmd === '') return;\n    \n    let matched = false;\n    this.macros.forEach((m) => {\n      try {\n        let re = this.createPattern(m.regex, m.pattern);\n        let args = cmd.match(re);\n        \n        if (args) {\n          matched = true;\n          if (m.javascript) {\n            eval(m.action);\n          } else {\n            let action = this.applyPattern(args, m.action);\n            this.sendText(action);\n          }\n        }\n      } catch (e) {\n        this.settings.debugActions && console.log(\"Macro error:\", e);\n      }\n    });\n    \n    if (!matched) {\n      this.sendText(cmd);\n    }\n    \n    this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content)\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput, Utils };\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  frame: {\n  },\n});\n\nclass Chargen extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  componentDidMount() {\n  }\n  \n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.frame}>Character Builder?</div>\n    );\n  }\n}\n\nChargen.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Chargen);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body });\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n      value: props.value,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.setState({ value: color });\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor, value } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={value}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\n\nimport ColorPicker from './colorpicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentIncreaseIcon from '@material-ui/icons/FormatIndentIncrease';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    height: \"100%\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      colorAnchor: null,\n    };\n    \n    this.color = null;\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  showColor = name => event => {\n    this.color = name;\n    this.setState({ colorAnchor: event.currentTarget });\n  };\n  \n  closeColor = () => {\n    this.setState({ colorAnchor: null });\n  };\n  \n  chooseColor = color => event => {\n    this.setState({ [this.color]: \"ansi-\"+color });\n    this.closeColor();\n  };\n  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth,\n      invertHighlight, debugRegistry,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, colorAnchor, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarWidth } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <Popover id=\"settings.color\" anchorEl={colorAnchor} open={false} onClose={this.closeColor}>\n            </Popover>\n            \n            <List disablePadding dense subheader={<ListSubheader>Debugging</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug registry errors?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugRegistry} value=\"debugRegistry\" onChange={this.handleSwitch('debugRegistry')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Display Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <WrapTextIcon />\n                </ListItemIcon>\n                <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Background Color\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Foreground Color\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Swap black and white?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List disablePadding dense subheader={<ListSubheader>@decompile/tf</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <EditIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <CodeIcon />\n                </ListItemIcon>\n                <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n              </ListItem>\n            </List>\n\n            <List disablePadding dense subheader={<ListSubheader>Sidebar Display</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <VerticalSplitIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <PictureInPictureIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <Icon color=\"action\">\n                  <BorderLeftIcon />\n                </Icon>\n                <ListItemText primary=\"Left\" />\n                <Switch checked={sidebarAnchor === \"right\"}\n                  color=\"default\" disabled={!sidebarOpen}\n                  value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n                  onChange={this.handleValue('sidebarAnchor')}\n                />\n                <ListItemText primary=\"Right\" />\n                <Icon color=\"action\">\n                  <BorderRightIcon />\n                </Icon>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <FormatIndentIncreaseIcon />\n                </ListItemIcon>\n                <TextField label=\"Sidebar Width\" value={sidebarWidth} onChange={this.handleValue('sidebarWidth')} />\n              </ListItem>\n            </List>\n            \n            <List disabled={!sidebarOpen} disablePadding dense subheader={<ListSubheader>Sidebar Content</ListSubheader>}>\n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <AccountCircleIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show players?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <GroupWorkIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show things?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    margin: '0 20px',\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n//    display: \"flex\",\n//    \"flex-direction\": \"column\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon>{props.children}</Icon>);\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      buttons: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  addButton = (button) => {\n    const { buttons } = this.state;\n    buttons.push(button);\n    this.setState({ buttons });\n  };\n  \n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    taskbar.push(task);\n    this.setState({ taskbar });\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n\n  openActions = () => {\n    window.client.addReactPanel(\"Actions\", {\n      panelSize: {\n        width: 'calc(50% - ' + 1.5*window.client.panels.defaults.maximizedMargin + 'px)',\n        height: 'calc(100% - ' + 2*window.client.panels.defaults.maximizedMargin + 'px)',\n      },\n      icon: 'build',\n    });\n  };\n  \n  previewUpload = () => {\n    window.client.addReactPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.conn.reconnect();\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, buttons, historyAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n\n    var rev = input ? input.history.slice().reverse() : [];\n    \n    return (\n      <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n        <Toolbar disableGutters={!this.state.open}>\n          <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n            {title}\n          </Typography>\n          <div className={classes.flex}></div>\n          {taskbar.map((task,i) => (\n            <Tooltip key={i} title={task.headertitle.innerText}>\n              <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n                <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n                {task.headertitle.innerText}\n              </Button>\n            </Tooltip>\n          ))}\n          \n          <div className={classes.tasksep}></div>\n          \n          {buttons.map((button,i) => (\n            <Tooltip key={i} title={button.title}>\n              <Button aria-label={button.ariaLabel} onClick={button.action}>\n                <BadgeIcon count={button.count}>\n                  {button.icon}\n                </BadgeIcon>\n              </Button>\n            </Tooltip>\n          ))}\n          \n          <Tooltip title=\"More tasks...\">\n            <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n              <MenuIcon />\n            </Button>\n          </Tooltip>\n          \n          <SwipeableDrawer\n            variant=\"temporary\"\n            anchor=\"top\"\n            open={open}\n            onClose={this.closeDrawer}\n            onOpen={this.openDrawer}\n          >\n            <Settings closeDrawer={this.closeDrawer} />\n          </SwipeableDrawer>\n\n          <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n            <form onSubmit={this.searchHelp}>\n              <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"false\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n            </form>\n            <Button fullWidth onClick={this.searchHelp}>\n              Get Help\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n            <form onSubmit={this.saveLog}>\n              <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                onChange={this.typeLog} autoFocus\n                InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n              />\n            </form>\n            <Button fullWidth onClick={this.saveLog}>\n              Save Log\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n            <form onSubmit={this.handleURL} className={classes.padded}>\n              <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n            </form>\n            <Button onClick={this.handleURL}>\n              Upload URL\n            </Button>\n            <input\n              accept=\"text/plain\"\n              className={classes.fileinput}\n              id=\"file.upload\"\n              type=\"file\"\n              onChange={this.handleFile}\n            />\n            <label htmlFor=\"file.upload\">\n              <Button component=\"span\">\n                Choose File\n              </Button>\n            </label>\n            <Button onClick={this.previewUpload}>\n              Paste Text\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n            <List className={classes.historyPopover}>\n              {rev.map((cmd, i) => (\n                <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                  <ListItemText primary={cmd} />\n                </ListItem>\n              ))}\n            </List>\n            <Button onClick={this.clearHistory}>\n              Clear History\n            </Button>\n          </Popover>\n          \n          <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n            <MenuItem onClick={this.closeMenu}>\n              <Tooltip title=\"Close menu.\">\n                <MenuIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openDrawer}>\n              <Tooltip title=\"Change settings.\">\n                <SettingsIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openActions}>\n              <Tooltip title=\"Manage actions.\">\n                <BuildIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n              <Tooltip title=\"Upload file/URL.\">\n                <CloudUploadIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n              <Tooltip title=\"Save display log.\">\n                <SaveIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n              <Tooltip title=\"Show command history.\">\n                <KeyboardIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.clearScreen}>\n              <Tooltip title=\"Clear screen.\">\n                <BackspaceIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.reconnect}>\n              <Tooltip title=\"Reconnect.\">\n                <WifiIcon />\n              </Tooltip>\n            </MenuItem>            \n          </Menu>\n\n          <div className={classes.tasksep}></div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.addEventListener('resize', this.onResize);\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    this.forceUpdate();\n  }\n  \n  onResize = event => {\n    window.client.output.calcDimensions();\n    window.client.sendText(\"SCREENWIDTH \" + window.client.settings.wrapWidth);\n    window.client.sendText(\"SCREENHEIGHT \" + Math.floor(window.client.output.root.parentNode.clientHeight / window.client.output.dims.height));\n    window.client.output.scrollDown();\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classes.frame} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\">\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)}  autoComplete=\"off\" autoFocus></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \".\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        <Typography\n          align=\"right\"\n          color=\"textPrimary\"\n          noWrap\n        >\n          {status}\n        </Typography>\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst styles = theme => ({\n  frame: {\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n    position: \"relative\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <Dialog\n          open={open}\n          onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n          onClose={this.closeLogin}\n          aria-labelledby=\"responsive-dialog-title\"\n          disableBackdropClick\n          disableEscapeKeyDown\n        >\n          <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n            Character Login\n            <ListItemSecondaryAction>\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <span dangerouslySetInnerHTML={{ __html: msg }} />\n            </DialogContentText>\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"username\"\n              label=\"Character Name\"\n              type=\"string\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n            <TextField\n              className={classes.text}\n              margin=\"dense\"\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              fullWidth\n              onKeyPress={this.catchReturn}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n              <PersonAddIcon />\n              Register\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n              <PersonOutlineIcon />\n              Guest\n            </Button>\n            <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n              <PersonIcon />\n              Login\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withMobileDialog()(withStyles(styles, { withTheme: true })(Login));\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    minWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'space-between',\n  },\n  contents: {\n    flexShrink: 1,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  playerItem: {\n    padding: 2,\n  },\n  thingItem: {\n  },\n  customExits: {\n    flexGrow: 1,\n    position: \"relative\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  navWidget: {\n    position: \"relative\",\n    bottom: 0,\n    left: \"50%\",\n    flexShrink: 0,\n    '-webkit-transform': 'translateX(-50%)',\n    transform: 'translateX(-50%)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (match === -1) {\n          match = keys.indexOf(exit);\n        }\n      });\n\n      if (match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarWidth, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n    var exitWidget;\n    var navWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.bottom}>\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Other Exits</ListSubheader>}>\n                {customExits.map((exit, i) => (\n                  <ListItem className={classes.exitItem} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                    <ListItemText primary={exit.split(\";\")[0]} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n          </div>\n        );\n      }\n      \n      if (this.useCompass) {\n        navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {this.buildExit(\"In\")}\n            {this.buildExit(\"East\")}\n            {this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={classes.frame} style={{ width: sidebarWidth }} onClick={() => window.client.focus()}>\n        <div className={classes.contents}>\n          <span>\n            {sidebarShowPlayers && players.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Players</ListSubheader>}>\n                {players.map((player, i) => (\n                  <ListItem disableGutters className={classes.playerItem} key={i}\n                    button onClick={() => this.sendCommand(\"look \"+player)}\n                  >\n                    <ListItemAvatar>\n                      <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText primary={player} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {sidebarShowThings && things.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Contents</ListSubheader>}>\n                {things.map((thing, i) => (\n                  <ListItem className={classes.thingItem} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                    <ListItemText primary={thing} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </span>\n        </div>\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarWidth: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  }\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarWidth } = window.client.settings;\n    \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarWidth={sidebarWidth} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/mode/javascript';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  form: {\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\", \n  },\n  top: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    width: \"100%\",\n  },\n  bottom: {\n    position: \"relative\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  middle: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    flex: 1,\n    alignItems: \"center\",\n  },\n  align: {\n    width: \"100%\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ActionForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const { list, listName, selected } = props;\n\n    this.template = window.client.actionTemplates[listName];\n\n    this.state = {\n      list: list,\n      item: Object.assign({}, list && selected > -1 ? list[selected] : this.template),\n      selected: selected,\n      status: \"\",\n      error: false,\n    };\n    \n    this.refs = {};\n    Object.keys(this.template).forEach((key) => {\n      this.refs[key] = React.createRef();\n    });\n  }\n  \n  componentDidMount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    this.props.panel.options.resizeit.resize = null;\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { list, listName, selected } = props;\n    \n    var newState = {};\n    \n    if (list !== state.list) {\n      newState.list = list;\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : window.client.actionTemplates[listName]);\n      return newState;\n    }\n    \n    if (selected !== state.selected) {\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : window.client.actionTemplates[listName]);\n      return newState;\n    }\n    \n    return null;\n  }\n  \n  onResize = () => {\n    this.refs.action && this.refs.action.current.editor.resize();\n  };\n  \n  setStatus = (error, status) => {\n    this.setState({ error: error, status: status });\n    clearTimeout(this.clearStatus);\n    setTimeout(this.clearStatus, 3000);\n  };\n\n  clearStatus = () => {\n    this.setState({ error: false, status: \"\" });\n  };\n  \n  onSubmit = (e) => {\n    const { list, listName, selected } = this.props;\n    const { item } = this.state;\n    \n    e.preventDefault();\n\n    if (item.name === \"\") {\n      this.setStatus(true, \"Name must not be blank.\" );\n      return;\n    }\n    \n    var match = list.map((item) => item.name).indexOf(item.name);\n    if (match > -1 && match !== selected) {\n      this.setStatus(true, \"Name already saved, choose another.\" );\n      return;\n    }\n    \n    this.setStatus(false, \"Saved.\" );\n    \n    if (selected > -1) {\n      list[selected] = item;\n      window.client.react.actions.setState({ selected: selected });\n    } else {\n      list.push(item);\n      window.client.react.actions.setState({ selected: list.length-1 });\n    }\n    \n    window.client.saveLocalStorage(list, listName);\n  };\n  \n  handleChange = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.value;\n    this.setState({ item });\n  };\n  \n  handleNumber = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = parseInt(e.target.value);\n    this.setState({ item });\n  };\n  \n  handleSwitch = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.checked;\n    this.setState({ item });\n  };\n  \n  changeAction = (action) => {\n    const { item } = this.state;\n    item.action = action;\n    this.setState({ item });\n  };\n\n  onDelete = () => {\n    const { list, listName, selected } = this.props;\n    \n    if (window.confirm(\"Do you really want to delete this action?\") && selected > -1) {\n      list.splice(selected, 1);\n      this.setStatus(false, \"Deleted.\" );\n      window.client.react.actions.setState({ selected: -1 });\n      window.client.saveLocalStorage(list, listName);\n    }\n  };\n  \n  render() {\n    const { classes, list, selected, Form } = this.props;\n    const { item, error, status } = this.state;\n    const refs = this.refs;\n    \n    return (\n      <div className={classes.frame}>\n        <form onSubmit={this.onSubmit} className={classes.form}>\n        \n          <div className={classes.top}>\n            <TextField ref={refs.name} label=\"Name\" className={classes.flex} value={item.name} onChange={this.handleChange('name')} />\n            <span>\n              <ListItem dense>\n                <ListItemText primary=\"MushCode\" />\n                <Switch ref={refs.javascript} color=\"default\" checked={item.javascript} onChange={this.handleSwitch('javascript')} />\n                <ListItemText primary=\"JavaScript\" />\n              </ListItem>\n            </span>\n          </div>\n          \n          <Form className={classes.top} refs={refs} item={item} handleNumber={this.handleNumber} handleChange={this.handleChange} handleSwitch={this.handleSwitch} />\n          \n          <AceEditor\n            className={classes.flex}\n            ref={refs.action}\n            mode={item.javascript ? \"javascript\" : \"mushcode\"}\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={item.action}\n            onChange={this.changeAction}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n          \n          <div className={classes.bottom}>\n            <Button onClick={this.onDelete} classes={{ label: classes.block }} disabled={selected === -1}>\n              <DeleteIcon /> Delete\n            </Button>\n            <span className={classes.middle}>\n              <Typography className={classes.align} color={error ? \"error\" : \"default\"}>\n                {status}\n              </Typography>\n            </span>\n            <Button onClick={this.onSubmit} classes={{ label: classes.block }}>\n              <SaveIcon /> Save\n            </Button>\n            <Button classes={{ label: classes.block }}\n              onClick={() => this.setState({\n                item: Object.assign({}, list && selected > -1 ? list[selected] : this.template)\n              })}\n            >\n              <UndoIcon /> Reset\n            </Button>\n          </div>\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nActionForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n  list: PropTypes.array.isRequired,\n  listName: PropTypes.string.isRequired,\n  selected: PropTypes.number.isRequired,\n  Form: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(ActionForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TriggerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, refs, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField ref={refs.pattern} label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} />\n        <div className={classes.row}>\n          <span>\n            <ListItem dense>\n              <ListItemText primary=\"Wildcard\" />\n              <Switch ref={refs.regex} color=\"default\" checked={item.regex} onChange={handleSwitch('regex')} />\n              <ListItemText primary=\"RegExp\" />\n            </ListItem>\n          </span>\n          <span className={classes.flex}></span>\n          <span>\n            <ListItem dense>\n              <ListItemText primary=\"Suppress terminal output?\" />\n              <Switch ref={refs.suppress} checked={item.suppress} onChange={handleSwitch('suppress')} />\n            </ListItem>\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nTriggerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  refs: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TriggerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TimerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, refs, handleNumber, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField type=\"number\" ref={refs.delay} label=\"Delay seconds\" className={classes.flex} value={String(item.delay)} onChange={handleNumber('delay')} />\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Repeat this timer?\" />\n            <Switch ref={refs.repeat} checked={item.repeat} onChange={handleSwitch('repeat')} />\n          </ListItem>\n        </span>\n        <TextField type=\"number\" ref={refs.times} disabled={!item.repeat} label=\"Number of times\" className={classes.flex} value={String(item.times)} onChange={handleNumber('times')} />\n      </div>\n    );\n  }\n}\n\nTimerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  refs: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TimerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MacroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, refs, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField ref={refs.pattern} label=\"Matching pattern\" className={classes.flex} value={item.pattern} onChange={handleChange('pattern')} />\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Wildcard\" />\n            <Switch ref={refs.regex} color=\"default\" checked={item.regex} onChange={handleSwitch('regex')} />\n            <ListItemText primary=\"RegExp\" />\n          </ListItem>\n        </span>\n      </div>\n    );\n  }\n}\n\nMacroForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  refs: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MacroForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass KeyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, refs, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <span className={classes.flex}>\n          <TextField ref={refs.keycode} label=\"Key code\" value={item.keycode ? item.keycode : \"\"} onChange={handleChange('keycode')} />\n        </span>\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Ctrl\" />\n            <Checkbox ref={refs.ctrl} checked={item.ctrl} onChange={handleSwitch('ctrl')} />\n          </ListItem>\n        </span>\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Alt\" />\n            <Checkbox ref={refs.alt} checked={item.alt} onChange={handleSwitch('alt')} />\n          </ListItem>\n        </span>\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Shift\" />\n            <Checkbox ref={refs.Shift} checked={item.Shift} onChange={handleSwitch('Shift')} />\n          </ListItem>\n        </span>\n      </div>\n    );\n  }\n}\n\nKeyForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  refs: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(KeyForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\n\nimport ActionForm from './ActionForm';\nimport TriggerForm from './TriggerForm';\nimport TimerForm from './TimerForm';\nimport MacroForm from './MacroForm';\nimport KeyForm from './KeyForm';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  container: {\n    padding: 3*theme.spacing.unit,\n    flex: 1,\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    marginRight: 3*theme.spacing.unit,\n  },\n  right: {\n    position: \"relative\",\n    flex: 1,\n    height: \"100%\",\n    overflow: \"hidden\",\n  },\n  listText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  overflow: {\n    flex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Actions extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      tab: 0,\n      selected: -1,\n    };\n  }\n\n  changeTab = (event, tab) => {\n    this.setState({ tab });\n    this.setState({ selected: -1 });\n  };\n  \n  onSelect = (key) => (event) => {\n    this.setState({ selected: key });\n  }; \n  \n  componentDidMount() {\n    window.client.react.actions = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.actions = null;\n  }\n  \n  render() {\n    const { classes, panel } = this.props;\n    const { tab, selected } = this.state;\n    const client = window.client;\n    \n    var Form;\n    var list;\n    var listName;\n    switch (tab) {\n      case 0:\n        list = client.triggers;\n        listName = \"Triggers\";\n        Form = TriggerForm;\n        break;\n      case 1:\n        list = client.timers;\n        listName = \"Timers\";\n        Form = TimerForm;\n        break;\n      case 2:\n        list = client.macros;\n        listName = \"Macros\";\n        Form = MacroForm;\n        break;\n      case 3:\n        list = client.keys;\n        listName = \"Keys\";\n        Form = KeyForm;\n        break;\n      default:\n        break;\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar position=\"static\">\n          <Tabs value={tab} onChange={this.changeTab}>\n            <Tab label=\"Triggers\" />\n            <Tab label=\"Timers\" />\n            <Tab label=\"Macros\" />\n            <Tab label=\"Keys\" />\n          </Tabs>\n        </AppBar>\n        <Typography className={classes.container} component=\"div\" >\n          <div className={classes.left}>\n            <div className={classes.overflow}>\n              <List disablePadding dense subheader={<ListSubheader>{listName}</ListSubheader>}>\n                {list.map((item, i) => (\n                  <ListItem key={i} dense button divider selected={selected === i} onClick={this.onSelect(i)} className={i % 2 === 0 ? classes.even : classes.odd} >\n                    <ListItemIcon className={classes.listNum}><span>{i+1}</span></ListItemIcon>\n                    <ListItemText className={classes.listText} primary={item.name} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n            <Button classes={{ label: classes.block }} onClick={() => this.setState({ selected: -1 })}>\n              <AddCircleIcon />\n              New {listName.slice(0,-1)}\n            </Button>\n          </div>\n          <div className={classes.right}>\n            <ActionForm list={list} listName={listName.toLowerCase()} selected={selected} panel={panel} Form={Form} />\n          </div>\n        </Typography>\n      </div>\n    );\n  }\n}\n\nActions.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Actions);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"inline-flex\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {maillist.length} Messages ({unread} unread)\n              <Tooltip title=\"Move multiple files to trash.\">\n                <IconButton onClick={this.toggleDelete}>\n                  <DeleteSweepIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Purge deleted mail.\">\n                <IconButton onClick={this.purgeMail}>\n                  <DeleteForeverIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Send a new message.\">\n                <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                  <CreateIcon />\n                </IconButton>\n              </Tooltip>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body);\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addReactPanel(\"Sendmail\", { panelSize: \"30em 30em\", icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          { maillist && (\n            <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n          )}\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 100.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n\n  \n}\n\nexport default Emulator;\n\n","// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    var that = this;\n    \n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect(that);\n  }\n  \n  static reconnect(that) {\n    that.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect() {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n\n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n"],"sourceRoot":""}