{"version":3,"sources":["client/connection.js","modules/Spawn/index.jsx","client/jsonapi.js","client/index.js","modules/Sendmail/index.jsx","modules/Upload/index.jsx","client/templates.js","modules/Settings/ColorPicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Customizer/FormEditor.jsx","modules/Customizer/TriggerForm.jsx","modules/Customizer/TimerForm.jsx","modules/Customizer/MacroForm.jsx","modules/Customizer/KeyForm.jsx","modules/Customizer/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","index.js","client/emulator.js","client/userinput.js"],"names":["Connection","url","Object","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","socket","isOpen","onOpen","onError","onClose","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","reconnect","arguments","length","undefined","that","isConnected","sendText","window","WebSocket","onopen","evt","onerror","onclose","onmessage","readyState","close","data","send","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","e","console","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","substring","MAX_HISTORY_SIZE","HISTORY_KEY","Spawn","props","_this","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","changePrefix","event","Prefix","target","value","prefix","state","setState","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","LoadHistory","output","loadHistory","id","scrollDown","SaveHistory","saveHistory","Math","min","client","settings","historySpawnSize","AutoHide","autoHide","hasHidden","panel","minimize","onChange","lines","linesOfScroll","status","count","react","taskbar","forceUpdate","refoutput","React","createRef","refinput","input","_this2","Emulator","current","UserInput","onEnter","cmd","sendCommand","onEscape","clear","onPageUp","scrollPageUp","onPageDown","scrollPageDown","sendMacro","fun","scroll","nearBottom","scrollThreshold","text","_this3","scrollIfNeeded","appendText","_this4","classes","_window$client$settin","ansiFG","ansiBG","fontFamily","fontSize","font","inputFont","mobile","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","className","frame","top","ref","classNames","style","bottom","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_10___default","label","autoComplete","Component","withStyles","theme","position","height","width","display","flex-flow","flex","margin","font-family","font-weight","font-size","overflow-y","overflow-x","white-space","word-wrap","padding","background-color","palette","primary","main","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__","border","outline","vertical-align","resize","breakpoints","down","withTheme","JSONAPI","maillist","self","args","mailitem","boardlist","bbmsglist","bbmsg","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","UnicodeMap","–","—","‘","’","‛","“","”","‟","′","″","‵","‶","Client","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","setBubble","hidden","tinycon","updateCounter","defaultSettings","invertHighlight","wrapWidth","decompileEditor","decompileKey","sidebarOpen","sidebarAnchor","sidebarDense","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","sidebarLargeCompass","debugEvents","debugActions","allowServerChange","serverAddress","serverSSL","location","protocol","serverPort","historySize","mobileHideTaskbar","mobileHideStatusbar","components","Mailbox","Sendmail","BBoard","Upload","Customizer","templates","Templates","triggers","timers","macros","keys","scripts","name","css","loadTriggers","loadTimers","loadMacros","loadKeys","loadCSS","loadScripts","loadSettings","colors","createTheme","matchMedia","up","matches","prompt","events","panels","jsPanel","portal","terminal","statusbar","login","mailbox","sendmail","bboard","upload","customizer","spawns","conn","container","loggedIn","jsonapi","updateLines","eatNewline","delayContents","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","render","ReactDOM","Portal","document","getElementById","src","tag","async","getElementsByTagName","appendChild","Window","w","c","getSpawn","script","i","eval","filterUnicode","txt","file","split","slice","updateCSS","setAttribute","head","erase","firstChild","removeChild","createTextNode","links","getAttribute","indexOf","parentNode","defaultTheme","typography","useNextVariants","indigo","secondary","blueGrey","type","createMuiTheme","assign","obj","key","localStorage","hasOwnProperty","String","bind","Number","castString","loadStyle","unloadStyle","calcDimensions","floor","root","clientHeight","dims","loadLocalStorage","clearLocalStorage","saveLocalStorage","j","command","regex","RegExp","search","val","replace","parseCommand","classid","msg","appendMessage","pattern","map","s","join","newText","tmp","re","escre","esc","_this5","onCommand","onunload","onresize","scrollTop","scrollHeight","force","focus","cfg","component","_this6","spawn","findSpawn","focusPanel","comp","el","config","toLowerCase","headerTitle","headerLogo","icon","spacing","unit","panelSize","defaults","maximizedMargin","wstr","callback","content","backgroundColor","background","paper","child","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","innerRef","MuiThemeProvider","helpText","helpButton","classList","add","innerHTML","color","calcColors","controlbar","insertBefore","pointerup","forEach","which","addEventListener","currentTarget","push","create","addPanel","lower","splice","getPanels","headertitle","innerText","popTask","unsmallify","front","serverUrl","setTimeout","openLogin","endsWith","clearTimeout","match","sendAPI","re_fugueedit","str","editor","insert","suppress","trigger","disabled","createPattern","replaceArgs","javascript","execActionScript","fragment","appendHTML","attrs","appendPueblo","op","gmcp","emit","code","_this7","cmds","_this8","matched","m","astr","_this9","shortid","generate","on","result","removeAllListeners","_this10","filename","node","textContent","blob","Blob","saveAs","alert","visibilityChange","_this11","msHidden","webkitHidden","setOptions","fallback","abbreviate","minimizeTo","onminimized","pushTask","onclosed","unmountComponentAtNode","delSpawn","dragit","start","saveCursor","resizeit","stop","resetCursor","sendMail","_this$state","chips","subject","body","realsub","substr","to","closePanel","handleChange","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__","changeText","onResize","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","startsWith","_this$props","options","_this$state2","react__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_9___default","card","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_10___default","header","title","material_ui_chip_input__WEBPACK_IMPORTED_MODULE_19___default","fullWidth","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","helperText","FormHelperTextProps","subheader","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_16___default","stretch","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_11___default","bodytext","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_12___default","actions","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default","button","onClick","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_13___default","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_17___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_18___default","sub","left","right","marginLeft","overflow","justify-content","textAlign","minWidth","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","delay","setText","line","newtext","react_ace__WEBPACK_IMPORTED_MODULE_14___default","mode","readOnly","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","stretchflex","pad","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_9___default","padded","variant","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_8___default","_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_Redo__WEBPACK_IMPORTED_MODULE_13___default","empty","repeat","times","keycode","ctrl","alt","shift","saved","ColorPicker","classCallCheck","possibleConstructorReturn","getPrototypeOf","show","anchor","hide","choose","offset","rows","bgfix","react_default","Button_default","aria-haspopup","aria-owns","Popover_default","popover","anchorEl","open","Boolean","swatch","cursor","lineHeight","Settings","handleSwitch","changeSetting","checked","defineProperty","saveSettings","handleValue","handleColor","handleExpand","expanded","objectSpread","resetSettings","confirm","closeDrawer","isMobile","debugging","List_default","list","disablePadding","dense","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","ListItemSecondaryAction_default","Switch_default","connection","Public_default","TextField_default","SettingsEthernet_default","Security_default","history","History_default","WrapText_default","FontDownload_default","FormatSize_default","Palette_default","Settings_ColorPicker","Edit_default","Code_default","sidebarDisplay","VerticalSplit_default","PictureInPicture_default","leftright","Icon_default","BorderLeft_default","Typography_default","BorderRight_default","FormatIndentDecrease_default","sidebarContent","AccountCircle_default","GroupWork_default","Explore_default","MobileScreenShare_default","tabIndex","role","ExpansionPanel_default","ExpansionPanelSummary_default","noPadding","expandIcon","ExpandMore_default","summaryText","ExpansionPanelDetails_default","buttons","reset","flexDirection","justifyContent","alignItems","overflowY","flexFlow","flexGrow","flexBasis","paddingLeft","marginRight","BadgeIcon","Badge_default","badgeContent","children","BadgeWrapper","TabButton","visible","IconButton_default","direction","KeyboardArrowLeft_default","KeyboardArrowRight_default","Taskbar","openDrawer","closeMenu","setTitle","t","clearScreen","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","addButton","task","showMenu","menuAnchor","toggleSidebar","toggle","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","preventDefault","showUpload","uploadAnchor","closeUpload","insertCommand","closeHistory","clearHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","openCustomizer","previewUpload","handleFile","files","reader","FileReader","onload","readAsText","handleURL","req","XMLHttpRequest","onreadystatechange","responseText","rev","reverse","AppBar_default","Toolbar_default","disableGutters","Tooltip_default","aria-label","ChevronLeft_default","ChevronRight_default","noWrap","sectionDesktop","tasklabel","taskbutton","taskicon","headerlogo","tasksep","ariaLabel","action","icons_Menu_default","SwipeableDrawer_default","modules_Settings","onSubmit","autoFocus","InputProps","inputProps","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","historyPopover","divider","Menu_default","disableEnforceFocus","MenuItem_default","ExpandLess_default","Settings_default","Build_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","sectionMobile","Tabs_default","indicatorColor","scrollable","scrollButtons","ScrollButtonComponent","Tab_default","wrapper","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","mobileButtons","alignSelf","emptyText","Terminal","focusInput","doResize","clientWidth","init","initOutput","initPrompt","dim","containerRef","onScroll","maxWidth","scrollcount","align","lineheight","overflowX","text-align","Input","initInput","Statusbar","Login","closeLogin","submitLogin","username","password","submitGuest","submitCreate","catchReturn","Dialog_default","fullScreen","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","EXTRA","Sidebar","go","exit","_window$client","getContents","matchExit","ucExits","buildExit","uc","toUpperCase","smallIcons","buildLook","RemoveRedEye_default","exits","things","players","friends","customExits","useCompass","_this$props2","_loop","fullexit","skip","n","player","sidebar","exitWidget","_this$props3","_this$state3","numicons","max","parseExits","middle","listHeader","exitItem","odd","even","navWidget","contents","playerItem","thing","thingItem","alignContent","dock","scrollTo","modules_Sidebar","core_styles","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","BBListItem","board","posts","lastmod","listicon","read","opacity","BBList","openBoard","BBoard_BBListItem","BBMessageListItem","message","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","emulator","_window$client$settin2","Card_default","CardHeader_default","CardContent_default","CardActions_default","openBB","openBBMsg","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","FormEditor","setStatus","clearStatus","item","handleNumber","parseInt","needsToResize","listName","selected","immutable","saveCSS","onReset","template","defaultText","_this$props4","_this$props5","Form","ltype","rtype","form","inputBase","switchBase","lib_default","minHeight","mobileOnly","edit","Close_default","desktopOnly","Delete_default","CloudDownload_default","Undo_default","newState","flow","verticalAlign","TriggerForm","row","TimerForm","MacroForm","KeyForm","Checkbox_default","changeTab","tab","onSelect","showTemplates","hideTemplates","chooseTemplate","tabs","smallName","mobileClose","mobileOpen","listNum","listText","FileCopy_default","AddCircle_default","Customizer_FormEditor","tmpl","MailListItem","mail","quickDelete","handleMark","deleted","unread","urgent","PriorityHigh_default","Mail_default","Drafts_default","from","time","CheckCircle_default","Cancel_default","MailList","purgeMail","toggleDelete","openMail","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","wrap","Reply_default","Forward_default","MoreVert_default","folder","folderlist","_this$state4","_this$state5","setFields","_this$state6","Mailbox_MailList","Mailbox_MailItem","__webpack_require__","r","__webpack_exports__","loadScript","execUserScript","html","size","store","nodes","childNodes","found","range","createRange","setStartBefore","setEndAfter","cloneContents","div","lastIndex","exec","info","index","xch_cmd","end","lineBuf","ii","ilen","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","href","warn","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","ANSI_NORMAL","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","next","encodeState","ansiClass","span","stack","parseLinks","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","ch","PARSE_CR","abortParse","endLine","applyANSI","createDocumentFragment","nextSibling","removeAttribute","element","idx","selfClosing","UNCLOSED_TAGS","pushElement","popElement","threshold","temp","nodeName","round","abs","offsetHeight","selectionStart","selectionStop","keyCycleForward","keyCycleBackward","onkeydown","onkeyup","onKeyDown","onKeyUp","keyCode","ctrlKey","shiftKey","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","saveCommand","moveCursor","pressKey","releaseKey","ncommand","save_current","selectionEnd","createTextRange","collapse","select","getSelection","toString","selection","activeElement","tagName"],"mappings":"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","file":"static/js/main.7593006c.chunk.js","sourcesContent":["// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect(url=null) {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n    \n    this.url = url || this.url;\n    \n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\n\nimport Emulator from '../../client/emulator';\nimport UserInput from '../../client/userinput';\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 1000;\nconst HISTORY_KEY = \"output_history_\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    flex: 1,\n    display: \"flex\",\n  },\n  output: {\n    margin: '0.25em 0.5em',\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  bottom: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  input: {\n    flex: 1,\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n    [theme.breakpoints.down('sm')]: {\n      height: \"1em\",\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Spawn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prefix: props.prefix ? props.prefix : \"\",\n      saveHistory: props.saveHistory ? props.saveHistory : false,\n      autoHide: props.autoHide ? props.autoHide : false,\n    };\n\n    this.refoutput = React.createRef();\n    this.refinput = React.createRef();\n\n    this.output = null;\n    this.input = null;\n    \n    this.hasHidden = false;\n  }\n  \n  componentDidMount() {\n    this.output = new Emulator(this.refoutput.current);\n    \n    this.input = new UserInput(this.refinput.current);\n    this.input.onEnter = (cmd) => { this.sendCommand(cmd); };\n    this.input.onEscape = () => { this.input.clear(); };\n    this.input.onPageUp = () => { this.output.scrollPageUp(); };\n    this.input.onPageDown = () => { this.output.scrollPageDown(); };\n    \n    if (this.state.saveHistory) {\n      this.LoadHistory();\n      this.output.scrollDown();\n    }\n    \n    if (this.state.autoHide) {\n      this.AutoHide();\n    }\n  }\n  \n  componentWillUnmount() {\n    this.output = null;\n    this.input = null;\n  }\n  \n  sendCommand(cmd) {\n    const { prefix } = this.state;\n    window.client.sendMacro(prefix + cmd);\n  }\n  \n  changePrefix = event => {\n    this.Prefix(event.target.value);\n  };\n  \n  Prefix = prefix => {\n    if (this.state.prefix !== prefix) {\n      this.setState({ prefix });\n    }\n    \n    return this;\n  };\n\n  LoadHistory = () => {\n    this.output.loadHistory(HISTORY_KEY + this.props.id);\n    this.output.scrollDown();\n  };\n  \n  SaveHistory = saveHistory => {\n    if (typeof(saveHistory) === \"undefined\") {\n      saveHistory = true;\n    }\n    \n    if (this.state.saveHistory !== saveHistory) {\n      if (saveHistory) {\n        this.LoadHistory();\n        this.output.scrollDown();\n      }\n    \n      this.setState({ saveHistory });\n    }\n    \n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + this.props.id, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySpawnSize));\n    }\n    \n    return this;\n  };\n  \n  AutoHide = autoHide => {\n    if (typeof(autoHide) === \"undefined\") {\n      autoHide = true;\n    }\n    \n    if (this.state.autoHide !== autoHide) {\n      this.setState({ autoHide });\n    }\n    \n    if (this.state.autoHide && !this.hasHidden) {\n      this.props.panel.minimize();\n      this.hasHidden = true;\n    }\n    \n    return this;\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output.nearBottom(window.client.scrollThreshold)) {\n      scroll = true;\n    }\n    \n    fun();\n    \n    scroll && this.output.scrollDown();\n    \n    this.onChange();\n  }\n\n  onChange = () => {\n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + this.props.id, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySpawnSize));\n    }\n    \n    this.setState({ lines: this.output.linesOfScroll() });\n    \n    if (this.props.panel.status === \"minimized\") {\n      this.props.panel.count++;\n      window.client.react.taskbar.forceUpdate();\n    }\n  };\n  \n  appendText(text) {\n    this.scrollIfNeeded(() => this.output.appendText(text));\n  }\n  \n  append(text) {\n    this.scrollIfNeeded(() => this.output.appendText(text+\"\\n\"));\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { prefix } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: fontSize + \"pt\",\n    };\n    \n    const inputFont = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.top}>\n          <div ref={this.refoutput} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </div>\n        <div className={classes.bottom}>\n          <TextField label=\"Command Prefix\" value={prefix} onChange={this.changePrefix} />\n          <textarea ref={this.refinput} className={classNames(classes.input, ansiFG, ansiBG)} style={inputFont}  autoComplete=\"off\"></textarea>\n        </div>\n      </div>\n    );\n  }\n}\n\nSpawn.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  panel: PropTypes.object.isRequired,\n  prefix: PropTypes.string,\n};\n\nexport default withStyles(styles, { withTheme: true })(Spawn);\n\n\t","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","/* eslint no-eval: 0 */\n/* eslint no-unused-vars: 0 */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\nimport Customizer from '../modules/Customizer';\nimport Spawn from '../modules/Spawn';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport JSONAPI from './jsonapi';\nimport Templates from './templates';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nconst UnicodeMap = {\n  \"\\u2013\": '-',\n  \"\\u2014\": '-',\n  \"\\u2018\": '\\'',\n  \"\\u2019\": '\\'',\n  \"\\u201B\": '\\'',\n  \"\\u201C\": '\"',\n  \"\\u201D\": '\"',\n  \"\\u201F\": '\"',\n  \"\\u2032\": '\\'',\n  \"\\u2033\": '\"',\n  \"\\u2035\": '\\'',\n  \"\\u2036\": '\"',\n}\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.defaultSettings = {\n      // font\n      fontFamily: \"Courier New\",\n      fontSize: 10,\n      // default text colors\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      invertHighlight: false,\n      // terminal settings\n      wrapWidth: 100,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarDense: false,\n      sidebarAlwaysShow: false,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      sidebarLargeCompass: true,\n      // debugging\n      debugEvents: false,\n      debugActions: false,\n      // default connection settings, can override in public/local.js\n      allowServerChange: true,\n      serverAddress: \"node.grapenut.org\",\n      serverSSL: window.location.protocol === \"https:\",\n      serverPort: window.location.protocol === \"https:\" ? 2001 : 2000,\n      // history settings\n      historySize: 1000,\n      historySpawnSize: 100,\n      // mobile settings\n      mobileHideTaskbar: true,\n      mobileHideStatusbar: true,\n    };\n    this.settings = null;\n    \n    // map react components to strings\n    this.components = {\n      \"Mailbox\": Mailbox,\n      \"Sendmail\": Sendmail,\n      \"BBoard\": BBoard,\n      \"Upload\": Upload,\n      \"Customizer\": Customizer,\n      \"Spawn\": Spawn,\n    };\n    \n    this.templates = new Templates();\n    \n    this.triggers = [];\n    this.timers = [];\n    this.macros = [];\n    this.keys = [];\n    this.scripts = [{ name: \"onLoad.js\", text: \"\" }];\n    this.css = [{ name: \"ansi.css\", text: \"\" },\n                { name: \"inverse.css\", text: \"\" }];\n    \n    this.loadTriggers();\n    this.loadTimers();\n    this.loadMacros();\n    this.loadKeys();\n    this.loadCSS();\n    this.loadScripts();\n    \n    // must come after client .css definitions\n    this.loadSettings();\n    \n    // Client colors and theme\n    this.colors = Colors;\n    this.theme = this.createTheme();\n    this.mobile = !window.matchMedia(this.theme.breakpoints.up('md').substring(7)).matches;\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // External Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n      customizer: null,\n      spawns: [],\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // rendering, themeing, and styling react components\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  execUserScript(name) {\n    // load user customization file\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    \n    var script = null;\n    for (let i=0; i < client.scripts.length; i++) {\n      if (client.scripts[i].name === name) {\n        script = client.scripts[i];\n        break;\n      }\n    }\n    \n    if (script && script.text !== \"\") {\n      try {\n        eval(this.filterUnicode(script.text));\n      } catch (e) {\n        client.debugActions && console.log(\"Error executing `\" + name + \"'.\");\n      }\n    }\n  }\n  \n  // evaluate an action javascript with a limited context\n  execActionScript(txt) {\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    \n    try {\n      eval(this.filterUnicode(txt));\n    } catch (e) {\n      client.settings.debugActions && console.log(\"Error executing action:\", e);\n    }\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    const file = src.split('/').slice(-1)[0];\n\n    // see if we have a matching css override\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    var style;\n    if (css) {\n      // just update the <style> element\n      style = this.updateCSS(css);\n      if (css.text !== \"\") return;\n    }\n    \n    // css is not overridden, try to load a <link>\n    style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.head.appendChild(style);\n  }\n  \n  // update the css object's rules on its <style> element \n  updateCSS(css, erase=false) {\n    if (!css) return null;\n    \n    var style = document.getElementById(\"override_\" + css.name);\n    if (style) {\n      // remove what's already there\n      while (style.firstChild) {\n        style.removeChild(style.firstChild);\n      }\n    } else {\n      // create a new style element\n      style = document.createElement('style');\n      style.setAttribute('id', 'override_' + css.name);\n      document.head.appendChild(style);\n    }\n    \n    // update the CSS text on the <style> element\n    if (!erase) style.appendChild(document.createTextNode(css.text));\n    \n    return style;\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    // remove the <link> if it exists\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n    \n    // see if we have a css override to erase\n    const file = src.split('/').slice(-1)[0];\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    // we found a css override, delete the contents\n    if (css) {\n      this.updateCSS(css, true);\n    }\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // save and load objects from localStorage\n  \n  // load object from localstorage\n  loadLocalStorage(obj, key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      obj = Object.assign(obj, JSON.parse(window.localStorage[key]));\n    }\n  }\n  \n  // clear localStorage keys starting with prefix\n  clearLocalStorage(key) {\n    delete window.localStorage[key];\n  }\n  \n  // save object to localstorage\n  saveLocalStorage(obj, key) {\n    window.localStorage[key] = JSON.stringify(obj);\n  }\n  \n  // load a string directly from localstorage\n  loadHistoryBuffer(key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      return window.localStorage[key];\n    }\n    return \"\";\n  }\n  \n  // save a string directly to localstorage\n  saveHistoryBuffer(key, text) {\n    window.localStorage[key] = text;\n  }\n  \n  // casting a string argument to the correct type\n  castString(obj, key, value) {\n    if (!obj.hasOwnProperty(key)) return;\n    \n    var type = typeof obj[key];\n    \n    if (typeof value === type) {\n      obj[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          obj[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          obj[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          obj[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          obj[key] = value;\n          break;\n      }\n    }\n  }\n  \n  // change a setting, performing a secondary action if necessary\n  changeSetting(key, value) {\n    this.castString(this.settings, key, value);\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    } else if (key === 'wrapWidth') {\n      // send the screen dimensions\n      this.output.calcDimensions();\n      this.sendText(\"SCREENWIDTH \" + this.settings.wrapWidth);\n      this.sendText(\"SCREENHEIGHT \" + Math.floor(this.output.root.parentNode.clientHeight / this.output.dims.height));\n    }\n  }\n  \n  // load regex/wildcard pattern triggers\n  loadTriggers() {\n    this.loadLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // load automatic timers\n  loadTimers() {\n    this.loadLocalStorage(this.timers, \"timers\");\n  }\n  \n  // load slash command macros\n  loadMacros() {\n    this.loadLocalStorage(this.macros, \"macros\");\n  }\n  \n  // load custom keybindings\n  loadKeys() {\n    this.loadLocalStorage(this.keys, \"keys\");\n  }\n  \n  // load custom css overrides\n  loadCSS() {\n    this.loadLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // override CSS, first check existing styles\n      let css = this.css[i];\n      \n      // autoload CSS changes, except inverse.css\n      if (css.name !== \"inverse.css\") {\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // load custom scrips\n  loadScripts() {\n    this.loadLocalStorage(this.scripts, \"scripts\");\n  }\n  \n  // load client settings\n  loadSettings() {\n    this.settings = Object.assign({}, this.defaultSettings);\n    this.loadLocalStorage(this.settings, \"settings\");\n    \n    if (this.settings['invertHighlight']) {\n      this.loadStyle('./inverse.css');\n    } else {\n      this.unloadStyle('./inverse.css');\n    }\n  }\n  \n  // save regex/wildcard pattern triggers\n  saveTriggers() {\n    this.clearLocalStorage(\"triggers\");\n    this.saveLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // save automatic timers\n  saveTimers() {\n    this.clearLocalStorage(\"timers\");\n    this.saveLocalStorage(this.timers, \"timers\");\n  }\n  \n  // save slash command macros\n  saveMacros() {\n    this.clearLocalStorage(\"macros\");\n    this.saveLocalStorage(this.macros, \"macros\");\n  }\n  \n  // save custom keybindings\n  saveKeys() {\n    this.clearLocalStorage(\"keys\");\n    this.saveLocalStorage(this.keys, \"keys\");\n  }\n  \n  // save custom css overrides\n  saveCSS() {\n    this.clearLocalStorage(\"css\");\n    this.saveLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // update rules in css <style> element\n      let css = this.css[i];\n      \n      if (css.name === \"inverse.css\") {\n        // only load inverse.css if we need it\n        if (this.settings.invertHighlight) {\n          // unload inverse.css if it is linked\n          let links = document.getElementsByTagName(\"link\");\n          for (let j = links.length; j >= 0; j--) {\n            if (links[j] && links[j].getAttribute(\"href\") !== null) {\n              let name = links[j].getAttribute(\"href\").split(\"/\").slice(-1)[0];\n              if (name === css.name) {\n                links[j].parentNode.removeChild(links[j]);\n              }\n            }\n          }\n          \n          if (css.text === \"\") {\n            // there is no override, so relink inverse.css\n            this.loadStyle('./inverse.css');\n          } else {\n            // there is an override, update it\n            this.updateCSS(css);\n          }\n        }\n      } else {\n        // autoload all files that aren't inverse.css\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // save custom css overrides\n  saveScripts() {\n    this.clearLocalStorage(\"scripts\");\n    this.saveLocalStorage(this.css, \"scripts\");\n  }\n  \n  // save client settings\n  saveSettings() {\n    this.clearLocalStorage(\"settings\");\n    this.saveLocalStorage(this.settings, \"settings\");\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // miscellaneous logging and command links\n\n  // detect if more user input is required for a pueblo command\n  parseCommand(command) {\n    var cmd = command;\n    var regex = new RegExp('\\\\?\\\\?');\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(this.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // manage triggers, timers, macros, and keys\n  createPattern(regex, pattern) {\n    if (regex) {\n      return new RegExp('^' + pattern + '$');\n    } else {\n      return new RegExp('^' + pattern.split(/\\*+/).map(s => s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')).join('(.*)') + '$');\n    }\n  }\n  \n  replaceArgs(args, text) {\n    let newText = text.slice();\n    for (let i = args.length-1; i > -1; i--) {\n      let tmp = args[i] || \"\";\n      \n      try {\n        let re = new RegExp('(^|[^\\\\%])%'+i, 'g');\n        let escre = new RegExp('[\"\\'`]', 'g');\n        let esc = tmp.replace(escre, '\\\\$&');\n        newText = newText.replace(re, '$1'+esc);\n      } catch (e) {\n        this.settings.debugActions && console.log(\"Unable to compile regular expression:\", e);\n      }\n    }\n    return newText;\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // initialize terminal elements (input, output, prompt) and clear them\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // handle input window focus and output window scrolling\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    if (this.mobile) return;\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun();\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // spawn, focus and close window panels\n  addPanel(id, cfg, component) {\n    var spawn = this.findSpawn(id);\n    \n    if (spawn) {\n      this.focusPanel(id);\n      return spawn;\n    }\n    \n    var comp = component || id;\n    var el = this.components[comp];\n    \n    if (!el) {\n      el = Spawn;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.id) {\n      config.id = id.toLowerCase();\n    }\n    \n    if (!config.headerTitle) {\n      config.headerTitle = id;\n    }\n    \n    if (!config.headerLogo) {\n      var icon = config.icon || \"tab\";\n      config.headerLogo = \"<i class='material-icons' style='margin-left: \"+this.theme.spacing.unit+\"px'>\"+icon+\"</i>\";\n    }\n    \n    if (!config.panelSize) {\n      const margin = this.panels.defaults.maximizedMargin;\n      let wstr = 'calc(50% - ' + 1.5*margin + 'px)';\n\n      if (this.mobile) {\n        wstr = 'calc(100% - ' + 2*margin + 'px)';\n      }\n    \n      config.panelSize = {\n        width: wstr,\n        height: 'calc(100% - ' + 2*margin + 'px)',\n      };\n    }\n    \n    let ref = React.createRef();\n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      let child = React.createElement(el, { innerRef: ref, id: id.toLowerCase(), panel: container, ...config.props }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content, () => {\n        // add the helpText() controlbar icon\n        let obj = ref.current;\n        if (obj && obj.helpText) {\n          let helpButton = document.createElement('div');\n          helpButton.classList.add(\"jsPanel-btn\",\"jsPanel-btn-help\");\n          helpButton.innerHTML = `<svg class=\"jsPanel-icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 512 512\"><circle fill=\"currentColor\" cx=\"255.984\" cy=\"492\" r=\"20\"/><path fill=\"currentColor\" d=\"M412.979,155.775C412.321,69.765,342.147,0,255.984,0c-86.57,0-157,70.43-157,157c0,11.046,8.954,20,20,20 s20-8.954,20-20c0-64.514,52.486-117,117-117s117,52.486,117,117c0,0.356,0.009,0.71,0.028,1.062 c-0.405,46.562-28.227,88.348-71.12,106.661c-40.038,17.094-65.908,56.675-65.908,100.839V412c0,11.046,8.954,20,20,20 c11.046,0,20-8.954,20-20v-46.438c0-28.117,16.334-53.258,41.614-64.051c57.979-24.754,95.433-81.479,95.418-144.516 C413.016,156.585,413.003,156.179,412.979,155.775z\"/></svg>`;\n          helpButton.style.color = this.panels.calcColors(this.panels.defaults.theme)[3];\n          container.controlbar.insertBefore(helpButton, container.controlbar.firstChild);\n          \n          jsPanel.pointerup.forEach((which) => {\n            helpButton.addEventListener(which, (evt) => {\n              obj.helpText(evt.currentTarget);\n            });\n          });\n        }\n        \n        window.client.react.spawns.push(obj);\n      });\n      \n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n    return ref.current;\n  }\n  \n  // create a Spawn window\n  // don't focus if it already exists\n  getSpawn(id, cfg, el) {\n    let spawn = this.findSpawn(id);\n    if (spawn) return spawn;\n    \n    return this.addPanel(id, cfg, el);\n  }\n  \n  // delete spawn window from internal list\n  delSpawn(id) {\n    const spawns = this.react.spawns;\n    const lower = id.toLowerCase();\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id === lower) {\n        spawns.splice(i, 1);\n      }\n    }\n  }\n  \n  // find spawn window in internal list\n  findSpawn(id) {\n    const spawns = this.react.spawns;\n    const lower = id.toLowerCase();\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id.toLowerCase() === lower) {\n        return spawns[i];\n      }\n    }\n    return null;\n  }\n  \n  // find and close a panel\n  closePanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  // bring a panel into focus\n  focusPanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.settings.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n    \n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      // implement @dec/tf\n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      }\n      \n      // handle text triggers\n      let suppress = false;\n      client.triggers.forEach((trigger, i) => {\n        if (trigger.disabled) return;\n        \n        let re = client.createPattern(trigger.regex, trigger.pattern);\n        let args = text.match(re);\n        \n        if (args) {\n          let txt = client.replaceArgs(args, trigger.text);\n          if (trigger.javascript) {\n            client.execActionScript(txt);\n          } else {\n            client.sendText(txt);\n          }\n        \n          if (trigger.suppress) {\n            client.eatNewline = true;\n            suppress = true;\n          }\n        }\n      });\n      \n      if (suppress) return;\n      \n      if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      \n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect(force=false) {\n    if (!force && this.isConnected()) {\n      return;\n    }\n    \n    if (force || this.reconnectCount < this.reconnectMaxCount) {\n      // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n      let serverProto = window.location.protocol === \"https:\" || this.settings.serverSSL ? \"wss://\" : \"ws://\";\n      let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient';\n      \n      this.reconnectCount++;\n      this.conn && this.conn.reconnect(serverUrl);\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  filterUnicode(text) {\n    if (!text) return \"\";\n    try {\n      let re = new RegExp(\"[\\u2013\\u2014\\u2018\\u2019\\u201B\\u201C\\u201D\\u201F\\u2032\\u2033\\u2035\\u2036]\",\"g\");\n      return text.replace(re, code => UnicodeMap[code]);\n    } catch (e) {\n      this.settings.debugActions && console.log(\"Unable to filter Unicode:\", e);\n    }\n    return text;\n  }\n\n  sendText(data) {\n    this.conn && this.conn.sendText(this.filterUnicode(data));\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n  \n    if (!this.isConnected()) {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n      return;\n    }\n    \n    if (cmd === '') return;\n    \n    this.sendMacro(cmd);\n    this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n  }\n    \n  sendMacro(cmds) {\n    let matched = false;\n    this.macros.forEach((m) => {\n      if (m.disabled) return;\n      \n      let re = this.createPattern(m.regex, m.pattern);\n      \n      cmds.split('\\n').forEach((cmd) => {\n        let args = cmd.match(re);\n      \n        if (args) {\n          matched = true;\n          let text = this.replaceArgs(args, m.text);\n          if (m.javascript) {\n            this.execActionScript(text);\n          } else {\n            this.sendMacro(text);\n          }\n        }\n      });\n    });\n    \n    if (!matched) {\n      this.sendText(cmds);\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content);\n      window.client.delSpawn(this.id);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput };\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\n//import AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body: this.editor.current.value });\n  };\n  \n  onResize = () => {\n    //this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <textarea className={classNames(classes.bodytext, font, ansiFG, ansiBG)}\n            ref={this.editor}\n            width=\"100%\"\n            value={body}\n            onChange={this.changeText}\n          />\n{/*\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n*/}\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","\n\nclass Templates {\n  constructor() {\n    // blank triggers, timers, macros, and keybindings\n    this.empty = {\n      triggers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n        suppress: false,\n      },\n      timers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        delay: 0,\n        repeat: false,\n        times: 0,\n      },\n      macros: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n      },\n      keys: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        keycode: null,\n        ctrl: false,\n        alt: false,\n        shift: false,\n      },\n      css: {\n        name: \"\",\n        text: \"\",\n      },\n      scripts: {\n        name: \"\",\n        text: \"// Insert JavaScript below.\\n\",\n      },\n    };\n    \n    this.saved = {\n      triggers: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          pattern: \"\",\n          regex: false,\n          suppress: false,\n        }\n*/\n        {\n          name: \"PerChannel\",\n          text: \"Window(\\\"%1\\\").SaveHistory().Prefix(\\\"+%1 \\\").AutoHide().append(\\\"%0\\\");\",\n          javascript: true,\n          pattern: \"<*> *\",\n          regex: false,\n          suppress: true,\n        },\n        {\n          name: \"AllChannels\",\n          text: \"Window(\\\"Channels\\\").SaveHistory().append(\\\"%0\\\");\",\n          javascript: true,\n          pattern: \"<*> *\",\n          regex: false,\n          suppress: true,\n        },\n      ],\n      timers: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          delay: 0,\n          repeat: false,\n          times: 0,\n        },\n*/\n      ],\n      macros: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          pattern: \"\",\n          regex: false,\n        },\n*/\n        {\n          name: \"OpenWindow\",\n          text: \"Window(\\\"%2\\\").SaveHistory().Prefix(\\\"+%2 \\\");\",\n          javascript: true,\n          pattern: \"/win(dow)? (.*)\",\n          regex: true,\n        },\n        {\n          name: \"ChannelRecall\",\n          text: \"th crecall(%1,100,,%r)\",\n          javascript: false,\n          pattern: \"/recall *\",\n          regex: false,\n        },\n      ],\n      keys: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          keycode: null,\n          ctrl: false,\n          alt: false,\n          shift: false,\n        },\n*/\n      ],\n      css: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n        },\n*/\n      ],\n      scripts: [\n/*\n        {\n          name: \"\",\n          text: \"// Insert JavaScript below.\\n\",\n        },\n*/\n      ],\n    };\n  }\n\n}\n\n\n\nexport default Templates;\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={classNames(window.client.settings.ansiFG, window.client.settings.ansiBG)}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\n\nimport ColorPicker from './ColorPicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentDecreaseIcon from '@material-ui/icons/FormatIndentDecrease';\nimport PublicIcon from '@material-ui/icons/Public';\nimport SettingsEthernetIcon from '@material-ui/icons/SettingsEthernet';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport FontDownloadIcon from '@material-ui/icons/FontDownload';\nimport FormatSizeIcon from '@material-ui/icons/FormatSize';\nimport HistoryIcon from '@material-ui/icons/History';\nimport MobileScreenShareIcon from '@material-ui/icons/MobileScreenShare';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n    overflowY: \"auto\",\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    flexFlow: \"row wrap\",\n    [theme.breakpoints.up('md')]: {\n      justifyContent: 'space-evenly',\n    },\n  },\n  list: {\n    flexGrow: 0,\n    flexBasis: 'auto',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    right: 0,\n    top: 0,\n    bottom: 0,\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"column-reverse nowrap\",\n    [theme.breakpoints.up('md')]: {\n      flexFlow: \"row nowrap\",\n    },\n  },\n  reset: {\n    flex: 1,\n  },\n  close: {\n    flex: 1,\n  },\n  leftright: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  noPadding: {\n    padding: 0,\n  },\n  summaryText: {\n    marginLeft: theme.spacing.unit,\n  },\n  panel: {\n    width: \"100%\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n    };\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleExpand = panel => (event, expanded) => {\n    this.setState({\n      expanded: expanded ? panel : false,\n    });\n  };  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { expanded, debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth,\n      invertHighlight, debugActions, serverAddress, serverPort, serverSSL, sidebarLargeCompass,\n      historySize, historySpawnSize, mobileHideTaskbar, mobileHideStatusbar, allowServerChange,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, sidebarShowPlayers, fontFamily, fontSize,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarDense } = this.state;\n    const isMobile = window.client.mobile;\n   \n    var debugging = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Debugging Console</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <BugReportIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <BugReportIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Debug user-defined actions?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={debugActions} value=\"debugActions\" onChange={this.handleSwitch('debugActions')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var connection = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Server Connection</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <PublicIcon />\n          </ListItemIcon>\n          <TextField label=\"Server address\" disabled={!allowServerChange} value={serverAddress} onChange={this.handleValue('serverAddress')} />\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <SettingsEthernetIcon />\n          </ListItemIcon>\n          <TextField label=\"Server port\" disabled={!allowServerChange} value={serverPort} onChange={this.handleValue('serverPort')} type=\"number\" />\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <SecurityIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Encrypt connection with SSL?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={serverSSL} disabled={!allowServerChange} value=\"serverSSL\" onChange={this.handleSwitch('serverSSL')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var history = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Output History</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"History Size\" value={historySize} onChange={this.handleValue('historySize')} type=\"number\" helperText=\"Lines of terminal output history.\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"Spawn History Size\" value={historySpawnSize} onChange={this.handleValue('historySpawnSize')} type=\"number\" helperText=\"Lines of spawn window history.\" />\n        </ListItem>\n      </List>\n    );\n    \n    var display = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Display & Font</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <WrapTextIcon />\n          </ListItemIcon>\n          <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <FontDownloadIcon />\n          </ListItemIcon>\n          <TextField label=\"Font\" value={fontFamily} onChange={this.handleValue('fontFamily')} />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <FormatSizeIcon />\n          </ListItemIcon>\n          <TextField label=\"Size\" value={fontSize} onChange={this.handleValue('fontSize')} type=\"number\" />\n        </ListItem>\n      </List>\n    );\n    \n    var color = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Default Colors</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ColorPicker label=\"Background\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n        </ListItem>\n\n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ColorPicker label=\"Foreground\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Invert foreground & background?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var upload = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>@decompile/tf</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <EditIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n          <ListItemSecondaryAction>\n            <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n\n        <ListItem dense>\n          <ListItemIcon>\n            <CodeIcon />\n          </ListItemIcon>\n          <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n        </ListItem>\n      </List>\n    );\n    \n    var sidebarDisplay = (\n      <List className={classes.list} disablePadding dense subheader={!isMobile && (<ListSubheader>Sidebar Display</ListSubheader>)}>\n        <ListItem dense>\n          <ListItemIcon>\n            <VerticalSplitIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <PictureInPictureIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen} className={classes.leftright}>\n          <Icon color=\"action\">\n            <BorderLeftIcon />\n          </Icon>\n          <Typography>Left</Typography>\n          <Switch checked={sidebarAnchor === \"right\"}\n            color=\"default\" disabled={!sidebarOpen}\n            value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n            onChange={this.handleValue('sidebarAnchor')}\n          />\n          <Typography>Right</Typography>\n          <Icon color=\"action\">\n            <BorderRightIcon />\n          </Icon>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <FormatIndentDecreaseIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Use small sidebar icons?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarDense} value=\"sidebarDense\" onChange={this.handleSwitch('sidebarDense')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n      </List>\n    );\n    \n    var sidebarContent = (\n      <List className={classes.list} disabled={!sidebarOpen} disablePadding dense subheader={!isMobile && (<ListSubheader>Sidebar Content</ListSubheader>)}>\n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <AccountCircleIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show players?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <GroupWorkIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show things?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen}>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!sidebarOpen || !sidebarShowExits || !sidebarShowCompass}>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show in, out, up, & down?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!sidebarOpen || !sidebarShowExits || !sidebarShowCompass} checked={sidebarLargeCompass} value=\"sidebarLargeCompass\" onChange={this.handleSwitch('sidebarLargeCompass')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var mobile = (\n      <List className={classes.list} disabled={!isMobile} disablePadding dense subheader={!isMobile && (<ListSubheader>Mobile Only</ListSubheader>)}>\n        <ListItem dense disabled={!isMobile}>\n          <ListItemIcon>\n            <MobileScreenShareIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Auto hide mobile taskbar when empty?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!isMobile} checked={mobileHideTaskbar} value=\"mobileHideTaskbar\" onChange={this.handleSwitch('mobileHideTaskbar')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense disabled={!isMobile}>\n          <ListItemIcon>\n            <MobileScreenShareIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Hide the status bar to save screen space?\" />\n          <ListItemSecondaryAction>\n            <Switch disabled={!isMobile} checked={mobileHideStatusbar} value=\"mobileHideStatusbar\" onChange={this.handleSwitch('mobileHideStatusbar')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'debugging'} onChange={this.handleExpand('debugging')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Debugging Console</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {debugging}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{debugging}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'connection'} onChange={this.handleExpand('connection')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Server Connection</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {connection}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{connection}</span> )}\n\n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'history'} onChange={this.handleExpand('history')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Output History</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {history}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{history}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'display'} onChange={this.handleExpand('display')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Display & Font</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {display}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{display}</span> )}\n              \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'color'} onChange={this.handleExpand('color')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Default Colors</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {color}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{color}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'upload'} onChange={this.handleExpand('upload')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>@decompile/tf</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {upload}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{upload}</span> )}\n\n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'sidebarDisplay'} onChange={this.handleExpand('sidebarDisplay')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Sidebar Display</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {sidebarDisplay}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{sidebarDisplay}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'sidebarContent'} onChange={this.handleExpand('sidebarContent')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Sidebar Content</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {sidebarContent}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ) : ( <span>{sidebarContent}</span> )}\n            \n            {isMobile ? (\n              <ExpansionPanel className={classes.panel} expanded={expanded === 'mobile'} onChange={this.handleExpand('mobile')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Mobile Only</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {mobile}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n             ) : ( <span>{mobile}</span> )}\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  root: {\n    width: \"100%\",\n  },\n  title: {\n    margin: '0 20px',\n    flex: 1,\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n    display: \"flex\",\n    \"flexFlow\": \"row nowrap\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  mobileButtons: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n  },\n  scrollButtons: {\n    flex: '0 0 24px',\n    padding: 0,\n    alignSelf: \"center\",\n  },\n  emptyText: {\n    textAlign: \"center\",\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon>{props.children}</Icon>);\n};\n\n\nfunction BadgeWrapper(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        {props.children}\n      </Badge>\n    );\n  }\n  return props.children;\n};\n\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      buttons: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  addButton = (button) => {\n    const { buttons } = this.state;\n    buttons.push(button);\n    this.setState({ buttons });\n  };\n  \n  // wrapper that scrolls the output\n  scrollIfNeeded() {\n    window.client.output.scrollDown();\n  }\n\n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    var scroll = false;\n    \n    if (taskbar.length < 1) {\n      if (window.client.output.nearBottom(window.client.scrollThreshold)) {\n        scroll = true;\n      }\n    }\n    \n    task.count = 0;\n    taskbar.push(task);\n    this.setState({ taskbar });\n    \n    if (scroll) {\n      clearTimeout(this.scrollIfNeeded);\n      setTimeout(this.scrollIfNeeded, 1000);\n    }\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  toggleSidebar = () => {\n    const client = window.client;\n    \n    const toggle = !client.settings.sidebarOpen;\n    client.changeSetting('sidebarOpen', toggle);\n    this.setState({ sidebarOpen: toggle });\n    client.saveSettings();\n    client.react.portal.forceUpdate();\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n\n  openCustomizer = () => {\n    window.client.addPanel(\"Customizer\", { icon: 'build' });\n  };\n  \n  previewUpload = () => {\n    window.client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, buttons, historyAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n    const { sidebarOpen, sidebarAnchor, mobileHideTaskbar } = window.client.settings;\n    \n    var rev = input && Boolean(historyAnchor) ? input.history.slice().reverse() : [];\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n          <Toolbar disableGutters={!this.state.open}>\n            {sidebarAnchor === \"left\" && (\n              <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                <Button aria-label=\"open-left-sidebar\" onClick={this.toggleSidebar}>\n                  {sidebarOpen ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n                </Button>\n              </Tooltip>\n            )}\n            \n            <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n              {title}\n            </Typography>\n            \n            <div className={classes.sectionDesktop}>\n              <div className={classes.flex}></div>\n              {taskbar.map((task,i) => (\n                <Tooltip key={i} title={task.headertitle.innerText}>\n                  <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n                    <BadgeWrapper count={() => task.count}>\n                      <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n                      {!window.client.mobile && task.headertitle.innerText}\n                    </BadgeWrapper>\n                  </Button>\n                </Tooltip>\n              ))}\n              <div className={classes.tasksep}></div>\n              {buttons.map((button,i) => (\n                <Tooltip key={i} title={button.title}>\n                  <Button aria-label={button.ariaLabel} onClick={button.action}>\n                    <BadgeIcon count={button.count}>\n                      {button.icon}\n                    </BadgeIcon>\n                  </Button>\n                </Tooltip>\n              ))}\n            </div>\n            \n            <Tooltip title=\"Client utilities...\">\n              <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n                <MenuIcon />\n              </Button>\n            </Tooltip>\n            \n            {sidebarAnchor === \"right\" && (\n              <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                <Button aria-label=\"open-right-sidebar\" onClick={this.toggleSidebar}>\n                  {sidebarOpen ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n                </Button>\n              </Tooltip>\n            )}\n            \n            <SwipeableDrawer\n              variant=\"temporary\"\n              anchor=\"left\"\n              open={open}\n              onClose={this.closeDrawer}\n              onOpen={this.openDrawer}\n              \n            >\n              <Settings closeDrawer={this.closeDrawer} />\n            </SwipeableDrawer>\n\n            <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n              <form onSubmit={this.searchHelp}>\n                <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"off\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n              </form>\n              <Button fullWidth onClick={this.searchHelp}>\n                Get Help\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n              <form onSubmit={this.saveLog}>\n                <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                  onChange={this.typeLog} autoFocus\n                  InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n                />\n              </form>\n              <Button fullWidth onClick={this.saveLog}>\n                Save Log\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n              <form onSubmit={this.handleURL} className={classes.padded}>\n                <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n              </form>\n              <Button onClick={this.handleURL}>\n                Upload URL\n              </Button>\n              <input\n                accept=\"text/plain\"\n                className={classes.fileinput}\n                id=\"file.upload\"\n                type=\"file\"\n                onChange={this.handleFile}\n              />\n              <label htmlFor=\"file.upload\">\n                <Button component=\"span\">\n                  Choose File\n                </Button>\n              </label>\n              <Button onClick={this.previewUpload}>\n                Paste Text\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n              <List className={classes.historyPopover}>\n                {rev.map((cmd, i) => (\n                  <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                    <ListItemText primary={cmd} />\n                  </ListItem>\n                ))}\n              </List>\n              <Button onClick={this.clearHistory}>\n                Clear History\n              </Button>\n            </Popover>\n            \n            <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n              <MenuItem onClick={this.closeMenu}>\n                <Tooltip title=\"Close menu.\">\n                  <ExpandLessIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openDrawer}>\n                <Tooltip title=\"Change settings.\">\n                  <SettingsIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openCustomizer}>\n                <Tooltip title=\"Client customization.\">\n                  <BuildIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n                <Tooltip title=\"Upload file/URL.\">\n                  <CloudUploadIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n                <Tooltip title=\"Save display log.\">\n                  <SaveIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n                <Tooltip title=\"Show command history.\">\n                  <KeyboardIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.clearScreen}>\n                <Tooltip title=\"Clear screen.\">\n                  <BackspaceIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.reconnect}>\n                <Tooltip title=\"Reconnect.\">\n                  <WifiIcon />\n                </Tooltip>\n              </MenuItem>            \n            </Menu>\n\n            <div className={classes.tasksep}></div>\n          </Toolbar>\n        </AppBar>\n        \n        {(!mobileHideTaskbar || buttons.length > 0) && (\n          <div className={classes.sectionMobile}>\n            <AppBar position=\"relative\">\n              <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n                {buttons.length > 0 && buttons.map((button,i) => (\n                  <Tooltip key={i} title={button.title}>\n                    <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                      aria-label={button.ariaLabel} \n                      icon={(<BadgeIcon count={button.count}>{button.icon}</BadgeIcon>)}\n                      onClick={button.action}\n                    />\n                  </Tooltip>\n                ))}\n              </Tabs>\n            </AppBar>\n          </div>\n        )}\n        \n        {(!mobileHideTaskbar || taskbar.length > 0) && (\n          <div className={classes.sectionMobile}>\n            <AppBar position=\"relative\">\n              <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n                {taskbar.length > 0 && taskbar.map((task,i) => (\n                  <Tooltip key={i} title={task.headertitle.innerText}>\n                    <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                      aria-label=\"open-task\"\n                      label={(\n                        <span>\n                          <BadgeWrapper count={() => task.count}>\n                            <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n                          </BadgeWrapper>\n                          {task.headertitle.innerText}\n                        </span>\n                      )}\n                      onClick={() => this.popTask(task)}\n                    />\n                  </Tooltip>\n                ))}\n              </Tabs>\n            </AppBar>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 10000;\nconst HISTORY_KEY = \"output_history\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    height: \"100%\",\n    bottom: 0,\n    right: 0,\n  },\n  lineheight: {\n    lineHeight: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.body.onresize = this.onResize;\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    \n    if (window.client.settings.historySize > 0) {\n      window.client.output.loadHistory(HISTORY_KEY);\n    }\n    \n    this.onResize();\n  }\n  \n  onResize = event => {\n    clearTimeout(this.doResize);\n    setTimeout(this.doResize, 1000);\n  };\n  \n  doResize = () => {\n    const client = window.client;\n    client.output.calcDimensions();\n    client.sendText(\"SCREENWIDTH \" + Math.min(client.settings.wrapWidth, Math.floor(window.client.output.root.parentNode.clientWidth / window.client.output.dims.width)));\n    client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n    client.output.scrollDown();\n    \n    client.mobile = !window.matchMedia(this.props.theme.breakpoints.up('md').substring(7)).matches\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    if (window.client.settings.historySize > 0) {\n      window.client.output.saveHistory(HISTORY_KEY, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySize));\n    }\n    \n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    const { fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classNames(classes.frame)} style={font} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\" variant=\"caption\" className={classes.lineheight}>\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"1em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n    [theme.breakpoints.up('md')]: {\n      height: \"3em\",\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    const { fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)} style={font}  autoComplete=\"off\" autoFocus={!window.client.mobile}></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \"\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    const { mobileHideStatusbar } = window.client.settings;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        {!mobileHideStatusbar && (\n          <Typography\n            align=\"right\"\n            color=\"textPrimary\"\n            noWrap\n          >\n            {status}\n          </Typography>\n        )}\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n  },\n  right: {\n    position: \"absolute\",\n    right: 0,\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <Dialog\n        className={classes.frame}\n        open={open}\n        fullScreen={window.client.mobile}\n        onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n        onClose={this.closeLogin}\n        aria-labelledby=\"responsive-dialog-title\"\n        disableBackdropClick\n        disableEscapeKeyDown\n      >\n        <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n          Character Login\n          <span className={classes.right}>\n            <Tooltip title=\"Reconnect.\">\n              <IconButton onClick={this.reconnect}>\n                <WifiIcon />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Change settings.\">\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n          </span>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <span dangerouslySetInnerHTML={{ __html: msg }} />\n          </DialogContentText>\n          <TextField\n            className={classes.text}\n            autoComplete=\"username\"\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n            label=\"Character Name\"\n            type=\"string\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n          <TextField\n            className={classes.text}\n            autoComplete=\"current-password\"\n            margin=\"dense\"\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n            <PersonAddIcon />\n            Register\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n            <PersonOutlineIcon />\n            Guest\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n            <PersonIcon />\n            Login\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Login);\n\n\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n//import Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst EXTRA = {\n  NORTH: false,\n  SOUTH: false,\n  WEST: false,\n  EAST: false,\n  SOUTHEAST: false,\n  SOUTHWEST: false,\n  NORTHEAST: false,\n  NORTHWEST: false,\n  UP: true,\n  DOWN: true,\n  IN: true,\n  OUT: true,\n};\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    maxWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'flex-end',\n  },\n  contents: {\n    flex: 1,\n    width: \"100%\",\n    alignSelf: 'flex-start',\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  overflow: {\n  },\n  list: {\n    width: \"100%\",\n  },\n  listHeader: {\n    lineHeight: 1.5,\n  },\n  playerItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  thingItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  exitItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  customExits: {\n    flex: 1,\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"flex-end\",\n    alignContent: \"flex-end\",\n    alignItems: \"flex-end\",\n  },\n  middle: {\n    width: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    width: \"100%\",\n  },\n  navWidget: {\n  },\n  smallIcons: {\n    padding: 0.5*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass, sidebarLargeCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n      let skip = false;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (!skip && match === -1) {\n          match = keys.indexOf(exit);\n          if (!sidebarLargeCompass && match !== -1 && EXTRA[exit]) {\n            skip = true;\n          }\n        }\n      });\n\n      if (skip || match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    const { classes } = this.props;\n    const { sidebarDense } = window.client.settings;\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton classes={sidebarDense ? { root: classes.smallIcons } : null} onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n\n  buildLook = () => {\n    const { classes, sidebarDense } = this.props;\n    \n    return (\n      <Tooltip title=\"Update contents.\">\n        <span>\n          <IconButton classes={sidebarDense ? { root: classes.smallIcons } : null} onClick={this.action}>\n            <RemoveRedEyeIcon />\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarDense, sidebarShowPlayers, sidebarLargeCompass,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n\n    var width;\n    var numicons = sidebarShowCompass ? (sidebarLargeCompass ? 4 : 3) : 0;\n    if (sidebarDense) {\n      width = (24 + this.props.theme.spacing.unit) * numicons;\n    } else {\n      width = 48 * numicons;\n    }\n    width = Math.min(192, Math.max(96, width)) + \"px\";\n    \n    var exitWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.middle}>\n              <div className={classes.bottom}>\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Exits</ListSubheader>}>\n                  {customExits.map((exit, i) => (\n                    <ListItem className={classNames(classes.exitItem, i%2 ? classes.odd : classes.even)} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                      <ListItemText primary={exit.split(\";\")[0]} />\n                    </ListItem>\n                  ))}\n                </List>\n              </div>\n            </div>\n          </div>\n        );\n      }\n      \n      var navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {sidebarLargeCompass && this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {sidebarLargeCompass ? this.buildExit(\"In\") : this.buildLook()}\n            {this.buildExit(\"East\")}\n            {sidebarLargeCompass && this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {sidebarLargeCompass && this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n\n    return (\n      <div className={classes.frame} style={{ width: width }} onClick={() => window.client.focus()}>\n        {((sidebarShowPlayers && players.length > 0) || (sidebarShowThings && things.length > 0)) && (\n          <div className={classes.contents}>\n            <span className={classes.overflow}>\n              {sidebarShowPlayers && players.length > 0 && (\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Players</ListSubheader>}>\n                  {players.map((player, i) => (\n                    <ListItem className={classNames(classes.playerItem, i%2 ? classes.odd : classes.even)} key={i}\n                      button onClick={() => this.sendCommand(\"look \"+player)}\n                    >\n{/*\n                      {!sidebarDense && (\n                        <ListItemAvatar>\n                          <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                        </ListItemAvatar>\n                      )}\n*/}\n                      <ListItemText primary={player} />\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n              {sidebarShowThings && things.length > 0 && (\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Contents</ListSubheader>}>\n                  {things.map((thing, i) => (\n                    <ListItem className={classNames(classes.thingItem, i%2 ? classes.odd : classes.even)} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                      <ListItemText primary={thing} />\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n            </span>\n          </div>\n        )}\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarDense: PropTypes.bool.isRequired,\n  sidebarLargeCompass: PropTypes.bool.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarDense,\n      sidebarLargeCompass } = window.client.settings;\n      \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarLargeCompass={sidebarLargeCompass} sidebarDense={sidebarDense} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = \"font-family: '\" + fontFamily + \"', monospace; font-size: \" + (window.client.mobile ? fontSize/2 : fontSize) + \"pt;\";\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/mode/javascript';\nimport 'brace/mode/css';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    overflow: \"hidden\",\n  },\n  form: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    flexFlow: \"column nowrap\", \n  },\n  container: {\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  name: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n  },\n  flow: {\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  top: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n    [theme.breakpoints.down('sm')]: {\n      flex: 1,\n    },\n  },\n  editor: {\n    flex: 1,\n    margin: theme.spacing.unit+\"px 0\",\n    [theme.breakpoints.down('sm')]: {\n      margin: 0,\n      fontSize: \"16pt\",\n    },\n  },\n  bottom: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    width: \"100%\",\n  },\n  middle: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      flex: 1,\n      alignItems: \"center\",\n    },\n  },\n  align: {\n    width: \"100%\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n  },\n  flex: {\n    flex: 1,\n    minWidth: \"10em\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  mobileOnly: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  desktopOnly: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass FormEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const { list, listName, selected, template } = props;\n\n    const empty = window.client.templates.empty[listName];\n    \n    this.state = {\n      list: list,\n      item: Object.assign({}, list && selected > -1 ? list[selected] : (template || empty)),\n      selected: selected,\n      status: \"\",\n      error: false,\n      javascript: true,\n      needsToResize: false,\n    };\n    \n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    this.props.panel.options.resizeit.resize = null;\n    clearTimeout(this.clearStatus);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { list, listName, selected, template } = props;\n    \n    const empty = window.client.templates.empty[listName];\n    \n    var newState = {};\n    \n    if (list !== state.list) {\n      newState.list = list;\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (selected !== state.selected) {\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (template !== state.template) {\n      newState.template = template;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    return null;\n  }\n  \n  defaultText() {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const name = item.name;\n    \n    if (!immutable) return \"\";\n    \n    if (list && selected > -1 && list[selected].text !== \"\") {\n      return list[selected].text.slice();\n    }\n    \n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          item.name = name;\n          item.text = req.responseText;\n          this.setState({ item, list, selected });\n        } else {\n          alert(\"Unable to download file! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", \"./\" + name);\n    req.send();\n    \n    return window.client.templates.empty[listName].text.slice();\n  }\n\n  setStatus = (error, status) => {\n    this.setState({ error: error, status: status });\n    clearTimeout(this.clearStatus);\n    setTimeout(this.clearStatus, 3000);\n  };\n\n  clearStatus = () => {\n    this.setState({ error: false, status: \"\" });\n  };\n  \n  handleChange = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.value;\n    this.setState({ item });\n  };\n  \n  handleNumber = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = parseInt(e.target.value);\n    this.setState({ item });\n  };\n  \n  handleSwitch = (key) => (e) => {\n    const { item } = this.state;\n    if (item.hasOwnProperty(key)) {\n      item[key] = e.target.checked;\n      this.setState({ item });\n    } else {\n      this.setState({ [key]: e.target.checked });\n    }\n  };\n  \n  changeText = (text) => {\n    const { item } = this.state;\n    item.text = text;\n    this.setState({ item });\n  };\n\n  onResize = () => {\n    this.setState({ needsToResize: false });\n    this.editor.current.editor.resize();\n  };\n  \n  onSubmit = (e) => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n\n    e.preventDefault();\n\n    if (item.name === \"\") {\n      this.setStatus(true, \"Name must not be blank.\" );\n      return;\n    }\n    \n    var match = list.map((item) => item.name).indexOf(item.name);\n    if (match > -1 && match !== selected) {\n      this.setStatus(true, \"Name already saved, choose another.\");\n      return;\n    }\n    \n    if (immutable && selected === -1) {\n      this.setStatus(true, \"You may only edit existing items.\");\n      return;\n    }\n    \n    this.setStatus(false, \"Saved.\" );\n    \n    if (selected > -1) {\n      list[selected] = item;\n      client.react.customizer.setState({ selected: selected });\n    } else {\n      list.push(item);\n      client.react.customizer.setState({ selected: list.length-1 });\n    }\n    \n    if (css) {\n      client.saveCSS();\n    } else {\n      client.saveLocalStorage(list, listName);\n    }\n  };\n  \n  onDelete = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n    \n    if (window.confirm(\"Do you really want to delete that?\") && list && selected > -1) {\n      if (immutable) {\n        let name = list[selected].name;\n        list[selected] = Object.assign({}, client.templates.empty[listName]);\n        list[selected].name = name;\n        this.setState({ item: Object.assign({}, list[selected]) });\n      } else {\n        list.splice(selected, 1);\n        client.react.customizer.setState({ selected: -1 });\n      }\n      \n      this.setStatus(false, \"Deleted.\" );\n\n      if (css) {\n        client.saveCSS();\n      } else {\n        client.saveLocalStorage(list, listName);\n      }\n    }\n  };\n  \n  onReset = () => {\n    const { list, listName, selected, immutable, template } = this.props;\n    const { item } = this.state;\n    var empty = Object.assign({}, window.client.templates.empty[listName]);\n    \n    if (list && selected > -1) {\n      if (immutable) {\n        empty.name = list[selected].name;\n        if (item.text === \"\") {\n          empty.text = this.defaultText();\n        } else {\n          empty.text = list[selected].text;\n        }\n      } else {\n        empty = list[selected];\n      }\n    }\n    \n    this.setState({\n      item: Object.assign({}, template || empty),\n    });\n    \n    this.setStatus(false, \"Reset.\");\n  };\n  \n  componentDidUpdate() {\n    if (this.state.needsToResize) {\n      this.onResize();\n    }\n  }\n  \n  render() {\n    const { classes, selected, Form, immutable } = this.props;\n    const { item, error, status } = this.state;\n    \n    var ltype = \"MushCode\";\n    var rtype = \"JavaScript\";\n    if (!Form) {\n      ltype = \"Text\";\n      if (item.name.endsWith('.css')) {\n        rtype = \"CSS\";\n      }\n    }\n    \n    var mode = this.state.javascript;\n    if (item.hasOwnProperty('javascript')) {\n      mode = item.javascript;\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <form onSubmit={this.onSubmit} className={classes.form}>\n          <div className={classes.container}>\n            <div className={classes.top}>\n              <div className={classes.name}>\n                <TextField label=\"Name\" className={classes.flex} value={item.name} onChange={this.handleChange('name')} disabled={immutable} InputProps={{ classes: { input: classes.inputBase }, }} />\n                <span className={classes.switchText}>\n                  <Typography>{ltype}</Typography>\n                  <Switch checked={mode}\n                    classes={{ switchBase: classes.switchBase }}\n                    color=\"default\"\n                    onChange={this.handleSwitch('javascript')}\n                  />\n                  <Typography>{rtype}</Typography>\n                </span>\n              </div>\n              {Form && (<Form item={item} handleNumber={this.handleNumber} handleChange={this.handleChange} handleSwitch={this.handleSwitch} />)}\n            </div>\n            \n            <div className={classes.editor}>\n              <AceEditor\n                width=\"100%\"\n                height=\"100%\"\n                minHeight=\"4em\"\n                minWidth=\"10em\"\n                className={classes.editor}\n                ref={this.editor}\n                mode={mode ? rtype.toLowerCase() : ltype.toLowerCase()}\n                theme=\"tomorrow_night_bright\"\n                value={item.text}\n                onChange={this.changeText}\n                wrapEnabled={true}\n                highlightActiveLine={false}\n                editorProps={{ $blockScrolling: Infinity }}\n              />\n            </div>\n          </div>\n          \n          <div className={classes.bottom}>\n            <Button className={classes.mobileOnly} classes={{ label: classes.block }} onClick={() => window.client.react.customizer.setState({ edit: false, selected: -1 })}>\n              <CloseIcon /><span className={classes.desktopOnly}>Close</span>\n            </Button>\n            <Button onClick={this.onDelete} classes={{ label: classes.block }} disabled={selected === -1}>\n              <DeleteIcon /><span className={classes.desktopOnly}>Delete</span>\n            </Button>\n            <span className={classes.middle}>\n              <Typography className={classes.align} color={error ? \"error\" : \"default\"}>\n                {status}\n              </Typography>\n            </span>\n            <Button onClick={this.onSubmit} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              <SaveIcon /><span className={classes.desktopOnly}>Save</span>\n            </Button>\n            <Button onClick={this.onReset} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              {immutable && item.text === \"\" ? (<CloudDownloadIcon />) : (<UndoIcon />)}\n              <span className={classes.desktopOnly}>\n                {immutable && item.text === \"\" ? \"Source\" : \"Reset\"}\n              </span>\n            </Button>\n          </div>\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nFormEditor.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n  list: PropTypes.array.isRequired,\n  listName: PropTypes.string.isRequired,\n  selected: PropTypes.number.isRequired,\n  Form: PropTypes.func,\n  immutable: PropTypes.bool,\n  template: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(FormEditor);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TriggerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} classes={{ switchBase: classes.switchBase }} />\n            <Typography>RegExp</Typography>\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Suppress terminal output?</Typography>\n            <Switch checked={item.suppress} onChange={handleSwitch('suppress')} classes={{ switchBase: classes.switchBase }} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nTriggerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TriggerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TimerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleNumber, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField type=\"number\" label=\"Delay seconds\" className={classes.flex} value={String(item.delay)} onChange={handleNumber('delay')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <span className={classes.switchText}>\n          <Typography>Repeat this timer?</Typography>\n          <Switch checked={item.repeat} onChange={handleSwitch('repeat')} classes={{ switchBase: classes.switchBase }} />\n        </span>\n        <TextField type=\"number\" disabled={!item.repeat} label=\"Number of times\" className={classes.flex} value={String(item.times)} onChange={handleNumber('times')} inputProps={{ classes: { input: classes.inputBase } }} />\n      </div>\n    );\n  }\n}\n\nTimerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TimerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MacroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} classes={{ switchBase: classes.switchBase }} />\n            <Typography>RegExp</Typography>\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nMacroForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MacroForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass KeyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <span className={classes.flex}>\n          <TextField label=\"Key code\" value={item.keycode ? item.keycode : \"\"} onChange={handleChange('keycode')} inputProps={{ classes: { input: classes.inputBase } }} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Ctrl</Typography>\n          <Checkbox checked={item.ctrl} onChange={handleSwitch('ctrl')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Alt</Typography>\n          <Checkbox checked={item.alt} onChange={handleSwitch('alt')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Shift</Typography>\n          <Checkbox checked={item.shift} onChange={handleSwitch('shift')} />\n        </span>\n      </div>\n    );\n  }\n}\n\nKeyForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(KeyForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Switch from '@material-ui/core/Switch';\n\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\n\nimport FormEditor from './FormEditor';\nimport TriggerForm from './TriggerForm';\nimport TimerForm from './TimerForm';\nimport MacroForm from './MacroForm';\nimport KeyForm from './KeyForm';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  container: {\n    padding: theme.spacing.unit,\n    flex: 1,\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    [theme.breakpoints.up('md')]: {\n      padding: 3*theme.spacing.unit,\n    },\n  },\n  left: {\n    marginRight: 0,\n    [theme.breakpoints.up('md')]: {\n      marginRight: 3*theme.spacing.unit,\n    }\n  },\n  right: {\n    position: \"relative\",\n    flex: 1,\n    height: \"100%\",\n    overflow: \"hidden\",\n  },\n  listText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  overflow: {\n    flex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      height: \"100%\",\n      display: 'flex',\n      flexFlow: \"column nowrap\",\n      justifyContent: \"space-between\",\n    },\n  },\n  mobileOpen: {\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n  },\n  scrollButtons: {\n    [theme.breakpoints.down('sm')]: {\n      flex: '0 0 24px',\n      padding: 0,\n      alignSelf: \"center\",\n    }\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n});\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Customizer extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const client = window.client;\n    \n    this.tabs = [\n      {\n        list: client.triggers,\n        listName: \"Triggers\",\n        Form: TriggerForm,\n        immutable: false,\n      },\n      {\n        list: client.macros,\n        listName: \"Macros\",\n        Form: MacroForm,\n        immutable: false,\n      },\n      {\n        list: client.css,\n        listName: \"CSS\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.scripts,\n        listName: \"Scripts\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.timers,\n        listName: \"Timers\",\n        Form: TimerForm,\n        immutable: false,\n      },\n      {\n        list: client.keys,\n        listName: \"Keys\",\n        Form: KeyForm,\n        immutable: false,\n      },\n    ];\n    \n    this.state = {\n      tab: 0,\n      edit: false,\n      selected: -1,\n      menuAnchor: null,\n      template: null,\n      helpText: null,\n    };\n  }\n\n  changeTab = (event, tab) => {\n    this.setState({ tab, selected: -1, edit: false, template: null });\n  };\n  \n  onSelect = (key) => (event) => {\n    this.setState({ selected: key, template: null });\n  };\n  \n  showTemplates = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  hideTemplates = () => {\n    this.setState({ menuAnchor: null });\n  };\n  \n  chooseTemplate = template => () => {\n    this.setState({ template, edit: true, selected: -1 });\n  };\n  \n  handleSwitch = (item) => (e) => {\n    const tab = this.tabs[this.state.tab];\n    const css = item.name.endsWith('.css');\n    \n    item.disabled = !e.target.checked;\n    this.forceUpdate();\n    \n    if (css) {\n      window.client.saveCSS();\n    } else {\n      window.client.saveLocalStorage(tab.list, tab.listName);\n    }\n  };\n  \n  componentDidMount() {\n    window.client.react.customizer = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.customizer = null;\n  }\n  \n  helpText(anchor) {\n    this.setState({ helpText: anchor });\n  }\n  \n  render() {\n    const { classes, panel } = this.props;\n    const { selected, edit, helpText, menuAnchor, template } = this.state;\n    \n    const tab = this.tabs[this.state.tab];\n    const smallName = tab.listName.toLowerCase();\n    const templates = window.client.templates.saved[smallName];\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar position=\"static\">\n          <Tabs value={this.state.tab} scrollable scrollButtons=\"on\" onChange={this.changeTab} ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n            {this.tabs.map((t,i) => (<Tab key={i} label={t.listName} />))}\n          </Tabs>\n        </AppBar>\n        <Typography className={classes.container} component=\"div\">\n          <div className={classes.left}>\n            <span className={edit || selected > -1 ? classes.mobileClose : classes.mobileOpen}>\n              <div className={classes.overflow}>\n                <List disablePadding dense subheader={<ListSubheader>{tab.listName}</ListSubheader>}>\n                  {tab.list.map((item, i) => (\n                    <ListItem key={i} dense button divider selected={selected === i} onClick={this.onSelect(i)} className={i % 2 === 0 ? classes.even : classes.odd}>\n                      <ListItemIcon className={classes.listNum}><span>{i+1}</span></ListItemIcon>\n                      <ListItemText className={classes.listText} primary={item.name} />\n                      {!tab.immutable && (\n                        <ListItemSecondaryAction>\n                          <Switch checked={!item.disabled}\n                            classes={{ switchBase: classes.switchBase }}\n                            onChange={this.handleSwitch(item)}\n                          />\n                        </ListItemSecondaryAction>\n                      )}\n                    </ListItem>\n                  ))}\n                  {tab.list.length < 1 && (\n                    <ListItem key={-1} dense className={classes.even}>\n                      <ListItemText className={classes.listText} secondary={\"No \"+smallName} />\n                    </ListItem>\n                  )}\n                </List>\n              </div>\n              \n              {templates && templates.length > 0 && (\n                <Button aria-owns={menuAnchor ? 'template.menu' : null} aria-label=\"open-templates\" aria-haspopup=\"true\" classes={{ label: classes.block }} onClick={this.showTemplates}>\n                  <FileCopyIcon />\n                  Templates\n                </Button>\n              )}\n              \n              {!tab.immutable && (\n                <Button classes={{ label: classes.block }} onClick={() => this.setState({ edit: true, selected: -1, template: null })}>\n                  <AddCircleIcon />\n                  New {tab.listName.slice(0,-1)}\n                </Button>\n              )}\n            </span>\n          </div>\n          <div className={classes.right}>\n            <span className={edit || selected > -1 ? classes.mobileOpen : classes.mobileClose}>\n              <FormEditor list={tab.list} listName={smallName} template={template} selected={selected} panel={panel} Form={tab.Form} immutable={tab.immutable} />\n            </span>\n          </div>\n        </Typography>\n        \n        <Menu disableEnforceFocus id=\"template.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.hideTemplates} onClose={this.hideTemplates}>\n          {templates && templates.map((tmpl, i) => (\n            <MenuItem key={i} onClick={this.chooseTemplate(tmpl)}>\n              {tmpl.name}\n            </MenuItem>\n          ))}\n        </Menu>\n        \n        \n        <Popover anchorEl={helpText} open={Boolean(helpText)} onClose={() => this.setState({ helpText: null })}>\n          <Typography>\n            This is where help text goes.\n          </Typography>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nCustomizer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Customizer);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              <div>{maillist.length} Messages ({unread} unread)</div>\n              <span>\n                <Tooltip title=\"Move multiple files to trash.\">\n                  <IconButton onClick={this.toggleDelete}>\n                    <DeleteSweepIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Purge deleted mail.\">\n                  <IconButton onClick={this.purgeMail}>\n                    <DeleteForeverIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Send a new message.\">\n                  <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                    <CreateIcon />\n                  </IconButton>\n                </Tooltip>\n              </span>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  mobileOnly: {\n    display: 'block',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body+'\\n');\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: fontSize + \"pt\",\n    };\n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body+'\\n');\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.mobileOnly} onClick={() => window.client.react.mailbox.setState({ mailitem: null })}>\n            <Icon>\n              <CloseIcon />\n            </Icon>\n            Close\n          </Button>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  mobileOpen: {\n    display: 'flex',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addPanel(\"Sendmail\", { icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <span className={mailitem ? classes.mobileClose : classes.mobileOpen}>\n            { maillist && (\n              <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n            )}\n          </span>\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n\nclient.execUserScript('onLoad.js');\n\n\n\n\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-37-1\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Emulator.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n  \n  onLine(that, lineBuf) {\n    Emulator.parseLinks(that, lineBuf);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    if (!data) return;\n    \n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    //var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    var txt = \"0123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 10.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  /////////////////////////////////////////////////////////\n  // save and load history buffers\n  \n  loadHistory = (key) => {\n    if (window.localStorage.hasOwnProperty(key)) {\n      const html = window.localStorage[key];\n      if (html !== \"\") {\n        try {\n          this.root.innerHTML = html + this.root.innerHTML;\n        } catch (e) {\n          console.log(\"Unable to insert history: \", e);\n        }\n      }\n    }\n  };\n\n  saveHistory = (key, size) => {\n    const store = window.localStorage;\n    \n    if (size > 0) {\n      const nodes = this.root.childNodes;\n      var start = nodes.length - 1;\n      \n      if (start < 0) return;\n      \n      var found = 0;\n      \n      for (let i = start; i > -1 && found < size; i--) {\n        let count = nodes[i].textContent.split(\"\\n\").length;\n        \n        if (nodes[i].textContent.endsWith('\\n')) {\n          count = count - 1;\n        }\n        \n        if (count > 0) {\n          found = found + count;\n          start = i;\n        }\n      }\n      \n      //var buff = \"\";\n      //for (let i = start; i < nodes.length; i++) {\n      //  buff = buff + nodes[i].outerHTML;\n      //}\n      \n      var range = document.createRange();\n      range.setStartBefore(nodes[start]);\n      range.setEndAfter(nodes[nodes.length-1]);\n      var fragment = range.cloneContents();\n      var div = document.createElement('div');\n      div.appendChild(fragment);\n      \n      store[key] = div.innerHTML;\n    } else {\n      delete store[key];\n    }\n  };\n  \n  \n}\n\nexport default Emulator;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n"],"sourceRoot":""}