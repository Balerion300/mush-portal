{"version":3,"sources":["client/connection.js","modules/Spawn/index.jsx","client/jsonapi.js","client/index.js","modules/Taskbar/index.jsx","modules/Sendmail/index.jsx","modules/BBPost/index.jsx","modules/Upload/index.jsx","modules/Backup/index.jsx","client/templates.js","modules/Configure/FormEditor.jsx","modules/Configure/TriggerForm.jsx","modules/Configure/TimerForm.jsx","modules/Configure/MacroForm.jsx","modules/Configure/KeyForm.jsx","modules/Configure/ButtonForm.jsx","modules/Configure/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","modules/Settings/ColorPicker.jsx","modules/Settings/index.jsx","index.js","client/emulator.js","client/userinput.js","modules/Buttonbar/index.jsx"],"names":["Connection","url","Object","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","socket","isOpen","onOpen","onError","onClose","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","reconnect","arguments","length","undefined","that","isConnected","sendText","window","WebSocket","onopen","evt","onerror","onclose","onmessage","readyState","close","data","send","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","e","console","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","substring","MAX_HISTORY_SIZE","HISTORY_KEY","Spawn","props","_this","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","changePrefix","event","Prefix","target","value","prefix","state","setState","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","LoadHistory","output","loadHistory","id","scrollDown","SaveHistory","saveHistory","Math","min","client","settings","historySpawnSize","ShowActivity","showActivity","AutoHide","autoHide","hasHidden","panel","minimize","Focus","react","taskbar","popTask","normalize","refoutput","React","createRef","refinput","input","_this2","Emulator","current","UserInput","onEnter","cmd","sendCommand","onEscape","clear","onPageUp","scrollPageUp","onPageDown","scrollPageDown","sendMacro","text","_this$props","scroll","nearBottom","scrollThreshold","appendText","status","count","forceUpdate","activityEnabled","re","RegExp","newtxt","replace","lines","linesOfScroll","endsWith","append","scrollIfNeeded","classes","_window$client$settin","ansiFG","ansiBG","fontFamily","fontSize","font","inputFont","mobile","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","className","frame","top","ref","classNames","style","bottom","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_10___default","label","root","onChange","autoComplete","Component","withStyles","theme","position","height","width","display","flex-flow","flex","margin","font-family","font-weight","font-size","overflow-y","overflow-x","white-space","word-wrap","padding","background-color","palette","background","paper","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_6__","border","outline","vertical-align","resize","breakpoints","down","withTheme","JSONAPI","maillist","self","args","mailitem","boardlist","bbmsglist","bbmsg","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","UnicodeMap","–","—","‘","’","‛","“","”","‟","′","″","‵","‶","Client","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","setBubble","hidden","tinycon","updateCounter","timersEnabled","changeSetting","disableTimers","startTimers","clearTimeout","runTimers","setTimeout","stopTimers","i","timers","timer","disabled","timeleft","max","delay","javascript","execActionScript","repeat","times","keyPress","key","keyCode","which","ctrlKey","shiftKey","altKey","prevent","keys","k","release","code","ctrl","alt","shift","preventDefault","keyRelease","colors","createTheme","matchMedia","up","matches","defaultSettings","invertHighlight","terminalWidth","terminalAutoScroll","decompileEditor","decompileKey","sidebarOpen","sidebarAnchor","sidebarDense","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","sidebarLargeCompass","debugEvents","debugActions","allowServerChange","serverAddress","serverSSL","location","protocol","serverPort","historySize","recallButtons","recallAnchor","recallSize","mobileFontSize","mobileHideTaskbar","mobileHideStatusbar","mobileButtonbar","timersAutoStart","activityReposition","activitySize","activityDelay","components","Mailbox","Sendmail","BBoard","BBPost","Upload","Backup","Configure","templates","Templates","buttons","triggers","macros","scripts","name","css","loadButtons","loadTriggers","loadTimers","loadMacros","loadKeys","loadCSS","loadScripts","loadSettings","prompt","events","panels","jsPanel","portal","terminal","statusbar","login","mailbox","sendmail","bboard","bbpost","upload","backup","configure","spawns","conn","container","watchers","loggedIn","jsonapi","updateLines","eatNewline","delayContents","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","render","bindKeys","ReactDOM","Portal","document","getElementById","src","onLoad","tag","async","onload","getElementsByTagName","appendChild","script","txt","Window","w","c","getSpawn","SendAPI","sendAPI","Send","SendText","Append","Output","Input","UI","eval","file","split","slice","updateCSS","setAttribute","head","erase","firstChild","removeChild","createTextNode","links","getAttribute","indexOf","parentNode","defaultTheme","typography","useNextVariants","primary","indigo","secondary","blueGrey","type","createMuiTheme","assign","filename","blob","Blob","saveAs","indent","store","localStorage","forEach","_this3","alert","startsWith","join","findSpawn","loadRecallHistory","obj","hasOwnProperty","String","bind","Number","castString","loadStyle","unloadStyle","calcDimensions","floor","clientHeight","dims","loadLocalStorage","history","clearLocalStorage","saveLocalStorage","j","command","regex","search","val","parseCommand","classid","msg","appendMessage","pattern","map","s","newText","tmp","escre","esc","_this4","_this5","onCommand","onunload","onresize","scrollTop","scrollHeight","force","focus","fun","cfg","component","_this6","spawn","focusPanel","comp","el","config","toLowerCase","headerTitle","icon","headerLogo","gameicon","spacing","unit","panelSize","defaults","maximizedMargin","wstr","callback","content","backgroundColor","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","innerRef","MuiThemeProvider","helpText","helpButton","classList","add","innerHTML","color","calcColors","controlbar","insertBefore","pointerup","addEventListener","currentTarget","push","create","addPanel","lower","splice","getPanels","headertitle","innerText","unsmallify","front","serverUrl","openLogin","match","re_fugueedit","str","editor","insert","suppress","trigger","createPattern","replaceArgs","fragment","appendHTML","attrs","appendPueblo","op","gmcp","emit","_this7","filterUnicode","saveRecallHistory","cmds","_this8","matched","m","astr","_this9","shortid","generate","on","result","removeAllListeners","_this10","node","textContent","saveText","localStorageToText","visibilityChange","_this11","msHidden","webkitHidden","setOptions","fallback","abbreviate","minimizeTo","onminimized","pushTask","onclosed","unmountComponentAtNode","delSpawn","dragit","start","saveCursor","resizeit","stop","resetCursor","removeEventListener","styles","flexFlow","title","&:hover","cursor","tasksep","marginRight","taskbutton","taskicon","tasklabel","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","hide","drawerPaper","mailButton","BBButton","fileinput","padded","historyPopover","maxHeight","overflowY","sectionDesktop","sectionMobile","mobileButtons","scrollButtons","alignSelf","emptyText","textAlign","buttonBar","justifyContent","sidebarButton","minWidth","activity","BadgeIcon","_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_16___default","badgeContent","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_25___default","children","BadgeWrapper","TabButton","visible","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_28___default","onClick","direction","_material_ui_icons_KeyboardArrowLeft__WEBPACK_IMPORTED_MODULE_43___default","_material_ui_icons_KeyboardArrowRight__WEBPACK_IMPORTED_MODULE_44___default","Taskbar","link","preview","hideActivity","openDrawer","closeMenu","open","closeDrawer","setTitle","clearScreen","confirm","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","task","showMenu","menuAnchor","toggleSidebar","toggle","saveSettings","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","showUpload","uploadAnchor","closeUpload","insertCommand","closeHistory","clearHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","openConfigure","previewUpload","setText","handleFile","files","reader","FileReader","readAsText","handleURL","req","XMLHttpRequest","onreadystatechange","responseText","showBackup","backupname","backupAnchor","closeBackup","typeBackup","saveBackup","previewBackup","handleBackupFile","handleBackupURL","pushButton","button","showCount","unwatchState","opener","_this$state","_client$settings","rev","Boolean","reverse","activityPosition","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_12___default","disableGutters","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_15___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_14___default","aria-label","_material_ui_icons_ChevronLeft__WEBPACK_IMPORTED_MODULE_41___default","_material_ui_icons_ChevronRight__WEBPACK_IMPORTED_MODULE_42___default","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_13___default","variant","noWrap","openMudURL","options","tooltip","aria-owns","aria-haspopup","_material_ui_icons_Menu__WEBPACK_IMPORTED_MODULE_32___default","_material_ui_core_SwipeableDrawer__WEBPACK_IMPORTED_MODULE_10___default","anchor","_Settings__WEBPACK_IMPORTED_MODULE_46__","_material_ui_core_Popover__WEBPACK_IMPORTED_MODULE_20___default","anchorEl","onSubmit","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_19___default","autoFocus","fullWidth","InputProps","inputProps","endAdornment","_material_ui_core_InputAdornment__WEBPACK_IMPORTED_MODULE_21___default","accept","htmlFor","_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_29___default","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_22___default","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_23___default","dense","divider","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_24___default","_material_ui_core_Menu__WEBPACK_IMPORTED_MODULE_17___default","disableEnforceFocus","_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_18___default","_material_ui_icons_ExpandLess__WEBPACK_IMPORTED_MODULE_40___default","_material_ui_icons_Settings__WEBPACK_IMPORTED_MODULE_36___default","_material_ui_icons_Build__WEBPACK_IMPORTED_MODULE_35___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_37___default","_material_ui_icons_CloudDownload__WEBPACK_IMPORTED_MODULE_45___default","_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_34___default","_material_ui_icons_Keyboard__WEBPACK_IMPORTED_MODULE_38___default","_material_ui_icons_Backspace__WEBPACK_IMPORTED_MODULE_33___default","_material_ui_icons_Wifi__WEBPACK_IMPORTED_MODULE_39___default","_Buttonbar__WEBPACK_IMPORTED_MODULE_47__","_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_26___default","indicatorColor","scrollable","ScrollButtonComponent","_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_27___default","wrapper","_material_ui_core_Snackbar__WEBPACK_IMPORTED_MODULE_30___default","anchorOrigin","vertical","horizontal","autoHideDuration","_material_ui_core_SnackbarContent__WEBPACK_IMPORTED_MODULE_31___default","aria-describedby","message","noHover","sendMail","chips","subject","body","realsub","substr","to","closePanel","handleChange","_home_travis_build_grapenut_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__","changeText","onResize","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","_this$state2","react__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_9___default","card","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_10___default","header","material_ui_chip_input__WEBPACK_IMPORTED_MODULE_19___default","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","helperText","FormHelperTextProps","subheader","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_16___default","stretch","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_11___default","bodytext","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_12___default","actions","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_13___default","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_17___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_18___default","sub","left","right","marginLeft","overflow","justify-content","sendBBPost","board","bb","getBoard","execJSON","_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_17___default","displayEmpty","autoWidth","b","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_19___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_20___default","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","line","newtext","react_ace__WEBPACK_IMPORTED_MODULE_14___default","mode","readOnly","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","stretchflex","pad","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_8___default","block","_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_Redo__WEBPACK_IMPORTED_MODULE_13___default","restoreLocalStorage","react_ace__WEBPACK_IMPORTED_MODULE_13___default","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_icons_CloudDownload__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_icons_Save__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_Undo__WEBPACK_IMPORTED_MODULE_12___default","empty","saved","FormEditor","classCallCheck","possibleConstructorReturn","getPrototypeOf","setStatus","clearStatus","item","handleNumber","parseInt","handleSwitch","checked","defineProperty","save","list","listName","Form","saveCSS","needsToResize","_this$props2","selected","immutable","_this$props3","onReset","_this$props4","template","defaultText","_this$props5","_this$props6","ltype","rtype","react_default","form","TextField_default","inputBase","switchText","Typography_default","Switch_default","switchBase","lib_default","minHeight","Button_default","mobileOnly","edit","Close_default","Delete_default","middle","Save_default","CloudDownload_default","Undo_default","newState","flow","overflowX","alignItems","align","verticalAlign","desktopOnly","TriggerForm","row","saveTriggers","TimerForm","saveTimers","MacroForm","saveMacros","KeyForm","showKeyForm","capturing","captureKey","hideKeyForm","getKeyName","meta","platform","navigator","keyCodeToChar","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","48","49","50","51","52","53","54","55","56","57","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","93","96","97","98","99","100","101","102","103","104","105","106","107","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","144","145","182","183","186","187","188","189","190","191","192","219","220","221","222","keyform","keyName","Checkbox_default","Dialog_default","disableEscapeKeyDown","aria-labelledby","DialogTitle_default","saveKeys","ButtonForm","openIconList","Tooltip_default","IconButton_default","Icon_default","saveButtons","KeyboardArrowLeft_default","KeyboardArrowRight_default","changeTab","tab","onSelect","showTemplates","hideTemplates","chooseTemplate","enableTimers","saveList","tabs","toggleSort","sortList","moveItemUp","moveItemDown","sortable","smallName","isTimer","AppBar_default","Tabs_default","t","Tab_default","leftMobileClose","leftMobileOpen","List_default","disablePadding","ListSubheader_default","subHeader","ExpandLess_default","ExpandMore_default","ListItem_default","even","odd","ListItemIcon_default","listNum","ListItemText_default","listText","ListItemSecondaryAction_default","arrowButton","KeyboardArrowDown_default","end","FileCopy_default","AddCircle_default","rightMobileOpen","rightMobileClose","Configure_FormEditor","Menu_default","tmpl","MenuItem_default","Popover_default","rel","href","paddingLeft","flexGrow","Terminal","focusInput","doResize","clientWidth","init","initOutput","initPrompt","dim","containerRef","onScroll","maxWidth","scrollcount","lineheight","main","text-align","lineHeight","noPadding","recallBack","cycleBackward","recallForward","cycleForward","initInput","smallIcons","ArrowDropUp_default","ArrowDropDown_default","alignContent","Statusbar","Login","closeLogin","setMessage","submitLogin","username","password","submitGuest","submitCreate","catchReturn","onEscapeKeyDown","disableBackdropClick","Wifi_default","Settings_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","Fab_default","PersonAdd_default","PersonOutline_default","Person_default","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","EXTRA","Sidebar","go","exit","_window$client","getContents","action","matchExit","ucExits","buildExit","uc","toUpperCase","buildLook","RemoveRedEye_default","exits","things","players","friends","customExits","useCompass","_loop","fullexit","skip","n","player","sidebar","exitWidget","_this$state3","numicons","parseExits","listHeader","exitItem","navWidget","contents","playerItem","thing","thingItem","dock","scrollTo","modules_Sidebar","core_styles","modules_Terminal","Buttonbar","modules_Input","modules_Statusbar","modules_Login","BBListItem","posts","lastmod","listicon","read","opacity","BBList","openBoard","Create_default","BBoard_BBListItem","align-items","BBMessageListItem","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","emulator","_window$client$settin2","Card_default","CardHeader_default","CardContent_default","CardActions_default","MoreVert_default","openBB","openBBMsg","setFields","mobileClose","mobileOpen","BBoard_BBMessageList","bblist","BBoard_BBList","BBoard_BBMessage","MailListItem","mail","quickDelete","handleMark","deleted","unread","urgent","PriorityHigh_default","Mail_default","Drafts_default","from","time","CheckCircle_default","Cancel_default","MailList","purgeMail","toggleDelete","openMail","DeleteSweep_default","DeleteForever_default","Mailbox_MailListItem","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","wrap","Reply_default","Forward_default","folder","folderlist","_this$state4","_this$state5","_this$state6","Mailbox_MailList","Mailbox_MailItem","ColorPicker","show","choose","offset","rows","bgfix","popover","swatch","Settings","handleValue","handleColor","handleExpand","expanded","expandAll","objectSpread","resetSettings","isMobile","debugging","BugReport_default","connection","Public_default","SettingsEthernet_default","Security_default","History_default","Repeat_default","leftright","BorderLeft_default","BorderRight_default","WrapText_default","TextRotateVertical_default","FontDownload_default","FormatSize_default","Palette_default","Settings_ColorPicker","Edit_default","Code_default","Timer_default","TimerOff_default","Autorenew_default","Sms_default","SwapVert_default","Update_default","ShortText_default","sidebarDisplay","VerticalSplit_default","PictureInPicture_default","FormatIndentDecrease_default","sidebarContent","AccountCircle_default","GroupWork_default","Explore_default","MobileScreenShare_default","tabIndex","role","Grid_default","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","UnfoldMore_default","summaryText","ExpansionPanelDetails_default","reset","flexDirection","flexBasis","__webpack_require__","r","__webpack_exports__","onclientload","loadScript","process","execUserScript","html","size","nodes","childNodes","found","range","createRange","setStartBefore","setEndAfter","cloneContents","div","lastIndex","exec","info","index","xch_cmd","lineBuf","ii","ilen","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","warn","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","ANSI_NORMAL","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","next","encodeState","ansiClass","span","stack","parseLinks","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","ch","PARSE_CR","abortParse","endLine","applyANSI","createDocumentFragment","child","nextSibling","removeAttribute","element","idx","selfClosing","UNCLOSED_TAGS","pushElement","popElement","threshold","temp","getComputedStyle","getPropertyValue","offsetWidth","offsetHeight","round","abs","selectionStart","selectionStop","keyCycleForward","keyCycleBackward","onkeydown","onkeyup","onKeyDown","onKeyUp","isKeyCycleBackward","isKeyCycleForward","saveCommand","moveCursor","pressKey","releaseKey","save_current","selectionEnd","createTextRange","collapse","select","getSelection","toString","selection","activeElement","tagName","react__WEBPACK_IMPORTED_MODULE_5___default","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_KeyboardArrowLeft__WEBPACK_IMPORTED_MODULE_14___default","_material_ui_icons_KeyboardArrowRight__WEBPACK_IMPORTED_MODULE_15___default","_material_ui_core_Badge__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_7___default","_material_ui_core_Tabs__WEBPACK_IMPORTED_MODULE_8___default","flexContainer","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_13___default","_material_ui_core_Tab__WEBPACK_IMPORTED_MODULE_9___default"],"mappings":"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","file":"static/js/main.6e1d6878.chunk.js","sourcesContent":["// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect(url=null) {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n    \n    this.url = url || this.url;\n    \n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","/* eslint no-control-regex: 0 */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\n\nimport Emulator from '../../client/emulator';\nimport UserInput from '../../client/userinput';\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 1000;\nconst HISTORY_KEY = \"output_history_\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    flex: 1,\n    display: \"flex\",\n  },\n  output: {\n    margin: '0.25em 0.5em',\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  bottom: {\n    \"background-color\": theme.palette.background.paper,\n    display: \"flex\",\n  },\n  input: {\n    flex: 1,\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n    [theme.breakpoints.down('sm')]: {\n      height: \"1.5em\",\n    },\n  },\n  prefix: {\n    width: \"5em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Spawn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prefix: props.prefix ? props.prefix : \"\",\n      saveHistory: props.saveHistory ? props.saveHistory : false,\n      autoHide: props.autoHide ? props.autoHide : false,\n      showActivity: props.showActivity ? props.showActivity : false,\n    };\n\n    this.refoutput = React.createRef();\n    this.refinput = React.createRef();\n\n    this.output = null;\n    this.input = null;\n    \n    this.hasHidden = false;\n  }\n  \n  componentDidMount() {\n    this.output = new Emulator(this.refoutput.current);\n    \n    this.input = new UserInput(this.refinput.current);\n    this.input.onEnter = (cmd) => { this.sendCommand(cmd); };\n    this.input.onEscape = () => { this.input.clear(); };\n    this.input.onPageUp = () => { this.output.scrollPageUp(); };\n    this.input.onPageDown = () => { this.output.scrollPageDown(); };\n    \n    if (this.state.saveHistory) {\n      this.LoadHistory();\n      this.output.scrollDown();\n    }\n    \n    if (this.state.autoHide) {\n      this.AutoHide();\n    }\n  }\n  \n  componentWillUnmount() {\n    this.output = null;\n    this.input = null;\n  }\n  \n  sendCommand(cmd) {\n    const { prefix } = this.state;\n    window.client.sendMacro(prefix + cmd);\n  }\n  \n  changePrefix = event => {\n    this.Prefix(event.target.value);\n  };\n  \n  Prefix = prefix => {\n    if (this.state.prefix !== prefix) {\n      this.setState({ prefix });\n    }\n    \n    return this;\n  };\n\n  LoadHistory = () => {\n    this.output.loadHistory(HISTORY_KEY + this.props.id);\n    this.output.scrollDown();\n  };\n  \n  SaveHistory = saveHistory => {\n    if (typeof(saveHistory) === \"undefined\") {\n      saveHistory = true;\n    }\n    \n    if (this.state.saveHistory !== saveHistory) {\n      if (saveHistory) {\n        this.LoadHistory();\n        this.output.scrollDown();\n      }\n    \n      this.setState({ saveHistory });\n    }\n    \n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + this.props.id, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySpawnSize));\n    }\n    \n    return this;\n  };\n  \n  ShowActivity = showActivity => {\n    if (typeof(showActivity) === \"undefined\") {\n      showActivity = true;\n    }\n    \n    if (this.state.showActivity !== showActivity) {\n      this.setState({ showActivity });\n    }\n    \n    return this;\n  }\n\n  AutoHide = autoHide => {\n    if (typeof(autoHide) === \"undefined\") {\n      autoHide = true;\n    }\n    \n    if (this.state.autoHide !== autoHide) {\n      this.setState({ autoHide });\n    }\n    \n    if (this.state.autoHide && !this.hasHidden) {\n      this.props.panel.minimize();\n      this.hasHidden = true;\n    }\n    \n    return this;\n  };\n  \n  Focus = () => {\n    \n    window.client.react.taskbar.popTask(this.props.panel);\n    this.props.panel.normalize();\n    \n    return this;\n  };\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(text) {\n    const { panel, id } = this.props;\n    const client = window.client;\n    var scroll = false;\n    \n    if (this.output.nearBottom(client.scrollThreshold)) {\n      scroll = true;\n    }\n    \n    this.output.appendText(text);\n    \n    scroll && this.output.scrollDown();\n    \n    if (panel.status === \"minimized\") {\n      panel.count++;\n      client.react.taskbar.forceUpdate();\n    }\n    \n    if (client.settings.activityEnabled && this.state.showActivity) {\n      let re = new RegExp('\\\\u001b\\\\[[^m]*m','g');\n      let newtxt = text.replace(re, '');\n      client.react.taskbar.showActivity(id, newtxt);\n    }\n        \n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + id, Math.min(MAX_HISTORY_SIZE, client.settings.historySpawnSize));\n    }\n    \n    this.setState({ lines: this.output.linesOfScroll() });\n  }\n  \n  Append(text) {\n    if (text.endsWith('\\n')) {\n      this.appendText(text);\n    } else {\n      this.append(text);\n    }\n    return this;\n  }\n\n  appendText(text) {\n    this.scrollIfNeeded(text);\n  }\n  \n  append(text) {\n    this.scrollIfNeeded(text+\"\\n\");\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { prefix } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: fontSize + \"pt\",\n    };\n    \n    const inputFont = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.top}>\n          <div ref={this.refoutput} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </div>\n        <div className={classes.bottom}>\n          <TextField label=\"Prefix\" classes={{ root: classes.prefix }} value={prefix} onChange={this.changePrefix} />\n          <textarea ref={this.refinput} className={classNames(classes.input, ansiFG, ansiBG)} style={inputFont}  autoComplete=\"off\"></textarea>\n        </div>\n      </div>\n    );\n  }\n}\n\nSpawn.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  panel: PropTypes.object.isRequired,\n  prefix: PropTypes.string,\n};\n\nexport default withStyles(styles, { withTheme: true })(Spawn);\n\n\t","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","/* eslint no-eval: 0 */\n/* eslint no-unused-vars: 0 */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport BBPost from '../modules/BBPost';\nimport Upload from '../modules/Upload';\nimport Backup from '../modules/Backup';\nimport Configure from '../modules/Configure';\nimport Spawn from '../modules/Spawn';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport JSONAPI from './jsonapi';\nimport Templates from './templates';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\n/**\n * List of standard server login failure messages.\n * @const {string[]}\n */\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\n/**\n * Maps Unicode characters to ASCII characters.\n * @const {Object.<string, string>}\n */\nconst UnicodeMap = {\n  \"\\u2013\": '-',\n  \"\\u2014\": '-',\n  \"\\u2018\": '\\'',\n  \"\\u2019\": '\\'',\n  \"\\u201B\": '\\'',\n  \"\\u201C\": '\"',\n  \"\\u201D\": '\"',\n  \"\\u201F\": '\"',\n  \"\\u2032\": '\\'',\n  \"\\u2033\": '\"',\n  \"\\u2035\": '\\'',\n  \"\\u2036\": '\"',\n}\n\n\nclass Client {\n\n\n  /**\n   * The main Client class controls and links together everything.\n   * @class Client\n   * @constructor\n   */\n  constructor() {\n    // Client colors and theme\n    this.colors = Colors;\n    this.theme = this.createTheme();\n    this.mobile = !window.matchMedia(this.theme.breakpoints.up('md').substring(7)).matches;\n    \n    // client settings\n    this.defaultSettings = {\n      // font\n      fontFamily: \"Courier New\",\n      fontSize: 10,\n      // default text colors\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      invertHighlight: false,\n      // terminal settings\n      terminalWidth: 100,\n      terminalAutoScroll: true,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"right\",\n      sidebarDense: true,\n      sidebarAlwaysShow: false,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      sidebarLargeCompass: true,\n      // debugging\n      debugEvents: false,\n      debugActions: false,\n      // default connection settings, can override in public/local.js\n      allowServerChange: true,\n      serverAddress: \"node.grapenut.org\",\n      serverSSL: window.location.protocol === \"https:\",\n      serverPort: window.location.protocol === \"https:\" ? 2001 : 2000,\n      // history settings\n      historySize: 1000,\n      historySpawnSize: 100,\n      // command recall\n      recallButtons: true,\n      recallAnchor: \"right\",\n      recallSize: 1000,\n      // mobile settings\n      mobileFontSize: 6,\n      mobileHideTaskbar: true,\n      mobileHideStatusbar: true,\n      mobileButtonbar: false,\n      // timer safety\n      timersEnabled: false,\n      timersAutoStart: false,\n      // activity notification\n      activityEnabled: true,\n      activityReposition: false,\n      activitySize: 80,\n      activityDelay: 10,\n    };\n    this.settings = null;\n    \n    // map react components to strings\n    this.components = {\n      \"Mailbox\": Mailbox,\n      \"Sendmail\": Sendmail,\n      \"BBoard\": BBoard,\n      \"BBPost\": BBPost,\n      \"Upload\": Upload,\n      \"Backup\": Backup,\n      \"Configure\": Configure,\n      \"Spawn\": Spawn,\n    };\n    \n    this.templates = new Templates();\n    \n    this.buttons = [];\n    this.triggers = [];\n    this.timers = [];\n    this.macros = [];\n    this.keys = [];\n    this.scripts = [{ name: \"onLoad.js\", text: \"\" }];\n    this.css = [{ name: \"ansi.css\", text: \"\" },\n                { name: \"inverse.css\", text: \"\" }];\n    \n    this.loadButtons();\n    this.loadTriggers();\n    this.loadTimers();\n    this.loadMacros();\n    this.loadKeys();\n    this.loadCSS();\n    this.loadScripts();\n    \n    // must come after client .css definitions\n    this.loadSettings();\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // External Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      bbpost: null,\n      upload: null,\n      backup: null,\n      configure: null,\n      spawns: [],\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // state variables\n    this.state = {};\n    this.watchers = {};\n    \n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n    \n    // start cron timer loop\n    this.startTimers();\n    \n    // bind keys\n    this.bindKeys();\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // rendering, themeing, and styling react components\n  \n  /** Render the main React component. */\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  /**\n   * Load a script from the source URL by appending a <script> tag to the body.\n   * @param {string} src - The URL of the script to load.\n   * @param {function} [onLoad=null] - A callback to run after loading.\n   * @param {function} [onError=null] - A callback to run on errors (e.g. 404).\n   */\n  loadScript(src, onLoad, onError) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    tag.onload = onLoad;\n    tag.onerror = onError;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  /**\n   * Find and execute a user-defined script by name.\n   * @param {string} name - Name of the script to execute.\n   */\n  execUserScript(name) {\n    // load user customization file\n    const client = this;\n    var script = null;\n    for (let i=0; i < client.scripts.length; i++) {\n      if (client.scripts[i].name === name) {\n        script = client.scripts[i];\n        break;\n      }\n    }\n    \n    if (script && script.text !== \"\") {\n      this.execActionScript(script.text);\n    }\n  }\n  \n  /**\n   * Evaluate a fragment of Javascript code.\n   * @param {string} txt - The code to execute.\n   * @param {Event} [event] - The event, if present.\n   */\n  execActionScript(txt, event) {\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    const SendAPI = (cmd) => this.sendAPI(cmd);\n    const Send = (cmd) => this.sendCommand(cmd);\n    const SendText = (cmd) => this.sendText(cmd);\n    const Append = (text) => this.output.appendText(text);\n    const Output = this.output;\n    const Input = this.input;\n    const UI = this.react;\n    \n    try {\n      eval(txt);\n    } catch (e) {\n      client.settings.debugActions && console.log(\"Error executing action:\", e);\n    }\n  }\n  \n  /**\n   * Load custom CSS style sheet from the source URL by appending a <link> tag to the head.\n   * @param {string} src - The URL of the CSS file to load.\n   */\n  loadStyle(src) {\n    const file = src.split('/').slice(-1)[0];\n\n    // see if we have a matching css override\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    var style;\n    if (css) {\n      // just update the <style> element\n      style = this.updateCSS(css);\n      if (css.text !== \"\") return;\n    }\n    \n    // css is not overridden, try to load a <link>\n    style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.head.appendChild(style);\n  }\n  \n  /**\n   * Update the CSS definition object's rules on its <style> element.\n   * @param {Object.<string, string>} css - The CSS definition object.\n   * @param {boolean} [erase=false] - Erase the existing style first.\n   * @return {HTMLElement} - The <style> tag with CSS added.\n   */\n  updateCSS(css, erase=false) {\n    if (!css) return null;\n    \n    var style = document.getElementById(\"override_\" + css.name);\n    if (style) {\n      // remove what's already there\n      while (style.firstChild) {\n        style.removeChild(style.firstChild);\n      }\n    } else {\n      // create a new style element\n      style = document.createElement('style');\n      style.setAttribute('id', 'override_' + css.name);\n      document.head.appendChild(style);\n    }\n    \n    // update the CSS text on the <style> element\n    if (!erase) style.appendChild(document.createTextNode(css.text));\n    \n    return style;\n  }\n  \n  /**\n   * Uunload custom CSS style sheet loading from source URL.\n   * @param {string} src - The source URL of the CSS file to unload.\n   */\n  unloadStyle(src) {\n    // remove the <link> if it exists\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n    \n    // see if we have a css override to erase\n    const file = src.split('/').slice(-1)[0];\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    // we found a css override, delete the contents\n    if (css) {\n      this.updateCSS(css, true);\n    }\n  }\n  \n  /**\n   * Create a new Material-UI theme from a theme configuration object.\n   * @param {Object.<string,*>} [theme] - The theme configuration object.\n   * @return {MuiTheme} - The new theme object.\n   */\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // save and load objects from localStorage\n  \n  /**\n   * Save a text string to a local file.\n   * @param {string} filename - The name of the file to save.\n   * @param {string} text - The text of the file to save.\n   * @param {string} [type=text/plain] - The MIME type of the file Blob.\n   * @return {boolean} - Whether the save was successful or not.\n   */\n  saveText(filename, text, type) {\n    if (!type) {\n      type = \"text/plain\";\n    }\n    \n    if (text.length > 0) {\n      var blob = new Blob([text], { type });\n      saveAs(blob, filename);\n      return true;\n    } else {\n      return false;\n    }\n  }\n  \n  /**\n   * Convert localStorage to JSON object text.\n   * @param {string} [indent=0] - If indent != 0 we use a pretty printer. If 0 or undefined we minify.\n   * @return {string} - The JSON.stringified object text.\n   */\n  localStorageToText(indent) {\n    const store = window.localStorage;\n    var keys = { };\n    Object.keys(store).forEach(key => { keys[key] = store[key]; });\n    \n    if (indent) {\n      return JSON.stringify(keys, (key,value) => {\n        switch (key) {\n          case 'buttons':\n          case 'triggers':\n          case 'timers':\n          case 'macros':\n          case 'keys':\n          case 'css':\n          case 'scripts':\n          case 'settings':\n          case 'recall_history':\n            return JSON.parse(value);\n          default:\n            return value;\n        }\n      }, indent);\n    } else {\n      return JSON.stringify(keys);\n    }\n  }\n    \n  /**\n   * Restore localStorage from a string.\n   * @param {string} text - The string from which to restore localStorage.\n   * @return {boolean} - Whether the text was succesfully parsed and merged with localStorage.\n   */\n  restoreLocalStorage(text) {\n    var store;\n    try {\n      store = JSON.parse(text, (key,value) => {\n        switch (key) {\n          case 'buttons':\n          case 'triggers':\n          case 'timers':\n          case 'macros':\n          case 'keys':\n          case 'css':\n          case 'scripts':\n          case 'settings':\n          case 'recall_history':\n            return JSON.stringify(value);\n          default:\n            return value;\n        }\n      });\n    } catch (e) {\n      alert(\"Failed to parse local storage file!\");\n      return false;\n    }\n    \n    if (store) {\n      Object.keys(store).forEach(key => {\n        window.localStorage[key] = store[key];\n        \n        if (key === \"output_history\") {\n          this.output.loadHistory(key);\n        } else if (key.startsWith(\"output_history_\")) {\n          let name = key.split('_').slice(2).join('_');\n          let panel = this.findSpawn(name);\n          panel && panel.react && panel.react.output.loadHistory(key);\n        }\n      });\n      \n      this.loadRecallHistory();\n      this.loadButtons();\n      this.loadTriggers();\n      this.loadTimers();\n      this.loadMacros();\n      this.loadKeys();\n      this.loadCSS();\n      this.loadScripts();\n      this.loadSettings();\n      \n      this.react.portal.forceUpdate();\n    } else {\n      alert(\"Failed to parse local storage file!\");\n      return false;\n    }\n    return true;\n  }\n  \n  /**\n   * Load a configuration object string from localStorage.\n   * @param {Object.<string,*>} obj - The reference onto which to store the retrieved object.\n   * @param {string} key - The key of the object on localStorage.\n   */\n  loadLocalStorage(obj, key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      obj = Object.assign(obj, JSON.parse(window.localStorage[key]));\n    }\n  }\n  \n  /**\n   * Delete a configuration object from localStorage.\n   * @param {string} key - The key of the object on localStorage.\n   */\n  clearLocalStorage(key) {\n    delete window.localStorage[key];\n  }\n  \n  /**\n   * Save a configuration object to localStorage.\n   * @param {Object.<string,*>} obj - The object to be stored.\n   * @param {string} key - The key of the object on localStorage.\n   */\n  saveLocalStorage(obj, key) {\n    window.localStorage[key] = JSON.stringify(obj);\n  }\n  \n  /**\n   * Load a history buffer string from localStorage.\n   * @param {string} key - The key of the buffer on localStorage.\n   * @return {string} - The buffer string.\n   */\n  loadHistoryBuffer(key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      return window.localStorage[key];\n    }\n    return \"\";\n  }\n  \n  /**\n   * Save a history buffer string to localStorage.\n   * @param {string} key - The key of the buffer on localStorage.\n   * @param {string} text - The value of the buffer.\n   */\n  saveHistoryBuffer(key, text) {\n    window.localStorage[key] = text;\n  }\n  \n  /**\n   * Set a value on an object, converting the argument to the correct type.\n   * @param {Object.<string,*>} obj - The object on which to store the value.\n   * @param {string} key - The key of the value to store on the object.\n   * @param {*} value - The value to be stored.\n   */\n  castString(obj, key, value) {\n    if (!obj.hasOwnProperty(key)) return;\n    \n    var type = typeof obj[key];\n    \n    if (typeof value === type) {\n      obj[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          obj[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          obj[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          obj[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          obj[key] = value;\n          break;\n      }\n    }\n  }\n  \n  /**\n   * Change a setting, updating the UI if necessary.\n   * @param {string} key - The key of the setting to change.\n   * @param {string} value - The new value of the setting.\n   */\n  changeSetting(key, value) {\n    this.castString(this.settings, key, value);\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    } else if (key === 'terminalWidth') {\n      // send the screen dimensions\n      this.output.calcDimensions();\n      this.sendText(\"SCREENWIDTH \" + this.settings.terminalWidth);\n      this.sendText(\"SCREENHEIGHT \" + Math.floor(this.output.root.parentNode.clientHeight / this.output.dims.height));\n    } else if (key === 'timersEnabled') {\n      if (this.settings[key]) {\n        this.startTimers();\n      } else {\n        this.stopTimers();\n      }\n    }\n  }\n  \n  /** Load user-defined taskbar buttons. */\n  loadButtons() {\n    this.loadLocalStorage(this.buttons, \"buttons\");\n  }\n  \n  /** Load regex/wildcard pattern triggers. */\n  loadTriggers() {\n    this.loadLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  /** Load automatic timers. */\n  loadTimers() {\n    this.loadLocalStorage(this.timers, \"timers\");\n  }\n  \n  /** Load slash command macros. */\n  loadMacros() {\n    this.loadLocalStorage(this.macros, \"macros\");\n  }\n  \n  /** Load custom keybindings. */\n  loadKeys() {\n    this.loadLocalStorage(this.keys, \"keys\");\n  }\n  \n  /** Load custom css overrides. */\n  loadCSS() {\n    this.loadLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // override CSS, first check existing styles\n      let css = this.css[i];\n      \n      // autoload CSS changes, except inverse.css\n      if (css.name !== \"inverse.css\") {\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  /** Load custom scripts. */\n  loadScripts() {\n    this.loadLocalStorage(this.scripts, \"scripts\");\n  }\n  \n  /** Load client settings. */\n  loadSettings() {\n    this.settings = Object.assign({}, this.defaultSettings);\n    this.loadLocalStorage(this.settings, \"settings\");\n    \n    if (this.settings.invertHighlight) {\n      this.loadStyle('./inverse.css');\n    } else {\n      this.unloadStyle('./inverse.css');\n    }\n    \n    if (!this.settings.timersAutoStart) {\n      this.settings.timersEnabled = false;\n    }\n  }\n  \n  /** Load command recall history. */\n  loadRecallHistory() {\n    this.loadLocalStorage(this.input.history, \"recall_history\");\n  }\n  \n  /** Save command recall history. */\n  saveRecallHistory() {\n    const { recallSize } = this.settings;\n    this.clearLocalStorage(\"recall_history\");\n    this.saveLocalStorage(this.input.history.slice(-recallSize), \"recall_history\");\n  }\n  \n  /** Save user-defined taskbar buttons. */\n  saveButtons() {\n    this.clearLocalStorage(\"buttons\");\n    this.saveLocalStorage(this.buttons, \"buttons\");\n    this.react.portal && this.react.portal.forceUpdate();\n  }\n  \n  /** Save regex/wildcard pattern triggers. */\n  saveTriggers() {\n    this.clearLocalStorage(\"triggers\");\n    this.saveLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  /** Save automatic timers. */\n  saveTimers() {\n    this.clearLocalStorage(\"timers\");\n    this.saveLocalStorage(this.timers, \"timers\");\n  }\n  \n  /** Save command macros. */\n  saveMacros() {\n    this.clearLocalStorage(\"macros\");\n    this.saveLocalStorage(this.macros, \"macros\");\n  }\n  \n  /** Save custom keybindings. */\n  saveKeys() {\n    this.clearLocalStorage(\"keys\");\n    this.saveLocalStorage(this.keys, \"keys\");\n  }\n  \n  /** Save custom css overrides. */\n  saveCSS() {\n    this.clearLocalStorage(\"css\");\n    this.saveLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // update rules in css <style> element\n      let css = this.css[i];\n      \n      if (css.name === \"inverse.css\") {\n        // only load inverse.css if we need it\n        if (this.settings.invertHighlight) {\n          // unload inverse.css if it is linked\n          let links = document.getElementsByTagName(\"link\");\n          for (let j = links.length; j >= 0; j--) {\n            if (links[j] && links[j].getAttribute(\"href\") !== null) {\n              let name = links[j].getAttribute(\"href\").split(\"/\").slice(-1)[0];\n              if (name === css.name) {\n                links[j].parentNode.removeChild(links[j]);\n              }\n            }\n          }\n          \n          if (css.text === \"\") {\n            // there is no override, so relink inverse.css\n            this.loadStyle('./inverse.css');\n          } else {\n            // there is an override, update it\n            this.updateCSS(css);\n          }\n        }\n      } else {\n        // autoload all files that aren't inverse.css\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  /** Save custom css overrides. */\n  saveScripts() {\n    this.clearLocalStorage(\"scripts\");\n    this.saveLocalStorage(this.css, \"scripts\");\n  }\n  \n  /** Save client settings. */\n  saveSettings() {\n    this.clearLocalStorage(\"settings\");\n    this.saveLocalStorage(this.settings, \"settings\");\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // miscellaneous logging and command links\n\n  /**\n   * Detect if more user input is required for a pueblo command.\n   * @param {string} command - The command string to parse for '??' tokens.\n   * @return {string} - The command string with '??' tokens replace by user input.\n   */\n  parseCommand(command) {\n    var cmd = command;\n    var regex = new RegExp('\\\\?\\\\?');\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n  \n  /**\n   * Execute a Pueblo command link, checking if it requires user input.\n   * @param {string} cmd - The command string.\n   */\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(this.parseCommand(cmd));\n  }\n\n  /**\n   * Log messages to the output terminal.\n   * @param {string} classid - The CSS class id of the log message.\n   * @param {string} msg - The message to append to the terminal.\n   */\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  /**\n   * Create a new RegExp pattern, creating one from a glob wildcard pattern if necessary.\n   * @param {boolean} regex - Is the pattern already a regex? If not we will make one.\n   * @param {string} pattern - The pattern string.\n   * @return {RegExp} - The compiled regular expression.\n   */\n  createPattern(regex, pattern) {\n    if (regex) {\n      return new RegExp('^' + pattern + '$');\n    } else {\n      return new RegExp('^' + pattern.split(/\\*+/).map(s => s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')).join('(.*)') + '$');\n    }\n  }\n  \n  /**\n   * Replace %-tokens in a text string with match argument strings.\n   * @param {string[]} args - The arguments array, element 0 is the full string.\n   * @param {string} text - The text to be scanned for %number tokens which are replaced by args[number].\n   * @return {string} - The new text with arguments replaced if they are present.\n   */\n  replaceArgs(args, text) {\n    let newText = text.slice();\n    for (let i = args.length-1; i > -1; i--) {\n      let tmp = args[i] || \"\";\n      \n      try {\n        let re = new RegExp('(^|[^\\\\%])%'+i, 'g');\n        let escre = new RegExp('[\"\\'`]', 'g');\n        let esc = tmp.replace(escre, '\\\\$&');\n        newText = newText.replace(re, '$1'+esc);\n      } catch (e) {\n        this.settings.debugActions && console.log(\"Unable to compile regular expression:\", e);\n      }\n    }\n    return newText;\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // initialize terminal elements (input, output, prompt) and clear them\n  \n  /** Clear the terminal. */\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  /**\n   * Initialize the terminal input window.\n   * @param {HTMLElement} input - The HTML element to which the Input object is attached.\n   */\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n      this.loadRecallHistory();\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => {\n        this.sendCommand(cmd);\n        this.prompt && this.prompt.clear();\n        this.settings.terminalAutoScroll && this.output.scrollDown();\n      };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  /**\n   * Initialize the terminal output window.\n   * @param {HTMLElement} output - The HTML element to which the Emulator object is attached.\n   * @param {HTMLElement} [container=null] - The output elements container.\n   */\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  /**\n   * Initialize the command prompt.\n   * @param {HTMLElement} prompt - The HTML element to which the Emulator object is attached.\n   */\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // handle input window focus and output window scrolling\n  \n  //////////////////////////////////////////////////////\n  /**\n   * Scroll the terminal output window down the very bottom of the current view.\n   * @param {HTMLElement} root - The HTML element to be scrolled down.\n   */\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  /**\n   * Passthrough for focusing the Input root.\n   * @param {boolean} force - Whether to force the Input element to focus even if the normal rules determine it shouldn't.\n   */\n  focus(force) {\n    if (this.mobile) return;\n    this.input && this.input.focus(force);\n  }\n  \n  /**\n   * Wrapper for appending text that scrolls the output afterwards \n   * only if needed (already scrolled to the bottom).\n   * @param {function} fun - The function we are wrapping that appends text. \n   */\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun();\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  /**\n   * Add a window panel with the given id and configuration, using a particular React component if provided.\n   * @param {string} id - The window id.\n   * @param {Object.<string,*>} cfg - The panel configuration.\n   * @param {React.Component} [component=Spawn] - The React component that serves as a base.\n   * @return {Object} - A reference to the panel if it already exists, or undefined if not.\n   */\n  addPanel(id, cfg, component) {\n    var spawn = this.findSpawn(id);\n    \n    if (spawn) {\n      this.focusPanel(id);\n      return spawn;\n    }\n    \n    var comp = component || id;\n    var el = this.components[comp];\n    \n    if (!el) {\n      el = Spawn;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.id) {\n      config.id = id.toLowerCase();\n    }\n    \n    if (!config.headerTitle) {\n      config.headerTitle = id;\n    }\n    \n    if (!config.icon) {\n      config.icon = \"tab\";\n    }\n    \n    if (!config.headerLogo) {\n      var gameicon = config.icon.startsWith('icon-');\n      \n      if (gameicon) {\n        config.headerLogo = \"<i class='\" + config.icon + \"' style='margin-left: \"+this.theme.spacing.unit+\"px'></i>\";\n      } else {\n        config.headerLogo = \"<i class='material-icons' style='margin-left: \"+this.theme.spacing.unit+\"px'>\" + config.icon + \"</i>\";\n      }\n    }\n    \n    if (!config.panelSize) {\n      const margin = this.panels.defaults.maximizedMargin;\n      let wstr = 'calc(50% - ' + 1.5*margin + 'px)';\n\n      if (this.mobile) {\n        wstr = 'calc(100% - ' + 2*margin + 'px)';\n      }\n    \n      config.panelSize = {\n        width: wstr,\n        height: 'calc(100% - ' + 2*margin + 'px)',\n      };\n    }\n    \n    let ref = React.createRef();\n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      config.react = React.createElement(el, { innerRef: ref, id: id.toLowerCase(), panel: container, ...config.props }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, config.react), container.content, () => {\n        // add the helpText() controlbar icon\n        let obj = ref.current;\n        if (obj && obj.helpText) {\n          let helpButton = document.createElement('div');\n          helpButton.classList.add(\"jsPanel-btn\",\"jsPanel-btn-help\");\n          helpButton.innerHTML = `<svg class=\"jsPanel-icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 512 512\"><circle fill=\"currentColor\" cx=\"255.984\" cy=\"492\" r=\"20\"/><path fill=\"currentColor\" d=\"M412.979,155.775C412.321,69.765,342.147,0,255.984,0c-86.57,0-157,70.43-157,157c0,11.046,8.954,20,20,20 s20-8.954,20-20c0-64.514,52.486-117,117-117s117,52.486,117,117c0,0.356,0.009,0.71,0.028,1.062 c-0.405,46.562-28.227,88.348-71.12,106.661c-40.038,17.094-65.908,56.675-65.908,100.839V412c0,11.046,8.954,20,20,20 c11.046,0,20-8.954,20-20v-46.438c0-28.117,16.334-53.258,41.614-64.051c57.979-24.754,95.433-81.479,95.418-144.516 C413.016,156.585,413.003,156.179,412.979,155.775z\"/></svg>`;\n          helpButton.style.color = this.panels.calcColors(this.panels.defaults.theme)[3];\n          container.controlbar.insertBefore(helpButton, container.controlbar.firstChild);\n          \n          jsPanel.pointerup.forEach((which) => {\n            helpButton.addEventListener(which, (evt) => {\n              obj.helpText(evt.currentTarget);\n            });\n          });\n        }\n        \n        window.client.react.spawns.push(obj);\n      });\n      \n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n    return ref.current;\n  }\n  \n  /** \n   * Create a new window with addPanel if one is not found with findSpawn.\n   * @param {string} id - The window id.\n   * @param {Object.<string,*>} cfg - The panel configuration object.\n   * @param {HTMLElemet} el - The element to create inside the window.\n   * @return {jsPanel} - The window panel that was found, or the new one created.\n   */\n  getSpawn(id, cfg, el) {\n    let spawn = this.findSpawn(id);\n    if (spawn) return spawn;\n    \n    return this.addPanel(id, cfg, el);\n  }\n  \n  /**\n   * Delete spawn window from internal list.\n   * @param {string} id - The window id.\n   */\n  delSpawn(id) {\n    const spawns = this.react.spawns;\n    const lower = id.toLowerCase();\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id === lower) {\n        spawns.splice(i, 1);\n      }\n    }\n  }\n  \n  /**\n   * Find spawn window in internal list.\n   * @param {string} id - The window id.\n   * @return {jsPanel} - The window panel if found, or null.\n   */\n  findSpawn(id) {\n    const spawns = this.react.spawns;\n    const lower = id.toLowerCase();\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id.toLowerCase() === lower) {\n        return spawns[i];\n      }\n    }\n    return null;\n  }\n  \n  /**\n   * Find and close a window panel.\n   * @param {string} id - The window id.\n   */\n  closePanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  /**\n   * Bring a window panel into focus.\n   * @param {string} id - The window id.\n   */\n  focusPanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  /**\n   * Connect to the game server and setup message handlers.\n   */\n  connect() {\n    var client = this;\n\n    let serverProto = this.settings.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + \"/wsclient\";\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.conn.hasData = false;\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    /** onMessage callback before data handler */\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.terminalWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n    \n    /** handle incoming text */\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      // implement @dec/tf\n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      }\n      \n      // handle text triggers\n      let suppress = false;\n      client.triggers.forEach((trigger, i) => {\n        if (trigger.disabled) return;\n        \n        let re = client.createPattern(trigger.regex, trigger.pattern);\n        let args = text.match(re);\n        \n        if (args) {\n          let txt = client.replaceArgs(args, trigger.text);\n          if (trigger.javascript) {\n            client.execActionScript(txt);\n          } else {\n            client.sendText(txt);\n          }\n        \n          if (trigger.suppress) {\n            client.eatNewline = true;\n            suppress = true;\n          }\n        }\n      });\n      \n      if (suppress) return;\n      \n      if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      \n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    /** handle incoming html */\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    /** handle incoming pueblo */\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    /** handle incoming command prompts */\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    /** handle incoming JSON objects */\n    /** use the Events handler collection */\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect(force=false) {\n    if (!force && this.isConnected()) {\n      return;\n    }\n    \n    if (force || this.reconnectCount < this.reconnectMaxCount) {\n      // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n      let serverProto = window.location.protocol === \"https:\" || this.settings.serverSSL ? \"wss://\" : \"ws://\";\n      let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient';\n      \n      this.reconnectCount++;\n      this.conn && this.conn.reconnect(serverUrl);\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  filterUnicode(text) {\n    if (!text) return \"\";\n    try {\n      let re = new RegExp(\"[\\u2013\\u2014\\u2018\\u2019\\u201B\\u201C\\u201D\\u201F\\u2032\\u2033\\u2035\\u2036]\",\"g\");\n      return text.replace(re, code => UnicodeMap[code]);\n    } catch (e) {\n      this.settings.debugActions && console.log(\"Unable to filter Unicode:\", e);\n    }\n    return text;\n  }\n\n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  /**\n   * Send a command string to the server, check macros for a match and append a local echo.\n   * @param {string} cmd - The command string to send.\n   */\n  sendCommand(cmd) {\n  \n    if (!this.isConnected()) {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n      return;\n    }\n    \n    if (cmd === '') return;\n\n    cmd = this.filterUnicode(cmd);\n    this.sendMacro(cmd);\n    this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n    this.saveRecallHistory();\n  }\n  \n  /**\n   * Check a string for multiple commands and match them against the list of macros.\n   * @param {string} cmds - A string of one or more commands separated by newlines.\n   */\n  sendMacro(cmds) {\n    let matched = false;\n    this.macros.forEach((m) => {\n      if (m.disabled) return;\n      \n      let re = this.createPattern(m.regex, m.pattern);\n      \n      cmds.split('\\n').forEach((cmd) => {\n        let args = cmd.match(re);\n      \n        if (args) {\n          matched = true;\n          let text = this.replaceArgs(args, m.text);\n          if (m.javascript) {\n            this.execActionScript(text);\n          } else {\n            this.sendMacro(text);\n          }\n        }\n      });\n    });\n    \n    if (!matched) {\n      this.sendText(cmds);\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  /**\n   * Send an API command, falling back to player-executed softcode if the server doesn't support it.\n   * @param {string} cmd - The API command name.\n   * @param {string[]} args - An array of string arguments to pass to the API command.\n   */\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  /**\n   * Execute a MUSH softcode string and return the result as a string in a JSON object.\n   * @param {string} code - The code string to execute.\n   * @param {function} callback - The callback function to execute when we receive the return value.\n   */\n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  /**\n   * Execute a MUSH softcode string that creates a JSON object and return it.\n   * @param {string} code - The code string to execute.\n   * @param {execCallback} callback - The callback function to execute when we receive the return object.\n   */\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  /**\n   * Save the current display to a log file.\n   * @param {string} filename - The name of the log file to save.\n   */\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (!this.saveText(filename, text, \"text/html;charset=utf-8\")) {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  /**\n   * Save the entire localStorage to a backup file.\n   * @param {string} filename - The name of the backup file to save.\n   */\n  saveBackup(filename) {\n    var text = this.localStorageToText(2);\n    if (!this.saveText(filename, text)) {\n      alert(\"File not saved! Local storage is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  /** Set the activity count when the browser tab is out of view. */\n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  /** Initialize the browser activity notification events. */\n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  /** Set window panel default parameters and event handlers. */\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content);\n      window.client.delSpawn(this.id);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n  \n  \n  /////////////////////////////////////////////////////////\n  \n  /** Enable timers, only if not already enabled. */\n  timersEnabled = () => {\n    if (this.settings.timersEnabled) return;\n    \n    this.changeSetting(\"timersEnabled\", true);\n  };\n  \n  /** Disable timers, only if already enabled. */\n  disableTimers = () => {\n    if (!this.settings.timersEnabled) return;\n    \n    this.changeSetting(\"timersEnabled\", false);\n  };\n  \n  /** Start the master timer loop, if timers are enabled. */\n  startTimers = () => {\n    if (this.settings.timersEnabled) {\n      clearTimeout(this.runTimers);\n      setTimeout(this.runTimers,  1000);\n    }\n  };\n  \n  /** Stop the master timer loop. */\n  stopTimers = () => {\n    clearTimeout(this.runTimers);\n  };\n  \n  /** The master timer loop. */\n  runTimers = () => {\n    if (!this.settings.timersEnabled) return;\n    \n    for (let i = 0; i < this.timers.length; i++) {\n      const timer = this.timers[i];\n      if (timer.disabled) {\n        if (timer.timeleft) {\n          delete timer.timeleft;\n        }\n        \n        continue;\n      }\n      \n      if (typeof(timer.timeleft) === \"undefined\") {\n        // set initial time\n        timer.timeleft = Math.max(1, timer.delay);\n      }\n      \n      if (timer.timeleft > 0) {\n        // subtract time\n        timer.timeleft--;\n      } else {\n        // execute timer\n        if (timer.javascript) {\n          this.execActionScript(timer.text);\n        } else {\n          this.sendText(timer.text);\n        }\n        \n        if (timer.repeat && timer.times !== 0) {\n          // repeat timer, reset time left\n          if (timer.times > 0) {\n            timer.times--;\n          }\n          timer.timeleft = timer.delay;\n        } else {\n          // don't repeat, disable timer\n          delete timer.timeleft;\n          timer.disabled = true;\n        }\n      }\n    }\n  \n    setTimeout(this.runTimers, 1000);\n  };\n\n  /////////////////////////////////////////////////////////\n\n  /** Bind key press and key release event handlers. */\n  bindKeys() {\n    document.addEventListener(\"keydown\", this.keyPress);\n    document.addEventListener(\"keyup\", this.keyRelease);\n  }\n  \n  /** Unbind key press and key release event handlers. */\n  unbindKeys() {\n    document.removeEventListener(\"keydown\", this.keyPress);\n    document.removeEventListener(\"keyup\", this.keyRelease);\n  }\n\n  /**\n   * Handle key press events.\n   * @param {Event} event - The key press event object.\n   */\n  keyPress = (event) => {\n    var key = { code: (event.keyCode ? event.keyCode : event.which),\n                ctrl: event.ctrlKey,\n                shift: event.shiftKey,\n                alt: event.altKey };\n\n    var prevent = false;\n    \n    for (let i=0; i < this.keys.length; i++) {\n      let k = this.keys[i];\n      if (k.disabled || k.release) continue;\n      \n      if ((k.code === key.code) && (k.ctrl === key.ctrl) &&\n          (k.alt === key.alt) && (k.shift === key.shift)) {\n        if (k.javascript) {\n          this.execActionScript(k.text);\n        } else {\n          this.sendText(k.text);\n        }\n        \n        if (k.prevent) {\n          prevent = true;\n        }\n        \n        break;\n      }\n    }\n    \n    if (prevent) {\n      event.preventDefault();\n    }\n  };\n  \n  /**\n   * Handle key release events.\n   * @param {Event} event - The key release event object.\n   */\n  keyRelease = (event) => {\n    var key = { code: (event.keyCode ? event.keyCode : event.which),\n                ctrl: event.ctrlKey,\n                shift: event.shiftKey,\n                alt: event.altKey };\n    \n    var prevent = false;\n\n    for (let i=0; i < this.keys.length; i++) {\n      let k = this.keys[i];\n      if (k.disabled || !k.release) continue;\n      \n      if ((k.code === key.code) && (k.ctrl === key.ctrl) &&\n          (k.alt === key.alt) && (k.shift === key.shift)) {\n        if (k.javascript) {\n          this.execActionScript(k.text, event);\n        } else {\n          this.sendText(k.text);\n        }\n        \n        if (k.prevent) {\n          prevent = true;\n        }\n        \n        break;\n      }\n    }\n    \n    if (prevent) {\n      event.preventDefault();\n    }\n  };\n\n\n  ////////////////////////////////////////////////////////////////////////////\n  \n  /**\n   * Set global state variable.\n   * @param {string} state - The state object to merge with the current state.\n   */\n  setState(state) {\n    var keys = Object.keys(state);\n    for (let i=0; i < keys.length; i++)\n    {\n      let key = keys[i];\n      if (state[key] !== this.state[key]) {\n        this.state[key] = state[key];\n        \n        let watchers = this.watchers[key];\n        if (watchers) {\n          for (let j=0; j < watchers.length; j++) {\n            if (watchers[j]) {\n              watchers[j].forceUpdate();\n            }\n          }\n        }\n        \n        return;\n      }\n    }\n  }\n  \n  /**\n   * Register a component as using a global state variable.\n   * @param {React.Component} comp - The React Component that should be updated on state changes.\n   * @param {string} key - The key of the state variable to watch.\n   */\n  watchState(comp, key) {\n    let watchers = this.watchers[key];\n    \n    if (watchers && watchers.indexOf(comp) < 0) {\n      watchers.push(comp);\n    } else if (!watchers) {\n      this.watchers[key] = [comp];\n    }\n    \n    return this.state[key];\n  }\n  \n  /**\n   * Unregister a component from watching any keys it may be watching.\n   * @param {React.Component} comp - The React Component that should no longer be updated.\n   */\n  unwatchState(comp) {\n    var keys = Object.keys(this.watchers);\n    \n    for (let i=0; i < keys.length; i++) {\n      let watchers = this.watchers[keys[i]];\n      for (let j=watchers.length-1; j > -1; j--) {\n        if (watchers[j] === this) {\n          watchers.splice(j, 1);\n        }\n      }\n    }\n  }\n\n\n\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput };\n\n","/* eslint no-eval: 0 */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Divider from '@material-ui/core/Divider';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport Settings from '../Settings';\nimport Buttonbar from '../Buttonbar';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  root: {\n    width: \"100%\",\n  },\n  title: {\n    margin: '0 ' + theme.spacing.unit + 'px',\n    flex: 1,\n    '&:hover': {\n      cursor: \"pointer\",\n    },\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n    display: \"flex\",\n    \"flexFlow\": \"row nowrap\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: \"100%\",\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  mobileButtons: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n  },\n  scrollButtons: {\n    flex: '0 0 24px',\n    padding: 0,\n    alignSelf: \"center\",\n  },\n  emptyText: {\n    textAlign: \"center\",\n  },\n  buttonBar: {\n    justifyContent: \"space-evenly\",\n  },\n  sidebarButton: {\n    minWidth: 24,\n    padding: theme.spacing.unit,\n  },\n  backup: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n  },\n  activity: {\n    backgroundColor: theme.palette.background.paper,\n//    '&:hover': {\n    cursor: \"pointer\",\n//    },\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count : 0;\n  \n  if (count && count !== \"\") {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon className={props.children}>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon className={props.children}>{props.children}</Icon>);\n};\n\n\nfunction BadgeWrapper(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        {props.children}\n      </Badge>\n    );\n  }\n  return props.children;\n};\n\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      url: props.url,\n      taskbar: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n      backupAnchor: null,\n      activity: false,\n      link: \"\",\n      preview: \"\",\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.backupname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    this.activity = React.createRef();\n    \n    window.client.react.taskbar = this;\n  }\n  \n  showActivity = (link, preview) => {\n    const { activitySize } = window.client.settings;\n    var text = preview.slice(0, activitySize);\n    if (preview.length > activitySize) {\n      text += \"...\";\n    }\n\n    this.setState({ activity: true, link, preview: text });\n  };\n  \n  hideActivity = () => {\n    this.setState({ activity: false, link: \"\", preview: \"\" });\n  };\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = (title, url) => {\n    this.setState({ title, url });\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  // wrapper that scrolls the output\n  scrollIfNeeded() {\n    window.client.output.scrollDown();\n  }\n\n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    var scroll = false;\n    \n    if (taskbar.length < 1) {\n      if (window.client.output.nearBottom(window.client.scrollThreshold)) {\n        scroll = true;\n      }\n    }\n    \n    task.count = 0;\n    taskbar.push(task);\n    this.setState({ taskbar });\n    \n    if (scroll) {\n      clearTimeout(this.scrollIfNeeded);\n      setTimeout(this.scrollIfNeeded, 1000);\n    }\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  toggleSidebar = () => {\n    const client = window.client;\n    \n    const toggle = !client.settings.sidebarOpen;\n    client.changeSetting('sidebarOpen', toggle);\n    this.setState({ sidebarOpen: toggle });\n    client.saveSettings();\n    client.react.portal.forceUpdate();\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event ? event.currentTarget : null });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n\n  openConfigure = () => {\n    window.client.addPanel(\"Configure\", { icon: 'build' });\n  };\n  \n  previewUpload = () => {\n    window.client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.file = null;\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  showBackup = event => {\n    this.backupname = null;\n    this.closeMenu();\n    this.setState({ backupAnchor: event.currentTarget });\n  };\n  \n  closeBackup = () => {\n    this.setState({ backupAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeBackup = event => {\n    this.backupname = event.target.value;\n  };\n  \n  saveBackup = event => {\n    event.preventDefault();\n    \n    if (!this.backupname || !(this.backupname.length > 0)) return;\n    \n    window.client.saveBackup(this.backupname+\".txt\");\n    \n    this.closeBackup();\n  };\n  \n  previewBackup = () => {\n    const client = window.client;\n    client.addPanel(\"Backup\", { icon: 'save' });\n\n    if (this.file && this.file.length > 0) {\n      client.react.backup.setText(this.file);\n    } else {\n      client.react.backup.setText(client.localStorageToText(2));\n    }\n    \n    this.file = null;\n    \n    this.closeBackup();\n  };\n  \n  handleBackupFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewBackup();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleBackupURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewBackup();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n  \n  pushButton = button => event => {\n    if (button && button.text && button.text !== \"\") {\n      if (button.javascript) {\n        window.client.execActionScript(button.text, event);\n      } else {\n        window.client.sendText(button.text);\n      }\n    }\n  };\n  \n  showCount = button => {\n    if (button && button.count && button.count !== \"\") {\n      try {\n        var val = eval(button.count);\n        if (val) {\n          return val;\n        }\n      } catch (e) {\n        window.client.settings.debugActions && console.log(\"Unable to execute button count expression:\", e);\n      }\n    }\n    \n    return 0;\n  };\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n    window.client.unwatchState(this);\n  }\n\n  openMudURL() {\n    if (this.state.url) {\n      var w = window.open(this.state.url, \"_blank\");\n      w.opener = null;\n      w.location = \"\";\n    }\n  }\n  \n  render() {\n    const client = window.client;\n    const input = client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, historyAnchor, backupAnchor, preview,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor, link, activity } = this.state;\n    const { sidebarOpen, sidebarAnchor, mobileHideTaskbar, activityReposition,\n            activityDelay, mobileButtonbar } = client.settings;\n    \n    const buttons = client.buttons;\n\n    var rev = input && Boolean(historyAnchor) ? input.history.slice().reverse() : [];\n\n    var activityPosition = client.mobile ? \"top\" : \"bottom\";\n    if (activityReposition) {\n      activityPosition = client.mobile ? \"bottom\" : \"top\";\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar className={classes.root} position=\"static\" onClick={() => client.focus()}>\n          <Toolbar disableGutters={!this.state.open}>\n            <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n              <Button className={classes.sidebarButton} aria-label=\"open-sidebar\" onClick={this.toggleSidebar}>\n                {sidebarAnchor === \"left\" ? (\n                  sidebarOpen ? <ChevronLeftIcon /> : <ChevronRightIcon />\n                ) : (\n                  sidebarOpen ? <ChevronRightIcon /> : <ChevronLeftIcon />\n                )}\n              </Button>\n            </Tooltip>\n            \n            <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title} onClick={this.openMudURL}>\n              {title}\n            </Typography>\n            \n            <div className={classes.sectionDesktop}>\n              <div className={classes.flex}></div>\n              {taskbar.map((task,i) => (\n                <Tooltip key={i} title={task.headertitle.innerText}>\n                  <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n                    <BadgeWrapper count={() => task.count}>\n                      <Icon className={classNames(classes.taskicon, task.options.icon)}>{task.options.icon}</Icon>\n                      {!client.mobile && task.headertitle.innerText}\n                    </BadgeWrapper>\n                  </Button>\n                </Tooltip>\n              ))}\n              <div className={classes.tasksep}></div>\n              {!mobileButtonbar && buttons.map((button,i) => !button.disabled && (\n                <Tooltip key={i} title={button.tooltip}>\n                  <Button aria-label={button.name} onClick={this.pushButton(button)}>\n                    <BadgeIcon count={this.showCount(button)}>\n                      {button.icon}\n                    </BadgeIcon>\n                  </Button>\n                </Tooltip>\n              ))}\n            </div>\n            \n            <Tooltip title=\"Client utilities...\">\n              <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n                <MenuIcon />\n              </Button>\n            </Tooltip>\n            \n            <SwipeableDrawer\n              variant=\"temporary\"\n              anchor=\"right\"\n              open={open}\n              onClose={this.closeDrawer}\n              onOpen={this.openDrawer}\n              \n            >\n              <Settings closeDrawer={this.closeDrawer} />\n            </SwipeableDrawer>\n\n            <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n              <form onSubmit={this.searchHelp}>\n                <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"off\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n              </form>\n              <Button fullWidth onClick={this.searchHelp}>\n                Get Help\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n              <form onSubmit={this.saveLog}>\n                <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                  onChange={this.typeLog} autoFocus\n                  InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n                />\n              </form>\n              <Button fullWidth onClick={this.saveLog}>\n                Save Log\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n              <form onSubmit={this.handleURL} className={classes.padded}>\n                <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n              </form>\n              <Button onClick={this.handleURL}>\n                Upload URL\n              </Button>\n              <input\n                accept=\"text/plain\"\n                className={classes.fileinput}\n                id=\"file.upload\"\n                type=\"file\"\n                onChange={this.handleFile}\n              />\n              <label htmlFor=\"file.upload\">\n                <Button component=\"span\">\n                  Choose File\n                </Button>\n              </label>\n              <Button onClick={this.previewUpload}>\n                Edit Commands\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.backup\" className={classes.backup} anchorEl={backupAnchor} open={Boolean(backupAnchor)} onClose={this.closeBackup}>\n              <form onSubmit={this.saveBackup} className={classNames(classes.padded, classes.backup)}>\n                <TextField label=\"File Name\" variant=\"outlined\" onChange={this.typeBackup} autoFocus\n                  InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n                />\n                <Button className={classes.flex} onClick={this.saveBackup}>\n                  Backup To File\n                </Button>\n              </form>\n              <Divider variant=\"fullWidth\" />\n              <form onSubmit={this.handleBackupURL} className={classes.padded}>\n                <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} />\n              </form>\n              <Button onClick={this.handleBackupURL}>\n                Restore URL\n              </Button>\n              <input\n                accept=\"text/plain\"\n                className={classes.fileinput}\n                id=\"file.backup\"\n                type=\"file\"\n                onChange={this.handleBackupFile}\n              />\n              <label htmlFor=\"file.backup\">\n                <Button component=\"span\">\n                  Restore File\n                </Button>\n              </label>\n              <Button onClick={this.previewBackup}>\n                Edit Settings\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n              <List className={classes.historyPopover}>\n                {rev.map((cmd, i) => (\n                  <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                    <ListItemText primary={cmd} />\n                  </ListItem>\n                ))}\n              </List>\n              <Button onClick={this.clearHistory}>\n                Clear History\n              </Button>\n            </Popover>\n            \n            <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n              <MenuItem onClick={this.closeMenu}>\n                <Tooltip title=\"Close menu.\">\n                  <ExpandLessIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openDrawer}>\n                <Tooltip title=\"Change settings.\">\n                  <SettingsIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openConfigure}>\n                <Tooltip title=\"Configure client.\">\n                  <BuildIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n                <Tooltip title=\"Upload commands.\">\n                  <CloudUploadIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n                <Tooltip title=\"Download display log.\">\n                  <CloudDownloadIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={backupAnchor ? 'taskbar.backup' : null} aria-label=\"open-backup\" aria-haspopup=\"true\" onClick={this.showBackup}>\n                <Tooltip title=\"Backup & restore settings.\">\n                  <SaveIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n                <Tooltip title=\"Show command history.\">\n                  <KeyboardIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.clearScreen}>\n                <Tooltip title=\"Clear screen.\">\n                  <BackspaceIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.reconnect}>\n                <Tooltip title=\"Reconnect.\">\n                  <WifiIcon />\n                </Tooltip>\n              </MenuItem>            \n            </Menu>\n\n            <div className={classes.tasksep}></div>\n          </Toolbar>\n        </AppBar>\n        \n        {window.client.mobile && !mobileButtonbar && (\n          <Buttonbar />\n        )}\n        \n        {(!mobileHideTaskbar || taskbar.length > 0) && (\n          <div className={classes.sectionMobile}>\n            <AppBar position=\"relative\">\n              <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n                {taskbar.length > 0 && taskbar.map((task,i) => (\n                  <Tooltip key={i} title={task.headertitle.innerText}>\n                    <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                      aria-label=\"open-task\"\n                      label={(\n                        <span>\n                          <BadgeWrapper count={() => task.count}>\n                            <Icon className={classNames(classes.taskicon, task.options.icon)}>{task.options.icon}</Icon>\n                          </BadgeWrapper>\n                          {task.headertitle.innerText}\n                        </span>\n                      )}\n                      onClick={() => this.popTask(task)}\n                    />\n                  </Tooltip>\n                ))}\n              </Tabs>\n            </AppBar>\n          </div>\n        )}\n        <Snackbar\n          anchorOrigin={{ vertical: activityPosition, horizontal: \"center\" }}\n          open={activity}\n          autoHideDuration={activityDelay * 1000}\n          onClose={this.hideActivity}\n          onClick={() => { client.focusPanel(link); this.hideActivity(); }}\n        >\n          <SnackbarContent\n            className={classes.activity}\n            aria-describedby=\"activity\"\n            message={\n              <Typography id=\"activity\">\n                <span className={classes.noHover} ref={this.activity}>\n                  {preview}\n                </span>\n              </Typography>\n            }\n          />\n        </Snackbar>\n      </div>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  title: PropTypes.string,\n  url: PropTypes.string,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\n//import AceEditor from 'react-ace';\n//import 'brace/mode/mushcode';\n//import 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body: this.editor.current.value });\n  };\n  \n  onResize = () => {\n    //this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <textarea className={classNames(classes.bodytext, font, ansiFG, ansiBG)}\n            ref={this.editor}\n            width=\"100%\"\n            value={body}\n            onChange={this.changeText}\n          />\n{/*\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n*/}\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth classes={{ label: classes.button }} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n              Send\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth classes={{ label: classes.button }} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n              Cancel\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//import AceEditor from 'react-ace';\n//import 'brace/mode/mushcode';\n//import 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBPost extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      to: props.to ? props.to : \"\",\n      error: null,\n      board: null,\n      boardlist: [],\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  getBoard(board) {\n    const boardlist = this.state.boardlist;\n    for (let i=0; i < boardlist.length; i++) {\n      if ((boardlist[i].name === board) || (boardlist[i].id === board)) {\n        return boardlist[i];\n      }\n    }\n\n    return null;\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    this.setState({ to, subject, body });\n  }\n  \n  sendBBPost = () => {\n    const { to, board, subject, body } = this.state;\n    var realsub = subject;\n    \n    var bb = board;\n    if (!bb) {\n      bb = this.getBoard(to);\n    }\n    \n    if (!bb) {\n      alert(\"You must choose a BBoard.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20) + \"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    window.client.sendCommand(\"+bbpost \"+bb.id+\"/\"+realsub+\"=\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"BBPost\");\n  };\n  \n  componentDidMount() {\n    window.client.react.bbpost = this;\n    \n    const { panel } = this.props;\n    const { to } = this.state;\n    \n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    window.client.execJSON('jsonapi(boardlist)', (obj) => {\n      if (obj.boardlist.length > 0) {\n        this.setState({ boardlist: obj.boardlist });\n      }\n\n      if (to && to.length > 0) {\n        this.setState({ board: this.getBoard(to) });\n      }\n    });\n    \n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.bbpost = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body: this.editor.current.value });\n  };\n  \n  onResize = () => {\n    //this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { to, board, subject, body } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n    \n    var bb = board;\n    if (!bb) {\n      bb = this.getBoard(to);\n    }\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={\n/*\n            <TextField label=\"Board\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n*/\n            <Select\n              displayEmpty\n              autoWidth\n              value={bb || \"\"}\n              onChange={(e) => this.setState({ board: e.target.value })}\n            >\n              <MenuItem value=\"\" disabled>Choose a BBoard</MenuItem>\n              {this.state.boardlist.map((b,i) => (\n                <MenuItem key={i} value={b}>{b.name}</MenuItem>\n              ))}\n            </Select>\n          }\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <textarea className={classNames(classes.bodytext, font, ansiFG, ansiBG)}\n            ref={this.editor}\n            width=\"100%\"\n            value={body}\n            onChange={this.changeText}\n          />\n{/*\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n*/}\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth classes={{ label: classes.button }} onClick={this.sendBBPost}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n              Send\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth classes={{ label: classes.button }} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n              Cancel\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBPost.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBPost);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport UndoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={!window.client.mobile}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} classes={{ label: classes.block }} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                  Upload\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} classes={{ label: classes.block }} onClick={this.resetText}>\n                  <UndoIcon />\n                  Reset\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} classes={{ label: classes.block }} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\n//import TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/json';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '16pt',\n    },\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Backup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: \"\",\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.backup = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.backup = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  changeText = (text) => {\n    this.setState({ text });\n  };\n  \n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  saveBackup = () => {\n    window.client.saveText(\"localStorage.txt\", this.state.text);\n    window.client.closePanel(\"Backup\");\n  };\n  \n  saveLocalStorage = () => {\n    if (window.client.restoreLocalStorage(this.state.text)) {\n      window.client.closePanel(\"Backup\");\n    }\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          wrapEnabled={!window.client.mobile}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <Tooltip title=\"Save backup to file.\">\n              <Button className={classes.stretch} classes={{ label: classes.block }} onClick={this.saveBackup}>\n                <CloudDownloadIcon />\n                Backup{!window.client.mobile && \" to File\"}\n              </Button>\n            </Tooltip>\n            <Tooltip title=\"Save local storage.\">\n              <Button className={classes.stretch} classes={{ label: classes.block }} onClick={this.saveLocalStorage}>\n                <SaveIcon />\n                Commit{!window.client.mobile && \" Changes\"}\n              </Button>\n            </Tooltip>\n            <Tooltip title=\"Restore original text.\">\n              <Button className={classes.stretch} classes={{ label: classes.block }} onClick={this.resetText}>\n                <UndoIcon />\n                Undo{!window.client.mobile && \" Changes\"}\n              </Button>\n            </Tooltip>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nBackup.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Backup);\n\n\t","\n\nclass Templates {\n  constructor() {\n    // blank triggers, timers, macros, and keybindings\n    this.empty = {\n      buttons: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        icon: \"icon-portal\",\n        count: \"0\",\n        tooltip: \"\",\n        \n      },\n      triggers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n        suppress: false,\n      },\n      timers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        disabled: true,\n        delay: 0,\n        repeat: false,\n        times: 0,\n      },\n      macros: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n      },\n      keys: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        code: 0,\n        ctrl: false,\n        alt: false,\n        shift: false,\n        prevent: true,\n        release: true,\n      },\n      css: {\n        name: \"\",\n        text: \"\",\n      },\n      scripts: {\n        name: \"\",\n        text: \"// Insert JavaScript below.\\n\",\n      },\n    };\n    \n    this.saved = {\n      buttons: [\n        {\n          name: \"look\",\n          text: \"look\",\n          javascript: false,\n          icon: \"remove_red_eye\",\n          count: \"\",\n          tooltip: \"Look around.\",\n        },\n        {\n          name: \"inventory\",\n          text: \"inventory\",\n          javascript: false,\n          icon: \"business_center\",\n          count: \"\",\n          tooltip: \"What am I carrying?\",\n        },\n        {\n          name: \"who\",\n          text: \"who\",\n          javascript: false,\n          icon: \"people\",\n          count: \"\",\n          tooltip: \"Who's online?\",\n        },\n        {\n          name: \"Mailbox\",\n          text: \"SendAPI(\\\"maillist\\\");\",\n          javascript: true,\n          icon: \"mail\",\n          count: 'client.watchState(this, \"unreadmail\")',\n          tooltip: \"@mail Inbox\",\n        },\n        {\n          name: \"BBoard\",\n          text: \"SendAPI(\\\"boardlist\\\");\",\n          javascript: true,\n          icon: \"forum\",\n          count: 'client.watchState(this, \"unreadbb\")',\n          tooltip: \"Bulletin Boards\",\n        },\n        {\n          name: \"help\",\n          text: \"client.react.taskbar.showHelp(event);\",\n          javascript: true,\n          icon: \"search\",\n          count: \"\",\n          tooltip: \"Search help files\",\n        },\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          icon: \"widgets\",\n          count: \"\",\n          tooltip: \"\",\n        },\n*/        \n      ],\n      triggers: [\n        {\n          name: \"PerChannel\",\n          text: \"Window(\\\"%1\\\").SaveHistory().Prefix(\\\"+%1 \\\").AutoHide().ShowActivity().Append(\\\"%0\\\");\",\n          javascript: true,\n          pattern: \"<*> *\",\n          regex: false,\n          suppress: true,\n        },\n        {\n          name: \"AllChannels\",\n          text: \"Window(\\\"Channels\\\").SaveHistory().ShowActivity().Append(\\\"%0\\\");\",\n          javascript: true,\n          pattern: \"<*> *\",\n          regex: false,\n          suppress: true,\n        },\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          pattern: \"\",\n          regex: false,\n          suppress: false,\n        }\n*/\n      ],\n      timers: [\n        {\n          name: \"EveryMinute\",\n          text: \"th DING!\",\n          javascript: false,\n          disabled: true,\n          delay: 60,\n          repeat: true,\n          times: -1,\n        },\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          disabled: true,\n          delay: 0,\n          repeat: false,\n          times: 0,\n        },\n*/\n      ],\n      macros: [\n        {\n          name: \"OpenWindow\",\n          text: \"Window(\\\"%2\\\").SaveHistory().Prefix(\\\"+%2 \\\").ShowActivity().Focus();\",\n          javascript: true,\n          pattern: \"/win(dow)? (.*)\",\n          regex: true,\n        },\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          pattern: \"\",\n          regex: false,\n        },\n*/\n      ],\n      keys: [\n        {\n          name: \"ScrollToBottom\",\n          text: \"Output.scrollDown();\",\n          javascript: true,\n          code: 34,\n          ctrl: false,\n          alt: false,\n          shift: true,\n          prevent: true,\n          release: true,\n        },\n        {\n          name: \"RecallPrevious\",\n          text: \"Input.cycleBackward();\",\n          javascript: true,\n          code: 38,\n          ctrl: false,\n          alt: false,\n          shift: true,\n          prevent: true,\n          release: true,\n        },\n        {\n          name: \"RecallNext\",\n          text: \"Input.cycleForward();\",\n          javascript: true,\n          code: 40,\n          ctrl: false,\n          alt: false,\n          shift: true,\n          prevent: true,\n          release: true,\n        },\n/*\n        {\n          name: \"\",\n          text: \"\",\n          javascript: false,\n          code: 0,\n          ctrl: false,\n          alt: false,\n          shift: false,\n          prevent: true,\n          release: true,\n        },\n*/\n      ],\n      css: [\n/*\n        {\n          name: \"\",\n          text: \"\",\n        },\n*/\n      ],\n      scripts: [\n/*\n        {\n          name: \"\",\n          text: \"// Insert JavaScript below.\\n\",\n        },\n*/\n      ],\n    };\n  }\n\n}\n\n\n\nexport default Templates;\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/mode/javascript';\nimport 'brace/mode/css';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    overflow: \"hidden\",\n  },\n  form: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    flexFlow: \"column nowrap\", \n  },\n  container: {\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  name: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n  },\n  flow: {\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  top: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n    [theme.breakpoints.down('sm')]: {\n      flex: 1,\n    },\n  },\n  editor: {\n    flex: 1,\n    margin: theme.spacing.unit+\"px 0\",\n    [theme.breakpoints.down('sm')]: {\n      margin: 0,\n      fontSize: \"16pt\",\n    },\n  },\n  bottom: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    width: \"100%\",\n  },\n  middle: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    flex: 1,\n    alignItems: \"center\",\n  },\n  align: {\n    width: \"100%\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n  },\n  flex: {\n    flex: 1,\n    minWidth: \"10em\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  mobileOnly: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  desktopOnly: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass FormEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const { list, listName, selected, template } = props;\n\n    const empty = window.client.templates.empty[listName];\n    \n    this.state = {\n      list: list,\n      item: Object.assign({}, list && selected > -1 ? list[selected] : (template || empty)),\n      selected: selected,\n      status: \"\",\n      error: false,\n      javascript: true,\n      needsToResize: false,\n    };\n    \n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    this.props.panel.options.resizeit.resize = null;\n    clearTimeout(this.clearStatus);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { list, listName, selected, template } = props;\n    \n    const empty = window.client.templates.empty[listName];\n    \n    var newState = {};\n    \n    if (list !== state.list) {\n      newState.list = list;\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (selected !== state.selected) {\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (template !== state.template) {\n      newState.template = template;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : (template || empty));\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    return null;\n  }\n  \n  defaultText() {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const name = item.name;\n    \n    if (!immutable) return \"\";\n    \n    if (list && selected > -1 && list[selected].text !== \"\") {\n      return list[selected].text.slice();\n    }\n    \n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          item.name = name;\n          item.text = req.responseText;\n          this.setState({ item, list, selected });\n        } else {\n          alert(\"Unable to download file! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", \"./\" + name);\n    req.send();\n    \n    return window.client.templates.empty[listName].text.slice();\n  }\n\n  setStatus = (error, status) => {\n    this.setState({ error, status });\n    clearTimeout(this.clearStatus);\n    setTimeout(this.clearStatus, 3000);\n  };\n\n  clearStatus = () => {\n    this.setState({ error: false, status: \"\" });\n    this.onResize();\n  };\n  \n  handleChange = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.value;\n    this.setState({ item });\n  };\n  \n  handleNumber = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = parseInt(e.target.value);\n    this.setState({ item });\n  };\n  \n  handleSwitch = (key) => (e) => {\n    const { item } = this.state;\n    if (item.hasOwnProperty(key)) {\n      item[key] = e.target.checked;\n      this.setState({ item });\n    } else {\n      this.setState({ [key]: e.target.checked });\n    }\n  };\n  \n  changeText = (text) => {\n    const { item } = this.state;\n    item.text = text;\n    this.setState({ item });\n  };\n\n  save = () => {\n    const { list, listName, Form } = this.props;\n    const css = listName === \"CSS\";\n  \n    if (Form && Form.save) {\n      Form.save();\n    } else if (css) {\n      window.client.saveCSS();\n    } else {\n      window.client.saveLocalStorage(list, listName);\n    }\n  };\n\n  onResize = () => {\n    this.setState({ needsToResize: false });\n    this.editor.current && this.editor.current.editor.resize();\n  };\n  \n  onSubmit = (e) => {\n    const { list, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n\n    e.preventDefault();\n    \n    if (item.name === \"\") {\n      this.setStatus(true, \"Name must not be blank.\" );\n      return;\n    }\n    \n    // filter unicode punctuation\n    item.name = client.filterUnicode(item.name);\n    item.text = client.filterUnicode(item.text);\n    \n    if (item.pattern) {\n      item.pattern = client.filterUnicode(item.pattern);\n    }\n    \n    if (item.tooltip) {\n      item.tooltip = client.filterUnicode(item.tooltip);\n    }\n    \n    if (item.icon) {\n      item.icon = client.filterUnicode(item.icon);\n    }\n    \n    if (item.count) {\n      item.count = client.filterUnicode(item.count);\n    }\n\n    var match = list.map((item) => item.name).indexOf(item.name);\n    if (match > -1 && match !== selected) {\n      this.setStatus(true, \"Name already saved, choose another.\");\n      return;\n    }\n    \n    if (immutable && selected === -1) {\n      this.setStatus(true, \"You may only edit existing items.\");\n      return;\n    }\n    \n    this.setStatus(false, \"Saved.\" );\n    \n    if (selected > -1) {\n      list[selected] = Object.assign({}, item);\n      client.react.configure.setState({ selected: selected });\n    } else {\n      list.push(item);\n      client.react.configure.setState({ selected: list.length-1 });\n    }\n    \n    this.save();\n    \n  };\n  \n  onDelete = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const client = window.client;\n    \n    if (window.confirm(\"Do you really want to delete that?\") && list && selected > -1) {\n      if (immutable) {\n        let name = list[selected].name;\n        list[selected] = Object.assign({}, client.templates.empty[listName]);\n        list[selected].name = name;\n        this.setState({ item: Object.assign({}, list[selected]) });\n      } else {\n        list.splice(selected, 1);\n        client.react.configure.setState({ selected: -1 });\n      }\n      \n      this.setStatus(false, \"Deleted.\" );\n      \n      this.save();\n    }\n  };\n  \n  onReset = () => {\n    const { list, listName, selected, immutable, template } = this.props;\n    const { item } = this.state;\n    var empty = Object.assign({}, window.client.templates.empty[listName]);\n    \n    if (list && selected > -1) {\n      if (immutable) {\n        empty.name = list[selected].name;\n        if (item.text === \"\") {\n          empty.text = this.defaultText();\n        } else {\n          empty.text = list[selected].text;\n        }\n      } else {\n        empty = list[selected];\n      }\n    }\n    \n    this.setState({\n      item: Object.assign({}, template || empty),\n    });\n    \n    this.setStatus(false, \"Reset.\");\n  };\n  \n  componentDidUpdate() {\n    if (this.state.needsToResize) {\n      this.onResize();\n    }\n  }\n  \n  render() {\n    const { classes, selected, Form, immutable } = this.props;\n    const { item } = this.state;\n    \n    var ltype = \"MushCode\";\n    var rtype = \"JavaScript\";\n    if (!Form) {\n      ltype = \"Text\";\n      if (item.name.endsWith('.css')) {\n        rtype = \"CSS\";\n      }\n    }\n    \n    var mode = this.state.javascript;\n    if (item.hasOwnProperty('javascript')) {\n      mode = item.javascript;\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <form onSubmit={this.onSubmit} className={classes.form}>\n          <div className={classes.container}>\n            <div className={classes.top}>\n              <div className={classes.name}>\n                <TextField label=\"Name\" className={classes.flex} value={item.name} onChange={this.handleChange('name')} disabled={immutable} InputProps={{ classes: { input: classes.inputBase }, }} />\n                <span className={classes.switchText}>\n                  <Typography>{ltype}</Typography>\n                  <Switch checked={mode}\n                    classes={{ switchBase: classes.switchBase }}\n                    color=\"default\"\n                    onChange={this.handleSwitch('javascript')}\n                  />\n                  <Typography>{rtype}</Typography>\n                </span>\n              </div>\n              {Form && (<Form item={item} handleNumber={this.handleNumber} handleChange={this.handleChange} handleSwitch={this.handleSwitch} />)}\n            </div>\n            \n            <div className={classes.editor}>\n              <AceEditor\n                width=\"100%\"\n                height=\"100%\"\n                minHeight=\"4em\"\n                minWidth=\"10em\"\n                className={classes.editor}\n                ref={this.editor}\n                mode={mode ? rtype.toLowerCase() : ltype.toLowerCase()}\n                theme=\"tomorrow_night_bright\"\n                value={item.text}\n                onChange={this.changeText}\n                wrapEnabled={!window.client.mobile}\n                highlightActiveLine={false}\n                editorProps={{ $blockScrolling: Infinity }}\n              />\n            </div>\n          </div>\n          \n          <div className={classes.bottom}>\n            <Button className={classes.mobileOnly} classes={{ label: classes.block }} onClick={() => window.client.react.configure.setState({ edit: false, selected: -1 })}>\n              <CloseIcon />Close\n            </Button>\n            <Button onClick={this.onDelete} classes={{ label: classes.block }} disabled={selected === -1}>\n              <DeleteIcon />Delete\n            </Button>\n            <span className={classes.middle}>\n{/*\n              <Typography className={classes.align} color={error ? \"error\" : \"default\"}>\n                {status !== \"\" ? status : (selected ? \"Save.\" : \"Create.\")}\n              </Typography>\n*/}\n            </span>\n            <Button onClick={this.onSubmit} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              <SaveIcon />Save\n            </Button>\n            <Button onClick={this.onReset} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              {immutable && item.text === \"\" ? (<CloudDownloadIcon />) : (<UndoIcon />)}\n              {immutable && item.text === \"\" ? \"Source\" : \"Undo\"}\n            </Button>\n          </div>\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nFormEditor.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n  list: PropTypes.array.isRequired,\n  listName: PropTypes.string.isRequired,\n  selected: PropTypes.number.isRequired,\n  Form: PropTypes.func,\n  immutable: PropTypes.bool,\n  template: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(FormEditor);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TriggerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  static save() {\n    window.client.saveTriggers();\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} classes={{ switchBase: classes.switchBase }} />\n            <Typography>RegExp</Typography>\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Suppress terminal output?</Typography>\n            <Switch checked={item.suppress} onChange={handleSwitch('suppress')} classes={{ switchBase: classes.switchBase }} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nTriggerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TriggerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TimerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  static save() {\n    window.client.saveTimers();\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleNumber, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField type=\"number\" label=\"Delay seconds\" className={classes.flex} value={String(item.delay)} onChange={handleNumber('delay')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <span className={classes.switchText}>\n          <Typography>Repeat this timer?</Typography>\n          <Switch checked={item.repeat} onChange={handleSwitch('repeat')} classes={{ switchBase: classes.switchBase }} />\n        </span>\n        <TextField type=\"number\" disabled={!item.repeat} label=\"Number of times\" className={classes.flex} value={String(item.times)} onChange={handleNumber('times')} inputProps={{ classes: { input: classes.inputBase } }} />\n      </div>\n    );\n  }\n}\n\nTimerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TimerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MacroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  static save() {\n    window.client.saveMacros();\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} classes={{ switchBase: classes.switchBase }} />\n            <Typography>RegExp</Typography>\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nMacroForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MacroForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Switch from '@material-ui/core/Switch';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n  keyform: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n  },\n  button: {\n    flex: 1,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    minWidth: \"10em\",\n    padding: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass KeyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      capturing: false,\n    };\n    \n    this.keyform = React.createRef();\n  }\n  \n  static save() {\n    window.client.saveKeys();\n  }\n  \n  showKeyForm = () => {\n    this.setState({ capturing: true });\n    document.addEventListener(\"keyup\", this.captureKey, true);\n  };\n  \n  hideKeyForm = () => {\n    this.setState({ capturing: false });\n    document.removeEventListener(\"keyup\", this.captureKey);\n  };\n  \n  captureKey = (event) => {\n    var key = { code: (event.keyCode ? event.keyCode : event.which),\n                ctrl: event.ctrlKey,\n                shift: event.shiftKey,\n                alt: event.altKey };\n    \n    event.preventDefault();\n\n    if (this.state.capturing) {\n      this.props.item.code = key.code;\n      this.props.item.ctrl = key.ctrl;\n      this.props.item.alt = key.alt;\n      this.props.item.shift = key.shift;\n    }\n    \n    this.hideKeyForm();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n  \n  getKeyName = () => {\n    const { code } = this.props.item;    \n\n    if (code === 0) {\n      return \"Capture Key\";\n    }\n    \n    var meta = \"Meta\";\n    var platform = window.navigator.platform,\n        macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K', 'iPhone', 'iPad', 'iPod'],\n        windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n\n    if (macosPlatforms.indexOf(platform) !== -1) {\n      meta = \"Command\";\n    } else if (windowsPlatforms.indexOf(platform) !== -1) {\n      meta = 'Windows';\n    }\n\n    const keyCodeToChar = {8:\"Backspace\",9:\"Tab\",13:\"Enter\",16:\"Shift\",17:\"Ctrl\",18:\"Alt\",19:\"Pause/Break\",20:\"Caps Lock\",27:\"Esc\",32:\"Space\",33:\"Page Up\",34:\"Page Down\",35:\"End\",36:\"Home\",37:\"Left\",38:\"Up\",39:\"Right\",40:\"Down\",45:\"Insert\",46:\"Delete\",48:\"0\",49:\"1\",50:\"2\",51:\"3\",52:\"4\",53:\"5\",54:\"6\",55:\"7\",56:\"8\",57:\"9\",65:\"A\",66:\"B\",67:\"C\",68:\"D\",69:\"E\",70:\"F\",71:\"G\",72:\"H\",73:\"I\",74:\"J\",75:\"K\",76:\"L\",77:\"M\",78:\"N\",79:\"O\",80:\"P\",81:\"Q\",82:\"R\",83:\"S\",84:\"T\",85:\"U\",86:\"V\",87:\"W\",88:\"X\",89:\"Y\",90:\"Z\",91:meta,93:\"Right Click\",96:\"Numpad 0\",97:\"Numpad 1\",98:\"Numpad 2\",99:\"Numpad 3\",100:\"Numpad 4\",101:\"Numpad 5\",102:\"Numpad 6\",103:\"Numpad 7\",104:\"Numpad 8\",105:\"Numpad 9\",106:\"Numpad *\",107:\"Numpad +\",109:\"Numpad -\",110:\"Numpad .\",111:\"Numpad /\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"Num Lock\",145:\"Scroll Lock\",182:\"My Computer\",183:\"My Calculator\",186:\";\",187:\"=\",188:\",\",189:\"-\",190:\".\",191:\"/\",192:\"`\",219:\"[\",220:\"\\\\\",221:\"]\",222:\"'\"};\n    //const keyCharToCode = {\"Backspace\":8,\"Tab\":9,\"Enter\":13,\"Shift\":16,\"Ctrl\":17,\"Alt\":18,\"Pause/Break\":19,\"Caps Lock\":20,\"Esc\":27,\"Space\":32,\"Page Up\":33,\"Page Down\":34,\"End\":35,\"Home\":36,\"Left\":37,\"Up\":38,\"Right\":39,\"Down\":40,\"Insert\":45,\"Delete\":46,\"0\":48,\"1\":49,\"2\":50,\"3\":51,\"4\":52,\"5\":53,\"6\":54,\"7\":55,\"8\":56,\"9\":57,\"A\":65,\"B\":66,\"C\":67,\"D\":68,\"E\":69,\"F\":70,\"G\":71,\"H\":72,\"I\":73,\"J\":74,\"K\":75,\"L\":76,\"M\":77,\"N\":78,\"O\":79,\"P\":80,\"Q\":81,\"R\":82,\"S\":83,\"T\":84,\"U\":85,\"V\":86,\"W\":87,\"X\":88,\"Y\":89,\"Z\":90,meta:91,\"Right Click\":93,\"Numpad 0\":96,\"Numpad 1\":97,\"Numpad 2\":98,\"Numpad 3\":99,\"Numpad 4\":100,\"Numpad 5\":101,\"Numpad 6\":102,\"Numpad 7\":103,\"Numpad 8\":104,\"Numpad 9\":105,\"Numpad *\":106,\"Numpad +\":107,\"Numpad -\":109,\"Numpad .\":110,\"Numpad /\":111,\"F1\":112,\"F2\":113,\"F3\":114,\"F4\":115,\"F5\":116,\"F6\":117,\"F7\":118,\"F8\":119,\"F9\":120,\"F10\":121,\"F11\":122,\"F12\":123,\"Num Lock\":144,\"Scroll Lock\":145,\"My Computer\":182,\"My Calculator\":183,\";\":186,\"=\":187,\",\":188,\"-\":189,\".\":190,\"/\":191,\"`\":192,\"[\":219,\"\\\\\":220,\"]\":221,\"'\":222};\n    \n    if (keyCodeToChar.hasOwnProperty(code)) {\n      return keyCodeToChar[code] + \" (code \" + code + \")\";\n    }\n    \n    return code;\n  };\n\n  render() {\n    const { classes, item, handleSwitch } = this.props;\n    const { capturing } = this.state;\n    \n    const keyName = this.getKeyName();\n\n    return (\n      <div className={classes.frame}>\n        <span className={classes.button}>\n          <Button className={classes.flex} variant=\"contained\" onClick={this.showKeyForm} color=\"primary\">\n            {keyName}\n          </Button>\n        </span>\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Ctrl</Typography>\n            <Checkbox checked={item.ctrl} onChange={handleSwitch('ctrl')} />\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Alt</Typography>\n            <Checkbox checked={item.alt} onChange={handleSwitch('alt')} />\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Shift</Typography>\n            <Checkbox checked={item.shift} onChange={handleSwitch('shift')} />\n          </span>\n        </div>\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Press</Typography>\n            <Switch checked={item.release} color=\"default\" onChange={handleSwitch('release')} classes={{ switchBase: classes.switchBase }} />\n            <Typography>Release</Typography>\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Prevent default event?</Typography>\n            <Switch checked={item.prevent} onChange={handleSwitch('prevent')} classes={{ switchBase: classes.switchBase }} />\n          </span>\n        </div>\n        <Dialog ref={this.keyform} open={capturing} className={classes.keyform} disableEscapeKeyDown onClose={this.hideKeyForm} aria-labelledby=\"keyform.title\">\n          <DialogTitle id=\"keyform.title\">Press key combination to capture.</DialogTitle>\n          <Button className={classes.flex} onClick={this.hideKeyForm}>\n            <CloseIcon />\n          </Button>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nKeyForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(KeyForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  inputBase: {\n    padding: 0.25*theme.spacing.unit,\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing.unit,\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ButtonForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  static save() {\n    window.client.saveButtons();\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  openIconList = () => {\n    var w = window.open(\"https://mushportal.com/icons.html\", \"_blank\");\n    w.opener = null;\n    w.location = \"\";\n  };\n\n  render() {\n    const { classes, item, handleChange } = this.props;\n    \n    const icon = item.icon.startsWith('icon-');\n    \n    return (\n      <div className={classes.frame}>\n        <Tooltip title=\"Use the name of any icon from Game-Icons.net or Google Material Icons.\">\n          <span>\n            <IconButton>\n              <Icon className={icon ? item.icon : null}>{!icon && item.icon}</Icon>\n            </IconButton>\n            <TextField label=\"Icon\" value={item.icon} onChange={handleChange('icon')} inputProps={{ classes: { input: classes.inputBase } }} />\n            <Button color=\"primary\" variant=\"contained\" onClick={this.openIconList}>\n              Icon list\n            </Button>\n          </span>\n        </Tooltip>\n\n        <TextField label=\"Badge Expression\" fullWidth value={item.count} onChange={handleChange('count')} inputProps={{ classes: { input: classes.inputBase } }} />\n        <TextField label=\"Tooltip\" fullWidth value={item.tooltip} onChange={handleChange('tooltip')} inputProps={{ classes: { input: classes.inputBase } }} />\n      </div>\n    );\n  }\n}\n\nButtonForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(ButtonForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Switch from '@material-ui/core/Switch';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\n//import KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\n\nimport FormEditor from './FormEditor';\nimport TriggerForm from './TriggerForm';\nimport TimerForm from './TimerForm';\nimport MacroForm from './MacroForm';\nimport KeyForm from './KeyForm';\nimport ButtonForm from './ButtonForm';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  container: {\n    padding: theme.spacing.unit,\n    flex: 1,\n    display: \"flex\",\n    \"flex-flow\": \"row wrap\",\n    [theme.breakpoints.up('md')]: {\n      padding: 3*theme.spacing.unit,\n    },\n  },\n  left: {\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n    marginRight: 0,\n    [theme.breakpoints.up('md')]: {\n      marginRight: 3*theme.spacing.unit,\n    }\n  },\n  right: {\n    position: \"relative\",\n    flex: 1,\n    height: \"100%\",\n    overflow: \"hidden\",\n  },\n  listText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  overflow: {\n    flex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  end: {\n    alignSelf: \"flex-end\",\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  leftMobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      height: \"100%\",\n      display: 'flex',\n      flexFlow: \"column nowrap\",\n      justifyContent: \"space-between\",\n    },\n  },\n  leftMobileOpen: {\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n    flexGrow: 1,\n    [theme.breakpoints.up('md')]: {\n      flexGrow: 0,\n    },\n  },\n  rightMobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      flex: 1,\n      height: \"100%\",\n      display: 'flex',\n      flexFlow: \"column nowrap\",\n      justifyContent: \"space-between\",\n    },\n  },\n  rightMobileOpen: {\n    flex: 1,\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n  },\n  scrollButtons: {\n    [theme.breakpoints.down('sm')]: {\n      flex: '0 0 24px',\n      padding: 0,\n      alignSelf: \"center\",\n    }\n  },\n  subHeader: {\n    width: \"100%\",\n    flex: 1,\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  arrowButton: {\n    flex: '0 0 24px',\n    padding: 0,\n    alignSelf: \"flex-end\",\n  },\n  switchBase: {\n    [theme.breakpoints.down('sm')]: {\n      height: \"24px\",\n    },\n  },\n  helpText: {\n    margin: theme.spacing.unit,\n  },\n});\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Configure extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const client = window.client;\n    \n    this.tabs = [\n      {\n        list: client.buttons,\n        listName: \"Buttons\",\n        Form: ButtonForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.triggers,\n        listName: \"Triggers\",\n        Form: TriggerForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.macros,\n        listName: \"Macros\",\n        Form: MacroForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.keys,\n        listName: \"Keys\",\n        Form: KeyForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.timers,\n        listName: \"Timers\",\n        Form: TimerForm,\n        immutable: false,\n        sortable: true,\n      },\n      {\n        list: client.css,\n        listName: \"CSS\",\n        Form: null,\n        immutable: true,\n        sortable: false,\n      },\n      {\n        list: client.scripts,\n        listName: \"Scripts\",\n        Form: null,\n        immutable: true,\n        sortable: false,\n      },\n    ];\n    \n    this.state = {\n      tab: 0,\n      edit: false,\n      selected: -1,\n      menuAnchor: null,\n      template: null,\n      helpText: null,\n      sortList: false,\n    };\n  }\n\n\n  ///////////////////////////////////////////////////////////////////\n\n\n  changeTab = (event, tab) => {\n    this.setState({ tab, selected: -1, edit: false, template: null });\n  };\n  \n  onSelect = (key) => (event) => {\n    this.setState({ selected: key, template: null });\n  };\n  \n  showTemplates = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  hideTemplates = () => {\n    this.setState({ menuAnchor: null });\n  };\n  \n  chooseTemplate = template => () => {\n    this.setState({ template, edit: true, selected: -1 });\n  };\n  \n  enableTimers = () => {\n    window.client.changeSetting('timersEnabled', !window.client.settings.timersEnabled);\n    this.forceUpdate();\n  };\n  \n  handleSwitch = (item) => (e) => {\n    item.disabled = !e.target.checked;\n    this.saveList();\n  };\n  \n  saveList = () => {\n    const tab = this.tabs[this.state.tab];\n    const css = tab.listName === \"CSS\";\n    \n    if (tab.Form && tab.Form.save) {\n      tab.Form.save();\n    } else if (css) {\n      window.client.saveCSS();\n    } else {\n      window.client.saveLocalStorage(tab.list, tab.listName);\n    }\n    \n    this.forceUpdate();\n  };\n  \n  toggleSort = (e) => {\n    this.setState({ sortList: !this.state.sortList });\n  };\n  \n  moveItemUp = (list, i) => {\n    if (i === 0) return;\n    \n    var tmp = list[i-1];\n    list[i-1] = list[i];\n    list[i] = tmp;\n    \n    if (i === this.state.selected) {\n      this.setState({ selected: i-1 });\n    }\n\n    this.saveList();\n  };\n  \n  moveItemDown = (list, i) => {\n    if (i === list.length-1) return;\n    \n    var tmp = list[i+1];\n    list[i+1] = list[i];\n    list[i] = tmp;\n    \n    if (i === this.state.selected) {\n      this.setState({ selected: i+1 });\n    } else if (i+1 === this.state.selected) {\n      this.setState({ selected: i });\n    }\n\n    this.saveList();\n  };\n  \n  componentDidMount() {\n    window.client.react.configure = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.configure = null;\n  }\n  \n  helpText(anchor) {\n    this.setState({ helpText: anchor });\n  }\n  \n  render() {\n    const { classes, panel } = this.props;\n    const { selected, edit, helpText, menuAnchor, template, sortList } = this.state;\n    \n    const tab = this.tabs[this.state.tab];\n    const smallName = tab.listName.toLowerCase();\n    const templates = window.client.templates.saved[smallName];\n    const isTimer = smallName === \"timers\";\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar position=\"static\">\n          <Tabs value={this.state.tab} scrollable scrollButtons=\"on\" onChange={this.changeTab} ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n            {this.tabs.map((t,i) => (<Tab key={i} label={t.listName} />))}\n          </Tabs>\n        </AppBar>\n        <Typography className={classes.container} component=\"div\">\n          <div className={edit || selected > -1 ? classes.leftMobileClose : classes.leftMobileOpen}>\n            <div className={classes.left}>\n              <div className={classes.overflow}>\n                <List disablePadding dense subheader={\n                  <ListSubheader disableGutters className={classes.subHeader}>\n                    {tab.listName}\n                    {isTimer && (\n                      <Switch checked={window.client.settings.timersEnabled} onChange={this.enableTimers} />\n                    )}\n                    <Tooltip title=\"Reorder list.\">\n                      <IconButton disabled={!tab.sortable} onClick={this.toggleSort}>\n                        {sortList ? (<ExpandLessIcon />) : (<ExpandMoreIcon />)}\n                      </IconButton>\n                    </Tooltip>\n                  </ListSubheader>\n                }>\n                  {tab.list.map((item, i) => (\n                    <ListItem key={i} dense button divider selected={selected === i} onClick={this.onSelect(i)} className={i % 2 === 0 ? classes.even : classes.odd}>\n                      <ListItemIcon className={classes.listNum}>\n                          <span>{i+1}</span>\n                      </ListItemIcon>\n                      <ListItemText className={classes.listText} primary={item.name} />\n                      {!tab.immutable && (\n                        <ListItemSecondaryAction>\n                          {sortList ? (\n                            <IconButton classes={{ root: classes.arrowButton }} disabled={i === tab.list.length-1} onClick={() => this.moveItemDown(tab.list, i)}>\n                              <KeyboardArrowDownIcon />\n                            </IconButton>\n                          ) : (\n                            <Switch checked={!item.disabled}\n                              classes={{ switchBase: classes.switchBase }}\n                              onChange={this.handleSwitch(item)}\n                            />\n                          )}\n                        </ListItemSecondaryAction>\n                      )}\n                    </ListItem>\n                  ))}\n                  {tab.list.length < 1 && (\n                    <ListItem key={-1} dense className={classes.even}>\n                      <ListItemText className={classes.listText} secondary={\"No \"+smallName} />\n                    </ListItem>\n                  )}\n                </List>\n              </div>\n              <div className={classes.end}>\n                {templates && templates.length > 0 && (\n                  <Button aria-owns={menuAnchor ? 'template.menu' : null} aria-label=\"open-templates\" aria-haspopup=\"true\" classes={{ label: classes.block }} onClick={this.showTemplates}>\n                    <FileCopyIcon />\n                    Templates\n                  </Button>\n                )}\n                \n                {!tab.immutable && (\n                  <Button classes={{ label: classes.block }} onClick={() => this.setState({ edit: true, selected: -1, template: null })}>\n                    <AddCircleIcon />\n                    New {tab.listName.slice(0,-1)}\n                  </Button>\n                )}\n              </div>\n            </div>\n          </div>\n          <div className={edit || selected > -1 ? classes.rightMobileOpen : classes.rightMobileClose}>\n            <div className={classes.right}>\n              <FormEditor list={tab.list} listName={smallName} template={template} selected={selected} panel={panel} Form={tab.Form} immutable={tab.immutable} />\n            </div>\n          </div>\n        </Typography>\n        \n        <Menu disableEnforceFocus id=\"template.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.hideTemplates} onClose={this.hideTemplates}>\n          {templates && templates.map((tmpl, i) => tmpl.name ? (\n            <MenuItem key={i} onClick={this.chooseTemplate(tmpl)}>\n              {tmpl.name}\n            </MenuItem>\n          ) : (\n            null\n          ))}\n        </Menu>\n        \n        \n        <Popover anchorEl={helpText} open={Boolean(helpText)} onClose={() => this.setState({ helpText: null })}>\n          <Typography className={classes.helpText}>\n            See the template examples or the user-defined action script <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://github.com/grapenut/mush-portal/blob/master/docs/README.md\">README</a> for help creating your own Javascript actions.\n          </Typography>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nConfigure.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Configure);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 10000;\nconst HISTORY_KEY = \"output_history\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    height: \"100%\",\n    bottom: 0,\n    right: 0,\n  },\n  lineheight: {\n    lineHeight: 1,\n  },\n  noPadding: {\n    padding: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.body.onresize = this.onResize;\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    \n    if (window.client.settings.historySize > 0) {\n      window.client.output.loadHistory(HISTORY_KEY);\n    }\n    \n    this.onResize();\n  }\n  \n  onResize = event => {\n    clearTimeout(this.doResize);\n    setTimeout(this.doResize, 1000);\n  };\n  \n  doResize = () => {\n    const client = window.client;\n    client.output.calcDimensions();\n    client.sendText(\"SCREENWIDTH \" + Math.min(client.settings.terminalWidth, Math.floor(window.client.output.root.parentNode.clientWidth / window.client.output.dims.width)));\n    client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n    client.output.scrollDown();\n    \n    client.mobile = !window.matchMedia(this.props.theme.breakpoints.up('md').substring(7)).matches;\n    \n    this.onChange();\n  };\n\n  onChange = () => {\n    if (window.client.settings.historySize > 0) {\n      window.client.output.saveHistory(HISTORY_KEY, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySize));\n    }\n    \n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n  \n  scrollDown() {\n    window.client.output.scrollDown();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    const { fontFamily, fontSize, mobileFontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? mobileFontSize : fontSize) + \"pt\",\n    };\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classNames(classes.frame)} style={font} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ width: dim, maxWidth: \"100%\" }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Tooltip title=\"Click to scroll down.\">\n              <Typography color=\"error\" align=\"right\" variant=\"caption\" className={classes.lineheight} onClick={this.scrollDown}>\n                {lines > 0 && \"...and \"+lines+\" more lines...\"}\n              </Typography>\n            </Tooltip>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport IconButton from '@material-ui/core/IconButton';\n\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.background.paper,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"1.5em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n    [theme.breakpoints.up('md')]: {\n      height: \"3em\",\n    },\n  },\n  buttons: {\n//    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"center\",\n    alignContent: \"center\",\n    [theme.breakpoints.up('md')]: {\n      flexFlow: \"column wrap\",\n    },\n  },\n  smallIcons: {\n    padding: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  recallBack = () => {\n    window.client.input.cycleBackward();\n    window.client.input.focus(true);\n  };\n  \n  recallForward = () => {\n    window.client.input.cycleForward();\n    window.client.input.focus(true);\n  };\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    const { fontFamily, fontSize, recallButtons, recallAnchor } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? 16 : fontSize) + \"pt\",\n    };\n    \n    const buttons = (\n      <span className={classes.buttons}>\n        <IconButton classes={{ root: classes.smallIcons }} onClick={this.recallBack}>\n          <ArrowDropUpIcon />\n        </IconButton>\n        <IconButton classes={{ root: classes.smallIcons }} onClick={this.recallForward}>\n          <ArrowDropDownIcon />\n        </IconButton>\n      </span>\n    );\n    \n    return (\n      <div className={classes.frame}>\n        {recallButtons && recallAnchor === \"left\" && buttons}\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)} style={font}  autoComplete=\"off\" autoFocus={!window.client.mobile}></textarea>\n        {recallButtons && recallAnchor === \"right\" && buttons}\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \"\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    const { mobileHideStatusbar } = window.client.settings;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        {!mobileHideStatusbar && (\n          <Typography\n            align=\"right\"\n            color=\"textPrimary\"\n            noWrap\n          >\n            {status}\n          </Typography>\n        )}\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n  },\n  right: {\n    position: \"absolute\",\n    right: 0,\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  setMessage = (msg) => {\n    this.setState({ msg: msg });\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <Dialog\n        className={classes.frame}\n        open={open}\n        onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n        onClose={this.closeLogin}\n        aria-labelledby=\"responsive-dialog-title\"\n        disableBackdropClick\n        disableEscapeKeyDown\n      >\n        <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n          Character Login\n          <span className={classes.right}>\n            <Tooltip title=\"Reconnect.\">\n              <IconButton onClick={this.reconnect}>\n                <WifiIcon />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Change settings.\">\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n          </span>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <span dangerouslySetInnerHTML={{ __html: msg }} />\n          </DialogContentText>\n          <TextField\n            className={classes.text}\n            autoComplete=\"username\"\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n            label=\"Character Name\"\n            type=\"string\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n          <TextField\n            className={classes.text}\n            autoComplete=\"current-password\"\n            margin=\"dense\"\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Fab className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extended\">\n            <PersonAddIcon />\n            Register\n          </Fab>\n          <Fab classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extended\">\n            <PersonOutlineIcon />\n            Guest\n          </Fab>\n          <Fab classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extended\" aria-label=\"login\">\n            <PersonIcon />\n            Login\n          </Fab>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Login);\n\n\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n//import Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst EXTRA = {\n  NORTH: false,\n  SOUTH: false,\n  WEST: false,\n  EAST: false,\n  SOUTHEAST: false,\n  SOUTHWEST: false,\n  NORTHEAST: false,\n  NORTHWEST: false,\n  UP: true,\n  DOWN: true,\n  IN: true,\n  OUT: true,\n};\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    maxWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'flex-end',\n  },\n  contents: {\n    flex: 1,\n    width: \"100%\",\n    alignSelf: 'flex-start',\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  overflow: {\n  },\n  list: {\n    width: \"100%\",\n  },\n  listHeader: {\n    lineHeight: 1.5,\n  },\n  playerItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  thingItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  exitItem: {\n    padding: \"2px \" + theme.spacing.unit + \"px\",\n  },\n  customExits: {\n    flex: 1,\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"flex-end\",\n    alignContent: \"flex-end\",\n    alignItems: \"flex-end\",\n  },\n  middle: {\n    width: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    width: \"100%\",\n  },\n  navWidget: {\n  },\n  smallIcons: {\n    padding: 0.5*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass, sidebarLargeCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n      let skip = false;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (!skip && match === -1) {\n          match = keys.indexOf(exit);\n          if (!sidebarLargeCompass && match !== -1 && EXTRA[exit]) {\n            skip = true;\n          }\n        }\n      });\n\n      if (skip || match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    const { classes } = this.props;\n    const { sidebarDense } = window.client.settings;\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton classes={(sidebarDense) ? { root: classes.smallIcons } : null} onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n\n  buildLook = () => {\n    const { classes, sidebarDense } = this.props;\n    \n    return (\n      <Tooltip title=\"Update contents.\">\n        <span>\n          <IconButton classes={sidebarDense ? { root: classes.smallIcons } : null} onClick={this.action}>\n            <RemoveRedEyeIcon />\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarDense, sidebarShowPlayers, sidebarLargeCompass,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n\n    var width;\n    var numicons = sidebarShowCompass ? (sidebarLargeCompass ? 4 : 3) : 0;\n    if (sidebarDense) {\n      width = (24 + this.props.theme.spacing.unit) * numicons;\n    } else {\n      width = 48 * numicons;\n    }\n    width = Math.min(192, Math.max(96, width)) + \"px\";\n    \n    var exitWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.middle}>\n              <div className={classes.bottom}>\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Exits</ListSubheader>}>\n                  {customExits.map((exit, i) => (\n                    <ListItem className={classNames(classes.exitItem, i%2 ? classes.odd : classes.even)} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                      <ListItemText primary={exit.split(\";\")[0]} />\n                    </ListItem>\n                  ))}\n                </List>\n              </div>\n            </div>\n          </div>\n        );\n      }\n      \n      var navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {sidebarLargeCompass && this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {sidebarLargeCompass ? this.buildExit(\"In\") : this.buildLook()}\n            {this.buildExit(\"East\")}\n            {sidebarLargeCompass && this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {sidebarLargeCompass && this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n\n    return (\n      <div className={classes.frame} style={{ width: width }} onClick={() => window.client.focus()}>\n        {((sidebarShowPlayers && players.length > 0) || (sidebarShowThings && things.length > 0)) && (\n          <div className={classes.contents}>\n            <span className={classes.overflow}>\n              {sidebarShowPlayers && players.length > 0 && (\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Players</ListSubheader>}>\n                  {players.map((player, i) => (\n                    <ListItem className={classNames(classes.playerItem, i%2 ? classes.odd : classes.even)} key={i}\n                      button onClick={() => this.sendCommand(\"look \"+player)}\n                    >\n{/*\n                      {!sidebarDense && (\n                        <ListItemAvatar>\n                          <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                        </ListItemAvatar>\n                      )}\n*/}\n                      <ListItemText primary={player} />\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n              {sidebarShowThings && things.length > 0 && (\n                <List className={classes.list} dense disablePadding subheader={<ListSubheader className={classes.listHeader} component=\"div\">Contents</ListSubheader>}>\n                  {things.map((thing, i) => (\n                    <ListItem className={classNames(classes.thingItem, i%2 ? classes.odd : classes.even)} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                      <ListItemText primary={thing} />\n                    </ListItem>\n                  ))}\n                </List>\n              )}\n            </span>\n          </div>\n        )}\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarDense: PropTypes.bool.isRequired,\n  sidebarLargeCompass: PropTypes.bool.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Buttonbar from '../Buttonbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, terminalWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarDense,\n      sidebarLargeCompass, mobileButtonbar } = window.client.settings;\n      \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarLargeCompass={sidebarLargeCompass} sidebarDense={sidebarDense} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" url=\"http://www.mushportal.com\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={terminalWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            {mobileButtonbar && (<Buttonbar />)}\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen, id } = this.props;\n    \n    var even = (id %2 === 0);\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  sendBBPost = () => {\n    window.client.react.bboard.sendBBPost(\"\", \"\", \"\");\n  };\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n              <Tooltip title=\"Make a new BBoard post.\">\n                <IconButton onClick={this.sendBBPost}>\n                  <CreateIcon />\n                </IconButton>\n              </Tooltip>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen, selected, id } = this.props;\n    \n    var even = (id % 2 === 0);\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: -1,\n    };\n  }\n  \n  sendBBPost = () => {\n    window.client.react.bboard.sendBBPost(this.props.board.name, \"\", \"\");\n  };\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.name} ({board.messages.length} Posts)\n              <span className={classes.flex} />\n              <Tooltip title=\"Go back to the board list.\">\n                <IconButton disabled={!Boolean(board)} onClick={() => window.client.react.bboard.setState({ board: null, bbmsg: null })}>\n                  <ArrowBackIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Make a new BBoard post.\">\n                <IconButton onClick={this.sendBBPost}>\n                  <CreateIcon />\n                </IconButton>\n              </Tooltip>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => {\n                this.setState({ selected: i });\n                openMessage(i);\n              }} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  block: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  mobileOnly: {\n    display: 'block',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n    \n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body+'\\n');\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  render() {\n    const { classes, message } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;\n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: fontSize + \"pt\",\n    };\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.mobileOnly} onClick={() => window.client.react.bboard.setState({ bbmsg: null })} classes={{ label: classes.block }}>\n            <Icon>\n              <CloseIcon />\n            </Icon>\n            Close\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'message.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"message.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n{/*\n            <MenuItem onClick={}></MenuItem>\n            <MenuItem onClick={}> Message</MenuItem>\n*/}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  bblist: {\n    flex: 1,\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bbmsglist: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    [theme.breakpoints.down('sm')]: {\n      flex: 1,\n    },\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  mobileOpen: {\n    flex: 1,\n    display: 'flex',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  sendBBPost(to, subject, body) {\n    if (window.client.react.bbpost) {\n      window.client.focusPanel(\"BBPost\");\n      if (window.confirm(\"Replace current draft with new message?\")) {\n        window.client.react.bbpost.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addPanel(\"BBPost\", { icon: \"forums\" });\n      window.client.react.bbpost.setFields(to, subject, body);\n    }  \n  }\n\n  \n\n/////////////////////////////////////////////////////////\n\n\n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <span className={bbmsg ? classes.mobileClose : classes.mobileOpen}>\n          {board ? (\n            <div className={classes.bbmsglist}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n          ) : (\n            <div className={classes.bblist}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n          )}\n        </span>\n        {bbmsg && (\n          <div className={classes.right}>\n            <BBMessage message={bbmsg} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  bblist: PropTypes.array,\n  bbmessagelist: PropTypes.array,\n  bbmessage: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              <div>{maillist.length} Messages ({unread} unread)</div>\n              <span>\n                <Tooltip title=\"Move multiple files to trash.\">\n                  <IconButton onClick={this.toggleDelete}>\n                    <DeleteSweepIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Purge deleted mail.\">\n                  <IconButton onClick={this.purgeMail}>\n                    <DeleteForeverIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Send a new message.\">\n                  <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                    <CreateIcon />\n                  </IconButton>\n                </Tooltip>\n              </span>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  mobileOnly: {\n    display: 'block',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body+'\\n');\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: fontSize + \"pt\",\n    };\n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body+'\\n');\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.mobileOnly} onClick={() => window.client.react.mailbox.setState({ mailitem: null })}>\n            <Icon>\n              <CloseIcon />\n            </Icon>\n            Close\n          </Button>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    [theme.breakpoints.down('sm')]: {\n      flex: 1,\n    },\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  mobileOpen: {\n    display: 'flex',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addPanel(\"Sendmail\", { icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <span className={mailitem ? classes.mobileClose : classes.mobileOpen}>\n            { maillist && (\n              <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n            )}\n          </span>\n        </div>\n        { mailitem && (\n          <div className={classes.right}>\n            <MailItem mail={mailitem} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={classNames(window.client.settings.ansiFG, window.client.settings.ansiBG)}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\n\nimport ColorPicker from './ColorPicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport TextRotateVerticalIcon from '@material-ui/icons/TextRotateVertical';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentDecreaseIcon from '@material-ui/icons/FormatIndentDecrease';\nimport PublicIcon from '@material-ui/icons/Public';\nimport SettingsEthernetIcon from '@material-ui/icons/SettingsEthernet';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport FontDownloadIcon from '@material-ui/icons/FontDownload';\nimport FormatSizeIcon from '@material-ui/icons/FormatSize';\nimport HistoryIcon from '@material-ui/icons/History';\nimport MobileScreenShareIcon from '@material-ui/icons/MobileScreenShare';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport UnfoldMoreIcon from '@material-ui/icons/UnfoldMore';\nimport RepeatIcon from '@material-ui/icons/Repeat';\nimport TimerIcon from '@material-ui/icons/Timer';\nimport TimerOffIcon from '@material-ui/icons/TimerOff';\nimport SmsIcon from '@material-ui/icons/Sms';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\nimport SwapVertIcon from '@material-ui/icons/SwapVert';\nimport UpdateIcon from '@material-ui/icons/Update';\nimport ShortTextIcon from '@material-ui/icons/ShortText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n    overflowY: \"auto\",\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    flexFlow: \"row wrap\",\n    [theme.breakpoints.up('md')]: {\n      justifyContent: 'flex-end',\n    },\n  },\n  list: {\n    flexGrow: 0,\n    flexBasis: 'auto',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    right: 0,\n    top: 0,\n    bottom: 0,\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"column-reverse nowrap\",\n    [theme.breakpoints.up('md')]: {\n      flexFlow: \"row nowrap\",\n    },\n  },\n  reset: {\n    flex: 1,\n  },\n  close: {\n    flex: 1,\n  },\n  leftright: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  noPadding: {\n    padding: 0,\n  },\n  summaryText: {\n    marginLeft: theme.spacing.unit,\n  },\n  panel: {\n    width: \"100%\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n      expandAll: false,\n    };\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleExpand = panel => (event, expanded) => {\n    this.setState({\n      expanded: expanded ? panel : false,\n      expandAll: false,\n    });\n  };\n\n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { expanded, expandAll, debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, mobileButtonbar,\n      invertHighlight, debugActions, serverAddress, serverPort, serverSSL, sidebarLargeCompass, activitySize,\n      historySize, historySpawnSize, mobileHideTaskbar, mobileHideStatusbar, allowServerChange, activityDelay,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, sidebarShowPlayers, fontFamily, fontSize, activityReposition,\n      recallButtons, recallAnchor, recallSize, mobileFontSize, terminalWidth, timersAutoStart, activityEnabled,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarDense, timersEnabled, terminalAutoScroll } = this.state;\n    const isMobile = window.client.mobile;\n   \n    var debugging = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <BugReportIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <BugReportIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Debug user-defined actions?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={debugActions} value=\"debugActions\" onChange={this.handleSwitch('debugActions')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var connection = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <PublicIcon />\n          </ListItemIcon>\n          <TextField label=\"Server address\" disabled={!allowServerChange} value={serverAddress} onChange={this.handleValue('serverAddress')} />\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <SettingsEthernetIcon />\n          </ListItemIcon>\n          <TextField label=\"Server port\" disabled={!allowServerChange} value={serverPort} onChange={this.handleValue('serverPort')} type=\"number\" />\n        </ListItem>\n        <ListItem dense>\n          <ListItemIcon>\n            <SecurityIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Encrypt connection with SSL?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={serverSSL} disabled={!allowServerChange} value=\"serverSSL\" onChange={this.handleSwitch('serverSSL')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var history = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"History Size\" value={historySize} onChange={this.handleValue('historySize')} type=\"number\" helperText=\"Lines of terminal output history.\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"Spawn History Size\" value={historySpawnSize} onChange={this.handleValue('historySpawnSize')} type=\"number\" helperText=\"Lines of spawn window history.\" />\n        </ListItem>\n      </List>\n    );\n    \n    var input = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <HistoryIcon />\n          </ListItemIcon>\n          <TextField label=\"Recall History Size\" value={recallSize} onChange={this.handleValue('recallSize')} type=\"number\" helperText=\"Commands in recall history.\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <RepeatIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show command history buttons?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={recallButtons} value=\"recallButtons\" onChange={this.handleSwitch('recallButtons')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense className={classes.leftright}>\n          <Icon color=\"action\">\n            <BorderLeftIcon />\n          </Icon>\n          <Typography>Left</Typography>\n          <Switch checked={recallAnchor === \"right\"}\n            color=\"default\"\n            value={recallAnchor === \"right\" ? \"left\" : \"right\"}\n            onChange={this.handleValue('recallAnchor')}\n          />\n          <Typography>Right</Typography>\n          <Icon color=\"action\">\n            <BorderRightIcon />\n          </Icon>\n        </ListItem>\n      </List>\n    );\n\n    var terminal = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <WrapTextIcon />\n          </ListItemIcon>\n          <TextField label=\"Terminal Width\" value={terminalWidth} onChange={this.handleValue('terminalWidth')} type=\"number\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <TextRotateVerticalIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Scroll to bottom on command input?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={terminalAutoScroll} value=\"terminalAutoScroll\" onChange={this.handleSwitch('terminalAutoScroll')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n        \n    var font = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <FontDownloadIcon />\n          </ListItemIcon>\n          <TextField label=\"Font\" value={fontFamily} onChange={this.handleValue('fontFamily')} />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <FormatSizeIcon />\n          </ListItemIcon>\n          <TextField label=\"Size\" value={fontSize} onChange={this.handleValue('fontSize')} type=\"number\" />\n        </ListItem>\n      </List>\n    );\n    \n    var color = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ColorPicker label=\"Background\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n        </ListItem>\n\n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ColorPicker label=\"Foreground\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <PaletteIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Invert foreground & background?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var upload = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <EditIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n          <ListItemSecondaryAction>\n            <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n\n        <ListItem dense>\n          <ListItemIcon>\n            <CodeIcon />\n          </ListItemIcon>\n          <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n        </ListItem>\n      </List>\n    );\n    \n    var timers = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            {timersEnabled ? (<TimerIcon />) : (<TimerOffIcon />)}\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Enable timers?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={timersEnabled} value=\"timersEnabled\" onChange={this.handleSwitch('timersEnabled')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n\n        <ListItem dense>\n          <ListItemIcon>\n            <AutorenewIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Auto-start timers on refresh?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={timersAutoStart} value=\"timersAutoStart\" onChange={this.handleSwitch('timersAutoStart')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n\n    var activity = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <SmsIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show spawn activity notification?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={activityEnabled} value=\"activityEnabled\" onChange={this.handleSwitch('activityEnabled')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <SwapVertIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary={isMobile ? \"Move notification to bottom?\" : \"Move notification to top?\"} />\n          <ListItemSecondaryAction>\n            <Switch checked={activityReposition} value=\"activityReposition\" onChange={this.handleSwitch('activityReposition')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <UpdateIcon />\n          </ListItemIcon>\n          <TextField label=\"Autoclose delay\" value={activityDelay} onChange={this.handleValue('activityDelay')} type=\"number\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <ShortTextIcon />\n          </ListItemIcon>\n          <TextField label=\"Preview size\" value={activitySize} onChange={this.handleValue('activitySize')} type=\"number\" />\n        </ListItem>\n      </List>\n    );\n    \n    var sidebarDisplay = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <VerticalSplitIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense className={classes.leftright}>\n          <Icon color=\"action\">\n            <BorderLeftIcon />\n          </Icon>\n          <Typography>Left</Typography>\n          <Switch checked={sidebarAnchor === \"right\"}\n            color=\"default\"\n            value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n            onChange={this.handleValue('sidebarAnchor')}\n          />\n          <Typography>Right</Typography>\n          <Icon color=\"action\">\n            <BorderRightIcon />\n          </Icon>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <PictureInPictureIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <FormatIndentDecreaseIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Use small sidebar icons?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarDense} value=\"sidebarDense\" onChange={this.handleSwitch('sidebarDense')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n      </List>\n    );\n    \n    var sidebarContent = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <AccountCircleIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show players?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <GroupWorkIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show things?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarShowExits} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <ExploreIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show in, out, up, & down?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={sidebarLargeCompass} value=\"sidebarLargeCompass\" onChange={this.handleSwitch('sidebarLargeCompass')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    var mobile = (\n      <List className={classes.list} disablePadding dense>\n        <ListItem dense>\n          <ListItemIcon>\n            <FormatSizeIcon />\n          </ListItemIcon>\n          <TextField label=\"Terminal Font Size\" value={mobileFontSize} onChange={this.handleValue('mobileFontSize')} type=\"number\" />\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <MobileScreenShareIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Show buttons on bottom of terminal?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={mobileButtonbar} value=\"mobileButtonbar\" onChange={this.handleSwitch('mobileButtonbar')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <MobileScreenShareIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Auto hide mobile taskbar when empty?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={mobileHideTaskbar} value=\"mobileHideTaskbar\" onChange={this.handleSwitch('mobileHideTaskbar')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n        \n        <ListItem dense>\n          <ListItemIcon>\n            <MobileScreenShareIcon />\n          </ListItemIcon>\n          <ListItemText className={classes.switchText} primary=\"Hide the status bar to save screen space?\" />\n          <ListItemSecondaryAction>\n            <Switch checked={mobileHideStatusbar} value=\"mobileHideStatusbar\" onChange={this.handleSwitch('mobileHideStatusbar')} />\n          </ListItemSecondaryAction>\n        </ListItem>\n      </List>\n    );\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <Grid>\n              <ExpansionPanel className={classes.panel} expanded={false} onChange={() => this.setState({ expandAll: !this.state.expandAll })}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<UnfoldMoreIcon />}>\n                  <Typography className={classes.summaryText}>{expandAll ? \"Collapse All Categories\" : \"Expand All Categories\"}</Typography>\n                </ExpansionPanelSummary>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'connection'} onChange={this.handleExpand('connection')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Server Connection</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {connection}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'history'} onChange={this.handleExpand('history')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Output History</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {history}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'input'} onChange={this.handleExpand('input')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Command Recall</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {input}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'terminal'} onChange={this.handleExpand('terminal')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Terminal Display</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {terminal}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'font'} onChange={this.handleExpand('font')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Terminal Font</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {font}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'color'} onChange={this.handleExpand('color')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Default Colors</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {color}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'sidebarDisplay'} onChange={this.handleExpand('sidebarDisplay')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Sidebar Display</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {sidebarDisplay}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'sidebarContent'} onChange={this.handleExpand('sidebarContent')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Sidebar Content</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {sidebarContent}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'upload'} onChange={this.handleExpand('upload')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>@decompile/tf</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {upload}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'timers'} onChange={this.handleExpand('timers')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>User-defined Timers</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {timers}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'activity'} onChange={this.handleExpand('activity')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Activity Notifications</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {activity}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'debugging'} onChange={this.handleExpand('debugging')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Debugging Console</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {debugging}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n\n              <ExpansionPanel className={classes.panel} expanded={expandAll || expanded === 'mobile'} onChange={this.handleExpand('mobile')}>\n                <ExpansionPanelSummary classes={{ root: classes.noPadding }} expandIcon={<ExpandMoreIcon />}>\n                  <Typography className={classes.summaryText}>Mobile Display</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails classes={{ root: classes.noPadding }}>\n                  {mobile}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n             </Grid>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","import Client from './client';\n\n/** create the MUSH client */\nvar client = new Client();\n\nif (window.onclientload) {\n  window.onclientload(client);\n} else {\n  client.loadScript(process.env.PUBLIC_URL + '/local.js');\n}\n\nclient.execUserScript('onLoad.js');\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-37-1\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Emulator.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.setAttribute('rel','noreferrer noopener');\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n  \n  onLine(that, lineBuf) {\n    Emulator.parseLinks(that, lineBuf);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    if (!data) return;\n    \n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    //var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    var txt = \"0123456789\";\n    \n    var temp = document.createElement(\"span\");\n    var css = window.getComputedStyle(element, null);\n    var fontFamily = css.getPropertyValue(\"font-family\");\n    var fontSize = css.getPropertyValue(\"font-size\");\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+fontFamily+\";font-size:\"+fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.offsetWidth / 10.0;\n    this.dims.height = temp.offsetHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  /////////////////////////////////////////////////////////\n  // save and load history buffers\n  \n  loadHistory = (key) => {\n    if (window.localStorage.hasOwnProperty(key)) {\n      const html = window.localStorage[key];\n      if (html !== \"\") {\n        try {\n          this.root.innerHTML = html + this.root.innerHTML;\n        } catch (e) {\n          console.log(\"Unable to insert history: \", e);\n        }\n      }\n    }\n  };\n\n  saveHistory = (key, size) => {\n    const store = window.localStorage;\n    \n    if (size > 0) {\n      const nodes = this.root.childNodes;\n      var start = nodes.length - 1;\n      \n      if (start < 0) return;\n      \n      var found = 0;\n      \n      for (let i = start; i > -1 && found < size; i--) {\n        let count = nodes[i].textContent.split(\"\\n\").length;\n        \n        if (nodes[i].textContent.endsWith('\\n')) {\n          count = count - 1;\n        }\n        \n        if (count > 0) {\n          found = found + count;\n          start = i;\n        }\n      }\n      \n      //var buff = \"\";\n      //for (let i = start; i < nodes.length; i++) {\n      //  buff = buff + nodes[i].outerHTML;\n      //}\n      \n      var range = document.createRange();\n      range.setStartBefore(nodes[start]);\n      range.setEndAfter(nodes[nodes.length-1]);\n      var fragment = range.cloneContents();\n      var div = document.createElement('div');\n      div.appendChild(fragment);\n      \n      store[key] = div.innerHTML;\n    } else {\n      delete store[key];\n    }\n  };\n  \n  \n}\n\nexport default Emulator;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.history.length] = this.root.value;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.history.length - 1) {\n      this.current++;\n      this.root.value = this.history[this.history.length - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.history.length - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n","/* eslint no-eval: 0 */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Badge from '@material-ui/core/Badge';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\n\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n  },\n  scrollButtons: {\n    flex: '0 0 24px',\n    padding: 0,\n    alignSelf: \"center\",\n  },\n  buttonBar: {\n    justifyContent: \"space-evenly\",\n  },\n  tasklabel: {\n    display: \"flex\",\n    \"flexFlow\": \"row nowrap\",\n  },\n});\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count : 0;\n  \n  if (count && count !== \"\") {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon className={props.children}>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon className={props.children}>{props.children}</Icon>);\n};\n\n\nclass Buttonbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  componentDidMount() {\n  }\n\n  componentWillUnmount() {\n    window.client.unwatchState(this);\n  }\n  \n  showCount = button => {\n    if (button && button.count && button.count !== \"\") {\n      try {\n        var val = eval(button.count);\n        if (val) {\n          return val;\n        }\n      } catch (e) {\n        window.client.settings.debugActions && console.log(\"Unable to execute button count expression:\", e);\n      }\n    }\n    \n    return 0;\n  };\n  \n  pushButton = button => event => {\n    if (button && button.text && button.text !== \"\") {\n      if (button.javascript) {\n        window.client.execActionScript(button.text, event);\n      } else {\n        window.client.sendText(button.text);\n      }\n    }\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { mobileHideTaskbar } = window.client.settings;\n    const buttons = window.client.buttons;\n    \n    return (\n      <div className={classes.frame}>\n        {(!mobileHideTaskbar || buttons.length > 0) && (\n          <AppBar position=\"relative\">\n            <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons, flexContainer: classes.buttonBar }}>\n              {buttons.length > 0 && buttons.map((button,i) => !button.disabled && (\n                <Tooltip key={i} title={button.tooltip}>\n                  <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                    aria-label={button.name} \n                    icon={(<BadgeIcon count={this.showCount(button)}>{button.icon}</BadgeIcon>)}\n                    onClick={this.pushButton(button)}\n                  />\n                </Tooltip>\n              ))}\n            </Tabs>\n          </AppBar>\n        )}\n      </div>\n    );\n  }\n}\n\nButtonbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Buttonbar);\n\n"],"sourceRoot":""}