{"version":3,"sources":["client/connection.js","modules/Spawn/index.jsx","client/jsonapi.js","client/index.js","modules/Sendmail/index.jsx","modules/Upload/index.jsx","modules/Settings/ColorPicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Customizer/FormEditor.jsx","modules/Customizer/TriggerForm.jsx","modules/Customizer/TimerForm.jsx","modules/Customizer/MacroForm.jsx","modules/Customizer/KeyForm.jsx","modules/Customizer/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","index.js","client/emulator.js","client/userinput.js"],"names":["Connection","url","Object","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","socket","isOpen","onOpen","onError","onClose","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","reconnect","arguments","length","undefined","that","isConnected","sendText","window","WebSocket","onopen","evt","onerror","onclose","onmessage","readyState","close","data","send","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","e","console","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","substring","MAX_HISTORY_SIZE","HISTORY_KEY","Spawn","props","_this","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","changePrefix","event","Prefix","target","value","prefix","state","setState","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","LoadHistory","output","loadHistory","id","scrollDown","SaveHistory","saveHistory","Math","min","client","settings","historySpawnSize","AutoHide","autoHide","hasHidden","panel","minimize","onChange","lines","linesOfScroll","status","count","react","taskbar","forceUpdate","refoutput","React","createRef","refinput","input","_this2","Emulator","current","UserInput","onEnter","cmd","sendCommand","onEscape","clear","onPageUp","scrollPageUp","onPageDown","scrollPageDown","sendMacro","fun","scroll","nearBottom","scrollThreshold","text","_this3","scrollIfNeeded","appendText","_this4","classes","_window$client$settin","ansiFG","ansiBG","fontFamily","fontSize","font","mobile","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","frame","top","ref","classNames","style","bottom","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_9___default","label","autoComplete","Component","withStyles","theme","position","height","width","display","flex-flow","flex","margin","font-family","font-weight","font-size","overflow-y","overflow-x","white-space","word-wrap","padding","background-color","palette","primary","main","border","outline","vertical-align","resize","withTheme","JSONAPI","maillist","self","args","mailitem","boardlist","bbmsglist","bbmsg","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","Client","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","setBubble","hidden","tinycon","updateCounter","defaultSettings","wrapWidth","invertHighlight","decompileEditor","decompileKey","sidebarOpen","sidebarAnchor","sidebarWidth","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","debugEvents","debugActions","serverAddress","serverSSL","location","protocol","serverPort","historySize","components","Mailbox","Sendmail","BBoard","Upload","Customizer","actionTemplates","triggers","name","javascript","pattern","regex","suppress","timers","delay","repeat","times","macros","keys","keycode","ctrl","alt","shift","css","scripts","loadTriggers","loadTimers","loadMacros","loadKeys","loadCSS","loadScripts","loadSettings","colors","createTheme","matchMedia","breakpoints","up","matches","prompt","events","panels","jsPanel","portal","terminal","statusbar","login","mailbox","sendmail","bboard","upload","customizer","spawns","conn","container","loggedIn","jsonapi","updateLines","eatNewline","delayContents","reconnectTimer","reconnectCount","reconnectMaxCount","initPanels","initNotifications","render","ReactDOM","Portal","document","getElementById","src","tag","async","getElementsByTagName","appendChild","Window","w","c","getSpawn","script","i","eval","txt","file","split","slice","updateCSS","setAttribute","head","erase","firstChild","removeChild","createTextNode","links","getAttribute","indexOf","parentNode","defaultTheme","typography","useNextVariants","indigo","secondary","blueGrey","type","createMuiTheme","assign","obj","key","localStorage","hasOwnProperty","String","bind","Number","castString","loadStyle","unloadStyle","calcDimensions","floor","root","clientHeight","dims","loadLocalStorage","clearLocalStorage","saveLocalStorage","j","command","RegExp","search","val","replace","parseCommand","classid","msg","appendMessage","map","s","join","newText","re","escre","esc","_this5","onCommand","onunload","onresize","scrollTop","scrollHeight","force","focus","cfg","component","_this6","spawn","findSpawn","focusPanel","comp","el","config","headerTitle","headerLogo","icon","spacing","unit","panelSize","defaults","maximizedMargin","wstr","callback","content","backgroundColor","background","paper","child","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","innerRef","MuiThemeProvider","helpText","helpButton","classList","add","innerHTML","color","calcColors","controlbar","insertBefore","pointerup","forEach","which","addEventListener","currentTarget","push","create","addPanel","splice","getPanels","headertitle","innerText","popTask","unsmallify","front","serverUrl","setTimeout","openLogin","endsWith","clearTimeout","match","sendAPI","re_fugueedit","str","editor","insert","trigger","createPattern","replaceArgs","execActionScript","fragment","appendHTML","attrs","appendPueblo","op","gmcp","emit","_this7","cmds","_this8","matched","m","astr","code","_this9","shortid","generate","on","result","removeAllListeners","_this10","filename","node","textContent","blob","Blob","saveAs","alert","visibilityChange","_this11","msHidden","webkitHidden","setOptions","fallback","abbreviate","minimizeTo","onminimized","pushTask","onclosed","unmountComponentAtNode","delSpawn","dragit","start","saveCursor","resizeit","stop","resetCursor","__webpack_exports__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","sendMail","_this$state","chips","subject","body","realsub","substr","to","closePanel","handleChange","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","changeText","onResize","setError","error","onInput","addChip","chip","execString","delChip","beforeAdd","startsWith","_this$props","options","_this$state2","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_8___default","card","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_9___default","header","title","material_ui_chip_input__WEBPACK_IMPORTED_MODULE_18___default","fullWidth","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","helperText","FormHelperTextProps","subheader","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_15___default","stretch","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_10___default","react_ace__WEBPACK_IMPORTED_MODULE_19___default","bodytext","mode","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_11___default","actions","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_14___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_13___default","button","onClick","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_16___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_17___default","sub","left","right","marginLeft","overflow","justify-content","textAlign","minWidth","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","setText","line","newtext","react__WEBPACK_IMPORTED_MODULE_5___default","react_ace__WEBPACK_IMPORTED_MODULE_13___default","readOnly","stretchflex","pad","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_8___default","padded","variant","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7___default","_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_icons_Redo__WEBPACK_IMPORTED_MODULE_12___default","ColorPicker","classCallCheck","possibleConstructorReturn","getPrototypeOf","show","anchor","hide","choose","offset","rows","bgfix","react_default","Button_default","aria-haspopup","aria-owns","Popover_default","popover","anchorEl","open","Boolean","swatch","cursor","lineHeight","Settings","handleSwitch","changeSetting","checked","defineProperty","saveSettings","handleValue","handleColor","objectSpread","resetSettings","confirm","closeDrawer","tabIndex","role","List_default","list","disablePadding","dense","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","ListItemSecondaryAction_default","Switch_default","Public_default","TextField_default","SettingsEthernet_default","Security_default","History_default","WrapText_default","FontDownload_default","FormatSize_default","Palette_default","Settings_ColorPicker","Edit_default","Code_default","VerticalSplit_default","disabled","PictureInPicture_default","leftright","Icon_default","BorderLeft_default","Typography_default","BorderRight_default","FormatIndentIncrease_default","AccountCircle_default","GroupWork_default","Explore_default","buttons","reset","flexDirection","justifyContent","alignItems","overflowY","flexFlow","flexGrow","flexBasis","paddingLeft","marginRight","BadgeIcon","Badge_default","badgeContent","children","BadgeWrapper","TabButton","visible","IconButton_default","direction","KeyboardArrowLeft_default","KeyboardArrowRight_default","Taskbar","openDrawer","closeMenu","setTitle","t","clearScreen","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","addButton","task","showMenu","menuAnchor","toggleSidebar","toggle","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","preventDefault","showUpload","uploadAnchor","closeUpload","insertCommand","closeHistory","clearHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","openCustomizer","previewUpload","handleFile","files","reader","FileReader","onload","readAsText","handleURL","req","XMLHttpRequest","onreadystatechange","responseText","history","rev","reverse","renderTasks","Tooltip_default","tasklabel","taskbutton","aria-label","taskicon","headerlogo","renderButtons","ariaLabel","action","AppBar_default","Toolbar_default","disableGutters","sectionMobile","ChevronLeft_default","ChevronRight_default","noWrap","sectionDesktop","tasksep","icons_Menu_default","SwipeableDrawer_default","modules_Settings","onSubmit","autoFocus","InputProps","inputProps","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","historyPopover","divider","Menu_default","disableEnforceFocus","MenuItem_default","ExpandLess_default","Settings_default","Build_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","Tabs_default","indicatorColor","scrollable","scrollButtons","ScrollButtonComponent","Tab_default","wrapper","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","mobileButtons","alignSelf","emptyText","Terminal","focusInput","doResize","clientWidth","init","initOutput","initPrompt","dim","containerRef","onScroll","maxWidth","scrollcount","align","lineheight","down","overflowX","text-align","Input","initInput","size","Statusbar","Login","closeLogin","submitLogin","username","password","submitGuest","submitCreate","catchReturn","Dialog_default","fullScreen","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","Sidebar","go","exit","_window$client","getContents","matchExit","ucExits","buildExit","uc","toUpperCase","exits","things","players","friends","customExits","useCompass","_loop","fullexit","n","player","sidebar","exitWidget","navWidget","_this$state3","parseExits","exitItem","contents","playerItem","ListItemAvatar_default","Avatar_default","p","thing","thingItem","flexShrink","-webkit-transform","transform","middle","dock","scrollTo","modules_Sidebar","core_styles","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","BBListItem","board","posts","lastmod","listicon","read","opacity","BBList","openBoard","BBoard_BBListItem","BBMessageListItem","message","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","emulator","_window$client$settin2","Card_default","CardHeader_default","CardContent_default","CardActions_default","openBB","openBBMsg","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","FormEditor","setStatus","clearStatus","item","handleNumber","parseInt","needsToResize","listName","selected","immutable","saveCSS","_this$props2","onReset","_this$props3","template","defaultText","_this$props4","_this$props5","Form","ltype","rtype","form","lib_default","toLowerCase","mobileOnly","edit","Close_default","Delete_default","CloudDownload_default","Undo_default","newState","verticalAlign","minHeight","marginTop","TriggerForm","row","TimerForm","MacroForm","KeyForm","Checkbox_default","changeTab","tab","onSelect","tabs","mobileClose","mobileOpen","even","odd","listNum","listText","AddCircle_default","Customizer_FormEditor","MailListItem","mail","quickDelete","handleMark","deleted","unread","urgent","PriorityHigh_default","Mail_default","Drafts_default","from","time","CheckCircle_default","Cancel_default","MailList","purgeMail","toggleDelete","openMail","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","wrap","Reply_default","Forward_default","MoreVert_default","folder","folderlist","_this$state4","_this$state5","setFields","_this$state6","Mailbox_MailList","Mailbox_MailItem","__webpack_require__","r","loadScript","execUserScript","html","store","nodes","childNodes","found","range","createRange","setStartBefore","setEndAfter","cloneContents","div","lastIndex","exec","info","index","xch_cmd","end","lineBuf","ii","ilen","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","replaceChild","href","warn","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","ANSI_NORMAL","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","next","encodeState","ansiClass","span","stack","parseLinks","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","ch","PARSE_CR","abortParse","endLine","applyANSI","createDocumentFragment","nextSibling","removeAttribute","element","idx","selfClosing","UNCLOSED_TAGS","pushElement","popElement","threshold","temp","nodeName","round","abs","offsetHeight","selectionStart","selectionStop","keyCycleForward","keyCycleBackward","onkeydown","onkeyup","onKeyDown","onKeyUp","keyCode","ctrlKey","shiftKey","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","saveCommand","moveCursor","pressKey","releaseKey","ncommand","save_current","selectionEnd","createTextRange","collapse","select","getSelection","toString","selection","activeElement","tagName"],"mappings":"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","file":"static/js/main.b4d11ac3.chunk.js","sourcesContent":["// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect(url=null) {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n    \n    this.url = url || this.url;\n    \n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport TextField from '@material-ui/core/TextField';\n\nimport Emulator from '../../client/emulator';\nimport UserInput from '../../client/userinput';\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 1000;\nconst HISTORY_KEY = \"output_history_\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    flex: 1,\n    display: \"flex\",\n  },\n  output: {\n    margin: '0.25em 0.5em',\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  bottom: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  input: {\n    flex: 1,\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Spawn extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prefix: props.prefix ? props.prefix : \"\",\n      saveHistory: props.saveHistory ? props.saveHistory : false,\n      autoHide: props.autoHide ? props.autoHide : false,\n    };\n\n    this.refoutput = React.createRef();\n    this.refinput = React.createRef();\n\n    this.output = null;\n    this.input = null;\n    \n    this.hasHidden = false;\n  }\n  \n  componentDidMount() {\n    this.output = new Emulator(this.refoutput.current);\n    \n    this.input = new UserInput(this.refinput.current);\n    this.input.onEnter = (cmd) => { this.sendCommand(cmd); };\n    this.input.onEscape = () => { this.input.clear(); };\n    this.input.onPageUp = () => { this.output.scrollPageUp(); };\n    this.input.onPageDown = () => { this.output.scrollPageDown(); };\n    \n    if (this.state.saveHistory) {\n      this.LoadHistory();\n      this.output.scrollDown();\n    }\n    \n    if (this.state.autoHide) {\n      this.AutoHide();\n    }\n  }\n  \n  componentWillUnmount() {\n    this.output = null;\n    this.input = null;\n  }\n  \n  sendCommand(cmd) {\n    const { prefix } = this.state;\n    window.client.sendMacro(prefix + cmd);\n  }\n  \n  changePrefix = event => {\n    this.Prefix(event.target.value);\n  };\n  \n  Prefix = prefix => {\n    if (this.state.prefix !== prefix) {\n      this.setState({ prefix });\n    }\n    \n    return this;\n  };\n\n  LoadHistory = () => {\n    this.output.loadHistory(HISTORY_KEY + this.props.id);\n    this.output.scrollDown();\n  };\n  \n  SaveHistory = saveHistory => {\n    if (typeof(saveHistory) === \"undefined\") {\n      saveHistory = true;\n    }\n    \n    if (this.state.saveHistory !== saveHistory) {\n      if (saveHistory) {\n        this.LoadHistory();\n        this.output.scrollDown();\n      }\n    \n      this.setState({ saveHistory });\n    }\n    \n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + this.props.id, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySpawnSize));\n    }\n    \n    return this;\n  };\n  \n  AutoHide = autoHide => {\n    if (typeof(autoHide) === \"undefined\") {\n      autoHide = true;\n    }\n    \n    if (this.state.autoHide !== autoHide) {\n      this.setState({ autoHide });\n    }\n    \n    if (this.state.autoHide && !this.hasHidden) {\n      this.props.panel.minimize();\n      this.hasHidden = true;\n    }\n    \n    return this;\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output.nearBottom(window.client.scrollThreshold)) {\n      scroll = true;\n    }\n    \n    fun();\n    \n    scroll && this.output.scrollDown();\n    \n    this.onChange();\n  }\n\n  onChange = () => {\n    if (this.state.saveHistory) {\n      this.output.saveHistory(HISTORY_KEY + this.props.id, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySpawnSize));\n    }\n    \n    this.setState({ lines: this.output.linesOfScroll() });\n    \n    if (this.props.panel.status === \"minimized\") {\n      this.props.panel.count++;\n      window.client.react.taskbar.forceUpdate();\n    }\n  };\n  \n  appendText(text) {\n    this.scrollIfNeeded(() => this.output.appendText(text));\n  }\n  \n  append(text) {\n    this.scrollIfNeeded(() => this.output.appendText(text+\"\\n\"));\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { prefix } = this.state;\n    const { ansiFG, ansiBG, fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.top}>\n          <div ref={this.refoutput} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </div>\n        <div className={classes.bottom}>\n          <TextField label=\"Command Prefix\" value={prefix} onChange={this.changePrefix} />\n          <textarea ref={this.refinput} className={classNames(classes.input, ansiFG, ansiBG)} style={font}  autoComplete=\"off\"></textarea>\n        </div>\n      </div>\n    );\n  }\n}\n\nSpawn.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  panel: PropTypes.object.isRequired,\n  prefix: PropTypes.string,\n};\n\nexport default withStyles(styles, { withTheme: true })(Spawn);\n\n\t","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","/* eslint no-eval: 0 */\n/* eslint no-unused-vars: 0 */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\nimport Customizer from '../modules/Customizer';\nimport Spawn from '../modules/Spawn';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport JSONAPI from './jsonapi';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.defaultSettings = {\n      // display settings\n      fontFamily: \"Courier New\",\n      fontSize: 10,\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      wrapWidth: 100,\n      invertHighlight: false,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarWidth: \"192px\",\n      sidebarAlwaysShow: false,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      // debugging\n      debugEvents: false,\n      debugActions: false,\n      // default connection settings, can override in public/local.js\n      serverAddress: \"node.grapenut.org\",\n      serverSSL: window.location.protocol === \"https:\",\n      serverPort: window.location.protocol === \"https:\" ? 2001 : 2000,\n      // history settings\n      historySize: 1000,\n      historySpawnSize: 100,\n    };\n    this.settings = null;\n    \n    // map react components to strings\n    this.components = {\n      \"Mailbox\": Mailbox,\n      \"Sendmail\": Sendmail,\n      \"BBoard\": BBoard,\n      \"Upload\": Upload,\n      \"Customizer\": Customizer,\n      \"Spawn\": Spawn,\n    };\n\n    // triggers, timers, macros, and keybindings\n    this.actionTemplates = {\n      triggers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n        suppress: false,\n      },\n      timers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        delay: 0,\n        repeat: false,\n        times: 0,\n      },\n      macros: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n      },\n      keys: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        keycode: null,\n        ctrl: false,\n        alt: false,\n        shift: false,\n      },\n      css: {\n        name: \"\",\n        text: \"\",\n      },\n      scripts: {\n        name: \"\",\n        text: \"// Insert JavaScript below.\\n\",\n      },\n    };\n        \n    this.triggers = [];\n    this.timers = [];\n    this.macros = [];\n    this.keys = [];\n    this.scripts = [{ name: \"onLoad.js\", text: \"\" }];\n    this.css = [{ name: \"ansi.css\", text: \"\" },\n                { name: \"inverse.css\", text: \"\" }];\n    \n    this.loadTriggers();\n    this.loadTimers();\n    this.loadMacros();\n    this.loadKeys();\n    this.loadCSS();\n    this.loadScripts();\n    \n    // must come after client.css definition\n    this.loadSettings();\n    \n    // Client colors and theme\n    this.colors = Colors;\n    this.theme = this.createTheme();\n    this.mobile = !window.matchMedia(this.theme.breakpoints.up('md').substring(7)).matches;\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // External Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n      customizer: null,\n      spawns: [],\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // rendering, themeing, and styling react components\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  execUserScript(name) {\n    // load user customization file\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    \n    var script = null;\n    for (let i=0; i < client.scripts.length; i++) {\n      if (client.scripts[i].name === name) {\n        script = client.scripts[i];\n        break;\n      }\n    }\n    if (script && script.text !== \"\") {\n      try {\n        eval(script.text);\n      } catch (e) {\n        client.debugActions && console.log(\"Error executing `\" + name + \"'.\");\n      }\n    }\n  }\n  \n  // evaluate an action javascript with a limited context\n  execActionScript(txt) {\n    const client = this;\n    const Window = (w,c,e) => this.getSpawn(w,c,e);\n    \n    try {\n      eval(txt);\n    } catch (e) {\n      client.settings.debugActions && console.log(\"Error executing action:\", e);\n    }\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    const file = src.split('/').slice(-1)[0];\n\n    // see if we have a matching css override\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    var style;\n    if (css) {\n      // just update the <style> element\n      style = this.updateCSS(css);\n      if (css.text !== \"\") return;\n    }\n    \n    // css is not overridden, try to load a <link>\n    style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.head.appendChild(style);\n  }\n  \n  // update the css object's rules on its <style> element \n  updateCSS(css, erase=false) {\n    if (!css) return null;\n    \n    var style = document.getElementById(\"override_\" + css.name);\n    if (style) {\n      // remove what's already there\n      while (style.firstChild) {\n        style.removeChild(style.firstChild);\n      }\n    } else {\n      // create a new style element\n      style = document.createElement('style');\n      style.setAttribute('id', 'override_' + css.name);\n      document.head.appendChild(style);\n    }\n    \n    // update the CSS text on the <style> element\n    if (!erase) style.appendChild(document.createTextNode(css.text));\n    \n    return style;\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    // remove the <link> if it exists\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n    \n    // see if we have a css override to erase\n    const file = src.split('/').slice(-1)[0];\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    // we found a css override, delete the contents\n    if (css) {\n      this.updateCSS(css, true);\n    }\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // save and load objects from localStorage\n  \n  // load object from localstorage\n  loadLocalStorage(obj, key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      obj = Object.assign(obj, JSON.parse(window.localStorage[key]));\n    }\n  }\n  \n  // clear localStorage keys starting with prefix\n  clearLocalStorage(key) {\n    delete window.localStorage[key];\n  }\n  \n  // save object to localstorage\n  saveLocalStorage(obj, key) {\n    window.localStorage[key] = JSON.stringify(obj);\n  }\n  \n  // load a string directly from localstorage\n  loadHistoryBuffer(key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      return window.localStorage[key];\n    }\n    return \"\";\n  }\n  \n  // save a string directly to localstorage\n  saveHistoryBuffer(key, text) {\n    window.localStorage[key] = text;\n  }\n  \n  // casting a string argument to the correct type\n  castString(obj, key, value) {\n    if (!obj.hasOwnProperty(key)) return;\n    \n    var type = typeof obj[key];\n    \n    if (typeof value === type) {\n      obj[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          obj[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          obj[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          obj[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          obj[key] = value;\n          break;\n      }\n    }\n  }\n  \n  // change a setting, performing a secondary action if necessary\n  changeSetting(key, value) {\n    this.castString(this.settings, key, value);\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    } else if (key === 'wrapWidth') {\n      // send the screen dimensions\n      this.output.calcDimensions();\n      this.sendText(\"SCREENWIDTH \" + this.settings.wrapWidth);\n      this.sendText(\"SCREENHEIGHT \" + Math.floor(this.output.root.parentNode.clientHeight / this.output.dims.height));\n    }\n  }\n  \n  // load regex/wildcard pattern triggers\n  loadTriggers() {\n    this.loadLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // load automatic timers\n  loadTimers() {\n    this.loadLocalStorage(this.timers, \"timers\");\n  }\n  \n  // load slash command macros\n  loadMacros() {\n    this.loadLocalStorage(this.macros, \"macros\");\n  }\n  \n  // load custom keybindings\n  loadKeys() {\n    this.loadLocalStorage(this.keys, \"keys\");\n  }\n  \n  // load custom css overrides\n  loadCSS() {\n    this.loadLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // override CSS, first check existing styles\n      let css = this.css[i];\n      \n      // autoload CSS changes, except inverse.css\n      if (css.name !== \"inverse.css\") {\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // load custom scrips\n  loadScripts() {\n    this.loadLocalStorage(this.scripts, \"scripts\");\n  }\n  \n  // load client settings\n  loadSettings() {\n    this.settings = Object.assign({}, this.defaultSettings);\n    this.loadLocalStorage(this.settings, \"settings\");\n    \n    if (this.settings['invertHighlight']) {\n      this.loadStyle('./inverse.css');\n    } else {\n      this.unloadStyle('./inverse.css');\n    }\n  }\n  \n  // save regex/wildcard pattern triggers\n  saveTriggers() {\n    this.clearLocalStorage(\"triggers\");\n    this.saveLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // save automatic timers\n  saveTimers() {\n    this.clearLocalStorage(\"timers\");\n    this.saveLocalStorage(this.timers, \"timers\");\n  }\n  \n  // save slash command macros\n  saveMacros() {\n    this.clearLocalStorage(\"macros\");\n    this.saveLocalStorage(this.macros, \"macros\");\n  }\n  \n  // save custom keybindings\n  saveKeys() {\n    this.clearLocalStorage(\"keys\");\n    this.saveLocalStorage(this.keys, \"keys\");\n  }\n  \n  // save custom css overrides\n  saveCSS() {\n    this.clearLocalStorage(\"css\");\n    this.saveLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // update rules in css <style> element\n      let css = this.css[i];\n      \n      if (css.name === \"inverse.css\") {\n        // only load inverse.css if we need it\n        if (this.settings.invertHighlight) {\n          // unload inverse.css if it is linked\n          let links = document.getElementsByTagName(\"link\");\n          for (let j = links.length; j >= 0; j--) {\n            if (links[j] && links[j].getAttribute(\"href\") !== null) {\n              let name = links[j].getAttribute(\"href\").split(\"/\").slice(-1)[0];\n              if (name === css.name) {\n                links[j].parentNode.removeChild(links[j]);\n              }\n            }\n          }\n          \n          if (css.text === \"\") {\n            // there is no override, so relink inverse.css\n            this.loadStyle('./inverse.css');\n          } else {\n            // there is an override, use update it\n            this.updateCSS(css);\n          }\n        }\n      } else {\n        // autoload all files that aren't inverse.css\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // save custom css overrides\n  saveScripts() {\n    this.clearLocalStorage(\"scripts\");\n    this.saveLocalStorage(this.css, \"scripts\");\n  }\n  \n  // save client settings\n  saveSettings() {\n    this.clearLocalStorage(\"settings\");\n    this.saveLocalStorage(this.settings, \"settings\");\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // miscellaneous logging and command links\n\n  // detect if more user input is required for a pueblo command\n  parseCommand(command) {\n    var cmd = command;\n    var regex = new RegExp('\\\\?\\\\?');\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(this.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // manage triggers, timers, macros, and keys\n  createPattern(regex, pattern) {\n    if (regex) {\n      return new RegExp('^' + pattern + '$');\n    } else {\n      return new RegExp('^' + pattern.split(/\\*+/).map(s => s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')).join('(.*)') + '$');\n    }\n  }\n  \n  replaceArgs(args, text) {\n    let newText = text.slice();\n    for (let i = args.length-1; i > -1; i--) {\n      let re = new RegExp('(^|[^\\\\%])%'+i, 'g');\n      let escre = new RegExp('[\"\\'`]', 'g');\n      let esc = args[i].replace(escre, '\\\\$&');\n      newText = newText.replace(re, '$1'+esc);\n    }\n    return newText;\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // initialize terminal elements (input, output, prompt) and clear them\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // handle input window focus and output window scrolling\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    if (this.mobile) return;\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun();\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // spawn, focus and close window panels\n  addPanel(id, cfg, component) {\n    var spawn = this.findSpawn(id);\n    \n    if (spawn) {\n      this.focusPanel(id);\n      return spawn;\n    }\n    \n    var comp = component || id;\n    var el = this.components[comp];\n    \n    if (!el) {\n      el = Spawn;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.id) {\n      config.id = id;\n    }\n    \n    if (!config.headerTitle) {\n      config.headerTitle = id;\n    }\n    \n    if (!config.headerLogo) {\n      var icon = config.icon || \"tab\";\n      config.headerLogo = \"<i class='material-icons' style='margin-left: \"+this.theme.spacing.unit+\"px'>\"+icon+\"</i>\";\n    }\n    \n    if (!config.panelSize) {\n      const margin = this.panels.defaults.maximizedMargin;\n      let wstr = 'calc(50% - ' + 1.5*margin + 'px)';\n\n      if (this.mobile) {\n        wstr = 'calc(100% - ' + 2*margin + 'px)';\n      }\n    \n      config.panelSize = {\n        width: wstr,\n        height: 'calc(100% - ' + 2*margin + 'px)',\n      };\n    }\n    \n    let ref = React.createRef();\n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      let child = React.createElement(el, { innerRef: ref, id: id, panel: container, ...config.props }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content, () => {\n        // add the helpText() controlbar icon\n        let obj = ref.current;\n        if (obj && obj.helpText) {\n          let helpButton = document.createElement('div');\n          helpButton.classList.add(\"jsPanel-btn\",\"jsPanel-btn-help\");\n          helpButton.innerHTML = `<svg class=\"jsPanel-icon\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 512 512\"><circle fill=\"currentColor\" cx=\"255.984\" cy=\"492\" r=\"20\"/><path fill=\"currentColor\" d=\"M412.979,155.775C412.321,69.765,342.147,0,255.984,0c-86.57,0-157,70.43-157,157c0,11.046,8.954,20,20,20 s20-8.954,20-20c0-64.514,52.486-117,117-117s117,52.486,117,117c0,0.356,0.009,0.71,0.028,1.062 c-0.405,46.562-28.227,88.348-71.12,106.661c-40.038,17.094-65.908,56.675-65.908,100.839V412c0,11.046,8.954,20,20,20 c11.046,0,20-8.954,20-20v-46.438c0-28.117,16.334-53.258,41.614-64.051c57.979-24.754,95.433-81.479,95.418-144.516 C413.016,156.585,413.003,156.179,412.979,155.775z\"/></svg>`;\n          helpButton.style.color = this.panels.calcColors(this.panels.defaults.theme)[3];\n          container.controlbar.insertBefore(helpButton, container.controlbar.firstChild);\n          \n          jsPanel.pointerup.forEach((which) => {\n            helpButton.addEventListener(which, (evt) => {\n              obj.helpText(evt.currentTarget);\n            });\n          });\n        }\n        \n        window.client.react.spawns.push(obj);\n      });\n      \n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n    return ref.current;\n  }\n  \n  // create a Spawn window\n  // don't focus if it already exists\n  getSpawn(id, cfg, el) {\n    let spawn = this.findSpawn(id);\n    if (spawn) return spawn;\n    \n    return this.addPanel(id, cfg, el);\n  }\n  \n  // delete spawn window from internal list\n  delSpawn(id) {\n    const spawns = this.react.spawns;\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id === id) {\n        spawns.splice(i, 1);\n      }\n    }\n  }\n  \n  // find spawn window in internal list\n  findSpawn(id) {\n    const spawns = this.react.spawns;\n    for (let i=0; i < spawns.length; i++) {\n      if (spawns[i] && spawns[i].props.id === id) {\n        return spawns[i];\n      }\n    }\n    return null;\n  }\n  \n  // find and close a panel\n  closePanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  // bring a panel into focus\n  focusPanel(id) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === id || this.headertitle.innerText === id);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.settings.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n    \n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      // implement @dec/tf\n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      }\n      \n      // handle text triggers\n      let suppress = false;\n      client.triggers.forEach((trigger, i) => {\n        let re = client.createPattern(trigger.regex, trigger.pattern);\n        let args = text.match(re);\n        \n        if (args) {\n          let txt = client.replaceArgs(args, trigger.text);\n          if (trigger.javascript) {\n            client.execActionScript(txt);\n          } else {\n            client.sendText(txt);\n          }\n        \n          if (trigger.suppress) {\n            client.eatNewline = true;\n            suppress = true;\n          }\n        }\n      });\n      \n      if (suppress) return;\n      \n      if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      \n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect(force=false) {\n    if (!force && this.isConnected()) {\n      return;\n    }\n    \n    if (force || this.reconnectCount < this.reconnectMaxCount) {\n      // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n      let serverProto = window.location.protocol === \"https:\" || this.settings.serverSSL ? \"wss://\" : \"ws://\";\n      let serverUrl = serverProto + this.settings.serverAddress + \":\" + this.settings.serverPort + '/wsclient';\n      \n      this.reconnectCount++;\n      this.conn && this.conn.reconnect(serverUrl);\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n  \n    if (!this.isConnected()) {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n      return;\n    }\n    \n    if (cmd === '') return;\n    \n    this.sendMacro(cmd);\n    this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n  }\n    \n  sendMacro(cmds) {\n    let matched = false;\n    this.macros.forEach((m) => {\n      let re = this.createPattern(m.regex, m.pattern);\n      \n      cmds.split('\\n').forEach((cmd) => {\n        let args = cmd.match(re);\n      \n        if (args) {\n          matched = true;\n          let text = this.replaceArgs(args, m.text);\n          if (m.javascript) {\n            this.execActionScript(text);\n          } else {\n            this.sendMacro(text);\n          }\n        }\n      });\n    });\n    \n    if (!matched) {\n      this.sendText(cmds);\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content);\n      window.client.delSpawn(this.id);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput };\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body });\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={classNames(window.client.settings.ansiFG, window.client.settings.ansiBG)}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport ColorPicker from './ColorPicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentIncreaseIcon from '@material-ui/icons/FormatIndentIncrease';\nimport PublicIcon from '@material-ui/icons/Public';\nimport SettingsEthernetIcon from '@material-ui/icons/SettingsEthernet';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport FontDownloadIcon from '@material-ui/icons/FontDownload';\nimport FormatSizeIcon from '@material-ui/icons/FormatSize';\nimport HistoryIcon from '@material-ui/icons/History';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n    overflowY: \"auto\",\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    flexFlow: \"row wrap\",\n    justifyContent: 'space-evenly',\n  },\n  list: {\n    flexGrow: 0,\n    flexBasis: 'auto',\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    right: 0,\n    top: 0,\n    bottom: 0,\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  leftright: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth,\n      invertHighlight, debugActions, serverAddress, serverPort, serverSSL,\n      historySize, historySpawnSize,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, sidebarShowPlayers, fontFamily, fontSize,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarWidth } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Debugging</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug user-defined actions?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugActions} value=\"debugActions\" onChange={this.handleSwitch('debugActions')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Connection Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <PublicIcon />\n                </ListItemIcon>\n                <TextField label=\"Server address\" value={serverAddress} onChange={this.handleValue('serverAddress')} />\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <SettingsEthernetIcon />\n                </ListItemIcon>\n                <TextField label=\"Server port\" value={serverPort} onChange={this.handleValue('serverPort')} type=\"number\" />\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <SecurityIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Encrypt connection with SSL?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={serverSSL} value=\"serverSSL\" onChange={this.handleSwitch('serverSSL')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>History Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <HistoryIcon />\n                </ListItemIcon>\n                <TextField label=\"History Size\" value={historySize} onChange={this.handleValue('historySize')} type=\"number\" helperText=\"Lines of terminal output history.\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <HistoryIcon />\n                </ListItemIcon>\n                <TextField label=\"Spawn History Size\" value={historySpawnSize} onChange={this.handleValue('historySpawnSize')} type=\"number\" helperText=\"Lines of spawn window history.\" />\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Display Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <WrapTextIcon />\n                </ListItemIcon>\n                <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <FontDownloadIcon />\n                </ListItemIcon>\n                <TextField label=\"Font\" value={fontFamily} onChange={this.handleValue('fontFamily')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <FormatSizeIcon />\n                </ListItemIcon>\n                <TextField label=\"Size\" value={fontSize} onChange={this.handleValue('fontSize')} type=\"number\" />\n              </ListItem>\n            </List>\n              \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Color Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Background\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Foreground\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Invert foreground & background?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>@decompile/tf</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <EditIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <CodeIcon />\n                </ListItemIcon>\n                <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n              </ListItem>\n            </List>\n\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Sidebar Display</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <VerticalSplitIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <PictureInPictureIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen} className={classes.leftright}>\n                <Icon color=\"action\">\n                  <BorderLeftIcon />\n                </Icon>\n                <Typography>Left</Typography>\n                <Switch checked={sidebarAnchor === \"right\"}\n                  color=\"default\" disabled={!sidebarOpen}\n                  value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n                  onChange={this.handleValue('sidebarAnchor')}\n                />\n                <Typography>Right</Typography>\n                <Icon color=\"action\">\n                  <BorderRightIcon />\n                </Icon>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <FormatIndentIncreaseIcon />\n                </ListItemIcon>\n                <TextField label=\"Sidebar Width\" value={sidebarWidth} onChange={this.handleValue('sidebarWidth')} />\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disabled={!sidebarOpen} disablePadding dense subheader={<ListSubheader>Sidebar Content</ListSubheader>}>\n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <AccountCircleIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show players?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <GroupWorkIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show things?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  root: {\n    width: \"100%\",\n  },\n  title: {\n    margin: '0 20px',\n    flex: 1,\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n    display: \"flex\",\n    \"flexFlow\": \"row nowrap\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  mobileButtons: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n  },\n  scrollButtons: {\n    flex: '0 0 24px',\n    padding: 0,\n    alignSelf: \"center\",\n  },\n  emptyText: {\n    textAlign: \"center\",\n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon>{props.children}</Icon>);\n};\n\n\nfunction BadgeWrapper(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        {props.children}\n      </Badge>\n    );\n  }\n  return props.children;\n};\n\n\nfunction TabButton(props) {\n  if (props.visible) {\n    return (\n      <IconButton onClick={props.onClick} className={props.className}>\n        {props.direction === \"left\" ? (\n          <KeyboardArrowLeftIcon />\n        ) : (\n          <KeyboardArrowRightIcon />\n        )}\n      </IconButton>\n    );\n  } else {\n    return (\n      <div className={props.className}></div>\n    );\n  }\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      buttons: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  addButton = (button) => {\n    const { buttons } = this.state;\n    buttons.push(button);\n    this.setState({ buttons });\n  };\n  \n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    task.count = 0;\n    taskbar.push(task);\n    this.setState({ taskbar });\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  toggleSidebar = () => {\n    const client = window.client;\n    \n    const toggle = !client.settings.sidebarOpen;\n    client.changeSetting('sidebarOpen', toggle);\n    this.setState({ sidebarOpen: toggle });\n    client.saveSettings();\n    client.react.portal.forceUpdate();\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n\n  openCustomizer = () => {\n    window.client.addPanel(\"Customizer\", { icon: 'build' });\n  };\n  \n  previewUpload = () => {\n    window.client.addPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, buttons, historyAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n    const { sidebarOpen, sidebarAnchor } = window.client.settings;\n\n    var rev = input && Boolean(historyAnchor) ? input.history.slice().reverse() : [];\n    \n    const renderTasks = taskbar.map((task,i) => (\n      <Tooltip key={i} title={task.headertitle.innerText}>\n        <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n          <BadgeWrapper count={() => task.count}>\n            <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n            {!window.client.mobile && task.headertitle.innerText}\n          </BadgeWrapper>\n        </Button>\n      </Tooltip>\n    ));\n\n    const renderButtons = buttons.map((button,i) => (\n      <Tooltip key={i} title={button.title}>\n        <Button aria-label={button.ariaLabel} onClick={button.action}>\n          <BadgeIcon count={button.count}>\n            {button.icon}\n          </BadgeIcon>\n        </Button>\n      </Tooltip>\n    ));\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n          <Toolbar disableGutters={!this.state.open}>\n            {sidebarAnchor === \"left\" && (\n              <div className={classes.sectionMobile}>\n                <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                  <Button aria-label=\"open-left-sidebar\" onClick={this.toggleSidebar}>\n                    {sidebarOpen ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n                  </Button>\n                </Tooltip>\n              </div>\n            )}\n            \n            <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n              {title}\n            </Typography>\n            \n            <div className={classes.sectionDesktop}>\n              <div className={classes.flex}></div>\n              {renderTasks}\n              <div className={classes.tasksep}></div>\n              {renderButtons}\n            </div>\n            \n            <Tooltip title=\"Client utilities...\">\n              <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n                <MenuIcon />\n              </Button>\n            </Tooltip>\n            \n            {sidebarAnchor === \"right\" && (\n              <div className={classes.sectionMobile}>\n                <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                  <Button aria-label=\"open-right-sidebar\" onClick={this.toggleSidebar}>\n                    {sidebarOpen ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n                  </Button>\n                </Tooltip>\n              </div>\n            )}\n            \n            <SwipeableDrawer\n              variant=\"temporary\"\n              anchor=\"left\"\n              open={open}\n              onClose={this.closeDrawer}\n              onOpen={this.openDrawer}\n              \n            >\n              <Settings closeDrawer={this.closeDrawer} />\n            </SwipeableDrawer>\n\n            <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n              <form onSubmit={this.searchHelp}>\n                <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"off\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n              </form>\n              <Button fullWidth onClick={this.searchHelp}>\n                Get Help\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n              <form onSubmit={this.saveLog}>\n                <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                  onChange={this.typeLog} autoFocus\n                  InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n                />\n              </form>\n              <Button fullWidth onClick={this.saveLog}>\n                Save Log\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n              <form onSubmit={this.handleURL} className={classes.padded}>\n                <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n              </form>\n              <Button onClick={this.handleURL}>\n                Upload URL\n              </Button>\n              <input\n                accept=\"text/plain\"\n                className={classes.fileinput}\n                id=\"file.upload\"\n                type=\"file\"\n                onChange={this.handleFile}\n              />\n              <label htmlFor=\"file.upload\">\n                <Button component=\"span\">\n                  Choose File\n                </Button>\n              </label>\n              <Button onClick={this.previewUpload}>\n                Paste Text\n              </Button>\n            </Popover>\n            \n            <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n              <List className={classes.historyPopover}>\n                {rev.map((cmd, i) => (\n                  <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                    <ListItemText primary={cmd} />\n                  </ListItem>\n                ))}\n              </List>\n              <Button onClick={this.clearHistory}>\n                Clear History\n              </Button>\n            </Popover>\n            \n            <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n              <MenuItem onClick={this.closeMenu}>\n                <Tooltip title=\"Close menu.\">\n                  <ExpandLessIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openDrawer}>\n                <Tooltip title=\"Change settings.\">\n                  <SettingsIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.openCustomizer}>\n                <Tooltip title=\"Client customization.\">\n                  <BuildIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n                <Tooltip title=\"Upload file/URL.\">\n                  <CloudUploadIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n                <Tooltip title=\"Save display log.\">\n                  <SaveIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n                <Tooltip title=\"Show command history.\">\n                  <KeyboardIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.clearScreen}>\n                <Tooltip title=\"Clear screen.\">\n                  <BackspaceIcon />\n                </Tooltip>\n              </MenuItem>\n              <MenuItem onClick={this.reconnect}>\n                <Tooltip title=\"Reconnect.\">\n                  <WifiIcon />\n                </Tooltip>\n              </MenuItem>            \n            </Menu>\n\n            <div className={classes.tasksep}></div>\n          </Toolbar>\n        </AppBar>\n        \n        <div className={classes.sectionMobile}>\n          <AppBar position=\"relative\">\n            <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n              {buttons.length > 0 && buttons.map((button,i) => (\n                <Tooltip key={i} title={button.title}>\n                  <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                    aria-label={button.ariaLabel} \n                    icon={(<BadgeIcon count={button.count}>{button.icon}</BadgeIcon>)}\n                    onClick={button.action}\n                  />\n                </Tooltip>\n              ))}\n            </Tabs>\n          </AppBar>\n        </div>\n        \n        <div className={classes.sectionMobile}>\n          <AppBar position=\"relative\">\n            <Tabs value={false} indicatorColor=\"primary\" scrollable scrollButtons=\"on\" ScrollButtonComponent={TabButton} classes={{ scrollButtons: classes.scrollButtons }}>\n              {taskbar.length > 0 && taskbar.map((task,i) => (\n                <Tooltip key={i} title={task.headertitle.innerText}>\n                  <Tab key={i} classes={{ wrapper: classes.tasklabel }}\n                    aria-label=\"open-task\"\n                    label={(\n                      <span>\n                        <BadgeWrapper count={() => task.count}>\n                          <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n                        </BadgeWrapper>\n                        {task.headertitle.innerText}\n                      </span>\n                    )}\n                    onClick={() => this.popTask(task)}\n                  />\n                </Tooltip>\n              ))}\n            </Tabs>\n          </AppBar>\n        </div>\n      </div>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\nconst MAX_HISTORY_SIZE = 10000;\nconst HISTORY_KEY = \"output_history\";\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    height: \"100%\",\n    bottom: 0,\n    right: 0,\n  },\n  lineheight: {\n    lineHeight: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.body.onresize = this.onResize;\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    \n    if (window.client.settings.historySize > 0) {\n      window.client.output.loadHistory(HISTORY_KEY);\n    }\n    \n    this.onResize();\n  }\n  \n  onResize = event => {\n    clearTimeout(this.doResize);\n    setTimeout(this.doResize, 1000);\n  };\n  \n  doResize = () => {\n    const client = window.client;\n    client.output.calcDimensions();\n    client.sendText(\"SCREENWIDTH \" + Math.min(client.settings.wrapWidth, Math.floor(window.client.output.root.parentNode.clientWidth / window.client.output.dims.width)));\n    client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n    client.output.scrollDown();\n    \n    client.mobile = !window.matchMedia(this.props.theme.breakpoints.up('md').substring(7)).matches\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    if (window.client.settings.historySize > 0) {\n      window.client.output.saveHistory(HISTORY_KEY, Math.min(MAX_HISTORY_SIZE, window.client.settings.historySize));\n    }\n    \n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    const { fontFamily, fontSize } = window.client.settings;\n    \n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classNames(classes.frame)} style={font} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\" variant=\"caption\" className={classes.lineheight}>\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    const { fontFamily, fontSize } = window.client.settings;\n    \n    const size = 1.5*fontSize;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? size/2 : size) + \"pt\",\n    };\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)} style={font}  autoComplete=\"off\" autoFocus={!window.client.mobile}></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \".\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        <Typography\n          align=\"right\"\n          color=\"textPrimary\"\n          noWrap\n        >\n          {status}\n        </Typography>\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport WifiIcon from '@material-ui/icons/Wifi';\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n  },\n  right: {\n    position: \"absolute\",\n    right: 0,\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.reconnect(true);\n    }\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <Dialog\n        className={classes.frame}\n        open={open}\n        fullScreen={window.client.mobile}\n        onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n        onClose={this.closeLogin}\n        aria-labelledby=\"responsive-dialog-title\"\n        disableBackdropClick\n        disableEscapeKeyDown\n      >\n        <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n          Character Login\n          <span className={classes.right}>\n            <Tooltip title=\"Reconnect.\">\n              <IconButton onClick={this.reconnect}>\n                <WifiIcon />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title=\"Change settings.\">\n              <IconButton onClick={() => window.client.react.taskbar.openDrawer()}>\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n          </span>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <span dangerouslySetInnerHTML={{ __html: msg }} />\n          </DialogContentText>\n          <TextField\n            className={classes.text}\n            autoComplete=\"username\"\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n            label=\"Character Name\"\n            type=\"string\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n          <TextField\n            className={classes.text}\n            autoComplete=\"current-password\"\n            margin=\"dense\"\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n            <PersonAddIcon />\n            Register\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n            <PersonOutlineIcon />\n            Guest\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n            <PersonIcon />\n            Login\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Login);\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    minWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'space-between',\n  },\n  contents: {\n    flexShrink: 1,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  playerItem: {\n    padding: 2,\n  },\n  thingItem: {\n  },\n  customExits: {\n    flexGrow: 1,\n    position: \"relative\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  navWidget: {\n    position: \"relative\",\n    bottom: 0,\n    left: \"50%\",\n    flexShrink: 0,\n    '-webkit-transform': 'translateX(-50%)',\n    transform: 'translateX(-50%)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (match === -1) {\n          match = keys.indexOf(exit);\n        }\n      });\n\n      if (match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarWidth, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n    var exitWidget;\n    var navWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.bottom}>\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Other Exits</ListSubheader>}>\n                {customExits.map((exit, i) => (\n                  <ListItem className={classes.exitItem} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                    <ListItemText primary={exit.split(\";\")[0]} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n          </div>\n        );\n      }\n      \n      if (this.useCompass) {\n        navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {this.buildExit(\"In\")}\n            {this.buildExit(\"East\")}\n            {this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={classes.frame} style={{ width: sidebarWidth }} onClick={() => window.client.focus()}>\n        <div className={classes.contents}>\n          <span>\n            {sidebarShowPlayers && players.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Players</ListSubheader>}>\n                {players.map((player, i) => (\n                  <ListItem disableGutters className={classes.playerItem} key={i}\n                    button onClick={() => this.sendCommand(\"look \"+player)}\n                  >\n                    <ListItemAvatar>\n                      <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText primary={player} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {sidebarShowThings && things.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Contents</ListSubheader>}>\n                {things.map((thing, i) => (\n                  <ListItem className={classes.thingItem} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                    <ListItemText primary={thing} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </span>\n        </div>\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarWidth: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarWidth } = window.client.settings;\n      \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarWidth={sidebarWidth} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = \"font-family: '\" + fontFamily + \"', monospace; font-size: \" + (window.client.mobile ? fontSize/2 : fontSize) + \"pt;\";\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/mode/javascript';\nimport 'brace/mode/css';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  form: {\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\", \n  },\n  top: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n  },\n  bottom: {\n    position: \"relative\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  middle: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      flex: 1,\n      alignItems: \"center\",\n    },\n  },\n  align: {\n    width: \"100%\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n  },\n  flex: {\n    flex: 1,\n    minWidth: \"10em\",\n  },\n  editor: {\n    flex: 1,\n    minWidth: \"10em\",\n    minHeight: \"4em\",\n    marginTop: theme.spacing.unit,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  mobileOnly: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass FormEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const { list, listName, selected } = props;\n\n    const template = window.client.actionTemplates[listName];\n    \n    this.state = {\n      list: list,\n      item: Object.assign({}, list && selected > -1 ? list[selected] : template),\n      selected: selected,\n      status: \"\",\n      error: false,\n      javascript: true,\n      needsToResize: false,\n    };\n    \n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    this.props.panel.options.resizeit.resize = null;\n    clearTimeout(this.clearStatus);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { list, listName, selected } = props;\n    \n    const template = window.client.actionTemplates[listName];\n    \n    var newState = {};\n    \n    if (list !== state.list) {\n      newState.list = list;\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : template);\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (selected !== state.selected) {\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : template);\n      return newState;\n    }\n    \n    return null;\n  }\n  \n  defaultText() {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const name = item.name;\n    \n    if (!immutable) return \"\";\n    \n    if (list && selected > -1 && list[selected].text !== \"\") {\n      return list[selected].text.slice();\n    }\n    \n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          item.name = name;\n          item.text = req.responseText;\n          this.setState({ item, list, selected });\n        } else {\n          alert(\"Unable to download file! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", \"./\" + name);\n    req.send();\n\n    return window.client.actionTemplates[listName].text.slice();\n  }\n\n  setStatus = (error, status) => {\n    this.setState({ error: error, status: status });\n    clearTimeout(this.clearStatus);\n    setTimeout(this.clearStatus, 3000);\n  };\n\n  clearStatus = () => {\n    this.setState({ error: false, status: \"\" });\n  };\n  \n  handleChange = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.value;\n    this.setState({ item });\n  };\n  \n  handleNumber = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = parseInt(e.target.value);\n    this.setState({ item });\n  };\n  \n  handleSwitch = (key) => (e) => {\n    const { item } = this.state;\n    if (item.hasOwnProperty(key)) {\n      item[key] = e.target.checked;\n      this.setState({ item });\n    } else {\n      this.setState({ [key]: e.target.checked });\n    }\n  };\n  \n  changeText = (text) => {\n    const { item } = this.state;\n    item.text = text;\n    this.setState({ item });\n  };\n\n  onResize = () => {\n    this.setState({ needsToResize: false });\n    this.editor.current.editor.resize();\n  };\n  \n  onSubmit = (e) => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n\n    e.preventDefault();\n\n    if (item.name === \"\") {\n      this.setStatus(true, \"Name must not be blank.\" );\n      return;\n    }\n    \n    var match = list.map((item) => item.name).indexOf(item.name);\n    if (match > -1 && match !== selected) {\n      this.setStatus(true, \"Name already saved, choose another.\");\n      return;\n    }\n    \n    if (immutable && selected === -1) {\n      this.setStatus(true, \"You may only edit existing items.\");\n      return;\n    }\n    \n    this.setStatus(false, \"Saved.\" );\n    \n    if (selected > -1) {\n      list[selected] = item;\n      client.react.customizer.setState({ selected: selected });\n    } else {\n      list.push(item);\n      client.react.customizer.setState({ selected: list.length-1 });\n    }\n    \n    if (css) {\n      client.saveCSS();\n    } else {\n      client.saveLocalStorage(list, listName);\n    }\n  };\n  \n  onDelete = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n    \n    if (window.confirm(\"Do you really want to delete that?\") && list && selected > -1) {\n      if (immutable) {\n        let name = list[selected].name;\n        list[selected] = Object.assign({}, client.actionTemplates[listName]);\n        list[selected].name = name;\n        this.setState({ item: Object.assign({}, list[selected]) });\n      } else {\n        list.splice(selected, 1);\n        client.react.customizer.setState({ selected: -1 });\n      }\n      \n      this.setStatus(false, \"Deleted.\" );\n\n      if (css) {\n        client.saveCSS();\n      } else {\n        client.saveLocalStorage(list, listName);\n      }\n    }\n  };\n  \n  onReset = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    var template = Object.assign({}, window.client.actionTemplates[listName]);\n    \n    if (list && selected > -1) {\n      if (immutable) {\n        template.name = list[selected].name;\n        if (item.text === \"\") {\n          template.text = this.defaultText();\n        } else {\n          template.text = list[selected].text;\n        }\n      } else {\n        template = list[selected];\n      }\n    }\n    \n    this.setState({\n      item: Object.assign({}, template),\n    });\n    \n    this.setStatus(false, \"Reset.\");\n  };\n  \n  componentDidUpdate() {\n    if (this.state.needsToResize) {\n      this.onResize();\n    }\n  }\n\n  render() {\n    const { classes, selected, Form, immutable } = this.props;\n    const { item, error, status } = this.state;\n    \n    var ltype = \"MushCode\";\n    var rtype = \"JavaScript\";\n    if (!Form) {\n      ltype = \"Text\";\n      if (item.name.endsWith('.css')) {\n        rtype = \"CSS\";\n      }\n    }\n    \n    var mode = this.state.javascript;\n    if (item.hasOwnProperty('javascript')) {\n      mode = item.javascript;\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <form onSubmit={this.onSubmit} className={classes.form}>\n        \n          <div className={classes.top}>\n            <TextField label=\"Name\" className={classes.flex} value={item.name} onChange={this.handleChange('name')} disabled={immutable} />\n            <span className={classes.switchText}>\n              <Typography>{ltype}</Typography>\n              <Switch checked={mode}\n                color=\"default\"\n                onChange={this.handleSwitch('javascript')}\n              />\n              <Typography>{rtype}</Typography>\n            </span>\n          </div>\n          \n          {Form && (<Form className={classes.top} item={item} handleNumber={this.handleNumber} handleChange={this.handleChange} handleSwitch={this.handleSwitch} />)}\n          \n          <AceEditor\n            className={classes.editor}\n            ref={this.editor}\n            mode={mode ? rtype.toLowerCase() : ltype.toLowerCase()}\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={item.text}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n          \n          <div className={classes.bottom}>\n            <Button className={classes.mobileOnly} classes={{ label: classes.block }} onClick={() => window.client.react.customizer.setState({ edit: false, selected: -1 })}>\n              <CloseIcon /> Close\n            </Button>\n            <Button onClick={this.onDelete} classes={{ label: classes.block }} disabled={selected === -1}>\n              <DeleteIcon /> Delete\n            </Button>\n            <span className={classes.middle}>\n              <Typography className={classes.align} color={error ? \"error\" : \"default\"}>\n                {status}\n              </Typography>\n            </span>\n            <Button onClick={this.onSubmit} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              <SaveIcon /> Save\n            </Button>\n            <Button onClick={this.onReset} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              {immutable && item.text === \"\" ? (<CloudDownloadIcon />) : (<UndoIcon />)}\n              {immutable && item.text === \"\" ? \"Source\" : \"Reset\"}\n            </Button>\n          </div>\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nFormEditor.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n  list: PropTypes.array.isRequired,\n  listName: PropTypes.string.isRequired,\n  selected: PropTypes.number.isRequired,\n  Form: PropTypes.func,\n  immutable: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(FormEditor);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TriggerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} />\n        <div className={classes.row}>\n          <span className={classes.switchText}>\n            <Typography>Wildcard</Typography>\n            <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} />\n            <Typography>RegExp</Typography>\n          </span>\n          <span className={classes.switchText}>\n            <Typography>Suppress terminal output?</Typography>\n            <Switch checked={item.suppress} onChange={handleSwitch('suppress')} />\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nTriggerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TriggerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TimerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleNumber, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField type=\"number\" label=\"Delay seconds\" className={classes.flex} value={String(item.delay)} onChange={handleNumber('delay')} />\n        <span className={classes.switchText}>\n          <Typography>Repeat this timer?</Typography>\n          <Switch checked={item.repeat} onChange={handleSwitch('repeat')} />\n        </span>\n        <TextField type=\"number\" disabled={!item.repeat} label=\"Number of times\" className={classes.flex} value={String(item.times)} onChange={handleNumber('times')} />\n      </div>\n    );\n  }\n}\n\nTimerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TimerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MacroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" className={classes.flex} value={item.pattern} onChange={handleChange('pattern')} />\n        <span className={classes.switchText}>\n          <Typography>Wildcard</Typography>\n          <Switch checked={item.regex} color=\"default\" onChange={handleSwitch('regex')} />\n          <Typography>RegExp</Typography>\n        </span>\n      </div>\n    );\n  }\n}\n\nMacroForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MacroForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n  switchText: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass KeyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <span className={classes.flex}>\n          <TextField label=\"Key code\" value={item.keycode ? item.keycode : \"\"} onChange={handleChange('keycode')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Ctrl</Typography>\n          <Checkbox checked={item.ctrl} onChange={handleSwitch('ctrl')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Alt</Typography>\n          <Checkbox checked={item.alt} onChange={handleSwitch('alt')} />\n        </span>\n        <span className={classes.switchText}>\n          <Typography>Shift</Typography>\n          <Checkbox checked={item.shift} onChange={handleSwitch('shift')} />\n        </span>\n      </div>\n    );\n  }\n}\n\nKeyForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(KeyForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\n\nimport FormEditor from './FormEditor';\nimport TriggerForm from './TriggerForm';\nimport TimerForm from './TimerForm';\nimport MacroForm from './MacroForm';\nimport KeyForm from './KeyForm';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  container: {\n    padding: 3*theme.spacing.unit,\n    flex: 1,\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    marginRight: 3*theme.spacing.unit,\n  },\n  right: {\n    position: \"relative\",\n    flex: 1,\n    height: \"100%\",\n    overflow: \"hidden\",\n  },\n  listText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  overflow: {\n    flex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      height: \"100%\",\n      display: 'flex',\n      flexFlow: \"column nowrap\",\n      justifyContent: \"space-between\",\n    },\n  },\n  mobileOpen: {\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Customizer extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const client = window.client;\n    \n    this.tabs = [\n      {\n        list: client.triggers,\n        listName: \"Triggers\",\n        Form: TriggerForm,\n        immutable: false,\n      },\n      {\n        list: client.macros,\n        listName: \"Macros\",\n        Form: MacroForm,\n        immutable: false,\n      },\n      {\n        list: client.css,\n        listName: \"CSS\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.scripts,\n        listName: \"Scripts\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.timers,\n        listName: \"Timers\",\n        Form: TimerForm,\n        immutable: false,\n      },\n      {\n        list: client.keys,\n        listName: \"Keys\",\n        Form: KeyForm,\n        immutable: false,\n      },\n    ];\n    \n    this.state = {\n      tab: 0,\n      edit: false,\n      selected: -1,\n      helpText: null,\n    };\n  }\n\n  changeTab = (event, tab) => {\n    this.setState({ tab, selected: -1, edit: false });\n  };\n  \n  onSelect = (key) => (event) => {\n    this.setState({ selected: key });\n  }; \n  \n  componentDidMount() {\n    window.client.react.customizer = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.customizer = null;\n  }\n  \n  helpText(anchor) {\n    this.setState({ helpText: anchor });\n  }\n  \n  render() {\n    const { classes, panel } = this.props;\n    const { selected, edit, helpText } = this.state;\n    const tab = this.tabs[this.state.tab];\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar position=\"static\">\n          <Tabs value={this.state.tab} scrollable scrollButtons=\"on\" onChange={this.changeTab}>\n            {this.tabs.map((t,i) => (<Tab key={i} label={t.listName} />))}\n          </Tabs>\n        </AppBar>\n        <Typography className={classes.container} component=\"div\">\n          <div className={classes.left}>\n            <span className={edit || selected > -1 ? classes.mobileClose : classes.mobileOpen}>\n              <div className={classes.overflow}>\n                <List disablePadding dense subheader={<ListSubheader>{tab.listName}</ListSubheader>}>\n                  {tab.list.map((item, i) => (\n                    <ListItem key={i} dense button divider selected={selected === i} onClick={this.onSelect(i)} className={i % 2 === 0 ? classes.even : classes.odd}>\n                      <ListItemIcon className={classes.listNum}><span>{i+1}</span></ListItemIcon>\n                      <ListItemText className={classes.listText} primary={item.name} />\n                    </ListItem>\n                  ))}\n                  {tab.list.length < 1 && (\n                    <ListItem key={-1} dense className={classes.even}>\n                      <ListItemText className={classes.listText} secondary={\"No \"+tab.listName.toLowerCase()} />\n                    </ListItem>\n                  )}\n                </List>\n              </div>\n              {!tab.immutable && (\n                <Button classes={{ label: classes.block }} onClick={() => this.setState({ edit: true, selected: -1 })}>\n                  <AddCircleIcon />\n                  New {tab.listName.slice(0,-1)}\n                </Button>\n              )}\n            </span>\n          </div>\n          <div className={classes.right}>\n            <span className={edit || selected > -1 ? classes.mobileOpen : classes.mobileClose}>\n              <FormEditor list={tab.list} listName={tab.listName.toLowerCase()} selected={selected} panel={panel} Form={tab.Form} immutable={tab.immutable} />\n            </span>\n          </div>\n        </Typography>\n        <Popover anchorEl={helpText} open={Boolean(helpText)} onClose={() => this.setState({ helpText: null })}>\n          <Typography>\n            This is where help text goes.\n          </Typography>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nCustomizer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Customizer);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              <div>{maillist.length} Messages ({unread} unread)</div>\n              <span>\n                <Tooltip title=\"Move multiple files to trash.\">\n                  <IconButton onClick={this.toggleDelete}>\n                    <DeleteSweepIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Purge deleted mail.\">\n                  <IconButton onClick={this.purgeMail}>\n                    <DeleteForeverIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Send a new message.\">\n                  <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                    <CreateIcon />\n                  </IconButton>\n                </Tooltip>\n              </span>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  mobileOnly: {\n    display: 'block',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body+'\\n');\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n    const { fontFamily, fontSize } = window.client.settings;\n\n    const font = {\n      fontFamily: \"'\" + fontFamily + \"', monospace\",\n      fontSize: (window.client.mobile ? fontSize/2 : fontSize) + \"pt\",\n    };\n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body+'\\n');\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)} style={font}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.mobileOnly} onClick={() => window.client.react.mailbox.setState({ mailitem: null })}>\n            <Icon>\n              <CloseIcon />\n            </Icon>\n            Close\n          </Button>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  mobileOpen: {\n    display: 'flex',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addPanel(\"Sendmail\", { icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <span className={mailitem ? classes.mobileClose : classes.mobileOpen}>\n            { maillist && (\n              <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n            )}\n          </span>\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n\nclient.execUserScript('onLoad.js');\n\n\n\n\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-37-1\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Emulator.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n  \n  onLine(that, lineBuf) {\n    Emulator.parseLinks(that, lineBuf);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    if (!data) return;\n    \n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    //var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    var txt = \"0123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 10.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  /////////////////////////////////////////////////////////\n  // save and load history buffers\n  \n  loadHistory = (key) => {\n    if (window.localStorage.hasOwnProperty(key)) {\n      const html = window.localStorage[key];\n      if (html !== \"\") {\n        try {\n          this.root.innerHTML = html + this.root.innerHTML;\n        } catch (e) {\n          console.log(\"Unable to insert history: \", e);\n        }\n      }\n    }\n  };\n\n  saveHistory = (key, size) => {\n    const store = window.localStorage;\n    \n    if (size > 0) {\n      const nodes = this.root.childNodes;\n      var start = nodes.length - 1;\n      \n      if (start < 0) return;\n      \n      var found = 0;\n      \n      for (let i = start; i > -1 && found < size; i--) {\n        let count = nodes[i].textContent.split(\"\\n\").length;\n        \n        if (nodes[i].textContent.endsWith('\\n')) {\n          count = count - 1;\n        }\n        \n        if (count > 0) {\n          found = found + count;\n          start = i;\n        }\n      }\n      \n      //var buff = \"\";\n      //for (let i = start; i < nodes.length; i++) {\n      //  buff = buff + nodes[i].outerHTML;\n      //}\n      \n      var range = document.createRange();\n      range.setStartBefore(nodes[start]);\n      range.setEndAfter(nodes[nodes.length-1]);\n      var fragment = range.cloneContents();\n      var div = document.createElement('div');\n      div.appendChild(fragment);\n      \n      store[key] = div.innerHTML;\n    } else {\n      delete store[key];\n    }\n  };\n  \n  \n}\n\nexport default Emulator;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n"],"sourceRoot":""}