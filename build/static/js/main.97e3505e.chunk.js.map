{"version":3,"sources":["client/connection.js","client/userinput.js","client/utils.js","client/jsonapi.js","client/index.js","modules/Sendmail/index.jsx","modules/Upload/index.jsx","modules/Settings/colorpicker.jsx","modules/Settings/index.jsx","modules/Taskbar/index.jsx","modules/Terminal/index.jsx","modules/Input/index.jsx","modules/Statusbar/index.jsx","modules/Login/index.jsx","modules/Sidebar/index.jsx","modules/Portal/index.jsx","modules/Customizer/FormEditor.jsx","modules/Customizer/TriggerForm.jsx","modules/Customizer/TimerForm.jsx","modules/Customizer/MacroForm.jsx","modules/Customizer/KeyForm.jsx","modules/Customizer/index.jsx","modules/BBoard/BBListItem.jsx","modules/BBoard/BBList.jsx","modules/BBoard/BBMessageListItem.jsx","modules/BBoard/BBMessageList.jsx","modules/BBoard/BBMessage.jsx","modules/BBoard/index.jsx","modules/Mailbox/MailListItem.jsx","modules/Mailbox/MailList.jsx","modules/Mailbox/MailItem.jsx","modules/Mailbox/index.jsx","index.js","client/emulator.js"],"names":["Connection","url","Object","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","socket","isOpen","onOpen","onError","onClose","onUpdate","onText","onObject","onHTML","onPueblo","onPrompt","hasData","reconnect","that","isConnected","sendText","window","WebSocket","onopen","evt","onerror","onclose","onmessage","readyState","close","data","send","CHANNEL_TEXT","CHANNEL_JSON","JSON","stringify","channel","parse","e","console","log","CHANNEL_HTML","CHANNEL_PUEBLO","CHANNEL_PROMPT","onMessage","substring","UserInput","root","selectionStart","selectionStop","onEnter","onEscape","onPageUp","onPageDown","keyCycleForward","keyCycleBackward","clearHistory","onkeydown","onkeyup","onKeyDown","onKeyUp","key","code","ctrl","keyCode","which","ctrlKey","shift","shiftKey","alt","altKey","prevent","isKeyCycleBackward","cycleBackward","isKeyCycleForward","cycleForward","cmd","value","saveCommand","preventDefault","focus","moveCursor","pressKey","releaseKey","history","ncommand","save_current","current","selectionEnd","length","createTextRange","range","collapse","select","force","text","getSelection","toString","document","selection","type","createRange","element","activeElement","tagName","toLowerCase","getAttribute","indexOf","match","Utils","line","result","links","regex","lastIndex","exec","info","start","index","xch_cmd","className","end","lineBuf","ii","ilen","nodeValue","extractLinks","nodeIdx","nodeStart","nodeEnd","startOff","startNode","endOff","endNode","splitText","middleNode","anchor","createElement","parentNode","replaceChild","target","setAttribute","onCommand","href","appendChild","warn","command","search","val","prompt","replace","JSONAPI","maillist","self","args","mailitem","boardlist","bbmsglist","bbmsg","listcontents","EventEmitter","require","TinyCon","Colors","LOGINFAIL","Client","_this","setBubble","hidden","tinycon","updateCounter","settings","ansiFG","ansiBG","wrapWidth","invertHighlight","decompileEditor","decompileKey","sidebarOpen","sidebarAnchor","sidebarWidth","sidebarAlwaysShow","sidebarShowPlayers","sidebarShowThings","sidebarShowExits","sidebarShowCompass","debugEvents","debugActions","defaultSettings","assign","actionTemplates","triggers","name","javascript","pattern","suppress","timers","delay","repeat","times","macros","keys","keycode","css","scripts","loadTriggers","loadTimers","loadMacros","loadKeys","loadCSS","loadScripts","loadSettings","colors","theme","createTheme","mobile","matchMedia","breakpoints","up","matches","output","input","events","panels","jsPanel","react","portal","taskbar","terminal","statusbar","login","mailbox","sendmail","bboard","upload","customizer","conn","container","serverAddress","serverPort","serverSSL","loggedIn","jsonapi","updateLines","eatNewline","delayContents","scrollThreshold","reconnectTimer","reconnectCount","reconnectMaxCount","client","initPanels","initNotifications","render","ReactDOM","React","Portal","getElementById","src","tag","async","getElementsByTagName","script","i","eval","style","file","split","slice","updateCSS","head","erase","arguments","undefined","firstChild","removeChild","createTextNode","defaultTheme","typography","useNextVariants","palette","primary","indigo","secondary","blueGrey","createMuiTheme","obj","localStorage","hasOwnProperty","String","bind","Number","castString","loadStyle","unloadStyle","calcDimensions","Math","floor","clientHeight","dims","height","loadLocalStorage","clearLocalStorage","saveLocalStorage","j","sendCommand","parseCommand","classid","msg","scroll","nearBottom","appendMessage","scrollDown","onChange","RegExp","map","s","join","newText","re","clear","_this2","scrollPageUp","scrollPageDown","_this3","Emulator","onunload","onresize","scrollTop","scrollHeight","fun","cfg","_this4","el","Mailbox","Upload","Sendmail","BBoard","Customizer","focusPanel","config","headerTitle","headerLogo","icon","spacing","unit","panelSize","margin","defaults","maximizedMargin","wstr","width","callback","content","backgroundColor","background","paper","child","panel","MuiThemeProvider","create","getPanels","id","headertitle","innerText","status","popTask","unsmallify","front","serverProto","serverUrl","setTimeout","openLogin","endsWith","clearTimeout","sendAPI","re_fugueedit","str","addReactPanel","editor","insert","forEach","trigger","createPattern","txt","replaceArgs","scrollIfNeeded","appendText","fragment","appendHTML","attrs","appendPueblo","op","gmcp","emit","_this5","matched","m","astr","_this6","shortid","generate","on","removeAllListeners","_this7","filename","node","textContent","blob","Blob","saveAs","alert","visibilityChange","_this8","msHidden","webkitHidden","addEventListener","setOptions","fallback","abbreviate","minimizeTo","onminimized","pushTask","onclosed","unmountComponentAtNode","dragit","saveCursor","resizeit","stop","resetCursor","__webpack_exports__","props","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","sendMail","_this$state","state","chips","subject","body","realsub","substr","to","closePanel","handleChange","event","setState","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","changeText","onResize","resize","setError","error","onInput","addChip","chip","execString","push","delChip","splice","beforeAdd","startsWith","createRef","_this$props","options","classes","_this$state2","react__WEBPACK_IMPORTED_MODULE_6___default","a","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_8___default","card","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_9___default","header","title","material_ui_chip_input__WEBPACK_IMPORTED_MODULE_18___default","label","fullWidth","blurBehavior","onUpdateInput","newChipKeyCodes","onBeforeAdd","onAdd","nameInput","onDelete","helperText","FormHelperTextProps","subheader","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_15___default","stretch","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_10___default","react_ace__WEBPACK_IMPORTED_MODULE_19___default","bodytext","ref","mode","wrapEnabled","highlightActiveLine","editorProps","$blockScrolling","Infinity","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_11___default","actions","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_14___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_13___default","button","onClick","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_12___default","_material_ui_icons_Send__WEBPACK_IMPORTED_MODULE_16___default","_material_ui_icons_Cancel__WEBPACK_IMPORTED_MODULE_17___default","Component","withStyles","position","display","flex-flow","sub","left","flex","right","marginLeft","overflow","justify-content","textAlign","minWidth","withTheme","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_grapenut_git_mush_portal_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","startUpload","uploading","uploadLine","pauseUpload","resetText","changeDelay","setText","lines","newtext","react__WEBPACK_IMPORTED_MODULE_5___default","frame","react_ace__WEBPACK_IMPORTED_MODULE_13___default","readOnly","stretchflex","pad","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_8___default","padded","variant","_material_ui_core_Tooltip__WEBPACK_IMPORTED_MODULE_9___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_7___default","_material_ui_icons_Pause__WEBPACK_IMPORTED_MODULE_11___default","_material_ui_icons_CloudUpload__WEBPACK_IMPORTED_MODULE_10___default","_material_ui_icons_Redo__WEBPACK_IMPORTED_MODULE_12___default","ColorPicker","classCallCheck","possibleConstructorReturn","getPrototypeOf","show","currentTarget","hide","choose","color","offset","rows","bgfix","react_default","Button_default","aria-haspopup","aria-owns","Popover_default","popover","anchorEl","open","Boolean","classNames","swatch","cursor","border","padding","lineHeight","Settings","handleSwitch","changeSetting","checked","defineProperty","saveSettings","forceUpdate","handleValue","handleColor","objectSpread","resetSettings","confirm","closeDrawer","tabIndex","role","List_default","list","disablePadding","dense","ListSubheader_default","ListItem_default","ListItemIcon_default","BugReport_default","ListItemText_default","switchText","ListItemSecondaryAction_default","Switch_default","WrapText_default","TextField_default","Palette_default","colorpicker","Edit_default","Code_default","VerticalSplit_default","disabled","PictureInPicture_default","leftright","Icon_default","BorderLeft_default","Typography_default","BorderRight_default","FormatIndentIncrease_default","AccountCircle_default","GroupWork_default","Explore_default","buttons","reset","flexDirection","justifyContent","alignItems","overflowY","flexFlow","paddingLeft","marginRight","top","bottom","BadgeIcon","count","Badge_default","badgeContent","children","Taskbar","openDrawer","closeMenu","setTitle","t","clearScreen","setUnreadMail","u","unreadMail","setUnreadBB","unreadBB","addButton","task","showMenu","menuAnchor","showMobileMenu","mobileAnchor","closeMobileMenu","toggleSidebar","toggle","showHelp","help","helpAnchor","closeHelp","typeHelp","searchHelp","showUpload","uploadAnchor","closeUpload","insertCommand","closeHistory","showHistory","historyAnchor","showLog","logname","logAnchor","closeLog","typeLog","saveLog","typeURL","openCustomizer","previewUpload","handleFile","files","reader","FileReader","onload","readAsText","handleURL","req","XMLHttpRequest","onreadystatechange","responseText","_window$client$settin","rev","reverse","renderTasks","Tooltip_default","tasklabel","taskbutton","aria-label","taskicon","headerlogo","renderButtons","ariaLabel","action","AppBar_default","Toolbar_default","disableGutters","sectionMobile","ChevronLeft_default","ChevronRight_default","noWrap","sectionDesktop","tasksep","overflowButtons","MoreVert_default","icons_Menu_default","SwipeableDrawer_default","modules_Settings","onSubmit","autoComplete","autoFocus","InputProps","inputProps","endAdornment","InputAdornment_default","accept","fileinput","htmlFor","component","historyPopover","divider","Menu_default","disableEnforceFocus","MenuItem_default","ExpandLess_default","Settings_default","Build_default","CloudUpload_default","Save_default","Keyboard_default","Backspace_default","Wifi_default","flexGrow","cmdbutton","cmdlabel","flex-direction","drawerFrame","drawerButton","drawerPaper","mailButton","BBButton","maxHeight","Terminal","focusInput","doResize","min","clientWidth","linesOfScroll","init","initOutput","initPrompt","dim","containerRef","onScroll","maxWidth","scrollcount","align","background-color","main","font-family","font-weight","font-size","down","overflowX","white-space","word-wrap","text-align","vertical-align","Input","initInput","outline","Statusbar","Login","closeLogin","submitLogin","username","password","submitGuest","submitCreate","catchReturn","fullScreen","Dialog_default","onEscapeKeyDown","aria-labelledby","disableBackdropClick","disableEscapeKeyDown","DialogTitle_default","IconButton_default","DialogContent_default","DialogContentText_default","dangerouslySetInnerHTML","__html","onKeyPress","DialogActions_default","block","PersonAdd_default","PersonOutline_default","Person_default","withMobileDialog","COMPASS","NORTH","ArrowUpward_default","SOUTH","ArrowDownward_default","WEST","ArrowBack_default","EAST","ArrowForward_default","SOUTHEAST","SvgIcon_default","points","SOUTHWEST","NORTHEAST","NORTHWEST","UP","CallMade_default","DOWN","CallReceived_default","IN","ExitToApp_default","OUT","Launch_default","Sidebar","go","exit","_window$client","getContents","matchExit","ucExits","buildExit","uc","toUpperCase","exits","things","players","friends","customExits","useCompass","_loop","fullexit","n","player","sidebar","exitWidget","navWidget","_this$state3","parseExits","exitItem","contents","playerItem","ListItemAvatar_default","Avatar_default","p","thing","thingItem","flexShrink","-webkit-transform","transform","middle","dock","scrollTo","modules_Sidebar","core_styles","modules_Taskbar","modules_Terminal","modules_Input","modules_Statusbar","modules_Login","FormEditor","setStatus","clearStatus","item","handleNumber","parseInt","needsToResize","listName","selected","immutable","saveCSS","_this$props2","onReset","_this$props3","template","defaultText","_this$props4","filetype","sheets","styleSheets","Array","apply","toConsumableArray","cssRules","rule","cssText","_this$props5","Form","ltype","rtype","form","lib_default","minHeight","mobileOnly","edit","Close_default","Delete_default","Undo_default","newState","verticalAlign","TriggerForm","row","TimerForm","MacroForm","KeyForm","Checkbox_default","Shift","changeTab","tab","onSelect","tabs","Tabs_default","scrollable","scrollButtons","Tab_default","mobileClose","mobileOpen","even","odd","listNum","listText","AddCircle_default","Customizer_FormEditor","BBListItem","board","posts","lastmod","listicon","read","opacity","BBList","openBoard","BBoard_BBListItem","BBMessageListItem","message","author","date","BBMessageList","openMessage","messages","BBoard_BBMessageListItem","BBMessage","emulator","Card_default","CardHeader_default","CardContent_default","CardActions_default","overflow-y","overflow-x","openBB","openBBMsg","bb","full","BBoard_BBMessageList","BBoard_BBMessage","BBoard_BBList","MailListItem","mail","quickDelete","handleMark","deleted","unread","urgent","PriorityHigh_default","Mail_default","Drafts_default","from","time","CheckCircle_default","Cancel_default","MailList","purgeMail","toggleDelete","openMail","DeleteSweep_default","DeleteForever_default","Create_default","Mailbox_MailListItem","align-items","MailItem","markUnread","markDeleted","markUndeleted","replyMail","forwardMail","wrap","Reply_default","Forward_default","folder","folderlist","_this$state4","_this$state5","setFields","_this$state6","Mailbox_MailList","Mailbox_MailItem","__webpack_require__","r","loadScript","execUserScript","ansiState","fg","DEFAULT_FG","bg","DEFAULT_BG","fg256","bg256","ansi","charCodeAt","codes","ANSI_NORMAL","getANSI","ANSI_XTERM_FG","ANSI_BLINK","ANSI_XTERM_BG","ANSI_BRIGHT","ANSI_UNDERLINE","ANSI_INVERSE","ansiDirty","next","encodeState","ansiClass","span","stack","onLine","write","PARSE_PLAIN","PARSE_ESC1","PARSE_ESC2","parseBuf","ch","PARSE_CR","abortParse","endLine","applyANSI","html","div","createDocumentFragment","innerHTML","nextSibling","removeAttribute","idx","selfClosing","UNCLOSED_TAGS","pushElement","popElement","threshold","temp","nodeName","fontFamily","fontSize","round","abs","offsetHeight"],"mappings":"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","file":"static/js/main.97e3505e.chunk.js","sourcesContent":["// MU* protocol carried over the WebSocket API.\nclass Connection {\n\n  static get CHANNEL_TEXT() { return 't'; }\n  static get CHANNEL_JSON() { return 'j'; }\n  static get CHANNEL_HTML() { return 'h'; }\n  static get CHANNEL_PUEBLO() { return 'p'; }\n  static get CHANNEL_PROMPT() { return '>'; }\n\n  constructor(url) {\n    var that = this;\n    \n    this.url = url;\n    this.socket = null;\n    this.isOpen = false;\n    \n    this.onOpen = null;\n    this.onError = null;\n    this.onClose = null;\n\n    this.onUpdate = null;\n    this.onText = null;\n    this.onObject = null;\n    this.onHTML = null;\n    this.onPueblo = null;\n    this.onPrompt = null;\n    \n    this.hasData = false;\n    \n    this.reconnect(that);\n  }\n  \n  static reconnect(that) {\n    that.reconnect();\n  }\n  \n  static onopen(that, evt) {\n    that.isOpen = true;\n    that.onOpen && that.onOpen(evt);\n  }\n\n  static onerror(that, evt) {\n    that.isOpen = false;\n    that.onError && that.onError(evt);\n  }\n\n  static onclose(that, evt) {\n    that.isOpen = false;\n    that.onClose && that.onClose(evt);\n  }\n\n  static onmessage(that, evt) {\n    that.onMessage && that.onMessage(evt.data[0], evt.data.substring(1));\n  }\n\n  reconnect() {\n    var that = this;\n    \n    // quit the old connection, if we have one\n    if (this.isConnected()) {\n      this.sendText('QUIT');\n    }\n\n    this.socket = new window.WebSocket(this.url);\n    this.isOpen = false;\n\n    this.socket.onopen = function (evt) {\n      Connection.onopen(that, evt);\n    };\n\n    this.socket.onerror = function (evt) {\n      Connection.onerror(that, evt);\n    };\n\n    this.socket.onclose = function (evt) {\n      Connection.onclose(that, evt);\n    };\n\n    this.socket.onmessage = function (evt) {\n      Connection.onmessage(that, evt);\n    };\n  }\n  \n  isConnected() {\n    return (this.socket && this.isOpen && (this.socket.readyState === 1));\n  }\n\n  close() {\n    this.socket && this.socket.close();\n  }\n\n  sendText(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_TEXT + data + '\\r\\n');\n  }\n\n  sendObject(data) {\n    this.isConnected() && this.socket.send(Connection.CHANNEL_JSON + window.JSON.stringify(data));\n  }\n\n  onMessage(channel, data) {\n    this.onUpdate && this.onUpdate(channel, data);\n    this.hasData = true;\n    \n    switch (channel) {\n    case Connection.CHANNEL_TEXT:\n      this.onText && this.onText(data);\n      break;\n\n    case Connection.CHANNEL_JSON:\n      try {\n        this.onObject && this.onObject(window.JSON.parse(data));\n      }\n      catch (e) {\n        console.log(\"JSON ERROR \", e, data);\n      }\n      break;\n\n    case Connection.CHANNEL_HTML:\n      this.onHTML && this.onHTML(data);\n      break;\n\n    case Connection.CHANNEL_PUEBLO:\n      this.onPueblo && this.onPueblo(data);\n      break;\n    \n    case Connection.CHANNEL_PROMPT:\n      this.onPrompt && this.onPrompt(data);\n      break;\n\n    default:\n      window.console && window.console.log('unhandled message', channel, data);\n      return false;\n    }\n\n    return true;\n  }\n\n\n}\n\nexport default Connection;\n\n","class UserInput {\n\n  //////////////////////////////////////////////////////////////\n  // clear the history for a given UserInput object\n  static clearhistory(that) {\n    that.clearHistory && that.clearHistory();\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyDown callback\n  static onkeydown(that, evt) {\n    that.onKeyDown && that.onKeyDown(evt);\n  }\n\n  //////////////////////////////////////////////////////////////\n  // passthrough to the local onKeyUp callback\n  static onkeyup(that, evt) {\n    that.onKeyUp && that.onKeyUp(evt);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleForward(that, key) {\n    if (that && that.keyCycleForward) {\n      return that.keyCycleForward(key);\n    } else {\n      // default key is ctrl+n\n      return (key.code === 78 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  static isKeyCycleBackward(that, key) {\n    if (that && that.keyCycleBackward) {\n      return that.keyCycleBackward(key);\n    } else {\n      // default key is ctrl+p\n      return (key.code === 80 && key.ctrl);\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////////\n  // default handler for key press events\n  static pressKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    var prevent = true;\n    \n    if (UserInput.isKeyCycleBackward(that, key)) {\n\n      // cycle history backward\n      that.cycleBackward();\n\n    } else if (UserInput.isKeyCycleForward(that, key)) {\n\n      // cycle history forward\n      that.cycleForward();\n\n    } else if (key.code === 13) {\n      // enter key\n      \n      // save the command string and clear the input box\n      var cmd = that.root.value;\n      that.saveCommand();\n\n      // pass through to the local callback for sending data\n      that.onEnter && that.onEnter(cmd);\n        \n    } else if (key.code === 27) {\n\n      // pass through to the local callback for the escape key\n      that.onEscape && that.onEscape();\n    \n    } else if (key.code === 33) {\n    \n      // pass through to the local callback for the pageup key\n      that.onPageUp && that.onPageUp();\n\n    } else if (key.code === 34) {\n\n      // pass through to the local callback for the pagedown key\n      that.onPageUp && that.onPageDown();\n\n    } else { \n      // didn't capture anything, pass it through\n      prevent = false;\n\n    }\n    \n    if (prevent) {\n      e.preventDefault();\n    }\n\n    // make sure input retains focus\n    that.focus();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // default handler for key release events\n  static releaseKey(that, e) {\n    var key = { code: (e.keyCode ? e.keyCode : e.which),\n                ctrl: e.ctrlKey,\n                shift: e.shiftKey,\n                alt: e.altKey };\n\n    if (UserInput.isKeyCycleBackward(that, key) ||\n        UserInput.isKeyCycleForward(that, key)) {\n\n      // move the cursor to end of the input text after a history change\n      that.moveCursor();\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // User input handler (command history, callback events)\n  constructor(root) {\n    var that = this;\n    \n    this.root = root;\n    \n    this.selectionStart = 0;\n    this.selectionStop = 0;\n    \n    // user-defined handlers for main actions\n    this.onEnter = null;\n    this.onEscape = null;\n    this.onPageUp = null;\n    this.onPageDown = null;\n\n    // user-defined keys for command history\n    this.keyCycleForward = null;\n    this.keyCycleBackward = null;\n    \n    this.clearHistory();\n    \n    this.root.onkeydown = function(evt) {\n      UserInput.onkeydown(that, evt);\n    };\n    \n    this.root.onkeyup = function(evt) {\n      UserInput.onkeyup(that, evt);\n    };\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyDown handler\n  onKeyDown(e) {\n    UserInput.pressKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // set the default onKeyUp handler\n  onKeyUp(e) {\n    UserInput.releaseKey(this, e);\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the command history\n  clearHistory() {\n    this.history = [];\n    this.ncommand = 0;\n    this.save_current = '';\n    this.current = -1;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // push a command onto the history list and clear the input box\n  saveCommand() {\n    if (this.root.value !== '') {\n      this.history[this.ncommand] = this.root.value;\n      this.ncommand++;\n      this.save_current = '';\n      this.current = -1;\n      this.root.value = '';\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history backward\n  cycleBackward() {\n    // save the current entry in case we come back\n    if (this.current < 0) {\n      this.save_current = this.root.value;\n    }\n    \n    // cycle command history backward\n    if (this.current < this.ncommand - 1) {\n      this.current++;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // cycle the history forward\n  cycleForward() {\n    // cycle command history forward\n    if (this.current > 0) {\n      this.current--;\n      this.root.value = this.history[this.ncommand - this.current - 1];\n    } else if (this.current === 0) {\n      // recall the current entry if they had typed something already\n      this.current = -1;\n      this.root.value = this.save_current;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // move the input cursor to the end of the input elements current text\n  moveCursor() {\n    if (typeof this.root.selectionStart === \"number\") {\n        this.root.selectionStart = this.root.selectionEnd = this.root.value.length;\n    } else if (typeof this.root.createTextRange !== \"undefined\") {\n        this.focus();\n        var range = this.root.createTextRange();\n        range.collapse(false);\n        range.select();\n    }\n  }\n  \n  // save the cursor position\n  saveCursor() {\n    this.selectionStart = this.root.selectionStart;\n    this.selectionStop = this.root.selectionStop;\n  }\n  \n  // reset cursor position\n  resetCursor() {\n    if (this.selectionStart && this.selectionStop) {\n      this.root.selectionStart = this.selectionStart;\n      this.root.selectionStop = this.selectionStop;\n      this.selectionStart = null;\n      this.selectionStop = null;\n    } else {\n      this.root.selectionStart = this.root.selectionStop = this.root.value.length;\n    }\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // clear the current input text\n  clear() {\n    this.root.value = '';\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // get the current text in the input box\n  value() {\n    return this.root.value;\n  }\n  \n  //////////////////////////////////////////////////////////////\n  // refocus the input box\n  focus(force) {\n  \n    // see if we are selecting some text\n    var text = \"\";\n    \n    if (!force) {\n      if (window.getSelection) {\n        text = window.getSelection().toString();\n      } else if (document.selection && document.selection.type !== \"Control\") {\n        text = document.selection.createRange().text;\n      }\n      \n      // or if we are in an input element\n      var element = document.activeElement;\n      var tagName = element.tagName.toLowerCase();\n      if (tagName === 'textarea') return;\n      \n      if (tagName === 'input') {\n        var type = element.getAttribute('type').toLowerCase();\n        // if any of these input types is not supported by a browser, it will behave as input type text.\n        var inputTypes = ['text', 'password', 'number', 'email', 'tel', 'url', 'search', 'date', 'datetime', 'datetime-local', 'time', 'month', 'week'];\n        if (inputTypes.indexOf(type) >= 0) {\n          return;\n        }\n      }\n    }\n    \n    var re_blank = /^\\w*$/;\n    // if we are selecting or inputting, don't focus\n    if (text.match(re_blank)) {\n      this.root.focus();\n    }\n  } \n\n}\n\nexport default UserInput;\n\n","class Utils {\n\n  //////////////////////////////////////////////////////////////////\n  // Link scanner function search line for links and returns an array\n  static extractLinks(line) {\n    var links = [], result;\n    var regex = /(^|[^a-zA-Z0-9]+)(?:((?:http|https):\\/\\/[-a-zA-Z0-9_.~:/?#[\\]@!$&'()*+,;=%]+[-a-zA-Z0-9_~:/?#@!$&*+;=%])|([-.+a-zA-Z0-9_]+@[-a-zA-Z0-9]+(?:\\.[-a-zA-Z0-9]+)+)|(@[a-zA-Z]\\w*))/g;\n\n\n    regex.lastIndex = 0;\n    while ((result = regex.exec(line))) {\n      var info = {};\n\n      info.start = result.index + result[1].length;\n      info.xch_cmd = '';\n      if (result[2]) {\n        result = result[2];\n        info.url = result;\n      } else if (result[3]) {\n        result = result[3];\n        info.url = 'mailto:' + result;\n      } else if (result[4]) {\n        result = result[4];\n        info.url = '';\n        info.xch_cmd = 'help ' + result;\n        info.className = \"ansi-1-37\";\n      }\n\n      info.end = info.start + result.length;\n\n      links[links.length] = info;\n    }\n\n    return links;\n  }\n\n  //////////////////////////////////////////////////////////////////\n  // some string helper functions for replacing links and user input tokens\n  // Example onLine() handler that linkifies URLs in text.\n  static parseLinks(that, lineBuf) {\n    // Merge text so we can scan it.\n    if (!lineBuf.length) {\n      return;\n    }\n    \n    var ii, ilen;\n    var line = '';\n\n    for (ii = 0, ilen = lineBuf.length; ii < ilen; ++ii) {\n      line += lineBuf[ii].nodeValue;\n    }\n\n    // Scan the merged text for links.\n    var links = Utils.extractLinks(line);\n    if (!links.length) {\n      return;\n    }\n\n    // Find the start and end text nodes.\n    var nodeIdx = 0, nodeStart = 0, nodeEnd = lineBuf[0].nodeValue.length;\n    for (ii = 0, ilen = links.length; ii < ilen; ++ii) {\n      var info = links[ii], startOff, startNode, endOff, endNode;\n\n      while (nodeEnd <= info.start) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      startOff = info.start - nodeStart;\n      startNode = lineBuf[nodeIdx];\n\n      while (nodeEnd < info.end) {\n        nodeStart = nodeEnd;\n        nodeEnd += lineBuf[++nodeIdx].nodeValue.length;\n      }\n\n      endOff = info.end - nodeStart;\n      endNode = lineBuf[nodeIdx];\n\n      // Wrap the link text.\n      // TODO: In this version, we won't try to cross text nodes.\n      // TODO: Discard any text nodes that are already part of links?\n      if (startNode !== endNode) {\n        window.console && window.console.warn('link', info);\n        continue;\n      }\n\n      lineBuf[nodeIdx] = endNode.splitText(endOff);\n      nodeStart += endOff;\n\n      var middleNode = startNode.splitText(startOff);\n      var anchor = document.createElement('a');\n      middleNode.parentNode.replaceChild(anchor, middleNode);\n\n      anchor.target = '_blank';\n      if (info.url === '' && info.xch_cmd !== '') {\n        anchor.setAttribute('onClick', 'this.onCommand(\"'+info.xch_cmd+'\");');\n        anchor.onCommand = that.onCommand;\n      } else {\n        anchor.href = info.url;\n      }\n      anchor.appendChild(middleNode);\n    }\n  }\n\n\n  //////////////////////////////////////////////////////////////////\n  // detect if more user input is required for a pueblo command\n  static parseCommand(command) {\n    var cmd = command;\n    var regex = /\\?\\?/;\n    \n    // check for the search token '??'\n    if (cmd.search(regex) !== -1) {\n      var val = prompt(command);\n      \n      if (val === null) {\n        // user cancelled the prompt, don't send any command\n        cmd = '';\n      } else {\n        // replace the ?? token with the prompt value\n        cmd = cmd.replace(regex, val);\n      }\n    }\n    \n    return cmd;\n  }\n}\n\nexport default Utils;\n\n","\nconst JSONAPI = {\n  maillist: function(self, args) {\n    self.sendText(\"th null(oob(%#,maillist,json(object,folder,json(number,if(%0,before(%0,:),0)),maillist,\\\\[[iter(maillist(%#,if(%0,before(%0,:):,0:)),json(object,id,json(string,%i0),deleted,switch(setr(0,mailstatus(%#,%i0)),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,%i0)),subject,json(string,mailsubject(%#,%i0)),from,json(string,if(setr(0,mailfrom(%#,%i0)),name(%q0),!PURGED!))),,\\\\,)]\\\\],unread,json(number,extract(mailfstats(%#),6,1)))))\");\n  },\n  mailitem: function(self, args) {\n    self.sendText(\"th null(oob(%#,mailitem,json(object,id,json(string,\"+args+\"),deleted,switch(setr(0,mailstatus(%#,\"+args+\")),*C*,true,false),unread,switch(%q0,N*,true,false),urgent,switch(%q0,*U*,true,false),time,json(string,mailtime(%#,\"+args+\")),subject,json(string,mailsubject(%#,\"+args+\")),from,json(string,if(setr(0,mailfrom(%#,\"+args+\")),name(%q0),!PURGED!)),body,json(string,mail(%#,\"+args+\")))))\");\n  },\n  boardlist: function(self, args) {\n    self.sendText(\"+bbread\");\n  },\n  bbmsglist: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  bbmsg: function(self, args) {\n    self.sendText(\"+bbread \"+args);\n  },\n  listcontents: function(self, args) {\n    self.sendText(\"th null(oob(%#,listcontents,json(object,players,\\\\[[iter(remove(lvplayers(%l),%#),json(string,name(%i0)),,\\\\,)]\\\\],exits,\\\\[[iter(lexits(%l),json(string,fullname(%i0)),,\\\\,)]\\\\],things,\\\\[[iter(lvthings(%l),json(string,name(%i0)),,\\\\,)]\\\\])))\");\n  },\n};\n\nexport default JSONAPI;\n","/* eslint no-eval: 0 */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport saveAs from 'file-saver';\n\nimport Portal from '../modules/Portal';\nimport Mailbox from '../modules/Mailbox';\nimport Sendmail from '../modules/Sendmail';\nimport BBoard from '../modules/BBoard';\nimport Upload from '../modules/Upload';\nimport Customizer from '../modules/Customizer';\n\nimport Connection from './connection';\nimport Emulator from './emulator';\nimport UserInput from './userinput';\nimport Utils from './utils';\nimport JSONAPI from './jsonapi';\n\nimport 'jspanel4/dist/jspanel.min.css';\n\nimport { jsPanel } from 'jspanel4';\n\nimport shortid from 'shortid';\n\n//import 'jspanel4/es6module/extensions/hint/jspanel.hint.js';\n//import 'jspanel4/es6module/extensions/modal/jspanel.modal.js';\n//import 'jspanel4/es6module/extensions/contextmenu/jspanel.contextmenu.js';\n//import 'jspanel4/es6module/extensions/tooltip/jspanel.tooltip.js';\n//import 'jspanel4/es6module/extensions/layout/jspanel.layout.js';\n//import 'jspanel4/es6module/extensions/dock/jspanel.dock.js';\n\nconst EventEmitter = require('events');\nconst TinyCon = require('tinycon');\nconst Colors = require('@material-ui/core/colors');\n\nconst LOGINFAIL = [\n  /There is no player with that name\\./,\n  /That is not the correct password\\./,\n  /Either that player does not exist, or has a different password\\./,\n  /You cannot connect to that player at this time\\./,\n  /Guest connections not allowed\\./,\n  /Connection to .* (Non-GUEST) not allowed from .* (.*)/,\n  /Too many guests are connected now\\./\n];\n\nclass Client {\n\n  constructor() {\n    // client settings\n    this.settings = {\n      // default emulator fg/bg\n      ansiFG: 'ansi-37',\n      ansiBG: 'ansi-40',\n      wrapWidth: 100,\n      invertHighlight: false,\n      // upload editor\n      decompileEditor: true,\n      decompileKey: 'FugueEdit > ',\n      // sidebar navigation\n      sidebarOpen: true,\n      sidebarAnchor: \"left\",\n      sidebarWidth: \"192px\",\n      sidebarAlwaysShow: true,\n      sidebarShowPlayers: true,\n      sidebarShowThings: true,\n      sidebarShowExits: true,\n      sidebarShowCompass: true,\n      // debugging\n      debugEvents: false,\n      debugActions: false,\n    };\n    this.defaultSettings = Object.assign({}, this.settings);\n    \n    // triggers, timers, macros, and keybindings\n    this.actionTemplates = {\n      triggers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n        suppress: false,\n      },\n      timers: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        delay: 0,\n        repeat: false,\n        times: 0,\n      },\n      macros: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        pattern: \"\",\n        regex: false,\n      },\n      keys: {\n        name: \"\",\n        text: \"\",\n        javascript: false,\n        keycode: null,\n        ctrl: false,\n        alt: false,\n        shift: false,\n      },\n      css: {\n        name: \"\",\n        text: \"\",\n      },\n      scripts: {\n        name: \"\",\n        text: \"// Insert JavaScript below.\\n\",\n      },\n    };\n        \n    this.triggers = [];\n    this.timers = [];\n    this.macros = [];\n    this.keys = [];\n    this.scripts = [{ name: \"onLoad.js\", text: \"\" }];\n    this.css = [{ name: \"ansi.css\", text: \"\" },\n                { name: \"inverse.css\", text: \"\" }];\n    \n    this.loadTriggers();\n    this.loadTimers();\n    this.loadMacros();\n    this.loadKeys();\n    this.loadCSS();\n    this.loadScripts();\n    \n    // must come after client.css definition\n    this.loadSettings();\n    \n    // Client colors and theme\n    this.colors = Colors;\n    this.theme = this.createTheme();\n    this.mobile = !window.matchMedia(this.theme.breakpoints.up('md').substring(7)).matches;\n    \n    // Terminal UI elements\n    this.output = null;\n    this.prompt = null;\n    this.input = null;\n    \n    // External Components\n    this.events = new EventEmitter();\n    this.panels = jsPanel;\n    this.tinycon = TinyCon;\n    \n    // React Components\n    this.react = {\n      portal: null,\n      taskbar: null,\n      terminal: null,\n      input: null,\n      statusbar: null,\n      login: null,\n      mailbox: null,\n      sendmail: null,\n      bboard: null,\n      upload: null,\n      customizer: null,\n    };\n    \n    // client variables\n    this.conn = null;\n    this.container = null;\n    \n    // default connection settings, can override in public/local.js\n    this.serverAddress = \"node.grapenut.org\";\n    this.serverPort = 2001;\n    this.serverSSL = true;\n\n    // app instance toggles\n    this.loggedIn = false;\n    this.jsonapi = false;\n    this.hidden = false;\n    this.updateCounter = 0;\n    this.updateLines = 0;\n    this.eatNewline = false;\n    \n    // delay time for auto-contents\n    this.delayContents = 500;\n    \n    // number of lines of scroll within which the output scroll down when new items are received\n    this.scrollThreshold = 5;\n    \n    // handle auto-reconnects\n    this.reconnectTimer = 2000;\n    this.reconnectCount = 0;\n    this.reconnectMaxCount = 10;\n    \n    // init other libraries\n    window.client = this;\n    this.initPanels();\n    this.initNotifications();\n    \n    // render the app\n    this.render();\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // rendering, themeing, and styling react components\n  \n  // render the main react component\n  render() {\n    ReactDOM.render(React.createElement(Portal, { theme: this.theme }, null), document.getElementById('root'));\n  }\n  \n  // load additional scripts for custom events\n  loadScript(src) {\n    var tag = document.createElement('script');\n    tag.async = false;\n    tag.src = src;\n    document.getElementsByTagName('body')[0].appendChild(tag);\n  }\n  \n  execUserScript(name) {\n    // load user customization file\n    const client = this;\n    try {\n      var script = null;\n      for (let i=0; i < client.scripts.length; i++) {\n        if (client.scripts[i].name === name) {\n          script = client.scripts[i];\n          break;\n        }\n      }\n      if (script && script.text !== \"\") {\n        eval(script.text);\n      }\n    } catch (e) {\n      client.debugActions && console.log(\"Error executing `\" + name + \"'.\");\n    }\n  }\n  \n  // load custom CSS style sheet\n  loadStyle(src) {\n    const file = src.split('/').slice(-1)[0];\n\n    // see if we have a matching css override\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    var style;\n    if (css) {\n      // just update the <style> element\n      style = this.updateCSS(css);\n      if (css.text !== \"\") return;\n    }\n    \n    // css is not overridden, try to load a <link>\n    style = document.createElement(\"link\");\n    style.setAttribute(\"rel\", \"stylesheet\");\n    style.setAttribute(\"type\", \"text/css\");\n    style.setAttribute(\"href\", src);\n    document.head.appendChild(style);\n  }\n  \n  // update the css object's rules on its <style> element \n  updateCSS(css, erase=false) {\n    if (!css) return null;\n    \n    var style = document.getElementById(\"override_\" + css.name);\n    if (style) {\n      // remove what's already there\n      while (style.firstChild) {\n        style.removeChild(style.firstChild);\n      }\n    } else {\n      // create a new style element\n      style = document.createElement('style');\n      style.setAttribute('id', 'override_' + css.name);\n      document.head.appendChild(style);\n    }\n    \n    // update the CSS text on the <style> element\n    if (!erase) style.appendChild(document.createTextNode(css.text));\n    \n    return style;\n  }\n  \n  // unload custom CSS style sheet\n  unloadStyle(src) {\n    // remove the <link> if it exists\n    var links = document.getElementsByTagName(\"link\");\n    for (var i = links.length; i >= 0; i--) {\n      if (links[i] && links[i].getAttribute(\"href\") !== null && links[i].getAttribute(\"href\").indexOf(src) !== -1) {\n        links[i].parentNode.removeChild(links[i]);\n      }\n    }\n    \n    // see if we have a css override to erase\n    const file = src.split('/').slice(-1)[0];\n    var css = null;\n    for (let i=0; i < this.css.length; i++) {\n      if (this.css[i].name === file) {\n        css = this.css[i];\n        break;\n      }\n    }\n    \n    // we found a css override, delete the contents\n    if (css) {\n      this.updateCSS(css, true);\n    }\n  }\n  \n  // create a theme\n  createTheme(theme) {\n    const defaultTheme = {\n      typography: {\n        useNextVariants: true,\n      },\n      palette: {\n        primary: this.colors.indigo,\n        secondary: this.colors.blueGrey,\n        type: 'dark',\n      },\n    };\n    \n    return createMuiTheme(Object.assign(defaultTheme, theme));\n  }\n  \n  ///////////////////////////////////////////////////////////////////////////////////////////////////\n  // save and load objects from localStorage\n  \n  // load object from localstorage\n  loadLocalStorage(obj, key) {\n    if (window.localStorage.hasOwnProperty(key)) {\n      obj = Object.assign(obj, JSON.parse(window.localStorage[key]));\n    }\n  }\n  \n  // clear localStorage keys starting with prefix\n  clearLocalStorage(key) {\n    delete window.localStorage[key];\n  }\n  \n  // save object to localstorage\n  saveLocalStorage(obj, key) {\n    window.localStorage[key] = JSON.stringify(obj);\n  }\n  \n  // casting a string argument to the correct type\n  castString(obj, key, value) {\n    if (!obj.hasOwnProperty(key)) return;\n    \n    var type = typeof obj[key];\n    \n    if (typeof value === type) {\n      obj[key] = value;\n    } else {\n      switch (type) {\n        case \"string\":\n          obj[key] = String.bind(null, value)();\n          break;\n        case \"number\":\n          obj[key] = Number.bind(null, value)();\n          break;\n        case \"boolean\":\n          obj[key] = (value === \"true\" ? true : false);\n          break;\n        default:\n          obj[key] = value;\n          break;\n      }\n    }\n  }\n  \n  // change a setting, performing a secondary action if necessary\n  changeSetting(key, value) {\n    this.castString(this.settings, key, value);\n    \n    if (key === 'invertHighlight') {\n      if (this.settings[key]) {\n        this.loadStyle('./inverse.css');\n      } else {\n        this.unloadStyle('./inverse.css');\n      }\n    } else if (key === 'wrapWidth') {\n      // send the screen dimensions\n      this.output.calcDimensions();\n      this.sendText(\"SCREENWIDTH \" + this.settings.wrapWidth);\n      this.sendText(\"SCREENHEIGHT \" + Math.floor(this.output.root.parentNode.clientHeight / this.output.dims.height));\n    }\n  }\n  \n  // load regex/wildcard pattern triggers\n  loadTriggers() {\n    this.loadLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // load automatic timers\n  loadTimers() {\n    this.loadLocalStorage(this.timers, \"timers\");\n  }\n  \n  // load slash command macros\n  loadMacros() {\n    this.loadLocalStorage(this.macros, \"macros\");\n  }\n  \n  // load custom keybindings\n  loadKeys() {\n    this.loadLocalStorage(this.keys, \"keys\");\n  }\n  \n  // load custom css overrides\n  loadCSS() {\n    this.loadLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // override CSS, first check existing styles\n      let css = this.css[i];\n      \n      // autoload CSS changes, except inverse.css\n      if (css.name !== \"inverse.css\") {\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // load custom scrips\n  loadScripts() {\n    this.loadLocalStorage(this.scripts, \"scripts\");\n  }\n  \n  // load client settings\n  loadSettings() {\n    this.loadLocalStorage(this.settings, \"settings\");\n    \n    if (this.settings['invertHighlight']) {\n      this.loadStyle('./inverse.css');\n    } else {\n      this.unloadStyle('./inverse.css');\n    }\n  }\n  \n  // save regex/wildcard pattern triggers\n  saveTriggers() {\n    this.clearLocalStorage(\"triggers\");\n    this.saveLocalStorage(this.triggers, \"triggers\");\n  }\n  \n  // save automatic timers\n  saveTimers() {\n    this.clearLocalStorage(\"timers\");\n    this.saveLocalStorage(this.timers, \"timers\");\n  }\n  \n  // save slash command macros\n  saveMacros() {\n    this.clearLocalStorage(\"macros\");\n    this.saveLocalStorage(this.macros, \"macros\");\n  }\n  \n  // save custom keybindings\n  saveKeys() {\n    this.clearLocalStorage(\"keys\");\n    this.saveLocalStorage(this.keys, \"keys\");\n  }\n  \n  // save custom css overrides\n  saveCSS() {\n    this.clearLocalStorage(\"css\");\n    this.saveLocalStorage(this.css, \"css\");\n    \n    for (let i=0; i < this.css.length; i++) {\n      // update rules in css <style> element\n      let css = this.css[i];\n      \n      if (css.name === \"inverse.css\") {\n        // only load inverse.css if we need it\n        if (this.settings.invertHighlight) {\n          // unload inverse.css if it is linked\n          let links = document.getElementsByTagName(\"link\");\n          for (let j = links.length; j >= 0; j--) {\n            if (links[j] && links[j].getAttribute(\"href\") !== null) {\n              let name = links[j].getAttribute(\"href\").split(\"/\").slice(-1)[0];\n              if (name === css.name) {\n                links[j].parentNode.removeChild(links[j]);\n              }\n            }\n          }\n          \n          if (css.text === \"\") {\n            // there is no override, so relink inverse.css\n            this.loadStyle('./inverse.css');\n          } else {\n            // there is an override, use update it\n            this.updateCSS(css);\n          }\n        }\n      } else {\n        // autoload all files that aren't inverse.css\n        this.updateCSS(css);\n      }\n    }\n  }\n  \n  // save custom css overrides\n  saveScripts() {\n    this.clearLocalStorage(\"scripts\");\n    this.saveLocalStorage(this.css, \"scripts\");\n  }\n  \n  // save client settings\n  saveSettings() {\n    this.clearLocalStorage(\"settings\");\n    this.saveLocalStorage(this.settings, \"settings\");\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // miscellaneous logging and command links\n  \n  // pueblo command links, prompt for user input and replace ?? token if present\n  onCommand(cmd) {\n    this.sendCommand && this.sendCommand(Utils.parseCommand(cmd));\n  }\n\n  // log messages to the output terminal\n  appendMessage(classid, msg) {\n    var scroll = false;\n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      this.output.appendMessage(classid, msg);\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // manage triggers, timers, macros, and keys\n  createPattern(regex, pattern) {\n    if (regex) {\n      return new RegExp('^' + pattern + '$');\n    } else {\n      return new RegExp('^' + pattern.split(/\\*+/).map(s => s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')).join('(.*)') + '$');\n    }\n  }\n  \n  replaceArgs(args, text) {\n    let newText = text.slice();\n    for (let i = args.length-1; i > -1; i--) {\n      let re = new RegExp('(^|[^\\\\%])%'+i, 'g');\n      newText = newText.replace(re, '$1'+args[i]);\n    }\n    return newText;\n  }\n  \n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // initialize terminal elements (input, output, prompt) and clear them\n  \n  // clear terminal\n  clear() {\n    this.output && this.output.clear();\n    this.prompt && this.prompt.clear();\n    this.input && this.input.clear();\n  }\n\n  // initialize terminal input window\n  initInput(input) {\n    // Input window\n    if (input !== null) {\n      this.input = new UserInput(input);\n\n      // enter key passthrough from UserInput.pressKey\n      this.input.onEnter = (cmd) => { this.sendCommand(cmd); this.prompt && this.prompt.clear(); };\n\n      // escape key passthrough from UserInput.pressKey\n      this.input.onEscape = () => { this.input.clear(); };\n      \n      // pageup key passthrough from UserInput.pressKey\n      this.input.onPageUp = () => { this.output && this.output.scrollPageUp(); };\n\n      // pagedown key passthrough from UserInput.pressKey\n      this.input.onPageDown = () => { this.output && this.output.scrollPageDown(); };\n    }\n  }\n\n  // initialize terminal output window\n  initOutput(output, container=null) {\n    // Output window\n    if (output !== null) {\n      this.output = new Emulator(output);\n      this.output.container = container;\n      this.output.onCommand = (cmd) => { this.onCommand(cmd); };\n\n      output.onunload = () => { this.sendText('QUIT'); this.close(); };\n      output.onresize = () => { this.output && this.output.scrollDown(); };\n    }\n  }\n  \n  // initialize command prompt\n  initPrompt(prompt) {\n    // Prompt window\n    if (prompt !== null) {\n      this.prompt = new Emulator(prompt);\n    }\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // handle input window focus and output window scrolling\n  \n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown(root) {\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = this.root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n  \n  // input focus passthrough\n  focus(force) {\n    if (this.mobile) return;\n    this.input && this.input.focus(force);\n  }\n  \n  // wrapper that scrolls the output if needed\n  scrollIfNeeded(fun) {\n    var scroll = false;\n    \n    if (this.output) {\n      if (this.output.nearBottom(this.scrollThreshold)) {\n        scroll = true;\n      }\n      \n      fun()\n      \n      scroll && this.output.scrollDown();\n      \n      this.react.terminal && this.react.terminal.onChange();\n    }\n  }\n\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  // spawn, focus and close window panels\n  \n  // spawn a window using a react components\n  addReactPanel(name, cfg) {\n    var el = null;\n    var obj = null;\n    switch (name) {\n      case 'Mailbox':\n        el = Mailbox;\n        obj = this.react.mailbox;\n        break;\n      case 'Upload':\n        el = Upload;\n        obj = this.react.upload;\n        break;\n      case 'Sendmail':\n        el = Sendmail;\n        obj = this.react.sendmail;\n        break;\n      case 'BBoard':\n        el = BBoard;\n        obj = this.react.bboard;\n        break;\n      case 'Customizer':\n        el = Customizer;\n        obj = this.react.customizer;\n        break;\n      default:\n        break;\n    }\n    \n    if (!el) {\n      return;\n    }\n    \n    if (obj) {\n      this.focusPanel(name);\n      return;\n    }\n    \n    var config = cfg || {};\n    \n    if (!config.headerTitle) {\n      config.headerTitle = name;\n    }\n    \n    if (!config.headerLogo) {\n      var icon = config.icon || \"tab\";\n      config.headerLogo = \"<i class='material-icons' style='margin-left: \"+this.theme.spacing.unit+\"px'>\"+icon+\"</i>\";\n    }\n    \n    if (!config.panelSize) {\n      const margin = this.panels.defaults.maximizedMargin;\n      let wstr = 'calc(50% - ' + 1.5*margin + 'px)';\n\n      if (this.mobile) {\n        wstr = 'calc(100% - ' + 2*margin + 'px)';\n      }\n    \n      config.panelSize = {\n        width: wstr,\n        height: 'calc(100% - ' + 2*margin + 'px)',\n      };\n    }\n    \n    config.callback = (container) => {\n      container.content.style.backgroundColor = this.theme.palette.background.paper;\n      var child = React.createElement(el, { panel: container }, null);\n      ReactDOM.render(React.createElement(MuiThemeProvider, { theme: this.theme }, child), container.content);\n    };\n    \n    config.container = this.container;\n    \n    this.panels.create(config);\n  }\n  \n  closePanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      }\n      panels[0].close();\n    }\n  }\n  \n  focusPanel(name) {\n    var panels = this.panels.getPanels(function() {\n      return (this.id === name || this.headertitle.innerText === name);\n    });\n    \n    if (panels.length > 0) {\n      if (panels[0].status === 'minimized') {\n        this.react.taskbar.popTask(panels[0]);\n      } else {\n        panels[0].unsmallify();\n        panels[0].front();\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // connect to the game server and setup message handlers\n  connect() {\n    var client = this;\n\n    let serverProto = this.serverSSL ? \"wss://\" : \"ws://\";\n\n    // The connection URL is ws://host:port/wsclient (or wss:// for SSL connections)\n    let serverUrl = serverProto + this.serverAddress + \":\" + this.serverPort + '/wsclient'\n    \n    this.close();\n    this.conn = new Connection(serverUrl);\n\n    // just log a standard message on these socket status events\n    this.conn.onOpen = function (evt) {\n      client.appendMessage('logMessage', '%% Connected.');\n      client.reconnectCount = 0;\n    };\n    \n    this.conn.onError = function (evt) {\n      client.appendMessage('logMessage', '%% Connection error!');\n      console.log(evt);\n    };\n    \n    this.conn.onClose = function (evt) {\n      client.appendMessage('logMessage', '%% Connection closed.');\n      setTimeout(() => { client.reconnect() }, (client.serverSSL ? 2.0 : 1.0) * client.reconnectTimer);\n    };\n    \n    // onMessage callback before data handler\n    this.conn.onUpdate = function(channel, data) {\n      if (!client.conn.hasData) {\n        // this is the first update, show the login screen\n        client.react.login && client.react.login.openLogin();\n        \n        // send the screen dimensions\n        client.sendText(\"SCREENWIDTH \" + client.settings.wrapWidth);\n        client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n      }\n      \n      if (client.hidden && data.endsWith('\\n')) {\n        client.updateCounter++;\n        // eventually set client.updateLines to the number of new lines\n        // and show that instead\n\n        /* use a timer to prevent update spamming */\n        clearTimeout(client.setBubble);\n        setTimeout(client.setBubble, 1000);\n      }\n    }\n    \n    // handle incoming text\n    this.conn.onText = function (text) {\n      if (!client.loggedIn) {\n        // match some login error conditions\n        for (let i = 0; i < LOGINFAIL.length; i++) {\n          if (text.match(LOGINFAIL[i])) {\n            client.react.login && client.react.login.openLogin(text);\n            break;\n          }\n        }\n        \n        // we logged in\n        if (text.match(/Last( FAILED)? connect was from/)) {\n          client.loggedIn = true;\n          setTimeout(() => {\n            if (!client.jsonapi) {\n              client.sendAPI(\"listcontents\");\n            }\n          }, client.delayContents);\n        }\n      }\n    \n      // implement @dec/tf\n      var re_fugueedit = new RegExp('^'+client.settings.decompileKey);\n      if (text.match(re_fugueedit)) {\n        var str = text.replace(re_fugueedit, \"\");\n        client.eatNewline = true;\n        \n        // send @dec/tf to the upload editor, or the command window\n        if (client.settings.decompileEditor) {\n          client.addReactPanel(\"Upload\", { icon: 'cloud_upload' });\n          client.react.upload.editor.current.editor.insert(str+\"\\n\");\n        } else {\n          client.input.root.value = str;\n        }\n        return;\n      }\n      \n      // handle text triggers\n      let suppress = false;\n      client.triggers.forEach((trigger, i) => {\n        try {\n          let re = client.createPattern(trigger.regex, trigger.pattern);\n          let args = text.match(re);\n          \n          if (args) {\n            if (trigger.javascript) {\n              eval(trigger.text);\n            } else {\n              let txt = client.replaceArgs(args, trigger.text);\n              client.sendText(txt);\n            }\n          \n            if (trigger.suppress) {\n              client.eatNewline = true;\n              suppress = true;\n            }\n          }\n        } catch (e) {\n          client.settings.debugActions && console.log(\"Trigger error:\", e);\n        }\n      });\n      \n      if (suppress) return;\n      \n      if (client.eatNewline && (text === \"\\n\" || text === \"\\r\\n\")) {\n        client.eatNewline = false;\n        return;\n      }\n      \n      client.eatNewline = false;\n      \n      client.scrollIfNeeded(() => client.output.appendText(text));\n    };\n    \n    // handle incoming html\n    this.conn.onHTML = function (fragment) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendHTML(fragment));\n      }\n    };\n    \n    // handle incoming pueblo\n    this.conn.onPueblo = function (tag, attrs) {\n      if (client.output) {\n        client.scrollIfNeeded(() => client.output.appendPueblo(tag, attrs));\n      }\n    };\n    \n    // handle incoming command prompts\n    this.conn.onPrompt = function (text) {\n      if (client.prompt !== null) {\n        client.prompt.clear();\n        client.prompt.appendText(text + '\\r\\n');\n      }\n    };\n\n    // handle incoming JSON objects\n    // use the Events handler collection\n    this.conn.onObject = function (obj) {\n      var op = \"\";\n      if (obj.hasOwnProperty('gmcp')) {\n        op = obj.gmcp;\n      } else if (obj.hasOwnProperty('op')) {\n        op = obj.op;\n      }\n      \n      if (op && op !== \"\") {\n        client.settings.debugEvents && console.log(\"JSON \"+op+\":\", obj);\n        client.events.emit(op, obj);\n      } else {\n        client.settings.debugEvents && console.log(\"JSON (unknown):\", obj);\n      }\n    };\n  }\n\n  reconnect() {\n    if (this.isConnected()) {\n      return;\n    }\n    \n    if (this.reconnectCount < this.reconnectMaxCount) {\n      this.reconnectCount++;\n      this.conn && this.conn.reconnect();\n    } else {\n      this.appendMessage('logMessage', '%% Auto-reconnect aborted.');\n    }\n  }\n  \n  isConnected() {\n    return (this.conn && this.conn.isConnected());\n  }\n  \n  close() {\n    this.conn && this.conn.close();\n  }\n  \n  sendText(data) {\n    this.conn && this.conn.sendText(data);\n  }\n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n\n  // function to send a user input command string to the server\n  sendCommand(cmd) {\n    if (!this.isConnected()) {\n      // connection was broken, let's force a reconnect\n      this.conn && this.conn.reconnect();\n      this.scrollIfNeeded(() => this.appendMessage('logMessage', '%% Reconnecting to server...'));\n      return;\n    }\n    \n    if (cmd === '') return;\n    \n    let matched = false;\n    this.macros.forEach((m) => {\n      try {\n        let re = this.createPattern(m.regex, m.pattern);\n        let args = cmd.match(re);\n        \n        if (args) {\n          matched = true;\n          if (m.javascript) {\n            eval(m.text);\n          } else {\n            let text = this.replaceArgs(args, m.text);\n            this.sendText(text);\n          }\n        }\n      } catch (e) {\n        this.settings.debugActions && console.log(\"Macro error:\", e);\n      }\n    });\n    \n    if (!matched) {\n      this.sendText(cmd);\n    }\n    \n    this.scrollIfNeeded(() => this.appendMessage('localEcho', cmd));\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // send an API command, falling back to the raw softcode if the server doesn't support it\n  sendAPI(cmd, args) {\n    if (this.jsonapi) {\n      var str = String(cmd);\n      \n      if (args) {\n        var astr = String(args);\n        if (astr.length > 0) {\n          str += \" \"+astr;\n        }\n      }\n      \n      this.sendText(\"jsonapi/\"+str);\n    } else {\n      if (JSONAPI.hasOwnProperty(cmd)) {\n        JSONAPI[cmd](this, args);\n      }\n    }\n  }\n  \n  execString(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",json(object,result,json(string,\"+code+\"))))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj.result);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n\n  execJSON(code, callback) {\n    var id = \"exec_\"+shortid.generate();\n    var cmd = \"th null(oob(%#,\"+id+\",\"+code+\"))\";\n    \n    this.events.on(id, (obj) => {\n      callback(obj);\n      this.events.removeAllListeners([id]);\n    });\n    \n    this.sendText(cmd);\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  // save the current display to a log file\n  saveLog(filename) {\n    if (!this.output) return;\n    var node = this.output.root;\n    var text = (node.innerText || node.textContent);\n    if (text.length > 0) {\n      var blob = new Blob([text], {type: \"text/html;charset=utf-8\"});\n      saveAs(blob, filename);\n    } else {\n      alert(\"File not saved! The current output is empty.\");\n    }\n  }\n  \n  \n  /////////////////////////////////////////////////////////////////////////////////////////////////\n  \n  \n  setBubble = () => {\n    if (this.hidden) {\n      this.tinycon.setBubble(this.updateCounter);\n    } else {\n      this.tinycon.setBubble(0);\n    }\n  };\n  \n  initNotifications() {\n    // Set the name of the hidden property and the change event for visibility\n    var hidden, visibilityChange; \n    if (typeof document.hidden !== \"undefined\") { // Opera 12.10 and Firefox 18 and later support \n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n    \n    // Warn if the browser doesn't support addEventListener or the Page Visibility API\n    if (typeof document.addEventListener === \"undefined\" || hidden === undefined) {\n      console.log(\"This browser does not support background notifications.\");\n    } else {\n      // Handle page visibility change   \n      document.addEventListener(visibilityChange, () => {\n        this.updateCounter = 0;\n        this.updateLines = 0;\n        if (document[hidden]) {\n          this.hidden = true;\n        } else {\n          this.hidden = false;\n        }\n        this.setBubble();\n      }, false);\n    }\n    \n    // set tinycon options\n    this.tinycon.setOptions({\n      fallback: true,\n      abbreviate: true,\n    });\n  }\n\n  // set panel default parameters and event handlers\n  initPanels() {\n    this.panels.defaults.minimizeTo = false;\n    this.panels.defaults.onminimized = function(container) {\n      window.client.react.taskbar.pushTask(this);\n      window.client.focus();\n    };\n    \n    this.panels.defaults.onclosed = function(container) {\n      ReactDOM.unmountComponentAtNode(container.content)\n      window.client.focus();\n    };\n    \n    this.panels.defaults.dragit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.resizeit.start = function() {\n      window.client.input.saveCursor();\n    };\n    \n    this.panels.defaults.dragit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n    \n    this.panels.defaults.resizeit.stop = function() {\n      window.client.focus();\n      window.client.input.resetCursor();\n    };\n  }\n}\n\n\n\nexport default Client;\nexport { Connection, Emulator, UserInput, Utils };\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\n\nimport SendIcon from '@material-ui/icons/Send';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\nimport ChipInput from 'material-ui-chip-input';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    position: \"absolute\",\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  stretch: {\n    width: \"100%\",\n  },\n  body: {\n    position: \"relative\",\n    flex: 1,\n    display: \"flex\",\n    overflow: \"hidden\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  bodytext: {\n    flex: 1,\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  helperText: {\n    textAlign: 'right',\n    width: '100%',\n  },\n  nameInput: {\n    minWidth: \"10em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Sendmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      subject: props.subject ? props.subject : \"\",\n      body: props.body ? props.body : \"\",\n      error: null,\n      chips: []\n    };\n    \n    this.editor = React.createRef();\n  }\n\n  setTarget(to) {\n    this.addChip(to);\n  }\n  \n  setSubject(subject) {\n    this.setState({ subject });\n  }\n  \n  setBody(body) {\n    this.setState({ body });\n  }\n\n  setFields(to, subject, body) {\n    to && this.addChip(to);\n    this.setState({ subject, body });\n  }\n  \n  sendMail = () => {\n    const { chips, subject, body } = this.state;\n    var realsub = subject;\n    \n    if (chips.length < 1) {\n      alert(\"Invalid recipients.\");\n      return;\n    }\n    \n    if (!body || body === \"\") {\n      alert(\"Empty message.\");\n      return;\n    }\n    \n    if (!subject || subject === \"\") {\n      if (body.length > 20) {\n        realsub = body.substr(0,20)+\"...\";\n      } else {\n        realsub = body;\n      }\n    }\n    \n    var to = '\"'+chips.join('\" \"')+'\"';\n    window.client.sendCommand(\"@mail \"+to+\"=\"+realsub+\"/\"+body.split('\\n').join('%r'));\n    this.closePanel();\n  };\n  \n  closePanel = () => {\n    window.client.closePanel(\"Sendmail\");\n  };\n  \n  componentDidMount() {\n    window.client.react.sendmail = this;\n    \n    const { panel, to } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n    \n    to && this.addChip(to);\n  }\n  \n  componentWillUnmount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = null;\n    window.client.react.sendmail = null;\n  }\n  \n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  changeText = body => {\n    this.setState({ body });\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  setError = error => {\n    this.setState({ error });\n//    setTimeout(() => { this.setState({ error: null }); }, 1000);\n  };\n  \n  onInput = () => {\n    this.setError(null);\n  };\n  \n  addChip = chip => {\n    const { chips } = this.state;\n    var str = chip.replace(/(?!\\\\)\\\\/g, '').replace(/(?!\\\\)\"/g, '');\n    window.client.execString('if(setr(0,namelist(\"'+str+'\")),name(%q0))', (result) => {\n      if (result !== \"\") {\n        if (chips.indexOf(result) === -1) {\n          chips.push(result);\n          this.setState({ chips });\n        }\n        this.setError(null);\n      } else {\n        this.setError(\"Unknown player.\");\n      }\n    });\n\n  };\n  \n  delChip = (chip, i) => {\n    const { chips } = this.state;\n    chips.splice(i, 1);\n    this.setState({ chips });\n    this.setError(null);\n  };\n  \n  beforeAdd = (chip) => {\n    if ((chip.startsWith('\"') && !chip.endsWith('\"')) || \n        (chip.startsWith(\"'\") && !chip.endsWith(\"'\")) || chip.endsWith('\\\\')) {\n      return false;\n    }\n    \n    \n    \n    return true;\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { chips, subject, body, error } = this.state;\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={(\n            <ChipInput label=\"Recipients\" fullWidth value={chips} blurBehavior=\"add\" onUpdateInput={this.onInput}\n              newChipKeyCodes={[13,32,187]} onBeforeAdd={this.beforeAdd} onAdd={this.addChip} classes={{ input: classes.nameInput }}\n              onDelete={this.delChip} helperText={error} FormHelperTextProps={{ error: true, className: classes.helperText }}\n            />\n          )}\n          subheader={(\n            <TextField label=\"Subject\" value={subject} onChange={this.handleChange(\"subject\")} className={classes.stretch} />\n          )}\n        />\n        <CardContent className={classes.body}>\n          <AceEditor\n            className={classes.bodytext}\n            ref={this.editor}\n            mode=\"mushcode\"\n            width=\"100%\"\n            theme=\"tomorrow_night_bright\"\n            value={body}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Tooltip title=\"Send draft.\">\n            <Button fullWidth className={classes.button} onClick={this.sendMail}>\n              <Icon>\n                <SendIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n          <Tooltip title=\"Discard draft.\">\n            <Button fullWidth className={classes.button} onClick={this.closePanel}>\n              <Icon>\n                <CancelIcon />\n              </Icon>\n            </Button>\n          </Tooltip>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nSendmail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  to: PropTypes.string,\n  subject: PropTypes.string,\n  body: PropTypes.string,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sendmail);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/theme/tomorrow_night_bright';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    display: \"flex\",\n    height: \"100%\",\n    width: \"100%\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  editor: {\n    flex: 1,\n  },\n  flex: {\n    display: 'flex',\n  },\n  stretch: {\n    flex: 1,\n  },\n  stretchflex: {\n    display: \"flex\",\n    flex: 1,\n  },\n  pad: {\n    margin: \"1em\",\n  },\n  padded: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploading: false,\n      text: \"\",\n      delay: 1000,\n    };\n    this.text = \"\";\n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.upload = this;\n    \n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    window.client.react.upload = null;\n  }\n  \n  setText(text) {\n    this.text = text;\n    this.setState({ text });\n  }\n  \n  uploadLine() {\n    const { text } = this.state;\n    var { delay } = this.state;\n    \n    if (delay < 100) {\n      delay = 100;\n    } else if (delay > 100000) {\n      delay = 100000;\n    }\n    \n    setTimeout(() => {\n      const { uploading } = this.state;\n      if (!uploading) return;\n    \n      var lines = text.split('\\n');\n      if (lines.length > 0) {\n      \n        var line = lines[0];\n        if (line.length > 0) {\n          window.client.sendCommand(line);\n        }\n        \n        // remove the sent command\n        lines.splice(0,1);\n        var newtext = lines.join('\\n');\n        this.setState({ text: newtext });\n        \n        if (lines.length > 0) {\n          // queue the next line\n          this.uploadLine();\n        } else {\n          this.setState({ uploading: false });\n          window.client.closePanel(\"Upload\");\n        }\n      } else {\n        // we reached the end of the file, close up\n        this.setState({ uploading: false });\n        window.client.closePanel(\"Upload\");\n      }\n      \n    }, delay);\n  }\n  \n  startUpload = () => {\n    this.setState({ uploading: true });\n    this.uploadLine();\n  };\n  \n  pauseUpload = () => {\n    this.setState({ uploading: false });\n  };\n\n  resetText = () => {\n    this.setState({ text: this.text });\n  };\n  \n  changeDelay = event => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    var delay = event.target.value;\n    this.setState({ delay });\n  };\n  \n  changeText = text => {\n    const { uploading } = this.state;\n    if (uploading) return;\n    \n    this.setText(text);\n  };\n  \n  onResize = () => {\n    this.editor.current.editor.resize();\n  };\n  \n  render() {\n    const { classes } = this.props;\n    const { text, uploading, delay } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <AceEditor\n          className={classes.editor}\n          ref={this.editor}\n          mode=\"mushcode\"\n          width=\"100%\"\n          theme=\"tomorrow_night_bright\"\n          value={text}\n          onChange={this.changeText}\n          readOnly={uploading}\n          wrapEnabled={true}\n          highlightActiveLine={false}\n          editorProps={{ $blockScrolling: Infinity }}\n        />\n        <div className={classes.flex}>\n          <div className={classes.stretchflex}>\n            <div className={classes.pad}></div>\n            <TextField className={classes.padded} label=\"Command delay (in ms)\" value={delay} type=\"number\" variant=\"outlined\" onChange={this.changeDelay} fullWidth />\n          </div>\n          { !uploading ? (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Start uploading.\">\n                <Button className={classes.stretch} onClick={this.startUpload}>\n                  <CloudUploadIcon />\n                </Button>\n              </Tooltip>\n              <Tooltip title=\"Reset partially uploaded text.\">\n                <Button className={classes.stretch} onClick={this.resetText}>\n                  <RedoIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          ) : (\n            <div className={classes.stretchflex}>\n              <Tooltip title=\"Pause uploading.\">\n                <Button className={classes.stretch} onClick={this.pauseUpload}>\n                  <PauseIcon />\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nUpload.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Upload);\n\n\t","\nimport React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n//import TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport Popover from '@material-ui/core/Popover';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  popover: {\n    overflow: \"hidden\",\n  },\n  swatch: {\n    cursor: \"pointer\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n    height: \"1em\",\n    width: \"1em\",\n    lineHeight: \"100%\",\n  },\n  bgfix: {\n    color: \"transparent\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass ColorPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchor: null,\n      value: props.value,\n    };\n\n    var offset = props.background ? 40 : 30;\n    this.rows = [];\n    var colors = [];\n    var i, j;\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset));\n    }\n    \n    for (i = 0; i < 8; i++) {\n      colors.push(\"ansi-\" + (i+offset) + \"-1\");\n    }\n    this.rows.push(colors);\n    \n    for (i = 1; i < 16; i++) {\n      colors = [];\n      for (j = 0; j < 16; j++) {\n        colors.push(\"ansi-\" + (8+offset) + \"-5-\" + (i*16+j));\n      }\n      this.rows.push(colors);\n    }\n  }\n  \n  show = event => {\n    this.setState({ anchor: event.currentTarget });\n  };\n  \n  hide = () => {\n    this.setState({ anchor: null });\n  };\n  \n  choose = (color) => (event) => {\n    this.hide();\n    this.setState({ value: color });\n    this.props.onChange(color);\n  };\n\n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, background, label } = this.props;\n    const { anchor, value } = this.state;\n    \n    var bgfix;\n    if (background) {\n      bgfix = classes.bgfix;\n    }\n    \n    return (\n      <div>\n        <Button aria-haspopup=\"true\" aria-owns={anchor ? 'colorpicker' : null} onClick={this.show}>\n          <div className={value}>\n            {label}\n          </div>\n        </Button>\n        \n        <Popover className={classes.popover} id=\"colorpicker\" anchorEl={anchor} open={Boolean(anchor)} onClose={this.hide}>\n          {this.rows.map((colors, i) => (\n            <div key={1000+i}>\n              {colors.map((color, j) => (\n                <span key={i*16+j} className={classNames(classes.swatch, bgfix, color)} onClick={this.choose(color)}>\n                  {\"\\u2588\"}\n                </span>\n              ))}\n            </div>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nColorPicker.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  background: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(ColorPicker);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Icon from '@material-ui/core/Icon';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Switch from '@material-ui/core/Switch';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport ColorPicker from './colorpicker';\n\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport WrapTextIcon from '@material-ui/icons/WrapText';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CodeIcon from '@material-ui/icons/Code';\nimport BorderLeftIcon from '@material-ui/icons/BorderLeft';\nimport BorderRightIcon from '@material-ui/icons/BorderRight';\nimport VerticalSplitIcon from '@material-ui/icons/VerticalSplit';\nimport PictureInPictureIcon from '@material-ui/icons/PictureInPicture';\nimport GroupWorkIcon from '@material-ui/icons/GroupWork';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport FormatIndentIncreaseIcon from '@material-ui/icons/FormatIndentIncrease';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"auto\",\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\",\n    alignItems: \"stretch\",\n  },\n  left: {\n    flex: 1,\n    overflowY: \"auto\",\n  },\n  right: {\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n  },\n  content: {\n    display: 'flex',\n    flexFlow: \"row wrap\",\n    justifyContent: 'flex-start',\n  },\n  list: {\n    flex: 1,\n  },\n  switchText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  buttons: {\n    right: 0,\n    top: 0,\n    bottom: 0,\n    flex: 1,\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  leftright: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    \n    this.color = null;\n    \n    this.state = Object.assign(this.state, window.client.settings);\n  }\n  \n  handleSwitch = name => event => {\n    window.client.changeSetting(name, event.target.checked);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleValue = name => event => {\n    window.client.changeSetting(name, event.target.value);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  handleColor = name => color => {\n    window.client.changeSetting(name, color);\n    this.setState({ [name]: window.client.settings[name] });\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  loadSettings = () => {\n    this.setState({ ...window.client.settings });\n  }\n  \n  resetSettings = () => {\n    if (!window.confirm(\"Are you sure you want to reset settings to defaults?\")) {\n      return;\n    }\n    \n    window.client.settings = Object.assign({}, window.client.defaultSettings);\n    this.loadSettings();\n    window.client.saveSettings();\n    window.client.react.portal.forceUpdate();\n  };\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, closeDrawer } = this.props;\n    const { debugEvents, decompileEditor, decompileKey, ansiFG, ansiBG, wrapWidth,\n      invertHighlight, debugActions,\n      sidebarOpen, sidebarAnchor, sidebarAlwaysShow, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass, sidebarWidth } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <div className={classes.content} tabIndex={0} role=\"button\">\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Debugging</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug server events?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugEvents} value=\"debugEvents\" onChange={this.handleSwitch('debugEvents')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              <ListItem dense>\n                <ListItemIcon>\n                  <BugReportIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Debug user-defined actions?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={debugActions} value=\"debugActions\" onChange={this.handleSwitch('debugActions')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Display Settings</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <WrapTextIcon />\n                </ListItemIcon>\n                <TextField label=\"Terminal Width\" value={wrapWidth} onChange={this.handleValue('wrapWidth')} type=\"number\" />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Background Color\" value={ansiBG} onChange={this.handleColor('ansiBG')} background />\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ColorPicker label=\"Foreground Color\" value={ansiFG} onChange={this.handleColor('ansiFG')} />\n              </ListItem>\n              \n              <ListItem dense>\n                <ListItemIcon>\n                  <PaletteIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Invert foreground & background?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={invertHighlight} value=\"invertHighlight\" onChange={this.handleSwitch('invertHighlight')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>@decompile/tf</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <EditIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Send @dec/tf to editor.\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={decompileEditor} value=\"decompileEditor\" onChange={this.handleSwitch('decompileEditor')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n\n              <ListItem dense>\n                <ListItemIcon>\n                  <CodeIcon />\n                </ListItemIcon>\n                <TextField label=\"TFPREFIX\" value={decompileKey} onChange={this.handleValue('decompileKey')} helperText=\"Prefix used by @dec/tf.\" />\n              </ListItem>\n            </List>\n\n            <List className={classes.list} disablePadding dense subheader={<ListSubheader>Sidebar Display</ListSubheader>}>\n              <ListItem dense>\n                <ListItemIcon>\n                  <VerticalSplitIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarOpen} value=\"sidebarOpen\" onChange={this.handleSwitch('sidebarOpen')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <PictureInPictureIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Keep panels off sidebar?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarAlwaysShow} value=\"sidebarAlwaysShow\" onChange={this.handleSwitch('sidebarAlwaysShow')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen} className={classes.leftright}>\n                <Icon color=\"action\">\n                  <BorderLeftIcon />\n                </Icon>\n                <Typography>Left</Typography>\n                <Switch checked={sidebarAnchor === \"right\"}\n                  color=\"default\" disabled={!sidebarOpen}\n                  value={sidebarAnchor === \"right\" ? \"left\" : \"right\"}\n                  onChange={this.handleValue('sidebarAnchor')}\n                />\n                <Typography>Right</Typography>\n                <Icon color=\"action\">\n                  <BorderRightIcon />\n                </Icon>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <FormatIndentIncreaseIcon />\n                </ListItemIcon>\n                <TextField label=\"Sidebar Width\" value={sidebarWidth} onChange={this.handleValue('sidebarWidth')} />\n              </ListItem>\n            </List>\n            \n            <List className={classes.list} disabled={!sidebarOpen} disablePadding dense subheader={<ListSubheader>Sidebar Content</ListSubheader>}>\n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <AccountCircleIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show players?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowPlayers} value=\"sidebarShowPlayers\" onChange={this.handleSwitch('sidebarShowPlayers')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <GroupWorkIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show things?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen} checked={sidebarShowThings} value=\"sidebarShowThings\" onChange={this.handleSwitch('sidebarShowThings')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show exits?\" />\n                <ListItemSecondaryAction>\n                  <Switch checked={sidebarShowExits} disabled={!sidebarOpen} value=\"sidebarShowExits\" onChange={this.handleSwitch('sidebarShowExits')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n              \n              <ListItem dense disabled={!sidebarOpen || !sidebarShowExits}>\n                <ListItemIcon>\n                  <ExploreIcon />\n                </ListItemIcon>\n                <ListItemText className={classes.switchText} primary=\"Show compass?\" />\n                <ListItemSecondaryAction>\n                  <Switch disabled={!sidebarOpen || !sidebarShowExits} checked={sidebarShowCompass} value=\"sidebarShowCompass\" onChange={this.handleSwitch('sidebarShowCompass')} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            </List>\n          </div>\n        </div>\n        <div className={classes.right}>\n          <div className={classes.buttons}>\n            <Button className={classes.reset} onClick={this.resetSettings}>\n              Reset\n            </Button>\n            <Button className={classes.close} onClick={closeDrawer}>\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  closeDrawer: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Settings);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Icon from '@material-ui/core/Icon';\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport SaveIcon from '@material-ui/icons/Save';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport KeyboardIcon from '@material-ui/icons/Keyboard';\nimport WifiIcon from '@material-ui/icons/Wifi';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\n\nimport Settings from '../Settings';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst drawerHeight = 240;\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    margin: '0 20px',\n    flex: 1,\n  },\n  tasksep: {\n    marginRight: theme.spacing.unit,\n  },\n  taskbutton: {\n    margin: theme.spacing.unit,\n  },\n  taskicon: {\n    marginRight: theme.spacing.unit,\n  },\n  tasklabel: {\n//    display: \"flex\",\n//    \"flex-direction\": \"column\",\n  },\n  cmdbutton: {\n  },\n  cmdlabel: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  flex: {\n    flex: 1,\n  },\n  drawerFrame: {\n    width: '100%',\n  },\n  drawerButton: {\n    margin: theme.spacing.unit,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawerPaper: {\n    position: 'relative',\n    height: drawerHeight,\n  },\n  mailButton: {\n    margin: theme.spacing.unit,\n  },\n  BBButton: {\n    margin: theme.spacing.unit,\n  },\n  fileinput: {\n    display: 'none',\n  },\n  padded: {\n    width: \"calc(100%-\"+2*theme.spacing.unit+\")\",\n    padding: -theme.spacing.unit,\n    margin: theme.spacing.unit,\n  },\n  historyPopover: {\n    maxHeight: \"10em\",\n    overflowY: \"auto\",\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n  overflowButtons: {\n    \n  },\n});\n\n\nfunction BadgeIcon(props) {\n  var count = props.count ? props.count() : 0;\n\n  if (count > 0) {\n    return (\n      <Badge badgeContent={count} color=\"error\">\n        <Icon>{props.children}</Icon>\n      </Badge>\n    );\n  }\n  return (<Icon>{props.children}</Icon>);\n};\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Taskbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      title: props.title,\n      taskbar: [ ],\n      buttons: [ ],\n      unreadBB: 0,\n      unreadMail: 0,\n      menuAnchor: null,\n      uploadAnchor: null,\n      helpAnchor: null,\n      logAnchor: null,\n      historyAnchor: null,\n      mobileAnchor: null,\n    };\n    \n    this.help = \"\";\n    this.url = \"\";\n    this.file = \"\";\n    this.logname = \"\";\n    this.history = null;\n    this.frame = React.createRef();\n    \n  }\n\n  openDrawer = () => {\n    this.closeMenu();\n    this.setState({open: true});\n  };\n  \n  closeDrawer = () => {\n    this.setState({open: false});\n    window.client.react.portal.forceUpdate();\n    window.client.focus(true);\n  };\n  \n  setTitle = t => {\n    this.setState({title: t});\n  };\n\n  clearScreen = () => {\n    if (window.confirm('Do you want to clear the screen?')) {\n      window.client.clear();\n    }\n  };\n\n  sendCommand = (cmd) => {\n    window.client.sendCommand(cmd);\n  };\n\n  sendText = (txt) => {\n    window.client.sendText(txt);\n  };\n\n  sendAPI = (cmd, args) => {\n    window.client.sendAPI(cmd, args);\n  };\n\n  setUnreadMail = u => {\n    this.setState({unreadMail: u});\n  };\n\n  setUnreadBB = u => {\n    this.setState({unreadBB: u});\n  };\n\n  addButton = (button) => {\n    const { buttons } = this.state;\n    buttons.push(button);\n    this.setState({ buttons });\n  };\n  \n  pushTask = (task) => {\n    const { taskbar } = this.state;\n    taskbar.push(task);\n    this.setState({ taskbar });\n  };\n  \n  popTask = (task) => {\n    const { taskbar } = this.state;\n    const i = taskbar.indexOf(task);\n    taskbar.splice(i, 1);\n    task.unsmallify();\n    task.front();\n    this.setState({ taskbar });\n  };\n  \n  showMenu = event => {\n    this.setState({ menuAnchor: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ menuAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showMobileMenu = event => {\n    this.setState({ mobileAnchor: event.currentTarget });\n  };\n  \n  closeMobileMenu = () => {\n    this.setState({ mobileAnchor: null });\n    window.client.focus(true);\n  };\n\n  toggleSidebar = () => {\n    const client = window.client;\n    \n    const toggle = !client.settings.sidebarOpen;\n    client.changeSetting('sidebarOpen', toggle);\n    this.setState({ sidebarOpen: toggle });\n    client.saveSettings();\n    client.react.portal.forceUpdate();\n  };\n  \n  showHelp = event => {\n    this.help = null;\n    this.setState({ helpAnchor: event.currentTarget });\n  };\n  \n  closeHelp = () => {\n    this.setState({ helpAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeHelp = event => {\n    this.help = event.target.value;\n  };\n  \n  searchHelp = event => {\n    event.preventDefault();\n    if (this.help && this.help.length > 0) {\n      window.client.sendCommand(\"help \"+this.help);\n    } else {\n      window.client.sendCommand(\"help\");\n    }\n\n    this.closeHelp();\n  };\n  \n  showUpload = event => {\n    this.file = null;\n    this.closeMenu();\n    this.setState({ uploadAnchor: event.currentTarget });\n  };\n  \n  closeUpload = () => {\n    this.setState({ uploadAnchor: null });\n    window.client.focus(true);\n  };\n  \n  insertCommand = cmd => event => {\n    window.client.input.root.value = cmd;\n    this.closeHistory();\n  };\n  \n  clearHistory = () => {\n    if (window.confirm(\"Do you want to clear the command history?\")) {\n      window.client.input.clearHistory();\n      this.closeHistory();\n    }\n  };\n  \n  showHistory = event => {\n    this.closeMenu();\n    this.setState({ historyAnchor: event.currentTarget });\n  };\n  \n  closeHistory = () => {\n    this.setState({ historyAnchor: null });\n    window.client.focus(true);\n  };\n  \n  showLog = event => {\n    this.logname = null;\n    this.closeMenu();\n    this.setState({ logAnchor: event.currentTarget });\n  };\n  \n  closeLog = () => {\n    this.setState({ logAnchor: null });\n    window.client.focus(true);\n  };\n  \n  typeLog = event => {\n    this.logname = event.target.value;\n  };\n  \n  saveLog = event => {\n    event.preventDefault();\n    \n    if (!this.logname || !(this.logname.length > 0)) return;\n    \n    window.client.saveLog(this.logname+\".txt\");\n    \n    this.closeLog();\n  };\n  \n  typeURL = event => {\n    this.url = event.target.value;\n  };\n\n  openCustomizer = () => {\n    window.client.addReactPanel(\"Customizer\", { icon: 'build' });\n  };\n  \n  previewUpload = () => {\n    window.client.addReactPanel(\"Upload\", { icon: 'cloud_upload' });\n\n    if (this.file && this.file.length > 0) {\n      window.client.react.upload.setText(this.file);\n    }\n    \n    this.closeUpload();\n  };\n  \n  handleFile = event => {\n    event.preventDefault();\n    const files = event.target.files;\n    \n    if (files.length > 0) {\n      var reader = new FileReader();\n      reader.onload = () => {\n        this.file = reader.result;\n        this.previewUpload();\n      };\n      reader.readAsText(files[0]);\n    }\n  };\n  \n  handleURL = event => {\n    event.preventDefault();\n    \n    if (!this.url || !this.url.startsWith(\"http\")) return;\n\n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          this.file = req.responseText;\n          this.previewUpload();\n        } else {\n          alert(\"Unable to download URL! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", this.url);\n    req.send();\n  };\n  \n  reconnect() {\n    if (window.confirm(\"Do you want to reconnect?\")) {\n      window.client.conn.reconnect();\n    }\n  }\n  \n  componentDidMount() {\n    window.client.react.taskbar = this;\n  }\n\n  componentWillUnmount() {\n    window.client.react.taskbar = null;\n  }\n  \n  render() {\n    const input = window.client.input;\n    const { classes } = this.props;\n    const { title, taskbar, open, buttons, historyAnchor, mobileAnchor,\n            menuAnchor, uploadAnchor, helpAnchor, logAnchor } = this.state;\n    const { sidebarOpen, sidebarAnchor } = window.client.settings;\n\n    var rev = input ? input.history.slice().reverse() : [];\n    \n    const renderTasks = taskbar.map((task,i) => (\n      <Tooltip key={i} title={task.headertitle.innerText}>\n        <Button key={task.id} classes={{ label: classes.tasklabel }} className={classes.taskbutton} aria-label=\"open-task\" onClick={() => this.popTask(task)}>\n          <Icon className={classes.taskicon}>{task.headerlogo.innerText}</Icon>\n          {!window.client.mobile && task.headertitle.innerText}\n        </Button>\n      </Tooltip>\n    ));\n\n    const renderButtons = buttons.map((button,i) => (\n      <Tooltip key={i} title={button.title}>\n        <Button aria-label={button.ariaLabel} onClick={button.action}>\n          <BadgeIcon count={button.count}>\n            {button.icon}\n          </BadgeIcon>\n        </Button>\n      </Tooltip>\n    ));\n    \n    return (\n      <AppBar className={classes.root} position=\"static\" onClick={() => window.client.focus()}>\n        <Toolbar disableGutters={!this.state.open}>\n          {sidebarAnchor === \"left\" && (\n            <div className={classes.sectionMobile}>\n              <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                <Button aria-label=\"open-left-sidebar\" onClick={this.toggleSidebar}>\n                  {sidebarOpen ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n          \n          <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n            {title}\n          </Typography>\n          \n          <div className={classes.sectionDesktop}>\n            <div className={classes.flex}></div>\n            {renderTasks}\n            <div className={classes.tasksep}></div>\n            {renderButtons}\n          </div>\n          \n          <div className={classes.overflowButtons}>\n          </div>\n          \n          <div className={classes.sectionMobile}>\n            <Tooltip title=\"Windows and commands...\">\n              <Button aria-owns={mobileAnchor ? 'taskbar.mobile' : null} aria-label=\"open-mobile\" aria-haspopup=\"true\" onClick={this.showMobileMenu}>\n                <MoreVertIcon />\n              </Button>\n            </Tooltip>\n          </div>\n          \n          <Tooltip title=\"Client utilities...\">\n            <Button aria-owns={menuAnchor ? 'taskbar.menu' : null} aria-label=\"open-menu\" aria-haspopup=\"true\" onClick={this.showMenu}>\n              <MenuIcon />\n            </Button>\n          </Tooltip>\n          \n          {sidebarAnchor === \"right\" && (\n            <div className={classes.sectionMobile}>\n              <Tooltip title={sidebarOpen ? \"Open sidebar.\" : \"Close sidebar.\"}>\n                <Button aria-label=\"open-right-sidebar\" onClick={this.toggleSidebar}>\n                  {sidebarOpen ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n                </Button>\n              </Tooltip>\n            </div>\n          )}\n          \n          <SwipeableDrawer\n            variant=\"temporary\"\n            anchor=\"left\"\n            open={open}\n            onClose={this.closeDrawer}\n            onOpen={this.openDrawer}\n            \n          >\n            <Settings closeDrawer={this.closeDrawer} />\n          </SwipeableDrawer>\n\n          <Popover id=\"taskbar.help\" anchorEl={helpAnchor} open={Boolean(helpAnchor)} onClose={this.closeHelp}>\n            <form onSubmit={this.searchHelp}>\n              <TextField label=\"Help topic\" className={classes.padded} autoComplete=\"false\" autoFocus variant=\"outlined\" onChange={this.typeHelp} />\n            </form>\n            <Button fullWidth onClick={this.searchHelp}>\n              Get Help\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.log\" anchorEl={logAnchor} open={Boolean(logAnchor)} onClose={this.closeLog}>\n            <form onSubmit={this.saveLog}>\n              <TextField label=\"File Name\" variant=\"outlined\" className={classes.padded}\n                onChange={this.typeLog} autoFocus\n                InputProps={{ inputProps: { style: { textAlign: 'right' }}, endAdornment: <InputAdornment position=\"end\">.txt</InputAdornment> }}\n              />\n            </form>\n            <Button fullWidth onClick={this.saveLog}>\n              Save Log\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.upload\" anchorEl={uploadAnchor} open={Boolean(uploadAnchor)} onClose={this.closeUpload}>\n            <form onSubmit={this.handleURL} className={classes.padded}>\n              <TextField type=\"url\" fullWidth label=\"Insert URL\" variant=\"outlined\" onChange={this.typeURL} autoFocus />\n            </form>\n            <Button onClick={this.handleURL}>\n              Upload URL\n            </Button>\n            <input\n              accept=\"text/plain\"\n              className={classes.fileinput}\n              id=\"file.upload\"\n              type=\"file\"\n              onChange={this.handleFile}\n            />\n            <label htmlFor=\"file.upload\">\n              <Button component=\"span\">\n                Choose File\n              </Button>\n            </label>\n            <Button onClick={this.previewUpload}>\n              Paste Text\n            </Button>\n          </Popover>\n          \n          <Popover id=\"taskbar.history\" anchorEl={historyAnchor} open={Boolean(historyAnchor)} onClose={this.closeHistory}>\n            <List className={classes.historyPopover}>\n              {rev.map((cmd, i) => (\n                <ListItem key={i} button dense divider onClick={this.insertCommand(cmd)}>\n                  <ListItemText primary={cmd} />\n                </ListItem>\n              ))}\n            </List>\n            <Button onClick={this.clearHistory}>\n              Clear History\n            </Button>\n          </Popover>\n          \n          <Menu disableEnforceFocus id=\"taskbar.mobile\" anchorEl={mobileAnchor} open={Boolean(mobileAnchor)} onClick={this.closeMobileMenu} onClose={this.closeMobileMenu}>\n            <MenuItem onClick={this.closeMobileMenu}>\n              <Tooltip title=\"Close menu.\">\n                <Button><Icon><ExpandLessIcon /></Icon></Button>\n              </Tooltip>\n            </MenuItem>\n            {renderButtons.slice(0).reverse().map((button, i) => (\n              <MenuItem key={i} onClick={this.closeMobileMenu}>\n                {button}\n              </MenuItem>\n            ))}\n            {renderTasks.slice(0).reverse().map((task, i) => (\n              <MenuItem key={i} onClick={this.closeMobileMenu}>\n                {task}\n              </MenuItem>\n            ))}\n          </Menu>\n          \n          <Menu disableEnforceFocus id=\"taskbar.menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClick={this.closeMenu} onClose={this.closeMenu}>\n            <MenuItem onClick={this.closeMenu}>\n              <Tooltip title=\"Close menu.\">\n                <ExpandLessIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openDrawer}>\n              <Tooltip title=\"Change settings.\">\n                <SettingsIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.openCustomizer}>\n              <Tooltip title=\"Client customization.\">\n                <BuildIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={uploadAnchor ? 'taskbar.upload' : null} aria-label=\"open-upload\" aria-haspopup=\"true\" onClick={this.showUpload}>\n              <Tooltip title=\"Upload file/URL.\">\n                <CloudUploadIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={logAnchor ? 'taskbar.log' : null} aria-label=\"open-log\" aria-haspopup=\"true\" onClick={this.showLog}>\n              <Tooltip title=\"Save display log.\">\n                <SaveIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem aria-owns={historyAnchor ? 'taskbar.history' : null} aria-label=\"open-history\" aria-haspopup=\"true\" onClick={this.showHistory}>\n              <Tooltip title=\"Show command history.\">\n                <KeyboardIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.clearScreen}>\n              <Tooltip title=\"Clear screen.\">\n                <BackspaceIcon />\n              </Tooltip>\n            </MenuItem>\n            <MenuItem onClick={this.reconnect}>\n              <Tooltip title=\"Reconnect.\">\n                <WifiIcon />\n              </Tooltip>\n            </MenuItem>            \n          </Menu>\n\n          <div className={classes.tasksep}></div>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nTaskbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Taskbar);\n\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    margin: 0,\n    padding: 0,\n    border: \"none\",\n    \"background-color\": theme.palette.primary.main,\n    flex: 1,\n    height: \"100%\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    [theme.breakpoints.down('sm')]: {\n      \"font-size\": \"5pt\",\n    },\n  },\n  terminal: {\n    flex: 1,\n    position: \"relative\",\n    overflowY: \"scroll\",\n    overflowX: \"hidden\",\n    padding: \"0.25em 0.5em\",\n  },\n  output: {\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    position: \"absolute\",\n    margin: 0,\n    border: 0,\n    padding: 0,\n  },\n  taskbar: {\n    padding: \"0\",\n    position: \"relative\",\n    overflow: \"hidden\",\n  },\n  prompt: {\n    overflow: \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"text-align\": \"left\",\n    \"vertical-align\": \"middle\",\n    height: \"1em\",\n    padding: \"0.25em\",\n  },\n  scrollcount: {\n    position: \"absolute\",\n    right: 0,\n    bottom: 0,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Terminal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lines: 0,\n    };\n    \n    this.terminal = React.createRef();\n    this.output = React.createRef();\n    this.prompt = React.createRef();\n\n    this.init = false;\n  }\n  \n  focusInput = () => {\n    window.client.focus();\n  };\n\n  componentDidMount() {\n    document.body.onresize = this.onResize;\n    window.client.react.terminal = this;\n    window.client.initOutput(this.output.current, this.terminal.current);\n    window.client.initPrompt(this.prompt.current);\n    this.init = true;\n    this.forceUpdate();\n  }\n  \n  onResize = event => {\n    clearTimeout(this.doResize);\n    setTimeout(this.doResize, 1000);\n  };\n  \n  doResize = () => {\n    const client = window.client;\n    client.output.calcDimensions();\n    client.sendText(\"SCREENWIDTH \" + Math.min(client.settings.wrapWidth, Math.floor(window.client.output.root.parentNode.clientWidth / window.client.output.dims.width)));\n    client.sendText(\"SCREENHEIGHT \" + Math.floor(client.output.root.parentNode.clientHeight / client.output.dims.height));\n    client.output.scrollDown();\n    \n    client.mobile = !window.matchMedia(this.props.theme.breakpoints.up('md').substring(7)).matches\n\n    this.onChange();\n  };\n\n  onChange = () => {\n    this.setState({ lines: this.linesOfScroll() });\n  };\n  \n  linesOfScroll() {\n    return window.client.output.linesOfScroll();\n  }\n\n  render() {\n    const { classes, width, ansiFG, ansiBG, containerRef } = this.props;\n    const { lines } = this.state;\n    \n    var dim;\n    if (this.init) {\n      dim = width * window.client.output.dims.width + \"px\";\n    } else {\n      dim = \"100%\";\n    }\n    \n    return (\n      <div id=\"terminal-container\" className={classes.frame} onClick={this.focusInput} ref={containerRef}>\n        <div ref={this.terminal} className={classNames(classes.terminal, ansiFG, ansiBG)} onScroll={this.onChange}>\n          <div ref={this.output} className={classNames(classes.output, ansiFG, ansiBG)} style={{ maxWidth: dim }}></div>\n        </div>\n        <div className={classes.taskbar}>\n          <div ref={this.prompt} className={classNames(classes.prompt, ansiFG, ansiBG)}></div>\n          <div className={classes.scrollcount}>\n            <Typography color=\"error\" align=\"right\">\n              {lines > 0 && \"...and \"+lines+\" more lines...\"}\n            </Typography>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nTerminal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n  containerRef: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(Terminal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    \"background-color\": theme.palette.primary.main,\n    display: \"flex\",\n  },\n  text: {\n    flex: 1,\n//    \"background-color\": \"black\",\n//    color: \"silver\",\n    margin: \"1px 0 0 0\",\n    border: \"none\",\n    outline: \"none\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n    resize: \"none\",\n    height: \"3em\",\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"16pt\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Input extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    this.input = React.createRef();\n  }\n  \n  componentDidMount() {\n    window.client.react.input = this;\n    window.client.initInput(this.input.current);\n  }\n  \n  render() {\n    const { classes, ansiFG, ansiBG } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <textarea ref={this.input} className={classNames(classes.text, ansiFG, ansiBG)}  autoComplete=\"off\" autoFocus></textarea>\n      </div>\n    );\n  }\n}\n\nInput.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  ansiFG: PropTypes.string.isRequired,\n  ansiBG: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Input);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { withStyles } from '@material-ui/core/styles';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    background: theme.palette.primary.main,\n    margin: 0,\n    border: \"none\",\n    outline: \"none\",\n    \"text-align\": \"right\",\n    \"vertical-align\": \"middle\",\n    padding: \"0.25em\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Statusbar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: \".\",\n    };\n  }\n  \n  setStatus(status) {\n    this.setState({ status });\n  }\n  \n  componentDidMount() {\n    window.client.react.statusbar = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.statusbar = null;\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { status } = this.state;\n    \n    return (\n      <div className={classes.frame} onClick={() => window.client.focus()}>\n        <Typography\n          align=\"right\"\n          color=\"textPrimary\"\n          noWrap\n        >\n          {status}\n        </Typography>\n      </div>\n    );\n  }\n}\n\nStatusbar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Statusbar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n  },\n  right: {\n    position: \"absolute\",\n    right: 0,\n  },\n  left: {\n    marginRight: \"auto\",\n  },\n  text: {\n    \"font-size\": \"16pt\",\n  },\n  title: {\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      msg: null,\n    };\n  }\n\n  openLogin = (msg) => {\n    this.setState({ open: true });\n    this.setState({ msg: msg });\n    this.focusInput('username');\n  };\n\n  closeLogin = () => {\n    this.setState({ open: false });\n    window.client.focus();\n  };\n  \n  submitLogin = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'connect \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  submitGuest = () => {\n    window.client.sendText('connect guest');\n    this.closeLogin();\n  };\n  \n  submitCreate = () => {\n    var username = document.getElementById('username').value;\n    var password = document.getElementById('password').value;\n    document.getElementById('password').value = '';\n    \n    var str = 'create \"' + username + '\" ' + password\n    window.client.sendText(str);\n    \n    this.closeLogin();\n  };\n  \n  catchReturn = (e) => {\n    if (e.key === 'Enter') {\n      // Do code here\n      this.submitLogin();\n      e.preventDefault();\n    }\n  };\n  \n  focusInput(id) {\n    var input = document.getElementById(id);\n    input && input.focus();\n  }\n\n  componentDidMount() {\n    window.client.react.login = this;\n  }\n  \n  render() {\n    const { classes, fullScreen } = this.props;\n    const { open, msg } = this.state;\n    \n    return (\n      <Dialog\n        className={classes.frame}\n        open={open}\n        fullScreen={fullScreen}\n        onEscapeKeyDown={() => window.client.react.taskbar.openDrawer()}\n        onClose={this.closeLogin}\n        aria-labelledby=\"responsive-dialog-title\"\n        disableBackdropClick\n        disableEscapeKeyDown\n      >\n        <DialogTitle className={classes.title} id=\"responsive-dialog-title\">\n          Character Login\n          <IconButton className={classes.right} onClick={() => window.client.react.taskbar.openDrawer()}>\n            <SettingsIcon />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <span dangerouslySetInnerHTML={{ __html: msg }} />\n          </DialogContentText>\n          <TextField\n            className={classes.text}\n            autoComplete=\"username\"\n            margin=\"dense\"\n            id=\"username\"\n            name=\"username\"\n            label=\"Character Name\"\n            type=\"string\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n          <TextField\n            className={classes.text}\n            autoComplete=\"current-password\"\n            margin=\"dense\"\n            id=\"password\"\n            name=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            fullWidth\n            onKeyPress={this.catchReturn}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button className={classes.left} classes={{ label: classes.block }} onClick={this.submitCreate} color=\"primary\" variant=\"extendedFab\">\n            <PersonAddIcon />\n            Register\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitGuest} color=\"primary\" variant=\"extendedFab\">\n            <PersonOutlineIcon />\n            Guest\n          </Button>\n          <Button classes={{ label: classes.block }} onClick={this.submitLogin} color=\"primary\" variant=\"extendedFab\" aria-label=\"login\">\n            <PersonIcon />\n            Login\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  fullScreen: PropTypes.bool.isRequired,\n};\n\nexport default withMobileDialog()(withStyles(styles, { withTheme: true })(Login));\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n//import RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport CallMadeIcon from '@material-ui/icons/CallMade';\nimport CallReceivedIcon from '@material-ui/icons/CallReceived';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LaunchIcon from '@material-ui/icons/Launch';\n\nconst COMPASS = {\n  NORTH: (<ArrowUpwardIcon />),\n  SOUTH: (<ArrowDownwardIcon />),\n  WEST: (<ArrowBackIcon />),\n  EAST: (<ArrowForwardIcon />),\n  SOUTHEAST: (<SvgIcon><polygon points=\"12,12 0,12 12,0\"/></SvgIcon>),\n  SOUTHWEST: (<SvgIcon><polygon points=\"12,12 12,0 24,12\"/></SvgIcon>),\n  NORTHEAST: (<SvgIcon><polygon points=\"12,12 12,24 0,12\"/></SvgIcon>),\n  NORTHWEST: (<SvgIcon><polygon points=\"12,12 12,24 24,12\"/></SvgIcon>),\n  UP: (<CallMadeIcon />),\n  DOWN: (<CallReceivedIcon />),\n  IN: (<ExitToAppIcon />),\n  OUT: (<LaunchIcon />),\n};\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    height: \"100%\",\n    minWidth: \"192px\",\n    backgroundColor: theme.palette.background.paper,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n    textAlign: \"center\",\n    justifyContent: 'space-between',\n  },\n  contents: {\n    flexShrink: 1,\n    overflowX: 'hidden',\n    overflowY: 'auto',\n  },\n  playerItem: {\n    padding: 2,\n  },\n  thingItem: {\n  },\n  customExits: {\n    flexGrow: 1,\n    position: \"relative\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  bottom: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  navWidget: {\n    position: \"relative\",\n    bottom: 0,\n    left: \"50%\",\n    flexShrink: 0,\n    '-webkit-transform': 'translateX(-50%)',\n    transform: 'translateX(-50%)',\n  },\n});\n\nclass Sidebar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      exits: [],\n      things: [],\n      players: [],\n      friends: [],\n    };\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n  }\n  \n  parseExits(exits) {\n    const { sidebarShowCompass } = this.props;\n    \n    this.ucExits = [];\n    this.customExits = [];\n    this.useCompass = false;\n    \n    exits.forEach((exit, i) => {\n      this.ucExits.push(exit.toUpperCase());\n    });\n    \n    if (!sidebarShowCompass) {\n      this.customExits = exits.slice(0);\n      return;\n    }\n    \n    var keys = Object.keys(COMPASS);\n    for (let i = 0; i < exits.length; i++) {\n      let fullexit = this.ucExits[i];\n      let match = -1;\n\n      fullexit.split(\";\").forEach((exit, n) => {\n        if (match === -1) {\n          match = keys.indexOf(exit);\n        }\n      });\n\n      if (match === -1) {\n        this.customExits.push(exits[i]);\n      } else {\n        this.useCompass = true;\n      }\n    }\n    \n  }\n  \n  getContents() {\n    window.client.sendAPI(\"listcontents\");\n  }\n\n  go = exit => event => {\n    const { jsonapi, delayContents } = window.client;\n    \n    if (exit && exit.length > 0) {\n      this.sendCommand(\"go \"+exit);\n      if (!jsonapi) {\n        // if we dont have movement events, do our own on a timer\n        clearTimeout(this.getContents);\n        setTimeout(this.getContents, delayContents);\n      }\n    }\n  };\n  \n  action = event => {\n    window.client.sendCommand(\"look\");\n    window.client.sendAPI(\"listcontents\");\n  };\n  \n  matchExit = exit => {\n    for (let i = 0; i < this.ucExits.length; i++) {\n      let fullexit = this.ucExits[i];\n      if (fullexit.split(\";\").indexOf(exit) !== -1) {\n        return i;\n      }\n    }\n    \n    return -1;\n  };\n  \n  buildExit = exit => {\n    var uc = exit.toUpperCase();\n    var disabled = this.matchExit(uc) === -1;\n    return (\n      <Tooltip disabled={disabled} title={exit}>\n        <span>\n          <IconButton onClick={this.go(exit)} disabled={disabled}>\n            {COMPASS[uc]}\n          </IconButton>\n        </span>\n      </Tooltip>\n    );    \n  };\n  \n  updateExits(exits) {\n    this.setState({ exits });\n  }\n  \n  updateThings(things) {\n    this.setState({ things });\n  }\n  \n  updatePlayers(players) {\n    this.setState({ players });\n  }\n  \n  addObject(obj) {\n    const { players, things } = this.state;\n    if (obj.player) {\n      players.push(obj.name);\n      this.setState({ players });\n    } else {\n      things.push(obj.name);\n      this.setState({ things });\n    }\n  }\n  \n  delObject(obj) {\n    const { players, things } = this.state;\n    var i;\n    \n    if (obj.player) {\n      i = players.indexOf(obj.name);\n      if (i !== -1) {\n        players.splice(i, 1);\n        this.setState({ players });\n      }\n    } else {\n      i = things.indexOf(obj.name);\n      if (i !== -1) {\n        things.splice(i, 1);\n        this.setState({ things });\n      }\n    }\n  }\n\n  sendCommand = cmd => {\n    window.client.sendCommand(cmd);\n  };\n  \n  componentDidMount() {\n    window.client.react.sidebar = this;\n    window.client.sendAPI(\"listcontents\");\n  }\n  \n  componentWillUnMount() {\n    window.client.react.sidebar = null;\n  }\n  \n  render() {\n    const { classes, sidebarWidth, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowExits, sidebarShowCompass } = this.props;\n    const { exits, things, players } = this.state;\n    const customExits = this.customExits;\n    var exitWidget;\n    var navWidget;\n    \n    if (sidebarShowExits) {\n      this.parseExits(exits);\n      \n      if (customExits.length > 0) {\n        exitWidget = (\n          <div className={classes.customExits}>\n            <div className={classes.bottom}>\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Other Exits</ListSubheader>}>\n                {customExits.map((exit, i) => (\n                  <ListItem className={classes.exitItem} key={i} button onClick={this.go(exit.split(\";\")[0])}>\n                    <ListItemText primary={exit.split(\";\")[0]} />\n                  </ListItem>\n                ))}\n              </List>\n            </div>\n          </div>\n        );\n      }\n      \n      if (this.useCompass) {\n        navWidget = (\n          <div className={classes.navWidget}>\n            <Typography variant=\"subtitle2\" color=\"textSecondary\">Navigation</Typography>\n            {this.buildExit(\"Northwest\")}\n            {this.buildExit(\"North\")}\n            {this.buildExit(\"Northeast\")}\n            {this.buildExit(\"Up\")}\n            <br />\n            {this.buildExit(\"West\")}\n            {this.buildExit(\"In\")}\n            {this.buildExit(\"East\")}\n            {this.buildExit(\"Out\")}\n            <br />\n            {this.buildExit(\"Southwest\")}\n            {this.buildExit(\"South\")}\n            {this.buildExit(\"Southeast\")}\n            {this.buildExit(\"Down\")}\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={classes.frame} style={{ width: sidebarWidth }} onClick={() => window.client.focus()}>\n        <div className={classes.contents}>\n          <span>\n            {sidebarShowPlayers && players.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Players</ListSubheader>}>\n                {players.map((player, i) => (\n                  <ListItem disableGutters className={classes.playerItem} key={i}\n                    button onClick={() => this.sendCommand(\"look \"+player)}\n                  >\n                    <ListItemAvatar>\n                      <Avatar>{player.split(\" \").map(p => p[0]).join(\"\")}</Avatar>\n                    </ListItemAvatar>\n                    <ListItemText primary={player} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {sidebarShowThings && things.length > 0 && (\n              <List dense disablePadding subheader={<ListSubheader component=\"div\">Contents</ListSubheader>}>\n                {things.map((thing, i) => (\n                  <ListItem className={classes.thingItem} key={i} button onClick={() => this.sendCommand(\"look \"+thing)}>\n                    <ListItemText primary={thing} />\n                  </ListItem>\n                ))}\n              </List>\n            )}\n          </span>\n        </div>\n        {sidebarShowExits && exitWidget}\n        {sidebarShowExits && sidebarShowCompass && navWidget}\n      </div>\n    );\n  }\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  sidebarShowPlayers: PropTypes.bool.isRequired,\n  sidebarShowThings: PropTypes.bool.isRequired,\n  sidebarShowExits: PropTypes.bool.isRequired,\n  sidebarShowCompass: PropTypes.bool.isRequired,\n  sidebarWidth: PropTypes.string.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Sidebar);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport Taskbar from '../Taskbar';\nimport Terminal from '../Terminal';\nimport Input from '../Input';\nimport Statusbar from '../Statusbar';\nimport Login from '../Login';\nimport Sidebar from '../Sidebar';\n\nconst styles = theme => ({\n  frame: {\n    width: \"100%\",\n    height: \"100%\",\n    background: \"white\",\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  top: {\n    top: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  middle: {\n    position: \"relative\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n    flex: 1,\n    left: 0,\n    width: \"100%\",\n  },\n  flex: {\n    flex: 1,\n  },\n  bottom: {\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n  },\n  dock: {\n    position: \"relative\",\n    height: \"100%\",\n    backgroundColor: theme.palette.background.paper,\n  },\n});\n\nclass Portal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: props.theme,\n    };\n    \n    this.middle = React.createRef();\n    this.terminal = React.createRef();\n    this.dock = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { sidebarAlwaysShow } = window.client.settings;\n    \n    window.client.react.portal = this;\n    window.scrollTo(0,1);\n    window.client.container = this.middle.current;\n\n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n  }\n\n  componentWillUnmount() {\n    window.client.react.portal = null;\n  }\n  \n  updateTheme(theme) {\n    this.setState({ theme });\n  }\n  \n  render() {\n    const { classes } = this.props;\n    const { theme } = this.state;\n    const { sidebarOpen, sidebarAnchor, ansiFG, ansiBG, wrapWidth,\n      sidebarAlwaysShow, sidebarShowExits, sidebarShowPlayers,\n      sidebarShowThings, sidebarShowCompass, sidebarWidth } = window.client.settings;\n      \n    var left = sidebarOpen && sidebarAnchor === \"left\";\n    var right = sidebarOpen && sidebarAnchor === \"right\";\n    \n    if (sidebarAlwaysShow) {\n      window.client.container = this.terminal.current;\n    } else {\n      window.client.container = this.middle.current;\n    }\n    \n    var sidebar = (<Sidebar sidebarShowCompass={sidebarShowCompass} sidebarWidth={sidebarWidth} sidebarShowExits={sidebarShowExits} sidebarShowPlayers={sidebarShowPlayers} sidebarShowThings={sidebarShowThings} />);\n\n    return (\n      <MuiThemeProvider theme={theme}>\n        <div className={classes.frame}>\n          <div className={classes.top}>\n            <Taskbar title=\"MUSH Portal\" />\n          </div>\n          <div className={classes.middle} ref={this.middle}>\n            {left && sidebar}\n            <Terminal width={wrapWidth} ansiFG={ansiFG} ansiBG={ansiBG} containerRef={this.terminal} />\n            {right && sidebar}\n          </div>\n          <div className={classes.bottom}>\n            <Input ansiFG={ansiFG} ansiBG={ansiBG} />\n            <Statusbar />\n          </div>\n          <Login />\n        </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nPortal.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Portal);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport Button from '@material-ui/core/Button';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport AceEditor from 'react-ace';\nimport 'brace/mode/mushcode';\nimport 'brace/mode/javascript';\nimport 'brace/mode/css';\nimport 'brace/theme/tomorrow_night_bright';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  form: {\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\", \n  },\n  top: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    width: \"100%\",\n  },\n  bottom: {\n    position: \"relative\",\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n    bottom: 0,\n    width: \"100%\",\n  },\n  middle: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: \"flex\",\n      flexFlow: \"row nowrap\",\n      flex: 1,\n      alignItems: \"center\",\n    },\n  },\n  align: {\n    width: \"100%\",\n    textAlign: \"center\",\n    verticalAlign: \"middle\",\n  },\n  flex: {\n    flex: 1,\n    minWidth: \"10em\",\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  mobileOnly: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass FormEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const { list, listName, selected } = props;\n\n    const template = window.client.actionTemplates[listName];\n    \n    this.state = {\n      list: list,\n      item: Object.assign({}, list && selected > -1 ? list[selected] : template),\n      selected: selected,\n      status: \"\",\n      error: false,\n      javascript: true,\n      needsToResize: false,\n    };\n    \n    this.editor = React.createRef();\n  }\n  \n  componentDidMount() {\n    const { panel } = this.props;\n    panel.options.resizeit.resize = this.onResize;\n    window.client.panels.resizeit(panel, panel.options.resizeit);\n  }\n  \n  componentWillUnmount() {\n    this.props.panel.options.resizeit.resize = null;\n    clearTimeout(this.clearStatus);\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const { list, listName, selected } = props;\n    \n    const template = window.client.actionTemplates[listName];\n    \n    var newState = {};\n    \n    if (list !== state.list) {\n      newState.list = list;\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : template);\n      newState.needsToResize = true;\n      return newState;\n    }\n    \n    if (selected !== state.selected) {\n      newState.selected = selected;\n      newState.item = Object.assign({}, list && selected > -1 ? list[selected] : template);\n      return newState;\n    }\n    \n    return null;\n  }\n  \n  defaultText() {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const name = item.name;\n    const filetype = name.endsWith('.css') ? 'css' : 'js';\n    \n    if (!immutable) return \"\";\n    \n    if (list && selected > -1 && list[selected].text !== \"\") {\n      return list[selected].text.slice();\n    } else if (filetype === 'css') {\n      const sheets = document.styleSheets;\n      \n      for (let i = 0; i < sheets.length; i++) {\n        if (sheets[i].href) {\n          let href = sheets[i].href.split('/').slice(-1)[0];\n          if (href === name) {\n            return Array(...sheets[i].cssRules).map((rule) => rule.cssText).join('\\n');\n          }\n        }\n      }\n    }\n    \n    var req = new window.XMLHttpRequest();\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        // The request is done; did it work?\n        if (req.status === 200) {\n          item.name = name;\n          item.text = req.responseText;\n          this.setState({ item, list, selected });\n        } else {\n          alert(\"Unable to download file! See console for more information.\");\n        }\n      }\n    };\n    req.open(\"GET\", \"./\" + name);\n    req.send();\n\n    return window.client.actionTemplates[listName].text.slice();\n  }\n\n  setStatus = (error, status) => {\n    this.setState({ error: error, status: status });\n    clearTimeout(this.clearStatus);\n    setTimeout(this.clearStatus, 3000);\n  };\n\n  clearStatus = () => {\n    this.setState({ error: false, status: \"\" });\n  };\n  \n  handleChange = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = e.target.value;\n    this.setState({ item });\n  };\n  \n  handleNumber = (key) => (e) => {\n    const { item } = this.state;\n    item[key] = parseInt(e.target.value);\n    this.setState({ item });\n  };\n  \n  handleSwitch = (key) => (e) => {\n    const { item } = this.state;\n    if (item.hasOwnProperty(key)) {\n      item[key] = e.target.checked;\n      this.setState({ item });\n    } else {\n      this.setState({ [key]: e.target.checked });\n    }\n  };\n  \n  changeText = (text) => {\n    const { item } = this.state;\n    item.text = text;\n    this.setState({ item });\n  };\n\n  onResize = () => {\n    this.setState({ needsToResize: false });\n    this.editor.current.editor.resize();\n  };\n  \n  onSubmit = (e) => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n\n    e.preventDefault();\n\n    if (item.name === \"\") {\n      this.setStatus(true, \"Name must not be blank.\" );\n      return;\n    }\n    \n    var match = list.map((item) => item.name).indexOf(item.name);\n    if (match > -1 && match !== selected) {\n      this.setStatus(true, \"Name already saved, choose another.\");\n      return;\n    }\n    \n    if (immutable && selected === -1) {\n      this.setStatus(true, \"You may only edit existing items.\");\n      return;\n    }\n    \n    this.setStatus(false, \"Saved.\" );\n    \n    if (selected > -1) {\n      list[selected] = item;\n      client.react.customizer.setState({ selected: selected });\n    } else {\n      list.push(item);\n      client.react.customizer.setState({ selected: list.length-1 });\n    }\n    \n    if (css) {\n      client.saveCSS();\n    } else {\n      client.saveLocalStorage(list, listName);\n    }\n  };\n  \n  onDelete = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    const client = window.client;\n    const css = item.name.endsWith('.css');\n    \n    if (window.confirm(\"Do you really want to delete that?\") && list && selected > -1) {\n      if (immutable) {\n        let name = list[selected].name;\n        list[selected] = Object.assign({}, client.actionTemplates[listName]);\n        list[selected].name = name;\n        this.setState({ item: Object.assign({}, list[selected]) });\n      } else {\n        list.splice(selected, 1);\n        client.react.customizer.setState({ selected: -1 });\n      }\n      \n      this.setStatus(false, \"Deleted.\" );\n\n      if (css) {\n        client.saveCSS();\n      } else {\n        client.saveLocalStorage(list, listName);\n      }\n    }\n  };\n  \n  onReset = () => {\n    const { list, listName, selected, immutable } = this.props;\n    const { item } = this.state;\n    var template = Object.assign({}, window.client.actionTemplates[listName]);\n    \n    if (list && selected > -1) {\n      if (immutable) {\n        template.name = list[selected].name;\n        if (item.text === \"\") {\n          template.text = this.defaultText();\n        } else {\n          template.text = list[selected].text;\n        }\n      } else {\n        template = list[selected];\n      }\n    }\n    \n    this.setState({\n      item: Object.assign({}, template),\n    });\n    \n    this.setStatus(false, \"Reset.\");\n  };\n  \n  componentDidUpdate() {\n    if (this.state.needsToResize) {\n      this.onResize();\n    }\n  }\n\n  render() {\n    const { classes, selected, Form, immutable } = this.props;\n    const { item, error, status } = this.state;\n    \n    var ltype = \"MushCode\";\n    var rtype = \"JavaScript\";\n    if (!Form) {\n      ltype = \"Text\";\n      if (item.name.endsWith('.css')) {\n        rtype = \"CSS\";\n      }\n    }\n    \n    var mode = this.state.javascript;\n    if (item.hasOwnProperty('javascript')) {\n      mode = item.javascript;\n    }\n    \n    return (\n      <div className={classes.frame}>\n        <form onSubmit={this.onSubmit} className={classes.form}>\n        \n          <div className={classes.top}>\n            <TextField label=\"Name\" className={classes.flex} value={item.name} onChange={this.handleChange('name')} disabled={immutable} />\n            <span>\n              <ListItem dense>\n                <ListItemText primary={ltype} />\n                <Switch color=\"default\" checked={mode} onChange={this.handleSwitch('javascript')} />\n                <ListItemText primary={rtype} />\n              </ListItem>\n            </span>\n          </div>\n          \n          {Form && (<Form className={classes.top} item={item} handleNumber={this.handleNumber} handleChange={this.handleChange} handleSwitch={this.handleSwitch} />)}\n          \n          <AceEditor\n            className={classes.flex}\n            ref={this.editor}\n            mode={mode ? rtype.toLowerCase() : ltype.toLowerCase()}\n            width=\"100%\"\n            minHeight=\"1em\"\n            theme=\"tomorrow_night_bright\"\n            value={item.text}\n            onChange={this.changeText}\n            wrapEnabled={true}\n            highlightActiveLine={false}\n            editorProps={{ $blockScrolling: Infinity }}\n          />\n          \n          <div className={classes.bottom}>\n            <Button className={classes.mobileOnly} classes={{ label: classes.block }} onClick={() => window.client.react.customizer.setState({ edit: false, selected: -1 })}>\n              <CloseIcon /> Close\n            </Button>\n            <Button onClick={this.onDelete} classes={{ label: classes.block }} disabled={selected === -1}>\n              <DeleteIcon /> Delete\n            </Button>\n            <span className={classes.middle}>\n              <Typography className={classes.align} color={error ? \"error\" : \"default\"}>\n                {status}\n              </Typography>\n            </span>\n            <Button onClick={this.onSubmit} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              <SaveIcon /> Save\n            </Button>\n            <Button onClick={this.onReset} classes={{ label: classes.block }} disabled={immutable && selected === -1}>\n              <UndoIcon /> {immutable && item.text === \"\" ? \"Get Source\" : \"Reset\"}\n            </Button>\n          </div>\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nFormEditor.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n  list: PropTypes.array.isRequired,\n  listName: PropTypes.string.isRequired,\n  selected: PropTypes.number.isRequired,\n  Form: PropTypes.func,\n  immutable: PropTypes.bool,\n};\n\nexport default withStyles(styles, { withTheme: true })(FormEditor);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"relative\",\n    width: \"100%\",\n  },\n  row: {\n    width: \"100%\",\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TriggerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" fullWidth value={item.pattern} onChange={handleChange('pattern')} />\n        <div className={classes.row}>\n          <span>\n            <ListItem dense>\n              <ListItemText primary=\"Wildcard\" />\n              <Switch color=\"default\" checked={item.regex} onChange={handleSwitch('regex')} />\n              <ListItemText primary=\"RegExp\" />\n            </ListItem>\n          </span>\n          <span>\n            <ListItem dense>\n              <ListItemText primary=\"Suppress terminal output?\" />\n              <Switch checked={item.suppress} onChange={handleSwitch('suppress')} />\n            </ListItem>\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nTriggerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TriggerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass TimerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleNumber, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField type=\"number\" label=\"Delay seconds\" className={classes.flex} value={String(item.delay)} onChange={handleNumber('delay')} />\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Repeat this timer?\" />\n            <Switch checked={item.repeat} onChange={handleSwitch('repeat')} />\n          </ListItem>\n        </span>\n        <TextField type=\"number\" disabled={!item.repeat} label=\"Number of times\" className={classes.flex} value={String(item.times)} onChange={handleNumber('times')} />\n      </div>\n    );\n  }\n}\n\nTimerForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(TimerForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Switch from '@material-ui/core/Switch';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MacroForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <TextField label=\"Matching pattern\" className={classes.flex} value={item.pattern} onChange={handleChange('pattern')} />\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Wildcard\" />\n            <Switch color=\"default\" checked={item.regex} onChange={handleSwitch('regex')} />\n            <ListItemText primary=\"RegExp\" />\n          </ListItem>\n        </span>\n      </div>\n    );\n  }\n}\n\nMacroForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MacroForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    display: \"flex\",\n    flexFlow: \"row nowrap\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass KeyForm extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n    };\n  }\n  \n  componentDidMount() {\n  }\n  \n  componentWillUnmount() {\n  }\n\n  render() {\n    const { classes, item, handleChange, handleSwitch } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <span className={classes.flex}>\n          <TextField label=\"Key code\" value={item.keycode ? item.keycode : \"\"} onChange={handleChange('keycode')} />\n        </span>\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Ctrl\" />\n            <Checkbox checked={item.ctrl} onChange={handleSwitch('ctrl')} />\n          </ListItem>\n        </span>\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Alt\" />\n            <Checkbox checked={item.alt} onChange={handleSwitch('alt')} />\n          </ListItem>\n        </span>\n        <span>\n          <ListItem dense>\n            <ListItemText primary=\"Shift\" />\n            <Checkbox checked={item.Shift} onChange={handleSwitch('Shift')} />\n          </ListItem>\n        </span>\n      </div>\n    );\n  }\n}\n\nKeyForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  item: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  handleNumber: PropTypes.func.isRequired,\n  handleSwitch: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(KeyForm);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\n\nimport FormEditor from './FormEditor';\nimport TriggerForm from './TriggerForm';\nimport TimerForm from './TimerForm';\nimport MacroForm from './MacroForm';\nimport KeyForm from './KeyForm';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  container: {\n    padding: 3*theme.spacing.unit,\n    flex: 1,\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    marginRight: 3*theme.spacing.unit,\n  },\n  right: {\n    position: \"relative\",\n    flex: 1,\n    height: \"100%\",\n    overflow: \"hidden\",\n  },\n  listText: {\n    paddingLeft: 0,\n    marginRight: 2*theme.spacing.unit,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n  flex: {\n    flex: 1,\n  },\n  block: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n  },\n  overflow: {\n    flex: 1,\n    overflowX: \"hidden\",\n    overflowY: \"auto\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      height: \"100%\",\n      display: 'flex',\n      flexFlow: \"column nowrap\",\n      justifyContent: \"space-between\",\n    },\n  },\n  mobileOpen: {\n    height: \"100%\",\n    display: \"flex\",\n    flexFlow: \"column nowrap\",\n    justifyContent: \"space-between\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Customizer extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    const client = window.client;\n    \n    this.tabs = [\n      {\n        list: client.triggers,\n        listName: \"Triggers\",\n        Form: TriggerForm,\n        immutable: false,\n      },\n      {\n        list: client.macros,\n        listName: \"Macros\",\n        Form: MacroForm,\n        immutable: false,\n      },\n      {\n        list: client.css,\n        listName: \"CSS\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.scripts,\n        listName: \"Scripts\",\n        Form: null,\n        immutable: true,\n      },\n      {\n        list: client.timers,\n        listName: \"Timers\",\n        Form: TimerForm,\n        immutable: false,\n      },\n      {\n        list: client.keys,\n        listName: \"Keys\",\n        Form: KeyForm,\n        immutable: false,\n      },\n    ];\n    \n    this.state = {\n      tab: 0,\n      edit: false,\n      selected: -1,\n    };\n  }\n\n  changeTab = (event, tab) => {\n    this.setState({ tab, selected: -1, edit: false });\n  };\n  \n  onSelect = (key) => (event) => {\n    this.setState({ selected: key });\n  }; \n  \n  componentDidMount() {\n    window.client.react.customizer = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.customizer = null;\n  }\n  \n  render() {\n    const { classes, panel } = this.props;\n    const { selected, edit } = this.state;\n    const tab = this.tabs[this.state.tab];\n    \n    return (\n      <div className={classes.frame}>\n        <AppBar position=\"static\">\n          <Tabs value={this.state.tab} scrollable scrollButtons=\"on\" onChange={this.changeTab}>\n            {this.tabs.map((t,i) => (<Tab key={i} label={t.listName} />))}\n          </Tabs>\n        </AppBar>\n        <Typography className={classes.container} component=\"div\">\n          <div className={classes.left}>\n            <span className={edit || selected > -1 ? classes.mobileClose : classes.mobileOpen}>\n              <div className={classes.overflow}>\n                <List disablePadding dense subheader={<ListSubheader>{tab.listName}</ListSubheader>}>\n                  {tab.list.map((item, i) => (\n                    <ListItem key={i} dense button divider selected={selected === i} onClick={this.onSelect(i)} className={i % 2 === 0 ? classes.even : classes.odd}>\n                      <ListItemIcon className={classes.listNum}><span>{i+1}</span></ListItemIcon>\n                      <ListItemText className={classes.listText} primary={item.name} />\n                    </ListItem>\n                  ))}\n                  {tab.list.length < 1 && (\n                    <ListItem key={-1} dense className={classes.even}>\n                      <ListItemText className={classes.listText} secondary={\"No \"+tab.listName.toLowerCase()} />\n                    </ListItem>\n                  )}\n                </List>\n              </div>\n              {!tab.immutable && (\n                <Button classes={{ label: classes.block }} onClick={() => this.setState({ edit: true, selected: -1 })}>\n                  <AddCircleIcon />\n                  New {tab.listName.slice(0,-1)}\n                </Button>\n              )}\n            </span>\n          </div>\n          <div className={classes.right}>\n            <span className={edit || selected > -1 ? classes.mobileOpen : classes.mobileClose}>\n              <FormEditor list={tab.list} listName={tab.listName.toLowerCase()} selected={selected} panel={panel} Form={tab.Form} immutable={tab.immutable} />\n            </span>\n          </div>\n        </Typography>\n      </div>\n    );\n  }\n}\n\nCustomizer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  panel: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Customizer);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, board, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={board.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={board.name}\n            secondary={\n              <span>\n                <span>\n                  {board.posts} Posts\n                </span><br />\n                <span>\n                  {board.lastmod}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  board: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBListItem from './BBListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openBoard, boardlist } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {boardlist.length} Bulletin Boards\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {boardlist.map((board,i) => (\n              <BBListItem key={i} board={board} onOpen={() => openBoard(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openBoard: PropTypes.func.isRequired,\n  boardlist: PropTypes.array.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\n//import ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n//import IconButton from '@material-ui/core/IconButton';\n\n//import MailIcon from '@material-ui/icons/Mail';\n//import DraftsIcon from '@material-ui/icons/Drafts';\n//import PriorityHighIcon from '@material-ui/icons/PriorityHigh';\n//import DeleteIcon from '@material-ui/icons/Delete';\n//import CheckCircleIcon from '@material-ui/icons/CheckCircle';\n//import CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, message, onOpen } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={message.id}\n          button\n          dense\n          divider\n          onClick={onOpen}\n        >\n          <ListItemText\n            primary={message.subject}\n            secondary={\n              <span>\n                <span>\n                  {message.author}\n                </span><br />\n                <span>\n                  {message.date}\n                </span>\n              </span>\n            }\n          />\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nBBMessageListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\n\n//import IconButton from '@material-ui/core/IconButton';\n//import Tooltip from '@material-ui/core/Tooltip';\n\n//import DeleteForeverIcon from '@material-ui/icons/DeleteForever';\n//import DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\n//import CreateIcon from '@material-ui/icons/Create';\n\nimport BBMessageListItem from './BBMessageListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    paddingLeft: \"2em\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessageList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n\n  render() {\n    const { classes, openMessage, board } = this.props;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              {board.messages.length} Posts\n              <span className={classes.flex} />\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {board.messages.map((msg,i) => (\n              <BBMessageListItem key={i} message={msg} onOpen={() => openMessage(i)} />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nBBMessageList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMessage: PropTypes.func.isRequired,\n  board: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessageList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\n\n//import Icon from '@material-ui/core/Icon';\n//import Button from '@material-ui/core/Button';\n//import IconButton from '@material-ui/core/IconButton';\n\n//import Menu from '@material-ui/core/Menu';\n//import MenuItem from '@material-ui/core/MenuItem';\n\n//import MoreVertIcon from '@material-ui/icons/MoreVert';\n//import ReplyIcon from '@material-ui/icons/Reply';\n//import ForwardIcon from '@material-ui/icons/Forward';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  output: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    height: \"100%\",\n    \"overflow-y\": \"scroll\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBMessage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { message } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(message.body);\n  }\n  \n  render() {\n    const { classes, message } = this.props;\n    const { ansiFG, ansiBG } = window.client.settings;\n    \n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(message.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={message.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {message.author}\n              </span>\n              <span className={classes.right}>\n                {message.date}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.output, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nBBMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  message: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBMessage);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport BBList from './BBList';\nimport BBMessageList from './BBMessageList';\nimport BBMessage from './BBMessage';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    flex: 1,\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  full: {\n    flex: 1,\n    position: \"relative\",\n    display: \"flex\",\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass BBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bbmsg: null,\n      board: null,\n      boardlist: props.boardlist ? props.boardlist : [ ],\n    };\n  }\n  \n  openBB = (key) => {\n    const { boardlist } = this.state;\n    const board = boardlist[key];\n\n    window.client.sendAPI(\"bbmsglist\", board.id);\n  };\n  \n  openBBMsg = (key) => {\n    const { board } = this.state;\n    const msg = board.messages[key];\n\n    window.client.sendAPI(\"bbmsg\", board.id+\"=\"+msg.id);\n  };\n  \n  componentDidMount() {\n    window.client.react.bboard = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.bboard = null;\n  }\n  \n  updateBoardList(boardlist) {\n    this.setState({ boardlist, board: null, bbmsg: null });\n  }\n  \n  updateBoard(board) {\n    this.setState({ board, bbmsg: null });\n  }\n  \n  openMessage(bbmsg) {\n    const { board } = this.state;\n    board.messages.forEach((bb,i) => {\n      if (bbmsg.id === bb.id) {\n        bbmsg.key = i;\n      }\n    });\n    this.setState({ bbmsg });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { boardlist, board, bbmsg } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        { board ? (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBMessageList board={board} openMessage={this.openBBMsg} />\n            </div>\n            <div className={classes.right}>\n              { bbmsg && (\n                <BBMessage message={bbmsg} />\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={classes.full}>\n            <div className={classes.left}>\n              <BBList boardlist={boardlist} openBoard={this.openBB} />\n            </div>\n            <div className={classes.right}></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nBBoard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(BBoard);\n\n\t","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MailIcon from '@material-ui/icons/Mail';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport PriorityHighIcon from '@material-ui/icons/PriorityHigh';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n  },\n  listicon: {\n    margin: 0,\n  },\n  read: {\n    opacity: 0.5,\n  },\n  odd: {\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n  },\n  even: {\n    backgroundColor: 'rgba(0, 0, 0, 0.05)',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailListItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { };\n  }\n  \n  render() {\n    const { classes, mail, onOpen, quickDelete, handleMark, selected, id } = this.props;\n    \n    var icon;\n    if (mail.deleted) {\n      icon = (<DeleteIcon className={mail.unread ? null : classes.read} />);\n    } else if (mail.unread) {\n      if (mail.urgent) {\n        icon = (<PriorityHighIcon />);\n      } else {\n        icon = (<MailIcon />);\n      }\n    } else {\n      icon = (<DraftsIcon className={classes.read} />);\n    }\n    \n    var even = (id % 2 === 0);\n\n    return (\n      <div className={classes.frame}>\n        <ListItem\n          key={mail.id}\n          button\n          dense\n          divider\n          selected={selected}\n          onClick={quickDelete ? () => {} : onOpen}\n          className={even ? classes.even : classes.odd}\n        >\n          <ListItemIcon className={classes.listicon}>\n            {icon}\n          </ListItemIcon>\n          <ListItemText\n            primary={mail.subject}\n            secondary={\n              <span>\n                <span>\n                  {mail.from}\n                </span><br />\n                <span>\n                  {mail.time}\n                </span>\n              </span>\n            }\n          />\n          {quickDelete && (\n            <ListItemSecondaryAction>\n              <IconButton onClick={handleMark}>\n                {mail.deleted ? (\n                  <CheckCircleIcon />\n                ) : (\n                  <CancelIcon />\n                )}\n              </IconButton>\n            </ListItemSecondaryAction>\n          )}\n        </ListItem>\n      </div>\n    );\n  }\n}\n\nMailListItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n  quickDelete: PropTypes.bool,\n  onOpen: PropTypes.func,\n  handleMark: PropTypes.func,\n  selected: PropTypes.bool,\n  id: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailListItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport DeleteSweepIcon from '@material-ui/icons/DeleteSweep';\nimport CreateIcon from '@material-ui/icons/Create';\n\nimport MailListItem from './MailListItem';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    maxHeight: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n  },\n  title: {\n  },\n  overflow: {\n    overflowY: \"auto\",\n    flex: 1,\n  },\n  container: {\n    display: \"flex\",\n    flexFlow: \"row wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: theme.spacing.unit,\n    \"align-items\": \"center\",\n  },\n  flex: {\n    flex: 1,\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quickDelete: false,\n      selected: -1,\n    };\n  }\n\n  purgeMail = () => {\n    window.client.react.mailbox.purgeMail();\n    this.setState({ quickDelete: false });\n  };\n\n  sendMail = () => {\n    window.client.react.mailbox.sendMail(null, \"\", \"\");\n  };\n  \n  toggleDelete = () => {\n    this.setState({ quickDelete: !this.state.quickDelete });\n  };\n  \n  render() {\n    const { classes, openMail, maillist, unread, handleMark } = this.props;\n    const { quickDelete, selected } = this.state;\n    \n    return (\n      <div className={classes.frame}>\n        <div className={classes.header}>\n          <Typography variant=\"subtitle1\" className={classes.title}>\n            <span className={classes.container}>\n              <div>{maillist.length} Messages ({unread} unread)</div>\n              <span>\n                <Tooltip title=\"Move multiple files to trash.\">\n                  <IconButton onClick={this.toggleDelete}>\n                    <DeleteSweepIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Purge deleted mail.\">\n                  <IconButton onClick={this.purgeMail}>\n                    <DeleteForeverIcon />\n                  </IconButton>\n                </Tooltip>\n                <Tooltip title=\"Send a new message.\">\n                  <IconButton onClick={this.sendMail} disabled={quickDelete}>\n                    <CreateIcon />\n                  </IconButton>\n                </Tooltip>\n              </span>\n            </span>\n          </Typography>\n        </div>\n        <div className={classes.overflow}>\n          <List\n            dense\n            disablePadding\n          >\n            {maillist.map((mail,i) => (\n              <MailListItem selected={selected === i} id={i} key={i} quickDelete={quickDelete} mail={mail}\n                onOpen={() => {\n                  this.setState({ selected: i });\n                  openMail(i);\n                }}\n                handleMark={() => handleMark(i)}\n              />\n            ))}\n          </List>\n        </div>\n      </div>\n    );\n  }\n}\n\nMailList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  openMail: PropTypes.func,\n  handleMark: PropTypes.func,\n  maillist: PropTypes.array,\n  unread: PropTypes.number.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailList);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\n//import Typography from '@material-ui/core/Typography';\nimport Icon from '@material-ui/core/Icon';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport Emulator from '../../client/emulator';\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  card: {\n    height: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"column nowrap\",\n  },\n  header: {\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  sub: {\n    display: \"flex\",\n  },\n  left: {\n    flex: 1,\n  },\n  right: {\n    marginLeft: \"3em\",\n  },\n  body: {\n    flex: 1,\n    display: \"flex\",\n  },\n  actions: {\n    \"justify-content\": \"space-evenly\",\n  },\n  button: {\n    display: \"block\",\n  },\n  wrap: {\n    \"font-family\": \"'Courier New', monospace\",\n    \"font-weight\": \"normal\",\n    \"font-size\": \"10pt\",\n    width: \"100%\",\n    flex: 1,\n    \"overflow-y\": \"auto\",\n    \"overflow-x\": \"hidden\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    padding: \"0.25em 0.5em\",\n  },\n  mobileOnly: {\n    display: 'block',\n    [theme.breakpoints.up('md')]: {\n      display: 'none',\n    },\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass MailItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: null,\n    };\n\n    this.body = React.createRef();\n    this.emulator = null;\n  }\n  \n  componentDidMount() {\n    const { mail } = this.props;\n    this.emulator = new Emulator(this.body.current);\n    this.emulator.appendText(mail.body);\n  }\n  \n  showMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n  \n  closeMenu = () => {\n    this.setState({ anchorEl: null });\n  };\n  \n  markUnread = () => {\n    window.client.react.mailbox.markUnread();\n    this.closeMenu();\n  };\n  \n  markDeleted = () => {\n    window.client.react.mailbox.markDeleted();\n    this.closeMenu();\n  };\n  \n  markUndeleted = () => {\n    window.client.react.mailbox.markUndeleted();\n    this.closeMenu();\n  };\n  \n  replyMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(mail.from, \"Re: \"+mail.subject, \"\");\n  };\n  \n  forwardMail = () => {\n    const { mail } = this.props;\n    window.client.react.mailbox.sendMail(\"\", \"Fwd: \"+mail.subject, mail.body);\n  };\n  \n  render() {\n    const { classes, mail } = this.props;\n    const { anchorEl } = this.state;\n    const { ansiFG, ansiBG } = window.client.settings;    \n\n    this.emulator && this.emulator.clear();\n    this.emulator && this.emulator.appendText(mail.body);\n    \n    return (\n      <Card className={classes.card}>\n        <CardHeader className={classes.header}\n          title={mail.subject}\n          subheader={\n            <span className={classes.sub}>\n              <span className={classes.left}>\n                {mail.from}\n              </span>\n              <span className={classes.right}>\n                {mail.time}\n              </span>\n            </span>\n          }\n        />\n        <CardContent className={classes.body}>\n          <div ref={this.body} className={classNames(classes.wrap, ansiFG, ansiBG)}></div>\n        </CardContent>\n        <CardActions className={classes.actions}>\n          <Button className={classes.mobileOnly} onClick={() => window.client.react.mailbox.setState({ mailitem: null })}>\n            <Icon>\n              <CloseIcon />\n            </Icon>\n            Close\n          </Button>\n          <Button className={classes.button} onClick={this.replyMail}>\n            <Icon>\n              <ReplyIcon />\n            </Icon>\n            Reply\n          </Button>\n          <Button className={classes.button} onClick={this.forwardMail}>\n            <Icon>\n              <ForwardIcon />\n            </Icon>\n            Forward\n          </Button>\n          <IconButton aria-owns={anchorEl ? 'mailitem.menu' : null} aria-haspopup=\"true\" onClick={this.showMenu}>\n            <MoreVertIcon />\n          </IconButton>\n          <Menu id=\"mailitem.menu\" anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.closeMenu}>\n            <MenuItem onClick={this.markUnread}>Mark as Unread</MenuItem>\n            {mail.deleted ? (\n              <MenuItem onClick={this.markUndeleted}>Restore Message</MenuItem>\n            ) : (\n              <MenuItem onClick={this.markDeleted}>Move to Trash</MenuItem>\n            )}\n          </Menu>\n        </CardActions>\n      </Card>\n    );\n  }\n}\n\nMailItem.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  mail: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(MailItem);\n\n","\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport MailList from './MailList';\nimport MailItem from './MailItem';\n\n//////////////////////////////////////////////////////////////////////\n\n\nconst styles = theme => ({\n  frame: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    display: \"flex\",\n    \"flex-flow\": \"row nowrap\",\n  },\n  left: {\n    position: \"relative\",\n    maxHeight: \"100%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n  },\n  right: {\n    flex: 1,\n    maxHeight: \"100%\",\n    position: \"relative\",\n  },\n  mobileClose: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex',\n    },\n  },\n  mobileOpen: {\n    display: 'flex',\n  },\n});\n\n\n//////////////////////////////////////////////////////////////////////\n\n\nclass Mailbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mailitem: null,\n      unreadMail: props.unread ? props.unread : 0,\n      folder: props.folder ? props.folder : 0,\n      folderlist: [{ id: 0, name: \"Inbox\" }],\n      maillist: props.maillist ? props.maillist : [ ],\n    };\n  }\n  \n  openMail = (message) => {\n    const { maillist, unreadMail } = this.state;\n    const mail = maillist[message];\n    \n    if (mail.unread) {\n      mail.unread = false;\n      this.setState({ maillist, unreadMail: unreadMail-1 });\n      window.client.sendText(\"@mail/status \"+mail.id+\"=read\");\n    }\n    \n    window.client.sendAPI(\"mailitem\", mail.id);\n  }\n  \n  handleMark = (message) => {\n    const { maillist } = this.state;\n    const mail = maillist[message];\n    \n    mail.deleted = !mail.deleted;\n    \n    if (mail.deleted) {\n      window.client.sendText(\"@mail/clear \"+mail.id);\n    } else {\n      window.client.sendText(\"@mail/unclear \"+mail.id);\n    }\n    \n    this.setState({ maillist });\n  }\n  \n  setUnreadMail(unreadMail) {\n    this.setState({ unreadMail })\n    window.client.react.taskbar.setUnreadMail(unreadMail);\n  }\n\n  markDeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = true;\n    maillist[mailitem.key].deleted = true;\n    window.client.sendText(\"@mail/clear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUndeleted() {\n    const { maillist, mailitem } = this.state;\n    \n    if (!mailitem.deleted) {\n      return;\n    }\n    \n    mailitem.deleted = false;\n    maillist[mailitem.key].deleted = false;\n    window.client.sendText(\"@mail/unclear \"+mailitem.id);\n    this.setState({ maillist, mailitem });\n  }\n\n  markUnread() {\n    const { maillist, mailitem, unreadMail } = this.state;\n    \n    if (mailitem.unread) {\n      return;\n    }\n    \n    mailitem.unread = true;\n    maillist[mailitem.key].unread = true;\n    window.client.sendText(\"@mail/status \"+mailitem.id+\"=unread\");\n    this.setState({ maillist, mailitem, unreadMail: unreadMail+1 });\n  }\n\n  purgeMail() {\n    if (window.confirm(\"Do you want to purge deleted mail?\")) {\n      const { maillist, mailitem } = this.state;\n\n      if (mailitem && maillist[mailitem.key].deleted) {\n        // we are purging the current mailitem, so clear it\n        this.setState({ mailitem: null });\n      }\n      window.client.sendText(\"@mail/purge\");\n      window.client.sendAPI(\"maillist\");\n    }\n  }\n  \n  sendMail(to, subject, body) {\n    if (window.client.react.sendmail) {\n      window.client.focusPanel(\"Sendmail\");\n      if (window.confirm(\"Replace current draft with new mail?\")) {\n        window.client.react.sendmail.setFields(to, subject, body);\n      }\n    } else {\n      window.client.addReactPanel(\"Sendmail\", { icon: \"mail\" });\n      window.client.react.sendmail.setFields(to, subject, body);\n    }  \n  }\n\n  componentDidMount() {\n    window.client.react.mailbox = this;\n  }\n  \n  componentWillUnmount() {\n    window.client.react.mailbox = null;\n  }\n  \n  updateMailList(folder, maillist, unreadMail) {\n    this.setState({ folder, maillist, unreadMail });\n  }\n  \n  updateFolderList(folderlist) {\n    this.setState({ folderlist });\n  }\n  \n  openMailItem(mailitem) {\n    const { maillist } = this.state;\n    maillist.forEach((mail,i) => {\n      if (mail.id === mailitem.id) {\n        mailitem.key = i;\n      }\n    });\n    this.setState({ mailitem });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { maillist, mailitem, unreadMail } = this.state;\n\n    return (\n      <div className={classes.frame}>\n        <div className={classes.left}>\n          <span className={mailitem ? classes.mobileClose : classes.mobileOpen}>\n            { maillist && (\n              <MailList maillist={maillist} unread={unreadMail} openMail={this.openMail} handleMark={this.handleMark} />\n            )}\n          </span>\n        </div>\n        <div className={classes.right}>\n          { mailitem && (\n            <MailItem mail={mailitem} />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nMailbox.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  folder: PropTypes.number,\n  maillist: PropTypes.array,\n  mailitem: PropTypes.object,\n  unread: PropTypes.number,\n};\n\nexport default withStyles(styles, { withTheme: true })(Mailbox);\n\n\t","import Client from './client';\n\n// create the MUSH client\nvar client = new Client();\n\n// load local customization file\nclient.loadScript('./local.js');\n\nclient.execUserScript('onLoad.js');\n\n\n\n\n\n","// MU* terminal emulator.\nclass Emulator {\n\n  static get PARSE_PLAIN() { return 0; }\n  static get PARSE_CR() { return 1; }\n  static get PARSE_ESC1() { return 2; }\n  static get PARSE_ESC2() { return 3; }\n\n  static get ANSI_NORMAL() { return 0; }\n  static get ANSI_BRIGHT() { return 1; }\n  static get ANSI_UNDERLINE() { return 4; }\n  static get ANSI_BLINK() { return 5; }\n  static get ANSI_INVERSE() { return 7; }\n  static get ANSI_XTERM_FG() { return 38; }\n  static get ANSI_XTERM_BG() { return 48; }\n\n  static get DEFAULT_FG() { return 37; }\n  static get DEFAULT_BG() { return 30; }\n  \n  static get UNCLOSED_TAGS() { return ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img',\n          'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr']; }\n\n  constructor(root) {\n    this.root = root;\n    this.container = null;\n    \n    this.dims = { };\n    \n    this.calcDimensions();\n    \n    // setup the pueblo xch_cmd callback\n    this.onCommand = null;\n\n    this.clear();\n  }\n\n\n\n  /////////////////////////////////////////////////////\n  // ansi parsing routines\n  \n  static encodeState(state) {\n    if (!state) {\n      return '';\n    }\n\n    var classes = [];\n\n    if (state[Emulator.ANSI_INVERSE]) {\n      var value = state.fg;\n      state.fg = state.bg;\n      state.bg = value;\n      \n      value = state.fg256;\n      state.fg256 = state.bg256;\n      state.bg256 = value;\n    }\n    \n    var fg = state.fg;\n    var bg = state.bg;\n    \n    if (state[Emulator.ANSI_UNDERLINE]) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_UNDERLINE;\n    }\n\n    // make sure to avoid conflict with XTERM256 color's usage of blink (code 5)\n    if (state.fg256) {\n      classes[classes.length] = 'ansi-38-5-' + state.fg;\n    } else {  \n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          if (fg !== Emulator.DEFAULT_FG) {\n            classes[classes.length] = 'ansi-' + fg;\n          }\n        } else {\n          classes[classes.length] = 'ansi-' + fg + '-1';\n        }\n      } else if (fg !== Emulator.DEFAULT_FG) {\n        classes[classes.length] = 'ansi-' + fg;\n      }\n    }\n    \n    if (state.bg256) {\n      classes[classes.length] = 'ansi-48-5-' + state.bg;\n    } else {\n      if (state[Emulator.ANSI_BRIGHT]) {\n        if (state[Emulator.ANSI_INVERSE]) {\n          classes[classes.length] = 'ansi-' + (bg + 10) + '-1';\n        } else {\n          if (bg !== Emulator.DEFAULT_BG) {\n            classes[classes.length] = 'ansi-' + (bg + 10);\n          }\n        }\n      } else if (bg !== Emulator.DEFAULT_BG) {\n        classes[classes.length] = 'ansi-' + (bg + 10);\n      }\n    }\n\n    if (state[Emulator.ANSI_BLINK] && !(state.fg256 || state.bg256)) {\n      classes[classes.length] = 'ansi-' + Emulator.ANSI_BLINK;\n    }\n    \n    return classes.join(' ');\n  };\n\n  /////////////////////////////////////////////////////\n  // get the current ansi state, or a default if there is none\n  getANSI() {\n    if (!this.ansiState) {\n      this.ansiState = {\n        fg: Emulator.DEFAULT_FG,\n        bg: Emulator.DEFAULT_BG,\n        fg256: false,\n        bg256: false\n      };\n    }\n\n    return this.ansiState;\n  }\n\n  /////////////////////////////////////////////////////\n  // apply ansi to the current state\n  applyANSI(ansi) {\n    switch (ansi.charCodeAt(ansi.length - 1)) {\n    case 109: // m (SGR)\n      var codes = ansi.substring(0, ansi.length - 1).split(';');\n\n      var value, state;\n      for (var ii = 0; (value = codes[ii]) !== undefined; ++ii) {\n        if (value.length === 0) {\n          // Empty is treated as the equivalent of 0.\n          value = Emulator.ANSI_NORMAL;\n        } else {\n          value = parseInt(value, 10);\n        }\n        \n        state = this.getANSI();\n        \n        // check for xterm256 fg/bg first, fallback to standard codes otherwise\n        if (state[Emulator.ANSI_XTERM_FG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.fg = value;\n            state.fg256 = true;\n            state[Emulator.ANSI_XTERM_FG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else if (state[Emulator.ANSI_XTERM_BG] && state[Emulator.ANSI_BLINK]) {\n          if (value >= 0 && value <= 255) {\n            state.bg = value;\n            state.bg256 = true;\n            state[Emulator.ANSI_XTERM_BG] = false;\n            state[Emulator.ANSI_BLINK] = false;\n          } else {\n            // invalid xterm256, let's reset the ansi state due to bad codes\n            this.ansiState = null;\n          }\n        } else {\n          // detect regular ansi codes\n          switch (value) {\n          case Emulator.ANSI_NORMAL: // reset\n            this.ansiState = null;\n            break;\n\n          case Emulator.ANSI_BRIGHT:\n          case Emulator.ANSI_UNDERLINE:\n          case Emulator.ANSI_BLINK:\n          case Emulator.ANSI_INVERSE:\n          case Emulator.ANSI_XTERM_FG:\n          case Emulator.ANSI_XTERM_BG:\n            state[value] = true;\n            break;\n\n          default:\n            if (30 <= value && value <= 37) {\n              state.fg = value;\n            } else if (40 <= value && value <= 47) {\n              state.bg = value - 10;\n            }\n           break;\n          }\n        }\n\n        this.ansiDirty = true;\n      }\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // write a string to be emulated\n  write(value, start, end) {\n    if (start === end) {\n      return;\n    }\n\n    if (this.ansiDirty) {\n      var next = Emulator.encodeState(this.ansiState);\n\n      if (this.ansiClass !== next) {\n        this.ansiClass = next;\n        this.span = null;\n      }\n\n      this.ansiDirty = false;\n    }\n\n    if (this.ansiClass && !this.span) {\n      this.span = document.createElement('span');\n      this.span.className = this.ansiClass;\n      this.stack[this.stack.length - 1].appendChild(this.span);\n    }\n\n    var text = document.createTextNode(value.substring(start, end));\n    this.lineBuf[this.lineBuf.length] = text;\n\n    this.appendChild(text);\n  }\n\n  /////////////////////////////////////////////////////\n  // end of line\n  endLine() {\n    var that = this;\n    this.onLine && this.onLine(that, this.lineBuf);\n\n    this.write('\\n', 0, 1);\n    this.lineBuf.length = 0;\n  }\n\n  /////////////////////////////////////////////////////\n  // handle end of escape code\n  abortParse(value, start, end) {\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(value, start, end);\n      break;\n\n    case Emulator.PARSE_ESC1:\n      this.write('\\u001B', 0, 1);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.write('\\u001B[', 0, 2);\n      this.write(this.parseBuf, 0, this.parseBuf.length);\n      this.parseBuf = '';\n      break;\n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // appends a text string to the terminal, parsing ansi escape codes into html/css\n  appendText(data) {\n    var start = 0;\n\n    // Scan for sequence start characters.\n    // TODO: Could scan with RegExp; not convinced sufficiently simpler/faster.\n    for (var ii = 0, ilen = data.length; ii < ilen; ++ii) {\n      var ch = data.charCodeAt(ii);\n\n      // Resynchronize at special characters.\n      switch (ch) {\n      case 10: // newline\n        if (this.state !== Emulator.PARSE_CR) {\n          this.abortParse(data, start, ii);\n          this.endLine();\n        }\n\n        start = ii + 1;\n        this.state = Emulator.PARSE_PLAIN;\n        continue;\n\n      case 13: // carriage return\n        this.abortParse(data, start, ii);\n        this.endLine();\n        start = ii + 1;\n        this.state = Emulator.PARSE_CR;\n        continue;\n\n      case 27: // escape\n        this.abortParse(data, start, ii);\n        start = ii + 1;\n        this.state = Emulator.PARSE_ESC1;\n        continue;\n      \n      default:\n        break;\n      }\n\n      // Parse other characters.\n      switch (this.state) {\n      case Emulator.PARSE_CR:\n        this.state = Emulator.PARSE_PLAIN;\n        break;\n\n      case Emulator.PARSE_ESC1:\n        if (ch === 91) {\n          // Start of escape sequence (\\e[).\n          start = ii + 1;\n          this.state = Emulator.PARSE_ESC2;\n        } else {\n          // Not an escape sequence.\n          this.abortParse(data, start, ii);\n          start = ii;\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n\n      case Emulator.PARSE_ESC2:\n        if (64 <= ch && ch <= 126) {\n          // End of escape sequence.\n          this.parseBuf += data.substring(start, (start = ii + 1));\n          this.applyANSI(this.parseBuf);\n          this.parseBuf = '';\n          this.state = Emulator.PARSE_PLAIN;\n        }\n        break;\n        \n      default:\n        break;\n      }\n    }\n\n    // Handle tail.\n    switch (this.state) {\n    case Emulator.PARSE_PLAIN:\n      this.write(data, start, data.length);\n      break;\n\n    case Emulator.PARSE_ESC2:\n      this.parseBuf += data.substring(start);\n      break;\n      \n    default:\n      break;\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append HTML code fragment\n  appendHTML(html) {\n    var div = document.createElement('div');\n    var fragment = document.createDocumentFragment();\n\n    div.innerHTML = html;\n\n    // append child elements\n    for (var child = div.firstChild; child; child = child.nextSibling) {\n      // check for xch_cmd and replace with click handler\n      var cmd = child.getAttribute('xch_cmd');\n      if (cmd !== null && cmd !== '') {\n        child.setAttribute('onclick', 'this.onCommand(\"' + cmd + '\");');\n        child.onCommand = this.onCommand;\n        child.removeAttribute('xch_cmd');\n      }\n      fragment.appendChild(child);\n    }\n\n    this.appendChild(fragment);\n  }\n\n  /////////////////////////////////////////////////////\n  // append DOM element\n  appendChild(child) {\n    var last = (this.span || this.stack[this.stack.length - 1]);\n    last.appendChild(child);\n  }\n  \n  /////////////////////////////////////////////////////\n  // append a log message to the terminal\n  appendMessage(classid, message) {\n    var div = document.createElement('div');\n    div.className = classid;\n    \n    // create a text node to safely append the string without rendering code\n    var text = document.createTextNode(message);\n    div.appendChild(text);\n    \n    this.appendChild(div);\n  }\n  \n  /////////////////////////////////////////////////////\n  // push a new html element onto the stack\n  pushElement(element) {\n    this.span = null;\n    this.stack[this.stack.length - 1].appendChild(element);\n    this.stack[this.stack.length] = element;\n  }\n\n  /////////////////////////////////////////////////////\n  // remove 1 level from the stack, check consistency \n  popElement() {\n    this.span = null;\n\n    if (this.stack.length > 1) {\n      --this.stack.length;\n    } else {\n      window.console && window.console.warn('element stack underflow');\n    }\n  }\n\n  /////////////////////////////////////////////////////\n  // append a pueblo tag to the terminal stack (or pop if an end tag)\n  appendPueblo(data) {\n    var tag, attrs;\n\n    var idx = data.indexOf(' ');\n    if (idx !== -1) {\n      tag = data.substring(0, idx);\n      attrs = data.substring(idx + 1);\n    } else {\n      tag = data;\n      attrs = '';\n    }\n    \n    var html = '<' + tag + (attrs ? ' ' : '') + attrs + '>';\n\n    var start;\n    if (tag[0] !== '/') {\n      start = true;\n    } else {\n      start = false;\n      tag = tag.substring(1);\n    }\n    \n    // detect a self closed tag\n    var selfClosing = false;\n    if ((tag.substring(-1) === '/') || (attrs.substring(-1) === '/')) {\n      selfClosing = true;\n    }\n    \n    if (Emulator.UNCLOSED_TAGS.indexOf(tag.toLowerCase()) > -1) {\n      selfClosing = true;\n    }\n\n    if ((tag === 'XCH_PAGE') || \n        ((tag === 'IMG') && (attrs.search(/xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i) !== -1))) {\n      //console.log(\"unhandled pueblo\", html);\n      return;\n    }\n\n    // we have a starting <tag> (not </tag>)\n    if (start) {\n      var div = document.createElement('div');\n\n      html = html.replace(\n        /xch_graph=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_mode=((\"[^\"]*\")|('[^']*')|([^\\s]*))/i,\n        ''\n      );\n\n      html = html.replace(\n        /xch_hint=\"([^\"]*)\"/i,\n        'title=\"$1\"'\n      );\n\n      div.innerHTML = html.replace(\n        /xch_cmd=\"([^\"]*)\"/i,\n        \"onclick='this.onCommand(&quot;$1&quot;)'\"\n      );\n      \n      div.firstChild.onCommand = this.onCommand;\n\n      div.setAttribute('target', '_blank');\n      \n      // add this tag to the stack to keep track of nested elements\n      this.pushElement(div.firstChild);\n\n      // automatically pop the tag if it is self closing\n      if (selfClosing) {\n        this.popElement();\n      }\n\n    } else {\n      // we have an ending </tag> so remove the closed tag from the stack\n      // don't bother for self closing tags with an explicit end tag, we already popped them\n      if (!selfClosing) {\n        this.popElement();\n      }\n    }\n  }\n  \n  /////////////////////////////////////////////////////\n  // clear the output and current ansi state\n  clear() {\n    if (this.root === null) {\n      return null;\n    }\n\n    this.root.innerHTML = '';\n\n    this.stack = [this.root];\n\n    this.state = Emulator.PARSE_PLAIN;\n    this.line = null;\n    this.lineBuf = [];\n    this.span = null;\n    this.parseBuf = '';\n\n    this.ansiClass = '';\n    this.ansiState = null;\n    this.ansiDirty = false;\n  }\n  \n  // are we already scrolled down to the bottom?\n  nearBottom(threshold) {\n    var root = this.root;\n    \n    if (!root) {\n      return false;\n    }\n    \n    if (this.linesOfScroll() <= threshold) {\n      return true;\n    }\n    \n    return false;\n  }\n  \n  // calculate the width and height in characters\n  calcDimensions() {\n    var element = this.root;\n    if (!element) {\n      return 0.0;\n    }\n    \n    //var txt = \"0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789\";\n    var txt = \"0123456789\";\n    \n    var temp = document.createElement(element.nodeName);\n    temp.setAttribute(\"style\",\"margin:0px;padding:0px;font-family:\"+element.style.fontFamily+\";font-size:\"+element.style.fontSize);\n    temp.innerText = txt;\n    temp = element.appendChild(temp);\n    this.dims.width = temp.clientWidth / 10.0;\n    this.dims.height = temp.clientHeight;\n    temp.parentNode.removeChild(temp);\n    \n    return this.dims;\n  }\n  \n  // return the number of lines of text below the current viewport\n  linesOfScroll() {\n    var root = this.container || this.root;\n    if (!root) {\n      return 0.0;\n    }\n    \n    if (this.dims.height <= 0.0) {\n      return 0.0;\n    }\n    \n    return Math.round(Math.abs((root.scrollHeight - root.offsetHeight - root.scrollTop) / this.dims.height));\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page up\n  scrollPageUp() {\n    var root = this.container || this.root;\n    root.scrollTop -= root.clientHeight - this.dims.height*5;\n  }\n\n  //////////////////////////////////////////////////////\n  // scroll one page down\n  scrollPageDown() {\n    var root = this.container || this.root;\n    root.scrollTop += root.clientHeight - this.dims.height*4;\n  }  \n\n  //////////////////////////////////////////////////////\n  // animate scrolling the terminal window to the bottom\n  scrollDown() {\n    var root = this.container || this.root;\n\n    if (!root) {\n      return;\n    }\n\n    root.scrollTop = root.scrollHeight;\n    return;\n/*    \n    // animated scrolling alternative\n    var scrollCount = 0;\n    var scrollDuration = 500.0;\n    var oldTimestamp = performance.now();\n    \n    var step = (newTimestamp) => {\n      var bottom = root.scrollHeight - root.clientHeight;\n      var delta = (bottom - root.scrollTop) / 2.0;\n\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\n      if (scrollCount >= Math.PI) root.scrollTo(0, bottom);\n      if (root.scrollTop === bottom) { return; }\n      root.scrollTo(0, Math.round(root.scrollTop + delta));\n      oldTimestamp = newTimestamp;\n      window.requestAnimationFrame(step);\n    };\n    \n    window.requestAnimationFrame(step);\n*/\n  }\n\n  \n}\n\nexport default Emulator;\n\n"],"sourceRoot":""}